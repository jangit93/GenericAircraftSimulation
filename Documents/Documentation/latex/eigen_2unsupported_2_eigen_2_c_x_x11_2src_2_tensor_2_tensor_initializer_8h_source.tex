\hypertarget{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_initializer_8h_source}{}\section{eigen/unsupported/\+Eigen/\+C\+X\+X11/src/\+Tensor/\+Tensor\+Initializer.h}
\label{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_initializer_8h_source}\index{Tensor\+Initializer.\+h@{Tensor\+Initializer.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_CXX11\_TENSOR\_TENSOR\_INITIALIZER\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_CXX11\_TENSOR\_TENSOR\_INITIALIZER\_H}
00012 
00013 \textcolor{preprocessor}{#if EIGEN\_HAS\_VARIADIC\_TEMPLATES}
00014 
00015 \textcolor{preprocessor}{#include <initializer\_list>}
00016 
00017 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00018 
00024 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00025 
00026 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Derived, \textcolor{keywordtype}{int} N>
00027 \textcolor{keyword}{struct }Initializer \{
00028   \textcolor{keyword}{typedef} std::initializer\_list<
00029     \textcolor{keyword}{typename} Initializer<Derived, N - 1>::InitList> InitList;
00030 
00031   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(TensorEvaluator<Derived, DefaultDevice>& tensor,
00032                   \hyperlink{class_eigen_1_1array}{Eigen::array}<\textcolor{keyword}{typename} traits<Derived>::Index, traits<Derived>::NumDimensions>
      * indices,
00033                   \textcolor{keyword}{const} InitList& vals) \{
00034     \textcolor{keywordtype}{int} i = 0;
00035     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} v : vals) \{
00036       (*indices)[traits<Derived>::NumDimensions - N] = i++;
00037       Initializer<Derived, N - 1>::run(tensor, indices, v);
00038     \}
00039   \}
00040 \};
00041 
00042 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Derived>
00043 \textcolor{keyword}{struct }Initializer<Derived, 1> \{
00044   \textcolor{keyword}{typedef} std::initializer\_list<typename traits<Derived>::Scalar> InitList;
00045 
00046   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(TensorEvaluator<Derived, DefaultDevice>& tensor,
00047                   \hyperlink{class_eigen_1_1array}{Eigen::array}<\textcolor{keyword}{typename} traits<Derived>::Index, traits<Derived>::NumDimensions>
      * indices,
00048                   \textcolor{keyword}{const} InitList& vals) \{
00049     \textcolor{keywordtype}{int} i = 0;
00050     \textcolor{comment}{// There is likely a faster way to do that than iterating.}
00051     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} v : vals) \{
00052       (*indices)[traits<Derived>::NumDimensions - 1] = i++;
00053       tensor.coeffRef(*indices) = v;
00054     \}
00055   \}
00056 \};
00057 
00058 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Derived>
00059 \textcolor{keyword}{struct }Initializer<Derived, 0> \{
00060   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} traits<Derived>::Scalar InitList;
00061 
00062   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(TensorEvaluator<Derived, DefaultDevice>& tensor,
00063                   \hyperlink{class_eigen_1_1array}{Eigen::array}<\textcolor{keyword}{typename} traits<Derived>::Index, traits<Derived>::NumDimensions>
      *,
00064                   \textcolor{keyword}{const} InitList& v) \{
00065     tensor.coeffRef(0) = v;
00066   \}
00067 \};
00068 
00069 
00070 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Derived, \textcolor{keywordtype}{int} N>
00071 \textcolor{keywordtype}{void} initialize\_tensor(TensorEvaluator<Derived, DefaultDevice>& tensor,
00072                        \textcolor{keyword}{const} \textcolor{keyword}{typename} Initializer<Derived, traits<Derived>::NumDimensions>::InitList& vals)
       \{
00073   \hyperlink{class_eigen_1_1array}{Eigen::array<typename traits<Derived>::Index}, 
      traits<Derived>::NumDimensions> indices;
00074   Initializer<Derived, traits<Derived>::NumDimensions>::run(tensor, &indices, vals);
00075 \}
00076 
00077 \}  \textcolor{comment}{// namespace internal}
00078 \}  \textcolor{comment}{// namespace Eigen}
00079 
00080 \textcolor{preprocessor}{#endif  // EIGEN\_HAS\_VARIADIC\_TEMPLATES}
00081 
00082 \textcolor{preprocessor}{#endif  // EIGEN\_CXX11\_TENSOR\_TENSOR\_INITIALIZER\_H}
\end{DoxyCode}
