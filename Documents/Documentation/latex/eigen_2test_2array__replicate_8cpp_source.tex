\hypertarget{eigen_2test_2array__replicate_8cpp_source}{}\section{eigen/test/array\+\_\+replicate.cpp}
\label{eigen_2test_2array__replicate_8cpp_source}\index{array\+\_\+replicate.\+cpp@{array\+\_\+replicate.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2009 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType> \textcolor{keywordtype}{void} replicate(\textcolor{keyword}{const} MatrixType& m)
00013 \{
00014   \textcolor{comment}{/* this test covers the following files:}
00015 \textcolor{comment}{     Replicate.cpp}
00016 \textcolor{comment}{  */}
00017   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Index \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
00018   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Scalar Scalar;
00019   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Scalar, MatrixType::RowsAtCompileTime, 1>} 
      \hyperlink{struct_vector_type}{VectorType};
00020   \textcolor{keyword}{typedef} \hyperlink{group___core___module}{Matrix<Scalar, Dynamic, Dynamic>} MatrixX;
00021   \textcolor{keyword}{typedef} \hyperlink{group___core___module}{Matrix<Scalar, Dynamic, 1>} \hyperlink{group___core___module}{VectorX};
00022 
00023   Index rows = m.rows();
00024   Index cols = m.cols();
00025 
00026   MatrixType m1 = MatrixType::Random(rows, cols),
00027              m2 = MatrixType::Random(rows, cols);
00028 
00029   VectorType v1 = VectorType::Random(rows);
00030 
00031   MatrixX x1, x2;
00032   VectorX vx1;
00033 
00034   \textcolor{keywordtype}{int}  f1 = internal::random<int>(1,10),
00035        f2 = internal::random<int>(1,10);
00036 
00037   x1.resize(rows*f1,cols*f2);
00038   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0; j<f2; j++)
00039   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<f1; i++)
00040     x1.block(i*rows,j*cols,rows,cols) = m1;
00041   VERIFY\_IS\_APPROX(x1, m1.replicate(f1,f2));
00042 
00043   x2.resize(2*rows,3*cols);
00044   x2 << m2, m2, m2,
00045         m2, m2, m2;
00046   VERIFY\_IS\_APPROX(x2, (m2.template replicate<2,3>()));
00047   
00048   x2.resize(rows,3*cols);
00049   x2 << m2, m2, m2;
00050   VERIFY\_IS\_APPROX(x2, (m2.template replicate<1,3>()));
00051   
00052   vx1.\hyperlink{class_eigen_1_1_plain_object_base_a99d9054ee2d5a40c6e00ded0265e9cea}{resize}(3*rows,cols);
00053   vx1 << m2, m2, m2;
00054   VERIFY\_IS\_APPROX(vx1+vx1, vx1+(m2.template replicate<3,1>()));
00055   
00056   vx1=m2+(m2.colwise().replicate(1));
00057   
00058   \textcolor{keywordflow}{if}(m2.cols()==1)
00059     VERIFY\_IS\_APPROX(m2.coeff(0), (m2.template replicate<3,1>().coeff(m2.rows())));
00060 
00061   x2.resize(rows,f1);
00062   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0; j<f1; ++j)
00063     x2.col(j) = v1;
00064   VERIFY\_IS\_APPROX(x2, v1.rowwise().replicate(f1));
00065 
00066   vx1.\hyperlink{class_eigen_1_1_plain_object_base_a99d9054ee2d5a40c6e00ded0265e9cea}{resize}(rows*f2);
00067   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0; j<f2; ++j)
00068     vx1.segment(j*rows,rows) = v1;
00069   VERIFY\_IS\_APPROX(vx1, v1.colwise().replicate(f2));
00070 \}
00071 
00072 \textcolor{keywordtype}{void} test\_array\_replicate()
00073 \{
00074   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++) \{
00075     CALL\_SUBTEST\_1( replicate(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 1, 1>}()) );
00076     CALL\_SUBTEST\_2( replicate(Vector2f()) );
00077     CALL\_SUBTEST\_3( replicate(Vector3d()) );
00078     CALL\_SUBTEST\_4( replicate(Vector4f()) );
00079     CALL\_SUBTEST\_5( replicate(VectorXf(16)) );
00080     CALL\_SUBTEST\_6( replicate(VectorXcd(10)) );
00081   \}
00082 \}
\end{DoxyCode}
