\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__random_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/cxx11\+\_\+tensor\+\_\+random.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__random_8cpp_source}\index{cxx11\+\_\+tensor\+\_\+random.\+cpp@{cxx11\+\_\+tensor\+\_\+random.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{preprocessor}{#include <Eigen/CXX11/Tensor>}
00013 
00014 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_default()
00015 \{
00016   Tensor<float, 1> vec(6);
00017   vec.setRandom();
00018 
00019   \textcolor{comment}{// Fixme: we should check that the generated numbers follow a uniform}
00020   \textcolor{comment}{// distribution instead.}
00021   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < 6; ++i) \{
00022     VERIFY\_IS\_NOT\_EQUAL(vec(i), vec(i-1));
00023   \}
00024 \}
00025 
00026 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_normal()
00027 \{
00028   Tensor<float, 1> vec(6);
00029   vec.setRandom<\hyperlink{class_eigen_1_1internal_1_1_normal_random_generator}{Eigen::internal::NormalRandomGenerator<float>}>
      ();
00030 
00031   \textcolor{comment}{// Fixme: we should check that the generated numbers follow a gaussian}
00032   \textcolor{comment}{// distribution instead.}
00033   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < 6; ++i) \{
00034     VERIFY\_IS\_NOT\_EQUAL(vec(i), vec(i-1));
00035   \}
00036 \}
00037 
00038 
00039 \textcolor{keyword}{struct }\hyperlink{struct_my_generator}{MyGenerator} \{
00040   \hyperlink{struct_my_generator}{MyGenerator}() \{ \}
00041   \hyperlink{struct_my_generator}{MyGenerator}(\textcolor{keyword}{const} \hyperlink{struct_my_generator}{MyGenerator}&) \{ \}
00042 
00043   \textcolor{comment}{// Return a random value to be used.  "element\_location" is the}
00044   \textcolor{comment}{// location of the entry to set in the tensor, it can typically}
00045   \textcolor{comment}{// be ignored.}
00046   \textcolor{keywordtype}{int} operator()(Eigen::DenseIndex element\_location, Eigen::DenseIndex \textcolor{comment}{/*unused*/} = 0)\textcolor{keyword}{ const }\{
00047     \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(3 * element\_location);
00048   \}
00049 
00050   \textcolor{comment}{// Same as above but generates several numbers at a time.}
00051   internal::packet\_traits<int>::type packetOp(
00052       Eigen::DenseIndex packet\_location, Eigen::DenseIndex \textcolor{comment}{/*unused*/} = 0)\textcolor{keyword}{ const }\{
00053     \textcolor{keyword}{const} \textcolor{keywordtype}{int} packetSize = internal::packet\_traits<int>::size;
00054     EIGEN\_ALIGN\_MAX \textcolor{keywordtype}{int} values[packetSize];
00055     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < packetSize; ++i) \{
00056       values[i] = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(3 * (packet\_location + i));
00057     \}
00058     \textcolor{keywordflow}{return} internal::pload<typename internal::packet\_traits<int>::type>(values);
00059   \}
00060 \};
00061 
00062 
00063 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_custom()
00064 \{
00065   Tensor<int, 1> vec(6);
00066   vec.setRandom<\hyperlink{struct_my_generator}{MyGenerator}>();
00067 
00068   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 6; ++i) \{
00069     VERIFY\_IS\_EQUAL(vec(i), 3*i);
00070   \}
00071 \}
00072 
00073 \textcolor{keywordtype}{void} test\_cxx11\_tensor\_random()
00074 \{
00075   CALL\_SUBTEST(test\_default());
00076   CALL\_SUBTEST(test\_normal());
00077   CALL\_SUBTEST(test\_custom());
00078 \}
\end{DoxyCode}
