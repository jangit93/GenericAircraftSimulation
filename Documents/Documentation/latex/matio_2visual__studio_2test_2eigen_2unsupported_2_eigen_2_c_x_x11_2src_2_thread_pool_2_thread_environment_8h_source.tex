\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_thread_pool_2_thread_environment_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/\+Eigen/\+C\+X\+X11/src/\+Thread\+Pool/\+Thread\+Environment.h}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_thread_pool_2_thread_environment_8h_source}\index{Thread\+Environment.\+h@{Thread\+Environment.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_CXX11\_THREADPOOL\_THREAD\_ENVIRONMENT\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_CXX11\_THREADPOOL\_THREAD\_ENVIRONMENT\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00014 
00015 \textcolor{keyword}{struct }StlThreadEnvironment \{
00016   \textcolor{keyword}{struct }Task \{
00017     std::function<void()> f;
00018   \};
00019 
00020   \textcolor{comment}{// EnvThread constructor must start the thread,}
00021   \textcolor{comment}{// destructor must join the thread.}
00022   \textcolor{keyword}{class }EnvThread \{
00023    \textcolor{keyword}{public}:
00024     EnvThread(std::function<\textcolor{keywordtype}{void}()> f) : thr\_(\hyperlink{namespacestd}{std}::move(f)) \{\}
00025     ~EnvThread() \{ thr\_.join(); \}
00026 
00027    \textcolor{keyword}{private}:
00028     std::thread thr\_;
00029   \};
00030 
00031   EnvThread* CreateThread(std::function<\textcolor{keywordtype}{void}()> f) \{ \textcolor{keywordflow}{return} \textcolor{keyword}{new} EnvThread(std::move(f)); \}
00032   Task CreateTask(std::function<\textcolor{keywordtype}{void}()> f) \{ \textcolor{keywordflow}{return} Task\{std::move(f)\}; \}
00033   \textcolor{keywordtype}{void} ExecuteTask(\textcolor{keyword}{const} Task& t) \{ t.f(); \}
00034 \};
00035 
00036 \}  \textcolor{comment}{// namespace Eigen}
00037 
00038 \textcolor{preprocessor}{#endif  // EIGEN\_CXX11\_THREADPOOL\_THREAD\_ENVIRONMENT\_H}
\end{DoxyCode}
