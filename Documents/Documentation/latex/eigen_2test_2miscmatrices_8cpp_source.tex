\hypertarget{eigen_2test_2miscmatrices_8cpp_source}{}\section{eigen/test/miscmatrices.cpp}
\label{eigen_2test_2miscmatrices_8cpp_source}\index{miscmatrices.\+cpp@{miscmatrices.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2006-2008 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType> \textcolor{keywordtype}{void} miscMatrices(\textcolor{keyword}{const} MatrixType& m)
00013 \{
00014   \textcolor{comment}{/* this test covers the following files:}
00015 \textcolor{comment}{     DiagonalMatrix.h Ones.h}
00016 \textcolor{comment}{  */}
00017   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Index \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
00018   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Scalar Scalar;
00019   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Scalar, MatrixType::RowsAtCompileTime, 1>} 
      \hyperlink{struct_vector_type}{VectorType};
00020   Index rows = m.rows();
00021   Index cols = m.cols();
00022 
00023   Index r = internal::random<Index>(0, rows-1), r2 = internal::random<Index>(0, rows-1), c = 
      internal::random<Index>(0, cols-1);
00024   VERIFY\_IS\_APPROX(MatrixType::Ones(rows,cols)(r,c), static\_cast<Scalar>(1));
00025   MatrixType m1 = MatrixType::Ones(rows,cols);
00026   VERIFY\_IS\_APPROX(m1(r,c), static\_cast<Scalar>(1));
00027   VectorType v1 = VectorType::Random(rows);
00028   v1[0];
00029   \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Scalar, MatrixType::RowsAtCompileTime, MatrixType::RowsAtCompileTime>}
00030   square(v1.asDiagonal());
00031   \textcolor{keywordflow}{if}(r==r2) VERIFY\_IS\_APPROX(square(r,r2), v1[r]);
00032   \textcolor{keywordflow}{else} VERIFY\_IS\_MUCH\_SMALLER\_THAN(square(r,r2), static\_cast<Scalar>(1));
00033   square = MatrixType::Zero(rows, rows);
00034   square.diagonal() = VectorType::Ones(rows);
00035   VERIFY\_IS\_APPROX(square, MatrixType::Identity(rows, rows));
00036 \}
00037 
00038 \textcolor{keywordtype}{void} test\_miscmatrices()
00039 \{
00040   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++) \{
00041     CALL\_SUBTEST\_1( miscMatrices(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 1, 1>}()) );
00042     CALL\_SUBTEST\_2( miscMatrices(Matrix4d()) );
00043     CALL\_SUBTEST\_3( miscMatrices(MatrixXcf(3, 3)) );
00044     CALL\_SUBTEST\_4( miscMatrices(MatrixXi(8, 12)) );
00045     CALL\_SUBTEST\_5( miscMatrices(MatrixXcd(20, 20)) );
00046   \}
00047 \}
\end{DoxyCode}
