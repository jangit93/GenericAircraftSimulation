\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/\+Eigen/src/\+Skyline/\+Skyline\+Matrix.h}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source}\index{Skyline\+Matrix.\+h@{Skyline\+Matrix.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2008-2009 Guillaume Saupin <guillaume.saupin@cea.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_SKYLINEMATRIX\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_SKYLINEMATRIX\_H}
00012 
00013 \textcolor{preprocessor}{#include "SkylineStorage.h"}
00014 \textcolor{preprocessor}{#include "SkylineMatrixBase.h"}
00015 
00016 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00017 
00033 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00034 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Options>
00035 \textcolor{keyword}{struct }traits<SkylineMatrix<\_Scalar, \_Options> > \{
00036     \textcolor{keyword}{typedef} \_Scalar Scalar;
00037     \textcolor{keyword}{typedef} Sparse StorageKind;
00038 
00039     \textcolor{keyword}{enum} \{
00040         RowsAtCompileTime = \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic},
00041         ColsAtCompileTime = \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic},
00042         MaxRowsAtCompileTime = \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic},
00043         MaxColsAtCompileTime = \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic},
00044         Flags = SkylineBit | \_Options,
00045         CoeffReadCost = NumTraits<Scalar>::ReadCost,
00046     \};
00047 \};
00048 \}
00049 
00050 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Options>
00051 \textcolor{keyword}{class }SkylineMatrix
00052 : \textcolor{keyword}{public} SkylineMatrixBase<SkylineMatrix<\_Scalar, \_Options> > \{
00053 \textcolor{keyword}{public}:
00054     EIGEN\_SKYLINE\_GENERIC\_PUBLIC\_INTERFACE(SkylineMatrix)
00055     EIGEN\_SKYLINE\_INHERIT\_ASSIGNMENT\_OPERATOR(SkylineMatrix, +=)
00056     EIGEN\_SKYLINE\_INHERIT\_ASSIGNMENT\_OPERATOR(SkylineMatrix, -=)
00057 
00058     using Base::IsRowMajor;
00059 
00060 protected:
00061 
00062     typedef SkylineMatrix<Scalar, (Flags&~\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit}) | (IsRowMajor ? 
      \hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit} : 0) > TransposedSkylineMatrix;
00063 
00064     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} m\_outerSize;
00065     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} m\_innerSize;
00066 
00067 public:
00068     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}* m\_colStartIndex;
00069     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}* m\_rowStartIndex;
00070     SkylineStorage<Scalar> m\_data;
00071 
00072 public:
00073 
00074     inline \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows()\textcolor{keyword}{ const }\{
00075         \textcolor{keywordflow}{return} IsRowMajor ? m\_outerSize : m\_innerSize;
00076     \}
00077 
00078     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols()\textcolor{keyword}{ const }\{
00079         \textcolor{keywordflow}{return} IsRowMajor ? m\_innerSize : m\_outerSize;
00080     \}
00081 
00082     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} innerSize()\textcolor{keyword}{ const }\{
00083         \textcolor{keywordflow}{return} m\_innerSize;
00084     \}
00085 
00086     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outerSize()\textcolor{keyword}{ const }\{
00087         \textcolor{keywordflow}{return} m\_outerSize;
00088     \}
00089 
00090     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} upperNonZeros()\textcolor{keyword}{ const }\{
00091         \textcolor{keywordflow}{return} m\_data.upperSize();
00092     \}
00093 
00094     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} lowerNonZeros()\textcolor{keyword}{ const }\{
00095         \textcolor{keywordflow}{return} m\_data.lowerSize();
00096     \}
00097 
00098     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} upperNonZeros(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} j)\textcolor{keyword}{ const }\{
00099         \textcolor{keywordflow}{return} m\_colStartIndex[j + 1] - m\_colStartIndex[j];
00100     \}
00101 
00102     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} lowerNonZeros(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} j)\textcolor{keyword}{ const }\{
00103         \textcolor{keywordflow}{return} m\_rowStartIndex[j + 1] - m\_rowStartIndex[j];
00104     \}
00105 
00106     \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar* \_diagPtr()\textcolor{keyword}{ const }\{
00107         \textcolor{keywordflow}{return} &m\_data.diag(0);
00108     \}
00109 
00110     \textcolor{keyword}{inline} Scalar* \_diagPtr() \{
00111         \textcolor{keywordflow}{return} &m\_data.diag(0);
00112     \}
00113 
00114     \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar* \_upperPtr()\textcolor{keyword}{ const }\{
00115         \textcolor{keywordflow}{return} &m\_data.upper(0);
00116     \}
00117 
00118     \textcolor{keyword}{inline} Scalar* \_upperPtr() \{
00119         \textcolor{keywordflow}{return} &m\_data.upper(0);
00120     \}
00121 
00122     \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar* \_lowerPtr()\textcolor{keyword}{ const }\{
00123         \textcolor{keywordflow}{return} &m\_data.lower(0);
00124     \}
00125 
00126     \textcolor{keyword}{inline} Scalar* \_lowerPtr() \{
00127         \textcolor{keywordflow}{return} &m\_data.lower(0);
00128     \}
00129 
00130     \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}* \_upperProfilePtr()\textcolor{keyword}{ const }\{
00131         \textcolor{keywordflow}{return} &m\_data.upperProfile(0);
00132     \}
00133 
00134     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}* \_upperProfilePtr() \{
00135         \textcolor{keywordflow}{return} &m\_data.upperProfile(0);
00136     \}
00137 
00138     \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}* \_lowerProfilePtr()\textcolor{keyword}{ const }\{
00139         \textcolor{keywordflow}{return} &m\_data.lowerProfile(0);
00140     \}
00141 
00142     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}* \_lowerProfilePtr() \{
00143         \textcolor{keywordflow}{return} &m\_data.lowerProfile(0);
00144     \}
00145 
00146     \textcolor{keyword}{inline} Scalar coeff(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col)\textcolor{keyword}{ const }\{
00147         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = IsRowMajor ? row : col;
00148         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = IsRowMajor ? col : row;
00149 
00150         eigen\_assert(outer < outerSize());
00151         eigen\_assert(inner < innerSize());
00152 
00153         \textcolor{keywordflow}{if} (outer == inner)
00154             \textcolor{keywordflow}{return} this->m\_data.diag(outer);
00155 
00156         \textcolor{keywordflow}{if} (IsRowMajor) \{
00157             \textcolor{keywordflow}{if} (inner > outer) \textcolor{comment}{//upper matrix}
00158             \{
00159                 \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minOuterIndex = inner - m\_data.upperProfile(inner);
00160                 \textcolor{keywordflow}{if} (outer >= minOuterIndex)
00161                     \textcolor{keywordflow}{return} this->m\_data.upper(m\_colStartIndex[inner] + outer - (inner - m\_data.upperProfile
      (inner)));
00162                 \textcolor{keywordflow}{else}
00163                     \textcolor{keywordflow}{return} Scalar(0);
00164             \}
00165             \textcolor{keywordflow}{if} (inner < outer) \textcolor{comment}{//lower matrix}
00166             \{
00167                 \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minInnerIndex = outer - m\_data.lowerProfile(outer);
00168                 \textcolor{keywordflow}{if} (inner >= minInnerIndex)
00169                     \textcolor{keywordflow}{return} this->m\_data.lower(m\_rowStartIndex[outer] + inner - (outer - m\_data.lowerProfile
      (outer)));
00170                 \textcolor{keywordflow}{else}
00171                     \textcolor{keywordflow}{return} Scalar(0);
00172             \}
00173             \textcolor{keywordflow}{return} m\_data.upper(m\_colStartIndex[inner] + outer - inner);
00174         \} \textcolor{keywordflow}{else} \{
00175             \textcolor{keywordflow}{if} (outer > inner) \textcolor{comment}{//upper matrix}
00176             \{
00177                 \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxOuterIndex = inner + m\_data.upperProfile(inner);
00178                 \textcolor{keywordflow}{if} (outer <= maxOuterIndex)
00179                     \textcolor{keywordflow}{return} this->m\_data.upper(m\_colStartIndex[inner] + (outer - inner));
00180                 \textcolor{keywordflow}{else}
00181                     \textcolor{keywordflow}{return} Scalar(0);
00182             \}
00183             \textcolor{keywordflow}{if} (outer < inner) \textcolor{comment}{//lower matrix}
00184             \{
00185                 \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxInnerIndex = outer + m\_data.lowerProfile(outer);
00186 
00187                 \textcolor{keywordflow}{if} (inner <= maxInnerIndex)
00188                     \textcolor{keywordflow}{return} this->m\_data.lower(m\_rowStartIndex[outer] + (inner - outer));
00189                 \textcolor{keywordflow}{else}
00190                     \textcolor{keywordflow}{return} Scalar(0);
00191             \}
00192         \}
00193     \}
00194 
00195     \textcolor{keyword}{inline} Scalar& coeffRef(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col) \{
00196         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = IsRowMajor ? row : col;
00197         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = IsRowMajor ? col : row;
00198 
00199         eigen\_assert(outer < outerSize());
00200         eigen\_assert(inner < innerSize());
00201 
00202         \textcolor{keywordflow}{if} (outer == inner)
00203             \textcolor{keywordflow}{return} this->m\_data.diag(outer);
00204 
00205         \textcolor{keywordflow}{if} (IsRowMajor) \{
00206             \textcolor{keywordflow}{if} (col > row) \textcolor{comment}{//upper matrix}
00207             \{
00208                 \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minOuterIndex = inner - m\_data.upperProfile(inner);
00209                 eigen\_assert(outer >= minOuterIndex && \textcolor{stringliteral}{"you try to acces a coeff that do not exist in the
       storage"});
00210                 \textcolor{keywordflow}{return} this->m\_data.upper(m\_colStartIndex[inner] + outer - (inner - m\_data.upperProfile(
      inner)));
00211             \}
00212             \textcolor{keywordflow}{if} (col < row) \textcolor{comment}{//lower matrix}
00213             \{
00214                 \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minInnerIndex = outer - m\_data.lowerProfile(outer);
00215                 eigen\_assert(inner >= minInnerIndex && \textcolor{stringliteral}{"you try to acces a coeff that do not exist in the
       storage"});
00216                 \textcolor{keywordflow}{return} this->m\_data.lower(m\_rowStartIndex[outer] + inner - (outer - m\_data.lowerProfile(
      outer)));
00217             \}
00218         \} \textcolor{keywordflow}{else} \{
00219             \textcolor{keywordflow}{if} (outer > inner) \textcolor{comment}{//upper matrix}
00220             \{
00221                 \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxOuterIndex = inner + m\_data.upperProfile(inner);
00222                 eigen\_assert(outer <= maxOuterIndex && \textcolor{stringliteral}{"you try to acces a coeff that do not exist in the
       storage"});
00223                 \textcolor{keywordflow}{return} this->m\_data.upper(m\_colStartIndex[inner] + (outer - inner));
00224             \}
00225             \textcolor{keywordflow}{if} (outer < inner) \textcolor{comment}{//lower matrix}
00226             \{
00227                 \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxInnerIndex = outer + m\_data.lowerProfile(outer);
00228                 eigen\_assert(inner <= maxInnerIndex && \textcolor{stringliteral}{"you try to acces a coeff that do not exist in the
       storage"});
00229                 \textcolor{keywordflow}{return} this->m\_data.lower(m\_rowStartIndex[outer] + (inner - outer));
00230             \}
00231         \}
00232     \}
00233 
00234     \textcolor{keyword}{inline} Scalar coeffDiag(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} idx)\textcolor{keyword}{ const }\{
00235         eigen\_assert(idx < outerSize());
00236         eigen\_assert(idx < innerSize());
00237         \textcolor{keywordflow}{return} this->m\_data.diag(idx);
00238     \}
00239 
00240     \textcolor{keyword}{inline} Scalar coeffLower(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col)\textcolor{keyword}{ const }\{
00241         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = IsRowMajor ? row : col;
00242         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = IsRowMajor ? col : row;
00243 
00244         eigen\_assert(outer < outerSize());
00245         eigen\_assert(inner < innerSize());
00246         eigen\_assert(inner != outer);
00247 
00248         \textcolor{keywordflow}{if} (IsRowMajor) \{
00249             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minInnerIndex = outer - m\_data.lowerProfile(outer);
00250             \textcolor{keywordflow}{if} (inner >= minInnerIndex)
00251                 \textcolor{keywordflow}{return} this->m\_data.lower(m\_rowStartIndex[outer] + inner - (outer - m\_data.lowerProfile(
      outer)));
00252             \textcolor{keywordflow}{else}
00253                 \textcolor{keywordflow}{return} Scalar(0);
00254 
00255         \} \textcolor{keywordflow}{else} \{
00256             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxInnerIndex = outer + m\_data.lowerProfile(outer);
00257             \textcolor{keywordflow}{if} (inner <= maxInnerIndex)
00258                 \textcolor{keywordflow}{return} this->m\_data.lower(m\_rowStartIndex[outer] + (inner - outer));
00259             \textcolor{keywordflow}{else}
00260                 \textcolor{keywordflow}{return} Scalar(0);
00261         \}
00262     \}
00263 
00264     \textcolor{keyword}{inline} Scalar coeffUpper(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col)\textcolor{keyword}{ const }\{
00265         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = IsRowMajor ? row : col;
00266         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = IsRowMajor ? col : row;
00267 
00268         eigen\_assert(outer < outerSize());
00269         eigen\_assert(inner < innerSize());
00270         eigen\_assert(inner != outer);
00271 
00272         \textcolor{keywordflow}{if} (IsRowMajor) \{
00273             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minOuterIndex = inner - m\_data.upperProfile(inner);
00274             \textcolor{keywordflow}{if} (outer >= minOuterIndex)
00275                 \textcolor{keywordflow}{return} this->m\_data.upper(m\_colStartIndex[inner] + outer - (inner - m\_data.upperProfile(
      inner)));
00276             \textcolor{keywordflow}{else}
00277                 \textcolor{keywordflow}{return} Scalar(0);
00278         \} \textcolor{keywordflow}{else} \{
00279             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxOuterIndex = inner + m\_data.upperProfile(inner);
00280             \textcolor{keywordflow}{if} (outer <= maxOuterIndex)
00281                 \textcolor{keywordflow}{return} this->m\_data.upper(m\_colStartIndex[inner] + (outer - inner));
00282             \textcolor{keywordflow}{else}
00283                 \textcolor{keywordflow}{return} Scalar(0);
00284         \}
00285     \}
00286 
00287     \textcolor{keyword}{inline} Scalar& coeffRefDiag(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} idx) \{
00288         eigen\_assert(idx < outerSize());
00289         eigen\_assert(idx < innerSize());
00290         \textcolor{keywordflow}{return} this->m\_data.diag(idx);
00291     \}
00292 
00293     \textcolor{keyword}{inline} Scalar& coeffRefLower(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col) \{
00294         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = IsRowMajor ? row : col;
00295         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = IsRowMajor ? col : row;
00296 
00297         eigen\_assert(outer < outerSize());
00298         eigen\_assert(inner < innerSize());
00299         eigen\_assert(inner != outer);
00300 
00301         \textcolor{keywordflow}{if} (IsRowMajor) \{
00302             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minInnerIndex = outer - m\_data.lowerProfile(outer);
00303             eigen\_assert(inner >= minInnerIndex && \textcolor{stringliteral}{"you try to acces a coeff that do not exist in the
       storage"});
00304             \textcolor{keywordflow}{return} this->m\_data.lower(m\_rowStartIndex[outer] + inner - (outer - m\_data.lowerProfile(outer))
      );
00305         \} \textcolor{keywordflow}{else} \{
00306             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxInnerIndex = outer + m\_data.lowerProfile(outer);
00307             eigen\_assert(inner <= maxInnerIndex && \textcolor{stringliteral}{"you try to acces a coeff that do not exist in the
       storage"});
00308             \textcolor{keywordflow}{return} this->m\_data.lower(m\_rowStartIndex[outer] + (inner - outer));
00309         \}
00310     \}
00311 
00312     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} coeffExistLower(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col) \{
00313         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = IsRowMajor ? row : col;
00314         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = IsRowMajor ? col : row;
00315 
00316         eigen\_assert(outer < outerSize());
00317         eigen\_assert(inner < innerSize());
00318         eigen\_assert(inner != outer);
00319 
00320         \textcolor{keywordflow}{if} (IsRowMajor) \{
00321             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minInnerIndex = outer - m\_data.lowerProfile(outer);
00322             \textcolor{keywordflow}{return} inner >= minInnerIndex;
00323         \} \textcolor{keywordflow}{else} \{
00324             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxInnerIndex = outer + m\_data.lowerProfile(outer);
00325             \textcolor{keywordflow}{return} inner <= maxInnerIndex;
00326         \}
00327     \}
00328 
00329     \textcolor{keyword}{inline} Scalar& coeffRefUpper(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col) \{
00330         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = IsRowMajor ? row : col;
00331         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = IsRowMajor ? col : row;
00332 
00333         eigen\_assert(outer < outerSize());
00334         eigen\_assert(inner < innerSize());
00335         eigen\_assert(inner != outer);
00336 
00337         \textcolor{keywordflow}{if} (IsRowMajor) \{
00338             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minOuterIndex = inner - m\_data.upperProfile(inner);
00339             eigen\_assert(outer >= minOuterIndex && \textcolor{stringliteral}{"you try to acces a coeff that do not exist in the
       storage"});
00340             \textcolor{keywordflow}{return} this->m\_data.upper(m\_colStartIndex[inner] + outer - (inner - m\_data.upperProfile(inner))
      );
00341         \} \textcolor{keywordflow}{else} \{
00342             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxOuterIndex = inner + m\_data.upperProfile(inner);
00343             eigen\_assert(outer <= maxOuterIndex && \textcolor{stringliteral}{"you try to acces a coeff that do not exist in the
       storage"});
00344             \textcolor{keywordflow}{return} this->m\_data.upper(m\_colStartIndex[inner] + (outer - inner));
00345         \}
00346     \}
00347 
00348     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} coeffExistUpper(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col) \{
00349         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = IsRowMajor ? row : col;
00350         \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = IsRowMajor ? col : row;
00351 
00352         eigen\_assert(outer < outerSize());
00353         eigen\_assert(inner < innerSize());
00354         eigen\_assert(inner != outer);
00355 
00356         \textcolor{keywordflow}{if} (IsRowMajor) \{
00357             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} minOuterIndex = inner - m\_data.upperProfile(inner);
00358             \textcolor{keywordflow}{return} outer >= minOuterIndex;
00359         \} \textcolor{keywordflow}{else} \{
00360             \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} maxOuterIndex = inner + m\_data.upperProfile(inner);
00361             \textcolor{keywordflow}{return} outer <= maxOuterIndex;
00362         \}
00363     \}
00364 
00365 
00366 \textcolor{keyword}{protected}:
00367 
00368 \textcolor{keyword}{public}:
00369     \textcolor{keyword}{class }InnerUpperIterator;
00370     \textcolor{keyword}{class }InnerLowerIterator;
00371 
00372     \textcolor{keyword}{class }OuterUpperIterator;
00373     \textcolor{keyword}{class }OuterLowerIterator;
00374 
\Hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source_l00376}\hyperlink{class_eigen_1_1_skyline_matrix_afeb349e5dc4b5d8c107ff067b44438f5}{00376}     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{class_eigen_1_1_skyline_matrix_afeb349e5dc4b5d8c107ff067b44438f5}{setZero}() \{
00377         m\_data.clear();
00378         memset(m\_colStartIndex, 0, (m\_outerSize + 1) * \textcolor{keyword}{sizeof} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index}));
00379         memset(m\_rowStartIndex, 0, (m\_outerSize + 1) * \textcolor{keyword}{sizeof} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index}));
00380     \}
00381 
\Hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source_l00383}\hyperlink{class_eigen_1_1_skyline_matrix_aea6d3b694cef560f15a7d18c1f010604}{00383}     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} \hyperlink{class_eigen_1_1_skyline_matrix_aea6d3b694cef560f15a7d18c1f010604}{nonZeros}()\textcolor{keyword}{ const }\{
00384         \textcolor{keywordflow}{return} m\_data.diagSize() + m\_data.upperSize() + m\_data.lowerSize();
00385     \}
00386 
\Hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source_l00388}\hyperlink{class_eigen_1_1_skyline_matrix_aac6da20a87fca9d4cb6b871504497577}{00388}     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{class_eigen_1_1_skyline_matrix_aac6da20a87fca9d4cb6b871504497577}{reserve}(\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} reserveSize, \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} reserveUpperSize, 
      \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} reserveLowerSize) \{
00389         m\_data.reserve(reserveSize, reserveUpperSize, reserveLowerSize);
00390     \}
00391 
\Hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source_l00400}\hyperlink{class_eigen_1_1_skyline_matrix_a6e2d550f29d0dd59f83aa9d568d92c23}{00400}     EIGEN\_DONT\_INLINE Scalar & \hyperlink{class_eigen_1_1_skyline_matrix_a6e2d550f29d0dd59f83aa9d568d92c23}{insert}(\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} row, \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} col) \{
00401         \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} outer = IsRowMajor ? row : col;
00402         \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} inner = IsRowMajor ? col : row;
00403 
00404         eigen\_assert(outer < outerSize());
00405         eigen\_assert(inner < innerSize());
00406 
00407         \textcolor{keywordflow}{if} (outer == inner)
00408             \textcolor{keywordflow}{return} m\_data.diag(col);
00409 
00410         \textcolor{keywordflow}{if} (IsRowMajor) \{
00411             \textcolor{keywordflow}{if} (outer < inner) \textcolor{comment}{//upper matrix}
00412             \{
00413                 \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} minOuterIndex = 0;
00414                 minOuterIndex = inner - m\_data.upperProfile(inner);
00415 
00416                 \textcolor{keywordflow}{if} (outer < minOuterIndex) \textcolor{comment}{//The value does not yet exist}
00417                 \{
00418                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} previousProfile = m\_data.upperProfile(inner);
00419 
00420                     m\_data.upperProfile(inner) = inner - outer;
00421 
00422 
00423                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} bandIncrement = m\_data.upperProfile(inner) - previousProfile;
00424                     \textcolor{comment}{//shift data stored after this new one}
00425                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} stop = m\_colStartIndex[cols()];
00426                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} start = m\_colStartIndex[inner];
00427 
00428 
00429                     \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} innerIdx = stop; innerIdx >= start; innerIdx--) \{
00430                         m\_data.upper(innerIdx + bandIncrement) = m\_data.upper(innerIdx);
00431                     \}
00432 
00433                     \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} innerIdx = cols(); innerIdx > inner; innerIdx--) \{
00434                         m\_colStartIndex[innerIdx] += bandIncrement;
00435                     \}
00436 
00437                     \textcolor{comment}{//zeros new data}
00438                     memset(this->\_upperPtr() + start, 0, (bandIncrement - 1) * \textcolor{keyword}{sizeof} (Scalar));
00439 
00440                     \textcolor{keywordflow}{return} m\_data.upper(m\_colStartIndex[inner]);
00441                 \} \textcolor{keywordflow}{else} \{
00442                     \textcolor{keywordflow}{return} m\_data.upper(m\_colStartIndex[inner] + outer - (inner - m\_data.upperProfile(inner
      )));
00443                 \}
00444             \}
00445 
00446             \textcolor{keywordflow}{if} (outer > inner) \textcolor{comment}{//lower matrix}
00447             \{
00448                 \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} minInnerIndex = outer - m\_data.lowerProfile(outer);
00449                 \textcolor{keywordflow}{if} (inner < minInnerIndex) \textcolor{comment}{//The value does not yet exist}
00450                 \{
00451                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} previousProfile = m\_data.lowerProfile(outer);
00452                     m\_data.lowerProfile(outer) = outer - inner;
00453 
00454                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} bandIncrement = m\_data.lowerProfile(outer) - previousProfile;
00455                     \textcolor{comment}{//shift data stored after this new one}
00456                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} stop = m\_rowStartIndex[rows()];
00457                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} start = m\_rowStartIndex[outer];
00458 
00459 
00460                     \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} innerIdx = stop; innerIdx >= start; innerIdx--) \{
00461                         m\_data.lower(innerIdx + bandIncrement) = m\_data.lower(innerIdx);
00462                     \}
00463 
00464                     \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} innerIdx = rows(); innerIdx > outer; innerIdx--) \{
00465                         m\_rowStartIndex[innerIdx] += bandIncrement;
00466                     \}
00467 
00468                     \textcolor{comment}{//zeros new data}
00469                     memset(this->\_lowerPtr() + start, 0, (bandIncrement - 1) * \textcolor{keyword}{sizeof} (Scalar));
00470                     \textcolor{keywordflow}{return} m\_data.lower(m\_rowStartIndex[outer]);
00471                 \} \textcolor{keywordflow}{else} \{
00472                     \textcolor{keywordflow}{return} m\_data.lower(m\_rowStartIndex[outer] + inner - (outer - m\_data.lowerProfile(outer
      )));
00473                 \}
00474             \}
00475         \} \textcolor{keywordflow}{else} \{
00476             \textcolor{keywordflow}{if} (outer > inner) \textcolor{comment}{//upper matrix}
00477             \{
00478                 \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} maxOuterIndex = inner + m\_data.upperProfile(inner);
00479                 \textcolor{keywordflow}{if} (outer > maxOuterIndex) \textcolor{comment}{//The value does not yet exist}
00480                 \{
00481                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} previousProfile = m\_data.upperProfile(inner);
00482                     m\_data.upperProfile(inner) = outer - inner;
00483 
00484                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} bandIncrement = m\_data.upperProfile(inner) - previousProfile;
00485                     \textcolor{comment}{//shift data stored after this new one}
00486                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} stop = m\_rowStartIndex[rows()];
00487                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} start = m\_rowStartIndex[inner + 1];
00488 
00489                     \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} innerIdx = stop; innerIdx >= start; innerIdx--) \{
00490                         m\_data.upper(innerIdx + bandIncrement) = m\_data.upper(innerIdx);
00491                     \}
00492 
00493                     \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} innerIdx = inner + 1; innerIdx < outerSize() + 1; innerIdx++) \{
00494                         m\_rowStartIndex[innerIdx] += bandIncrement;
00495                     \}
00496                     memset(this->\_upperPtr() + m\_rowStartIndex[inner] + previousProfile + 1, 0, (
      bandIncrement - 1) * \textcolor{keyword}{sizeof} (Scalar));
00497                     \textcolor{keywordflow}{return} m\_data.upper(m\_rowStartIndex[inner] + m\_data.upperProfile(inner));
00498                 \} \textcolor{keywordflow}{else} \{
00499                     \textcolor{keywordflow}{return} m\_data.upper(m\_rowStartIndex[inner] + (outer - inner));
00500                 \}
00501             \}
00502 
00503             \textcolor{keywordflow}{if} (outer < inner) \textcolor{comment}{//lower matrix}
00504             \{
00505                 \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} maxInnerIndex = outer + m\_data.lowerProfile(outer);
00506                 \textcolor{keywordflow}{if} (inner > maxInnerIndex) \textcolor{comment}{//The value does not yet exist}
00507                 \{
00508                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} previousProfile = m\_data.lowerProfile(outer);
00509                     m\_data.lowerProfile(outer) = inner - outer;
00510 
00511                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} bandIncrement = m\_data.lowerProfile(outer) - previousProfile;
00512                     \textcolor{comment}{//shift data stored after this new one}
00513                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} stop = m\_colStartIndex[cols()];
00514                     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} start = m\_colStartIndex[outer + 1];
00515 
00516                     \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} innerIdx = stop; innerIdx >= start; innerIdx--) \{
00517                         m\_data.lower(innerIdx + bandIncrement) = m\_data.lower(innerIdx);
00518                     \}
00519 
00520                     \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} innerIdx = outer + 1; innerIdx < outerSize() + 1; innerIdx++) \{
00521                         m\_colStartIndex[innerIdx] += bandIncrement;
00522                     \}
00523                     memset(this->\_lowerPtr() + m\_colStartIndex[outer] + previousProfile + 1, 0, (
      bandIncrement - 1) * \textcolor{keyword}{sizeof} (Scalar));
00524                     \textcolor{keywordflow}{return} m\_data.lower(m\_colStartIndex[outer] + m\_data.lowerProfile(outer));
00525                 \} \textcolor{keywordflow}{else} \{
00526                     \textcolor{keywordflow}{return} m\_data.lower(m\_colStartIndex[outer] + (inner - outer));
00527                 \}
00528             \}
00529         \}
00530     \}
00531 
\Hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source_l00534}\hyperlink{class_eigen_1_1_skyline_matrix_a1269310d041fb3ca2a980644f3cfe5a2}{00534}     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{class_eigen_1_1_skyline_matrix_a1269310d041fb3ca2a980644f3cfe5a2}{finalize}() \{
00535         \textcolor{keywordflow}{if} (IsRowMajor) \{
00536             \textcolor{keywordflow}{if} (rows() > cols())
00537                 m\_data.resize(cols(), cols(), rows(), m\_colStartIndex[cols()] + 1, m\_rowStartIndex[rows()] 
      + 1);
00538             \textcolor{keywordflow}{else}
00539                 m\_data.resize(rows(), cols(), rows(), m\_colStartIndex[cols()] + 1, m\_rowStartIndex[rows()] 
      + 1);
00540 
00541             \textcolor{comment}{//            eigen\_assert(rows() == cols() && "memory reorganisatrion only works with suare
       matrix");}
00542             \textcolor{comment}{//}
00543             \textcolor{comment}{//            Scalar* newArray = new Scalar[m\_colStartIndex[cols()] + 1 +
       m\_rowStartIndex[rows()] + 1];}
00544             \textcolor{comment}{//            Index dataIdx = 0;}
00545             \textcolor{comment}{//            for (Index row = 0; row < rows(); row++) \{}
00546             \textcolor{comment}{//}
00547             \textcolor{comment}{//                const Index nbLowerElts = m\_rowStartIndex[row + 1] - m\_rowStartIndex[row];}
00548             \textcolor{comment}{//                //                std::cout << "nbLowerElts" << nbLowerElts << std::endl;}
00549             \textcolor{comment}{//                memcpy(newArray + dataIdx, m\_data.m\_lower + m\_rowStartIndex[row], nbLowerElts
       * sizeof (Scalar));}
00550             \textcolor{comment}{//                m\_rowStartIndex[row] = dataIdx;}
00551             \textcolor{comment}{//                dataIdx += nbLowerElts;}
00552             \textcolor{comment}{//}
00553             \textcolor{comment}{//                const Index nbUpperElts = m\_colStartIndex[row + 1] - m\_colStartIndex[row];}
00554             \textcolor{comment}{//                memcpy(newArray + dataIdx, m\_data.m\_upper + m\_colStartIndex[row], nbUpperElts
       * sizeof (Scalar));}
00555             \textcolor{comment}{//                m\_colStartIndex[row] = dataIdx;}
00556             \textcolor{comment}{//                dataIdx += nbUpperElts;}
00557             \textcolor{comment}{//}
00558             \textcolor{comment}{//}
00559             \textcolor{comment}{//            \}}
00560             \textcolor{comment}{//            //todo : don't access m\_data profile directly : add an accessor from
       SkylineMatrix}
00561             \textcolor{comment}{//            m\_rowStartIndex[rows()] = m\_rowStartIndex[rows()-1] +
       m\_data.lowerProfile(rows()-1);}
00562             \textcolor{comment}{//            m\_colStartIndex[cols()] = m\_colStartIndex[cols()-1] +
       m\_data.upperProfile(cols()-1);}
00563             \textcolor{comment}{//}
00564             \textcolor{comment}{//            delete[] m\_data.m\_lower;}
00565             \textcolor{comment}{//            delete[] m\_data.m\_upper;}
00566             \textcolor{comment}{//}
00567             \textcolor{comment}{//            m\_data.m\_lower = newArray;}
00568             \textcolor{comment}{//            m\_data.m\_upper = newArray;}
00569         \} \textcolor{keywordflow}{else} \{
00570             \textcolor{keywordflow}{if} (rows() > cols())
00571                 m\_data.resize(cols(), rows(), cols(), m\_rowStartIndex[cols()] + 1, m\_colStartIndex[cols()] 
      + 1);
00572             \textcolor{keywordflow}{else}
00573                 m\_data.resize(rows(), rows(), cols(), m\_rowStartIndex[rows()] + 1, m\_colStartIndex[rows()] 
      + 1);
00574         \}
00575     \}
00576 
00577     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} squeeze() \{
00578         finalize();
00579         m\_data.squeeze();
00580     \}
00581 
00582     \textcolor{keywordtype}{void} prune(Scalar reference, \hyperlink{class_eigen_1_1_skyline_matrix_base_a24c532ab7e339b956a637a4a968e1565}{RealScalar} epsilon = dummy\_precision<RealScalar > ()) \{
00583         \textcolor{comment}{//TODO}
00584     \}
00585 
\Hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source_l00589}\hyperlink{class_eigen_1_1_skyline_matrix_a918eed5cc583f6d402f0db60c5c5ad52}{00589}     \textcolor{keywordtype}{void} \hyperlink{class_eigen_1_1_skyline_matrix_a918eed5cc583f6d402f0db60c5c5ad52}{resize}(\textcolor{keywordtype}{size\_t} rows, \textcolor{keywordtype}{size\_t} cols) \{
00590         \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} diagSize = rows > cols ? cols : rows;
00591         m\_innerSize = IsRowMajor ? cols : rows;
00592 
00593         eigen\_assert(rows == cols && \textcolor{stringliteral}{"Skyline matrix must be square matrix"});
00594 
00595         \textcolor{keywordflow}{if} (diagSize % 2) \{ \textcolor{comment}{// diagSize is odd}
00596             \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} k = (diagSize - 1) / 2;
00597 
00598             m\_data.resize(diagSize, IsRowMajor ? cols : rows, IsRowMajor ? rows : cols,
00599                     2 * k * k + k + 1,
00600                     2 * k * k + k + 1);
00601 
00602         \} \textcolor{keywordflow}{else} \textcolor{comment}{// diagSize is even}
00603         \{
00604             \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} k = diagSize / 2;
00605             m\_data.resize(diagSize, IsRowMajor ? cols : rows, IsRowMajor ? rows : cols,
00606                     2 * k * k - k + 1,
00607                     2 * k * k - k + 1);
00608         \}
00609 
00610         \textcolor{keywordflow}{if} (m\_colStartIndex && m\_rowStartIndex) \{
00611             \textcolor{keyword}{delete}[] m\_colStartIndex;
00612             \textcolor{keyword}{delete}[] m\_rowStartIndex;
00613         \}
00614         m\_colStartIndex = \textcolor{keyword}{new} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} [cols + 1];
00615         m\_rowStartIndex = \textcolor{keyword}{new} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} [rows + 1];
00616         m\_outerSize = diagSize;
00617 
00618         m\_data.reset();
00619         m\_data.clear();
00620 
00621         m\_outerSize = diagSize;
00622         memset(m\_colStartIndex, 0, (cols + 1) * \textcolor{keyword}{sizeof} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index}));
00623         memset(m\_rowStartIndex, 0, (rows + 1) * \textcolor{keyword}{sizeof} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index}));
00624     \}
00625 
00626     \textcolor{keywordtype}{void} resizeNonZeros(\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} size) \{
00627         m\_data.resize(size);
00628     \}
00629 
00630     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}()
00631     : m\_outerSize(-1), m\_innerSize(0), m\_colStartIndex(0), m\_rowStartIndex(0) \{
00632         resize(0, 0);
00633     \}
00634 
00635     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}(\textcolor{keywordtype}{size\_t} rows, \textcolor{keywordtype}{size\_t} cols)
00636     : m\_outerSize(0), m\_innerSize(0), m\_colStartIndex(0), m\_rowStartIndex(0) \{
00637         resize(rows, cols);
00638     \}
00639 
00640     \textcolor{keyword}{template}<\textcolor{keyword}{typename} OtherDerived>
00641     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_skyline_matrix_base}{SkylineMatrixBase<OtherDerived>}&
       other)
00642     : m\_outerSize(0), m\_innerSize(0), m\_colStartIndex(0), m\_rowStartIndex(0) \{
00643         *\textcolor{keyword}{this} = other.derived();
00644     \}
00645 
00646     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix} & other)
00647     : Base(), m\_outerSize(0), m\_innerSize(0), m\_colStartIndex(0), m\_rowStartIndex(0) \{
00648         *\textcolor{keyword}{this} = other.derived();
00649     \}
00650 
00651     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}(\hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix} & other) \{
00652         \textcolor{comment}{//EIGEN\_DBG\_SKYLINE(std::cout << "SkylineMatrix:: swap\(\backslash\)n");}
00653         \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{std::swap}(m\_colStartIndex, other.m\_colStartIndex);
00654         \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{std::swap}(m\_rowStartIndex, other.m\_rowStartIndex);
00655         \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{std::swap}(m\_innerSize, other.m\_innerSize);
00656         \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{std::swap}(m\_outerSize, other.m\_outerSize);
00657         m\_data.swap(other.m\_data);
00658     \}
00659 
00660     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix} & operator=(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix} & other) \{
00661         std::cout << \textcolor{stringliteral}{"SkylineMatrix& operator=(const SkylineMatrix& other)\(\backslash\)n"};
00662         \textcolor{keywordflow}{if} (other.isRValue()) \{
00663             \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}(other.const\_cast\_derived());
00664         \} \textcolor{keywordflow}{else} \{
00665             resize(other.rows(), other.cols());
00666             memcpy(m\_colStartIndex, other.m\_colStartIndex, (m\_outerSize + 1) * sizeof (
      \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index}));
00667             memcpy(m\_rowStartIndex, other.m\_rowStartIndex, (m\_outerSize + 1) * sizeof (
      \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index}));
00668             m\_data = other.m\_data;
00669         \}
00670         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00671     \}
00672 
00673     \textcolor{keyword}{template}<\textcolor{keyword}{typename} OtherDerived>
00674             \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix} & operator=(\textcolor{keyword}{const} 
      \hyperlink{class_eigen_1_1_skyline_matrix_base}{SkylineMatrixBase<OtherDerived>}& other) \{
00675         \textcolor{keyword}{const} \textcolor{keywordtype}{bool} needToTranspose = (Flags & \hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit}) != (OtherDerived::Flags & 
      \hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit});
00676         \textcolor{keywordflow}{if} (needToTranspose) \{
00677             \textcolor{comment}{//         TODO}
00678             \textcolor{comment}{//            return *this;}
00679         \} \textcolor{keywordflow}{else} \{
00680             \textcolor{comment}{// there is no special optimization}
00681             \textcolor{keywordflow}{return} \hyperlink{class_eigen_1_1_skyline_matrix_base}{SkylineMatrixBase<SkylineMatrix>::operator=}(
      other.derived());
00682         \}
00683     \}
00684 
00685     \textcolor{keyword}{friend} std::ostream & operator <<(std::ostream & s, \textcolor{keyword}{const} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix} & m) \{
00686 
00687         EIGEN\_DBG\_SKYLINE(
00688         std::cout << \textcolor{stringliteral}{"upper elements : "} << std::endl;
00689         \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} i = 0; i < m.m\_data.upperSize(); i++)
00690             std::cout << m.m\_data.upper(i) << \textcolor{stringliteral}{"\(\backslash\)t"};
00691         std::cout << std::endl;
00692         std::cout << \textcolor{stringliteral}{"upper profile : "} << std::endl;
00693         \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} i = 0; i < m.m\_data.upperProfileSize(); i++)
00694             std::cout << m.m\_data.upperProfile(i) << \textcolor{stringliteral}{"\(\backslash\)t"};
00695         std::cout << std::endl;
00696         std::cout << \textcolor{stringliteral}{"lower startIdx : "} << std::endl;
00697         \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} i = 0; i < m.m\_data.upperProfileSize(); i++)
00698             std::cout << (IsRowMajor ? m.m\_colStartIndex[i] : m.m\_rowStartIndex[i]) << \textcolor{stringliteral}{"\(\backslash\)t"};
00699         std::cout << std::endl;
00700 
00701 
00702         std::cout << \textcolor{stringliteral}{"lower elements : "} << std::endl;
00703         \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} i = 0; i < m.m\_data.lowerSize(); i++)
00704             std::cout << m.m\_data.lower(i) << \textcolor{stringliteral}{"\(\backslash\)t"};
00705         std::cout << std::endl;
00706         std::cout << \textcolor{stringliteral}{"lower profile : "} << std::endl;
00707         \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} i = 0; i < m.m\_data.lowerProfileSize(); i++)
00708             std::cout << m.m\_data.lowerProfile(i) << \textcolor{stringliteral}{"\(\backslash\)t"};
00709         std::cout << std::endl;
00710         std::cout << \textcolor{stringliteral}{"lower startIdx : "} << std::endl;
00711         \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} i = 0; i < m.m\_data.lowerProfileSize(); i++)
00712             std::cout << (IsRowMajor ? m.m\_rowStartIndex[i] : m.m\_colStartIndex[i]) << \textcolor{stringliteral}{"\(\backslash\)t"};
00713         std::cout << std::endl;
00714         );
00715         \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} rowIdx = 0; rowIdx < m.rows(); rowIdx++) \{
00716             \textcolor{keywordflow}{for} (\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} colIdx = 0; colIdx < m.cols(); colIdx++) \{
00717                 s << m.coeff(rowIdx, colIdx) << \textcolor{stringliteral}{"\(\backslash\)t"};
00718             \}
00719             s << std::endl;
00720         \}
00721         \textcolor{keywordflow}{return} s;
00722     \}
00723 
\Hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2src_2_skyline_2_skyline_matrix_8h_source_l00725}\hyperlink{class_eigen_1_1_skyline_matrix_a456b254a757d26580b2c05fe270eaae7}{00725}     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix_a456b254a757d26580b2c05fe270eaae7}{~SkylineMatrix}() \{
00726         \textcolor{keyword}{delete}[] m\_colStartIndex;
00727         \textcolor{keyword}{delete}[] m\_rowStartIndex;
00728     \}
00729 
00731     Scalar sum() \textcolor{keyword}{const};
00732 \};
00733 
00734 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar, \textcolor{keywordtype}{int} \_Options>
00735 \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}<Scalar, \_Options>::\hyperlink{class_eigen_1_1_skyline_matrix_1_1_inner_upper_iterator}{InnerUpperIterator} \{
00736 \textcolor{keyword}{public}:
00737 
00738     \hyperlink{class_eigen_1_1_skyline_matrix_1_1_inner_upper_iterator}{InnerUpperIterator}(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}& mat, 
      \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} outer)
00739     : m\_matrix(mat), m\_outer(outer),
00740     m\_id(\_Options == \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor} ? mat.m\_colStartIndex[outer] : mat.m\_rowStartIndex[outer] + 1),
00741     m\_start(m\_id),
00742     m\_end(\_Options == \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor} ? mat.m\_colStartIndex[outer + 1] : mat.m\_rowStartIndex[outer + 1] + 
      1) \{
00743     \}
00744 
00745     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix_1_1_inner_upper_iterator}{InnerUpperIterator} & operator++() \{
00746         m\_id++;
00747         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00748     \}
00749 
00750     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix_1_1_inner_upper_iterator}{InnerUpperIterator} & operator+=(\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} shift) \{
00751         m\_id += shift;
00752         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00753     \}
00754 
00755     \textcolor{keyword}{inline} Scalar value()\textcolor{keyword}{ const }\{
00756         \textcolor{keywordflow}{return} m\_matrix.m\_data.upper(m\_id);
00757     \}
00758 
00759     \textcolor{keyword}{inline} Scalar* valuePtr() \{
00760         \textcolor{keywordflow}{return} \textcolor{keyword}{const\_cast<}Scalar*\textcolor{keyword}{>} (&(m\_matrix.m\_data.upper(m\_id)));
00761     \}
00762 
00763     \textcolor{keyword}{inline} Scalar& valueRef() \{
00764         \textcolor{keywordflow}{return} \textcolor{keyword}{const\_cast<}Scalar&\textcolor{keyword}{>} (m\_matrix.m\_data.upper(m\_id));
00765     \}
00766 
00767     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} index()\textcolor{keyword}{ const }\{
00768         \textcolor{keywordflow}{return} IsRowMajor ? m\_outer - m\_matrix.m\_data.upperProfile(m\_outer) + (m\_id - m\_start) :
00769                 m\_outer + (m\_id - m\_start) + 1;
00770     \}
00771 
00772     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} row()\textcolor{keyword}{ const }\{
00773         \textcolor{keywordflow}{return} IsRowMajor ? index() : m\_outer;
00774     \}
00775 
00776     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} col()\textcolor{keyword}{ const }\{
00777         \textcolor{keywordflow}{return} IsRowMajor ? m\_outer : index();
00778     \}
00779 
00780     \textcolor{keyword}{inline} \textcolor{keywordtype}{size\_t} size()\textcolor{keyword}{ const }\{
00781         \textcolor{keywordflow}{return} m\_matrix.m\_data.upperProfile(m\_outer);
00782     \}
00783 
00784     \textcolor{keyword}{inline} \textcolor{keyword}{operator} bool()\textcolor{keyword}{ const }\{
00785         \textcolor{keywordflow}{return} (m\_id < m\_end) && (m\_id >= m\_start);
00786     \}
00787 
00788 \textcolor{keyword}{protected}:
00789     \textcolor{keyword}{const} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}& m\_matrix;
00790     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_outer;
00791     \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_id;
00792     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_start;
00793     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_end;
00794 \};
00795 
00796 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar, \textcolor{keywordtype}{int} \_Options>
00797 \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}<Scalar, \_Options>::\hyperlink{class_eigen_1_1_skyline_matrix_1_1_inner_lower_iterator}{InnerLowerIterator} \{
00798 \textcolor{keyword}{public}:
00799 
00800     \hyperlink{class_eigen_1_1_skyline_matrix_1_1_inner_lower_iterator}{InnerLowerIterator}(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}& mat, 
      \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} outer)
00801     : m\_matrix(mat),
00802     m\_outer(outer),
00803     m\_id(\_Options == \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor} ? mat.m\_rowStartIndex[outer] : mat.m\_colStartIndex[outer] + 1),
00804     m\_start(m\_id),
00805     m\_end(\_Options == \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor} ? mat.m\_rowStartIndex[outer + 1] : mat.m\_colStartIndex[outer + 1] + 
      1) \{
00806     \}
00807 
00808     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix_1_1_inner_lower_iterator}{InnerLowerIterator} & operator++() \{
00809         m\_id++;
00810         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00811     \}
00812 
00813     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_skyline_matrix_1_1_inner_lower_iterator}{InnerLowerIterator} & operator+=(\hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} shift) \{
00814         m\_id += shift;
00815         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00816     \}
00817 
00818     \textcolor{keyword}{inline} Scalar value()\textcolor{keyword}{ const }\{
00819         \textcolor{keywordflow}{return} m\_matrix.m\_data.lower(m\_id);
00820     \}
00821 
00822     \textcolor{keyword}{inline} Scalar* valuePtr() \{
00823         \textcolor{keywordflow}{return} \textcolor{keyword}{const\_cast<}Scalar*\textcolor{keyword}{>} (&(m\_matrix.m\_data.lower(m\_id)));
00824     \}
00825 
00826     \textcolor{keyword}{inline} Scalar& valueRef() \{
00827         \textcolor{keywordflow}{return} \textcolor{keyword}{const\_cast<}Scalar&\textcolor{keyword}{>} (m\_matrix.m\_data.lower(m\_id));
00828     \}
00829 
00830     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} index()\textcolor{keyword}{ const }\{
00831         \textcolor{keywordflow}{return} IsRowMajor ? m\_outer - m\_matrix.m\_data.lowerProfile(m\_outer) + (m\_id - m\_start) :
00832                 m\_outer + (m\_id - m\_start) + 1;
00833         ;
00834     \}
00835 
00836     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} row()\textcolor{keyword}{ const }\{
00837         \textcolor{keywordflow}{return} IsRowMajor ? m\_outer : index();
00838     \}
00839 
00840     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} col()\textcolor{keyword}{ const }\{
00841         \textcolor{keywordflow}{return} IsRowMajor ? index() : m\_outer;
00842     \}
00843 
00844     \textcolor{keyword}{inline} \textcolor{keywordtype}{size\_t} size()\textcolor{keyword}{ const }\{
00845         \textcolor{keywordflow}{return} m\_matrix.m\_data.lowerProfile(m\_outer);
00846     \}
00847 
00848     \textcolor{keyword}{inline} \textcolor{keyword}{operator} bool()\textcolor{keyword}{ const }\{
00849         \textcolor{keywordflow}{return} (m\_id < m\_end) && (m\_id >= m\_start);
00850     \}
00851 
00852 \textcolor{keyword}{protected}:
00853     \textcolor{keyword}{const} \hyperlink{class_eigen_1_1_skyline_matrix}{SkylineMatrix}& m\_matrix;
00854     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_outer;
00855     \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_id;
00856     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_start;
00857     \textcolor{keyword}{const} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_end;
00858 \};
00859 
00860 \} \textcolor{comment}{// end namespace Eigen}
00861 
00862 \textcolor{preprocessor}{#endif // EIGEN\_SkylineMatrix\_H}
\end{DoxyCode}
