\hypertarget{eigen_2demos_2mix__eigen__and__c_2binary__library_8cpp_source}{}\section{eigen/demos/mix\+\_\+eigen\+\_\+and\+\_\+c/binary\+\_\+library.cpp}
\label{eigen_2demos_2mix__eigen__and__c_2binary__library_8cpp_source}\index{binary\+\_\+library.\+cpp@{binary\+\_\+library.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2009 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{comment}{// This C++ file compiles to binary code that can be linked to by your C program,}
00011 \textcolor{comment}{// thanks to the extern "C" syntax used in the declarations in binary\_library.h.}
00012 
00013 \textcolor{preprocessor}{#include "binary\_library.h"}
00014 
00015 \textcolor{preprocessor}{#include <Eigen/Core>}
00016 
00017 \textcolor{keyword}{using namespace }\hyperlink{namespace_eigen}{Eigen};
00018 
00019 \textcolor{comment}{/************************* pointer conversion methods **********************************************/}
00020 
00022 
00023 \textcolor{keyword}{inline} MatrixXd& c\_to\_eigen(\hyperlink{struct_c___matrix_xd}{C\_MatrixXd}* ptr)
00024 \{
00025   \textcolor{keywordflow}{return} *\textcolor{keyword}{reinterpret\_cast<}MatrixXd*\textcolor{keyword}{>}(ptr);
00026 \}
00027 
00028 \textcolor{keyword}{inline} \textcolor{keyword}{const} MatrixXd& c\_to\_eigen(\textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd}* ptr)
00029 \{
00030   \textcolor{keywordflow}{return} *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }MatrixXd*\textcolor{keyword}{>}(ptr);
00031 \}
00032 
00033 \textcolor{keyword}{inline} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd}* eigen\_to\_c(MatrixXd& ref)
00034 \{
00035   \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\hyperlink{struct_c___matrix_xd}{C\_MatrixXd}*\textcolor{keyword}{>}(&ref);
00036 \}
00037 
00038 \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd}* eigen\_to\_c(\textcolor{keyword}{const} MatrixXd& ref)
00039 \{
00040   \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }\hyperlink{struct_c___matrix_xd}{C\_MatrixXd}*\textcolor{keyword}{>}(&ref);
00041 \}
00042 
00044 
00045 \textcolor{keyword}{inline} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<MatrixXd>}& c\_to\_eigen(\hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd}* ptr)
00046 \{
00047   \textcolor{keywordflow}{return} *\textcolor{keyword}{reinterpret\_cast<}\hyperlink{group___core___module_class_eigen_1_1_map}{Map<MatrixXd>}*\textcolor{keyword}{>}(ptr);
00048 \}
00049 
00050 \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<MatrixXd>}& c\_to\_eigen(\textcolor{keyword}{const} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd}* ptr)
00051 \{
00052   \textcolor{keywordflow}{return} *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }\hyperlink{group___core___module_class_eigen_1_1_map}{Map<MatrixXd>}*\textcolor{keyword}{>}(ptr);
00053 \}
00054 
00055 \textcolor{keyword}{inline} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd}* eigen\_to\_c(\hyperlink{group___core___module_class_eigen_1_1_map}{Map<MatrixXd>}& ref)
00056 \{
00057   \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd}*\textcolor{keyword}{>}(&ref);
00058 \}
00059 
00060 \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd}* eigen\_to\_c(\textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<MatrixXd>}& ref)
00061 \{
00062   \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }\hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd}*\textcolor{keyword}{>}(&ref);
00063 \}
00064 
00065 
00066 \textcolor{comment}{/************************* implementation of classes **********************************************/}
00067 
00068 
00070 
00071 
00072 \hyperlink{struct_c___matrix_xd}{C\_MatrixXd}* MatrixXd\_new(\textcolor{keywordtype}{int} rows, \textcolor{keywordtype}{int} cols)
00073 \{
00074   \textcolor{keywordflow}{return} eigen\_to\_c(*\textcolor{keyword}{new} MatrixXd(rows,cols));
00075 \}
00076 
00077 \textcolor{keywordtype}{void} MatrixXd\_delete(\hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m)
00078 \{
00079   \textcolor{keyword}{delete} &c\_to\_eigen(m);
00080 \}
00081 
00082 \textcolor{keywordtype}{double}* MatrixXd\_data(\hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m)
00083 \{
00084   \textcolor{keywordflow}{return} c\_to\_eigen(m).data();
00085 \}
00086 
00087 \textcolor{keywordtype}{void} MatrixXd\_set\_zero(\hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m)
00088 \{
00089   c\_to\_eigen(m).setZero();
00090 \}
00091 
00092 \textcolor{keywordtype}{void} MatrixXd\_resize(\hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m, \textcolor{keywordtype}{int} rows, \textcolor{keywordtype}{int} cols)
00093 \{
00094   c\_to\_eigen(m).resize(rows,cols);
00095 \}
00096 
00097 \textcolor{keywordtype}{void} MatrixXd\_copy(\hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *dst, \textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *src)
00098 \{
00099   c\_to\_eigen(dst) = c\_to\_eigen(src);
00100 \}
00101 
00102 \textcolor{keywordtype}{void} MatrixXd\_copy\_map(\hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *dst, \textcolor{keyword}{const} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *src)
00103 \{
00104   c\_to\_eigen(dst) = c\_to\_eigen(src);
00105 \}
00106 
00107 \textcolor{keywordtype}{void} MatrixXd\_set\_coeff(\hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m, \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{int} j, \textcolor{keywordtype}{double} coeff)
00108 \{
00109   c\_to\_eigen(m)(i,j) = coeff;
00110 \}
00111 
00112 \textcolor{keywordtype}{double} MatrixXd\_get\_coeff(\textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m, \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{int} j)
00113 \{
00114   \textcolor{keywordflow}{return} c\_to\_eigen(m)(i,j);
00115 \}
00116 
00117 \textcolor{keywordtype}{void} MatrixXd\_print(\textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m)
00118 \{
00119   std::cout << c\_to\_eigen(m) << std::endl;
00120 \}
00121 
00122 \textcolor{keywordtype}{void} MatrixXd\_multiply(\textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m1, \textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m2, 
      \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *result)
00123 \{
00124   c\_to\_eigen(result) = c\_to\_eigen(m1) * c\_to\_eigen(m2);
00125 \}
00126 
00127 \textcolor{keywordtype}{void} MatrixXd\_add(\textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m1, \textcolor{keyword}{const} \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *m2, 
      \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *result)
00128 \{
00129   c\_to\_eigen(result) = c\_to\_eigen(m1) + c\_to\_eigen(m2);
00130 \}
00131 
00132 
00133 
00135 
00136 
00137 \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd}* Map\_MatrixXd\_new(\textcolor{keywordtype}{double} *\hyperlink{class_eigen_1_1array}{array}, \textcolor{keywordtype}{int} rows, \textcolor{keywordtype}{int} cols)
00138 \{
00139   \textcolor{keywordflow}{return} eigen\_to\_c(*\textcolor{keyword}{new} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<MatrixXd>}(array,rows,cols));
00140 \}
00141 
00142 \textcolor{keywordtype}{void} Map\_MatrixXd\_delete(\hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m)
00143 \{
00144   \textcolor{keyword}{delete} &c\_to\_eigen(m);
00145 \}
00146 
00147 \textcolor{keywordtype}{void} Map\_MatrixXd\_set\_zero(\hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m)
00148 \{
00149   c\_to\_eigen(m).setZero();
00150 \}
00151 
00152 \textcolor{keywordtype}{void} Map\_MatrixXd\_copy(\hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *dst, \textcolor{keyword}{const} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *src)
00153 \{
00154   c\_to\_eigen(dst) = c\_to\_eigen(src);
00155 \}
00156 
00157 \textcolor{keywordtype}{void} Map\_MatrixXd\_copy\_matrix(\hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *dst, \textcolor{keyword}{const} 
      \hyperlink{struct_c___matrix_xd}{C\_MatrixXd} *src)
00158 \{
00159   c\_to\_eigen(dst) = c\_to\_eigen(src);
00160 \}
00161 
00162 \textcolor{keywordtype}{void} Map\_MatrixXd\_set\_coeff(\hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m, \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{int} j, \textcolor{keywordtype}{double} coeff)
00163 \{
00164   c\_to\_eigen(m)(i,j) = coeff;
00165 \}
00166 
00167 \textcolor{keywordtype}{double} Map\_MatrixXd\_get\_coeff(\textcolor{keyword}{const} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m, \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{int} j)
00168 \{
00169   \textcolor{keywordflow}{return} c\_to\_eigen(m)(i,j);
00170 \}
00171 
00172 \textcolor{keywordtype}{void} Map\_MatrixXd\_print(\textcolor{keyword}{const} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m)
00173 \{
00174   std::cout << c\_to\_eigen(m) << std::endl;
00175 \}
00176 
00177 \textcolor{keywordtype}{void} Map\_MatrixXd\_multiply(\textcolor{keyword}{const} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m1, \textcolor{keyword}{const} 
      \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m2, \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *result)
00178 \{
00179   c\_to\_eigen(result) = c\_to\_eigen(m1) * c\_to\_eigen(m2);
00180 \}
00181 
00182 \textcolor{keywordtype}{void} Map\_MatrixXd\_add(\textcolor{keyword}{const} \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m1, \textcolor{keyword}{const} 
      \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *m2, \hyperlink{struct_c___map___matrix_xd}{C\_Map\_MatrixXd} *result)
00183 \{
00184   c\_to\_eigen(result) = c\_to\_eigen(m1) + c\_to\_eigen(m2);
00185 \}
\end{DoxyCode}
