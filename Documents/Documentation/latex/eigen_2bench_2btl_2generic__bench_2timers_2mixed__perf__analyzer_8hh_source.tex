\hypertarget{eigen_2bench_2btl_2generic__bench_2timers_2mixed__perf__analyzer_8hh_source}{}\section{eigen/bench/btl/generic\+\_\+bench/timers/mixed\+\_\+perf\+\_\+analyzer.hh}
\label{eigen_2bench_2btl_2generic__bench_2timers_2mixed__perf__analyzer_8hh_source}\index{mixed\+\_\+perf\+\_\+analyzer.\+hh@{mixed\+\_\+perf\+\_\+analyzer.\+hh}}

\begin{DoxyCode}
00001 \textcolor{comment}{//=====================================================}
00002 \textcolor{comment}{// File   :  mixed\_perf\_analyzer.hh}
00003 \textcolor{comment}{// Author :  L. Plagne <laurent.plagne@edf.fr)>        }
00004 \textcolor{comment}{// Copyright (C) EDF R&D,  mar déc 3 18:59:36 CET 2002}
00005 \textcolor{comment}{//=====================================================}
00006 \textcolor{comment}{// }
00007 \textcolor{comment}{// This program is free software; you can redistribute it and/or}
00008 \textcolor{comment}{// modify it under the terms of the GNU General Public License}
00009 \textcolor{comment}{// as published by the Free Software Foundation; either version 2}
00010 \textcolor{comment}{// of the License, or (at your option) any later version.}
00011 \textcolor{comment}{// }
00012 \textcolor{comment}{// This program is distributed in the hope that it will be useful,}
00013 \textcolor{comment}{// but WITHOUT ANY WARRANTY; without even the implied warranty of}
00014 \textcolor{comment}{// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00015 \textcolor{comment}{// GNU General Public License for more details.}
00016 \textcolor{comment}{// You should have received a copy of the GNU General Public License}
00017 \textcolor{comment}{// along with this program; if not, write to the Free Software}
00018 \textcolor{comment}{// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.}
00019 \textcolor{comment}{// }
00020 \textcolor{preprocessor}{#ifndef \_MIXED\_PERF\_ANALYSER\_HH}
00021 \textcolor{preprocessor}{#define \_MIXED\_PERF\_ANALYSER\_HH}
00022 
00023 \textcolor{preprocessor}{#include "x86\_perf\_analyzer.hh"}
00024 \textcolor{preprocessor}{#include "portable\_perf\_analyzer.hh"}
00025 
00026 \textcolor{comment}{// choose portable perf analyzer for long calculations and x86 analyser for short ones}
00027 
00028 
00029 \textcolor{keyword}{template}<\textcolor{keyword}{class} Action>
\Hypertarget{eigen_2bench_2btl_2generic__bench_2timers_2mixed__perf__analyzer_8hh_source_l00030}\hyperlink{class_mixed___perf___analyzer}{00030} \textcolor{keyword}{class }\hyperlink{class_mixed___perf___analyzer}{Mixed\_Perf\_Analyzer}\{
00031   
00032 \textcolor{keyword}{public}:  
00033   \hyperlink{class_mixed___perf___analyzer}{Mixed\_Perf\_Analyzer}( \textcolor{keywordtype}{void} ):\_x86pa(),\_ppa(),\_use\_ppa(\textcolor{keyword}{true})
00034   \{
00035     MESSAGE(\textcolor{stringliteral}{"Mixed\_Perf\_Analyzer Ctor"});
00036   \}; 
00037   \hyperlink{class_mixed___perf___analyzer}{Mixed\_Perf\_Analyzer}( \textcolor{keyword}{const} \hyperlink{class_mixed___perf___analyzer}{Mixed\_Perf\_Analyzer} & )\{
00038     INFOS(\textcolor{stringliteral}{"Copy Ctor not implemented"});
00039     exit(0);
00040   \};
00041   ~\hyperlink{class_mixed___perf___analyzer}{Mixed\_Perf\_Analyzer}( \textcolor{keywordtype}{void} )\{
00042     MESSAGE(\textcolor{stringliteral}{"Mixed\_Perf\_Analyzer Dtor"});
00043   \};
00044     
00045   
00046   \textcolor{keyword}{inline} \textcolor{keywordtype}{double} eval\_mflops(\textcolor{keywordtype}{int} size)
00047   \{
00048 
00049     \textcolor{keywordtype}{double} result=0.0;
00050     \textcolor{keywordflow}{if} (\_use\_ppa)\{      
00051       result=\_ppa.eval\_mflops(size);
00052       \textcolor{keywordflow}{if} (\_ppa.get\_nb\_calc()>DEFAULT\_NB\_SAMPLE)\{\_use\_ppa=\textcolor{keyword}{false};\}      
00053     \}
00054     \textcolor{keywordflow}{else}\{      
00055       result=\_x86pa.eval\_mflops(size);
00056     \}
00057 
00058     \textcolor{keywordflow}{return} result;
00059   \}
00060 
00061 \textcolor{keyword}{private}:
00062 
00063   \hyperlink{class_portable___perf___analyzer}{Portable\_Perf\_Analyzer<Action>} \_ppa;
00064   \hyperlink{class_x86___perf___analyzer}{X86\_Perf\_Analyzer<Action>} \_x86pa;
00065   \textcolor{keywordtype}{bool} \_use\_ppa;
00066 
00067 \};
00068 
00069 \textcolor{preprocessor}{#endif}
00070 
00071   
00072     
00073   
\end{DoxyCode}
