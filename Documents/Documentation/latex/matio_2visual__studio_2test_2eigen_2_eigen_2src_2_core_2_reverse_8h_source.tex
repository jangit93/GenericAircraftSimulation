\hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_reverse_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/\+Eigen/src/\+Core/\+Reverse.h}
\label{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_reverse_8h_source}\index{Reverse.\+h@{Reverse.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2006-2008 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{// Copyright (C) 2009 Ricard Marxer <email@ricardmarxer.com>}
00006 \textcolor{comment}{// Copyright (C) 2009-2010 Gael Guennebaud <gael.guennebaud@inria.fr>}
00007 \textcolor{comment}{//}
00008 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00009 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00010 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00011 
00012 \textcolor{preprocessor}{#ifndef EIGEN\_REVERSE\_H}
00013 \textcolor{preprocessor}{#define EIGEN\_REVERSE\_H}
00014 
00015 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00016 
00017 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00018 
00019 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType, \textcolor{keywordtype}{int} Direction>
00020 \textcolor{keyword}{struct }traits<Reverse<MatrixType, Direction> >
00021  : traits<MatrixType>
00022 \{
00023   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Scalar Scalar;
00024   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} traits<MatrixType>::StorageKind StorageKind;
00025   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} traits<MatrixType>::XprKind XprKind;
00026   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} ref\_selector<MatrixType>::type MatrixTypeNested;
00027   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} remove\_reference<MatrixTypeNested>::type \_MatrixTypeNested;
00028   \textcolor{keyword}{enum} \{
00029     RowsAtCompileTime = MatrixType::RowsAtCompileTime,
00030     ColsAtCompileTime = MatrixType::ColsAtCompileTime,
00031     MaxRowsAtCompileTime = MatrixType::MaxRowsAtCompileTime,
00032     MaxColsAtCompileTime = MatrixType::MaxColsAtCompileTime,
00033     Flags = \_MatrixTypeNested::Flags & (\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit} | \hyperlink{group__flags_gae2c323957f20dfdc6cb8f44428eaec1a}{LvalueBit})
00034   \};
00035 \};
00036 
00037 \textcolor{keyword}{template}<\textcolor{keyword}{typename} PacketType, \textcolor{keywordtype}{bool} ReversePacket> \textcolor{keyword}{struct }reverse\_packet\_cond
00038 \{
00039   \textcolor{keyword}{static} \textcolor{keyword}{inline} PacketType run(\textcolor{keyword}{const} PacketType& x) \{ \textcolor{keywordflow}{return} preverse(x); \}
00040 \};
00041 
00042 \textcolor{keyword}{template}<\textcolor{keyword}{typename} PacketType> \textcolor{keyword}{struct }reverse\_packet\_cond<PacketType,false>
00043 \{
00044   \textcolor{keyword}{static} \textcolor{keyword}{inline} PacketType run(\textcolor{keyword}{const} PacketType& x) \{ \textcolor{keywordflow}{return} x; \}
00045 \};
00046 
00047 \} \textcolor{comment}{// end namespace internal }
00048 
00063 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType, \textcolor{keywordtype}{int} Direction> \textcolor{keyword}{class }Reverse
00064   : \textcolor{keyword}{public} internal::dense\_xpr\_base< Reverse<MatrixType, Direction> >::type
00065 \{
00066   \textcolor{keyword}{public}:
00067 
00068     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} internal::dense\_xpr\_base<Reverse>::type Base;
00069     EIGEN\_DENSE\_PUBLIC\_INTERFACE(Reverse)
00070     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} internal::remove\_all<MatrixType>::type NestedExpression;
00071     \textcolor{keyword}{using} Base::IsRowMajor;
00072 
00073   \textcolor{keyword}{protected}:
00074     \textcolor{keyword}{enum} \{
00075       PacketSize = internal::packet\_traits<Scalar>::size,
00076       IsColMajor = !IsRowMajor,
00077       ReverseRow = (Direction == \hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7addca718e0564723df21d61b94b1198be}{Vertical})   || (Direction == 
      \hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7aa01e40fce022901560ce6d9fdee2fde3}{BothDirections}),
00078       ReverseCol = (Direction == \hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7aae8a16b3b9272683c1162915f6d892be}{Horizontal}) || (Direction == 
      \hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7aa01e40fce022901560ce6d9fdee2fde3}{BothDirections}),
00079       OffsetRow  = ReverseRow && IsColMajor ? PacketSize : 1,
00080       OffsetCol  = ReverseCol && IsRowMajor ? PacketSize : 1,
00081       ReversePacket = (Direction == \hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7aa01e40fce022901560ce6d9fdee2fde3}{BothDirections})
00082                     || ((Direction == \hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7addca718e0564723df21d61b94b1198be}{Vertical})   && IsColMajor)
00083                     || ((Direction == \hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7aae8a16b3b9272683c1162915f6d892be}{Horizontal}) && IsRowMajor)
00084     \};
00085     \textcolor{keyword}{typedef} internal::reverse\_packet\_cond<PacketScalar,ReversePacket> reverse\_packet;
00086   \textcolor{keyword}{public}:
00087 
00088     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{explicit} \textcolor{keyword}{inline} Reverse(\textcolor{keyword}{const} MatrixType& matrix) : m\_matrix(matrix) \{ \}
00089 
00090     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(Reverse)
00091 
00092     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_matrix.rows(); \}
00093     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_matrix.cols(); \}
00094 
00095     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} innerStride()\textcolor{keyword}{ const}
00096 \textcolor{keyword}{    }\{
00097       \textcolor{keywordflow}{return} -m\_matrix.innerStride();
00098     \}
00099 
00100     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{const} \textcolor{keyword}{typename} internal::remove\_all<typename MatrixType::Nested>::type&
00101     nestedExpression()\textcolor{keyword}{ const }
00102 \textcolor{keyword}{    }\{
00103       \textcolor{keywordflow}{return} m\_matrix;
00104     \}
00105 
00106   \textcolor{keyword}{protected}:
00107     \textcolor{keyword}{typename} MatrixType::Nested m\_matrix;
00108 \};
00109 
00116 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00117 \textcolor{keyword}{inline} \textcolor{keyword}{typename} DenseBase<Derived>::ReverseReturnType
00118 \hyperlink{group___core___module_a38ea394036d8b096abf322469c80198f}{DenseBase<Derived>::reverse}()
00119 \{
00120   \textcolor{keywordflow}{return} ReverseReturnType(derived());
00121 \}
00122 
00123 
00124 \textcolor{comment}{//reverse const overload moved DenseBase.h due to a CUDA compiler bug}
00125 
00138 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00139 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{group___core___module_adb8045155ea45f7961fc2a5170e1d921}{DenseBase<Derived>::reverseInPlace}()
00140 \{
00141   \textcolor{keywordflow}{if}(cols()>rows())
00142   \{
00143     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} half = cols()/2;
00144     leftCols(half).swap(rightCols(half).reverse());
00145     \textcolor{keywordflow}{if}((cols()%2)==1)
00146     \{
00147       \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} half2 = rows()/2;
00148       col(half).head(half2).swap(col(half).tail(half2).reverse());
00149     \}
00150   \}
00151   \textcolor{keywordflow}{else}
00152   \{
00153     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} half = rows()/2;
00154     topRows(half).swap(bottomRows(half).reverse());
00155     \textcolor{keywordflow}{if}((rows()%2)==1)
00156     \{
00157       \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} half2 = cols()/2;
00158       row(half).head(half2).swap(row(half).tail(half2).reverse());
00159     \}
00160   \}
00161 \}
00162 
00163 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00164   
00165 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} Direction>
00166 \textcolor{keyword}{struct }vectorwise\_reverse\_inplace\_impl;
00167 
00168 \textcolor{keyword}{template}<>
00169 \textcolor{keyword}{struct }vectorwise\_reverse\_inplace\_impl<\hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7addca718e0564723df21d61b94b1198be}{Vertical}>
00170 \{
00171   \textcolor{keyword}{template}<\textcolor{keyword}{typename} ExpressionType>
00172   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(ExpressionType &xpr)
00173   \{
00174     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} half = xpr.rows()/2;
00175     xpr.topRows(half).swap(xpr.bottomRows(half).colwise().reverse());
00176   \}
00177 \};
00178 
00179 \textcolor{keyword}{template}<>
00180 \textcolor{keyword}{struct }vectorwise\_reverse\_inplace\_impl<\hyperlink{group__enums_ggad49a7b3738e273eb00932271b36127f7aae8a16b3b9272683c1162915f6d892be}{Horizontal}>
00181 \{
00182   \textcolor{keyword}{template}<\textcolor{keyword}{typename} ExpressionType>
00183   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(ExpressionType &xpr)
00184   \{
00185     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} half = xpr.cols()/2;
00186     xpr.leftCols(half).swap(xpr.rightCols(half).rowwise().reverse());
00187   \}
00188 \};
00189 
00190 \} \textcolor{comment}{// end namespace internal}
00191 
00203 \textcolor{keyword}{template}<\textcolor{keyword}{typename} ExpressionType, \textcolor{keywordtype}{int} Direction>
00204 \textcolor{keywordtype}{void} \hyperlink{group___core___module_ab9dd7c273eb2ba8defaab2d55156936b}{VectorwiseOp<ExpressionType,Direction>::reverseInPlace}
      ()
00205 \{
00206   internal::vectorwise\_reverse\_inplace\_impl<Direction>::run(\_expression().const\_cast\_derived());
00207 \}
00208 
00209 \} \textcolor{comment}{// end namespace Eigen}
00210 
00211 \textcolor{preprocessor}{#endif // EIGEN\_REVERSE\_H}
\end{DoxyCode}
