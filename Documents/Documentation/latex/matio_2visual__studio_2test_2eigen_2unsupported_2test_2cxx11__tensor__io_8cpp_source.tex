\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__io_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/cxx11\+\_\+tensor\+\_\+io.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__io_8cpp_source}\index{cxx11\+\_\+tensor\+\_\+io.\+cpp@{cxx11\+\_\+tensor\+\_\+io.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 \textcolor{preprocessor}{#include <sstream>}
00012 \textcolor{preprocessor}{#include <string>}
00013 \textcolor{preprocessor}{#include <Eigen/CXX11/Tensor>}
00014 
00015 
00016 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00017 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_output\_0d()
00018 \{
00019   Tensor<int, 0, DataLayout> tensor;
00020   tensor() = 123;
00021 
00022   std::stringstream os;
00023   os << tensor;
00024 
00025   std::string expected(\textcolor{stringliteral}{"123"});
00026   VERIFY\_IS\_EQUAL(std::string(os.str()), expected);
00027 \}
00028 
00029 
00030 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00031 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_output\_1d()
00032 \{
00033   Tensor<int, 1, DataLayout> tensor(5);
00034   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 5; ++i) \{
00035     tensor(i) = i;
00036   \}
00037 
00038   std::stringstream os;
00039   os << tensor;
00040 
00041   std::string expected(\textcolor{stringliteral}{"0\(\backslash\)n1\(\backslash\)n2\(\backslash\)n3\(\backslash\)n4"});
00042   VERIFY\_IS\_EQUAL(std::string(os.str()), expected);
00043 
00044   \hyperlink{class_eigen_1_1_tensor}{Eigen::Tensor<double,1,DataLayout>} empty\_tensor(0);
00045   std::stringstream empty\_os;
00046   empty\_os << empty\_tensor;
00047   std::string empty\_string;
00048   VERIFY\_IS\_EQUAL(std::string(empty\_os.str()), empty\_string);
00049 \}
00050 
00051 
00052 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00053 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_output\_2d()
00054 \{
00055   Tensor<int, 2, DataLayout> tensor(5, 3);
00056   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 5; ++i) \{
00057     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00058       tensor(i, j) = i*j;
00059     \}
00060   \}
00061 
00062   std::stringstream os;
00063   os << tensor;
00064 
00065   std::string expected(\textcolor{stringliteral}{"0  0  0\(\backslash\)n0  1  2\(\backslash\)n0  2  4\(\backslash\)n0  3  6\(\backslash\)n0  4  8"});
00066   VERIFY\_IS\_EQUAL(std::string(os.str()), expected);
00067 \}
00068 
00069 
00070 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00071 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_output\_expr()
00072 \{
00073   Tensor<int, 1, DataLayout> tensor1(5);
00074   Tensor<int, 1, DataLayout> tensor2(5);
00075   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 5; ++i) \{
00076     tensor1(i) = i;
00077     tensor2(i) = 7;
00078   \}
00079 
00080   std::stringstream os;
00081   os << tensor1 + tensor2;
00082 
00083   std::string expected(\textcolor{stringliteral}{" 7\(\backslash\)n 8\(\backslash\)n 9\(\backslash\)n10\(\backslash\)n11"});
00084   VERIFY\_IS\_EQUAL(std::string(os.str()), expected);
00085 \}
00086 
00087 
00088 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00089 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_output\_string()
00090 \{
00091   Tensor<std::string, 2, DataLayout> tensor(5, 3);
00092   tensor.setConstant(std::string(\textcolor{stringliteral}{"foo"}));
00093 
00094   std::cout << tensor << std::endl;
00095 
00096   std::stringstream os;
00097   os << tensor;
00098 
00099   std::string expected(\textcolor{stringliteral}{"foo  foo  foo\(\backslash\)nfoo  foo  foo\(\backslash\)nfoo  foo  foo\(\backslash\)nfoo  foo  foo\(\backslash\)nfoo  foo  foo"});
00100   VERIFY\_IS\_EQUAL(std::string(os.str()), expected);
00101 \}
00102 
00103 
00104 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00105 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_output\_const()
00106 \{
00107   Tensor<int, 1, DataLayout> tensor(5);
00108   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 5; ++i) \{
00109     tensor(i) = i;
00110   \}
00111 
00112   TensorMap<Tensor<const int, 1, DataLayout> > tensor\_map(tensor.data(), 5);
00113 
00114   std::stringstream os;
00115   os << tensor\_map;
00116 
00117   std::string expected(\textcolor{stringliteral}{"0\(\backslash\)n1\(\backslash\)n2\(\backslash\)n3\(\backslash\)n4"});
00118   VERIFY\_IS\_EQUAL(std::string(os.str()), expected);
00119 \}
00120 
00121 
00122 \textcolor{keywordtype}{void} test\_cxx11\_tensor\_io()
00123 \{
00124   CALL\_SUBTEST(test\_output\_0d<ColMajor>());
00125   CALL\_SUBTEST(test\_output\_0d<RowMajor>());
00126   CALL\_SUBTEST(test\_output\_1d<ColMajor>());
00127   CALL\_SUBTEST(test\_output\_1d<RowMajor>());
00128   CALL\_SUBTEST(test\_output\_2d<ColMajor>());
00129   CALL\_SUBTEST(test\_output\_2d<RowMajor>());
00130   CALL\_SUBTEST(test\_output\_expr<ColMajor>());
00131   CALL\_SUBTEST(test\_output\_expr<RowMajor>());
00132   CALL\_SUBTEST(test\_output\_string<ColMajor>());
00133   CALL\_SUBTEST(test\_output\_string<RowMajor>());
00134   CALL\_SUBTEST(test\_output\_const<ColMajor>());
00135   CALL\_SUBTEST(test\_output\_const<RowMajor>());
00136 \}
\end{DoxyCode}
