\hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_s_v_d_2_jacobi_s_v_d___l_a_p_a_c_k_e_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/\+Eigen/src/\+S\+V\+D/\+Jacobi\+S\+V\+D\+\_\+\+L\+A\+P\+A\+C\+KE.h}
\label{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_s_v_d_2_jacobi_s_v_d___l_a_p_a_c_k_e_8h_source}\index{Jacobi\+S\+V\+D\+\_\+\+L\+A\+P\+A\+C\+K\+E.\+h@{Jacobi\+S\+V\+D\+\_\+\+L\+A\+P\+A\+C\+K\+E.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ Copyright (c) 2011, Intel Corporation. All rights reserved.}
00003 \textcolor{comment}{}
00004 \textcolor{comment}{ Redistribution and use in source and binary forms, with or without modification,}
00005 \textcolor{comment}{ are permitted provided that the following conditions are met:}
00006 \textcolor{comment}{}
00007 \textcolor{comment}{ * Redistributions of source code must retain the above copyright notice, this}
00008 \textcolor{comment}{   list of conditions and the following disclaimer.}
00009 \textcolor{comment}{ * Redistributions in binary form must reproduce the above copyright notice,}
00010 \textcolor{comment}{   this list of conditions and the following disclaimer in the documentation}
00011 \textcolor{comment}{   and/or other materials provided with the distribution.}
00012 \textcolor{comment}{ * Neither the name of Intel Corporation nor the names of its contributors may}
00013 \textcolor{comment}{   be used to endorse or promote products derived from this software without}
00014 \textcolor{comment}{   specific prior written permission.}
00015 \textcolor{comment}{}
00016 \textcolor{comment}{ THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND}
00017 \textcolor{comment}{ ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED}
00018 \textcolor{comment}{ WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE}
00019 \textcolor{comment}{ DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR}
00020 \textcolor{comment}{ ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES}
00021 \textcolor{comment}{ (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;}
00022 \textcolor{comment}{ LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON}
00023 \textcolor{comment}{ ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT}
00024 \textcolor{comment}{ (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS}
00025 \textcolor{comment}{ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}
00026 \textcolor{comment}{}
00027 \textcolor{comment}{ ********************************************************************************}
00028 \textcolor{comment}{ *   Content : Eigen bindings to LAPACKe}
00029 \textcolor{comment}{ *    Singular Value Decomposition - SVD.}
00030 \textcolor{comment}{ ********************************************************************************}
00031 \textcolor{comment}{*/}
00032 
00033 \textcolor{preprocessor}{#ifndef EIGEN\_JACOBISVD\_LAPACKE\_H}
00034 \textcolor{preprocessor}{#define EIGEN\_JACOBISVD\_LAPACKE\_H}
00035 
00036 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00037 
00040 \textcolor{preprocessor}{#define EIGEN\_LAPACKE\_SVD(EIGTYPE, LAPACKE\_TYPE, LAPACKE\_RTYPE, LAPACKE\_PREFIX, EIGCOLROW, LAPACKE\_COLROW) 
      \(\backslash\)}
00041 \textcolor{preprocessor}{template<> inline \(\backslash\)}
00042 \textcolor{preprocessor}{JacobiSVD<Matrix<EIGTYPE, Dynamic, Dynamic, EIGCOLROW, Dynamic, Dynamic>,
       ColPivHouseholderQRPreconditioner>& \(\backslash\)}
00043 \textcolor{preprocessor}{JacobiSVD<Matrix<EIGTYPE, Dynamic, Dynamic, EIGCOLROW, Dynamic, Dynamic>,
       ColPivHouseholderQRPreconditioner>::compute(const Matrix<EIGTYPE, Dynamic, Dynamic, EIGCOLROW, Dynamic, Dynamic>& matrix, unsigned int
       computationOptions) \(\backslash\)}
00044 \textcolor{preprocessor}{\{ \(\backslash\)}
00045 \textcolor{preprocessor}{  typedef Matrix<EIGTYPE, Dynamic, Dynamic, EIGCOLROW, Dynamic, Dynamic> MatrixType; \(\backslash\)}
00046 \textcolor{preprocessor}{  }\textcolor{comment}{/*typedef MatrixType::Scalar Scalar;*/}\textcolor{preprocessor}{ \(\backslash\)}
00047 \textcolor{preprocessor}{  }\textcolor{comment}{/*typedef MatrixType::RealScalar RealScalar;*/}\textcolor{preprocessor}{ \(\backslash\)}
00048 \textcolor{preprocessor}{  allocate(matrix.rows(), matrix.cols(), computationOptions); \(\backslash\)}
00049 \textcolor{preprocessor}{\(\backslash\)}
00050 \textcolor{preprocessor}{  }\textcolor{comment}{/*const RealScalar precision = RealScalar(2) * NumTraits<Scalar>::epsilon();*/}\textcolor{preprocessor}{ \(\backslash\)}
00051 \textcolor{preprocessor}{  m\_nonzeroSingularValues = m\_diagSize; \(\backslash\)}
00052 \textcolor{preprocessor}{\(\backslash\)}
00053 \textcolor{preprocessor}{  lapack\_int lda = internal::convert\_index<lapack\_int>(matrix.outerStride()), ldu, ldvt; \(\backslash\)}
00054 \textcolor{preprocessor}{  lapack\_int matrix\_order = LAPACKE\_COLROW; \(\backslash\)}
00055 \textcolor{preprocessor}{  char jobu, jobvt; \(\backslash\)}
00056 \textcolor{preprocessor}{  LAPACKE\_TYPE *u, *vt, dummy; \(\backslash\)}
00057 \textcolor{preprocessor}{  jobu  = (m\_computeFullU) ? 'A' : (m\_computeThinU) ? 'S' : 'N'; \(\backslash\)}
00058 \textcolor{preprocessor}{  jobvt = (m\_computeFullV) ? 'A' : (m\_computeThinV) ? 'S' : 'N'; \(\backslash\)}
00059 \textcolor{preprocessor}{  if (computeU()) \{ \(\backslash\)}
00060 \textcolor{preprocessor}{    ldu  = internal::convert\_index<lapack\_int>(m\_matrixU.outerStride()); \(\backslash\)}
00061 \textcolor{preprocessor}{    u    = (LAPACKE\_TYPE*)m\_matrixU.data(); \(\backslash\)}
00062 \textcolor{preprocessor}{  \} else \{ ldu=1; u=&dummy; \}\(\backslash\)}
00063 \textcolor{preprocessor}{  MatrixType localV; \(\backslash\)}
00064 \textcolor{preprocessor}{  ldvt = (m\_computeFullV) ? internal::convert\_index<lapack\_int>(m\_cols) : (m\_computeThinV) ?
       internal::convert\_index<lapack\_int>(m\_diagSize) : 1; \(\backslash\)}
00065 \textcolor{preprocessor}{  if (computeV()) \{ \(\backslash\)}
00066 \textcolor{preprocessor}{    localV.resize(ldvt, m\_cols); \(\backslash\)}
00067 \textcolor{preprocessor}{    vt   = (LAPACKE\_TYPE*)localV.data(); \(\backslash\)}
00068 \textcolor{preprocessor}{  \} else \{ ldvt=1; vt=&dummy; \}\(\backslash\)}
00069 \textcolor{preprocessor}{  Matrix<LAPACKE\_RTYPE, Dynamic, Dynamic> superb; superb.resize(m\_diagSize, 1); \(\backslash\)}
00070 \textcolor{preprocessor}{  MatrixType m\_temp; m\_temp = matrix; \(\backslash\)}
00071 \textcolor{preprocessor}{  LAPACKE\_##LAPACKE\_PREFIX##gesvd( matrix\_order, jobu, jobvt, internal::convert\_index<lapack\_int>(m\_rows),
       internal::convert\_index<lapack\_int>(m\_cols), (LAPACKE\_TYPE*)m\_temp.data(), lda,
       (LAPACKE\_RTYPE*)m\_singularValues.data(), u, ldu, vt, ldvt, superb.data()); \(\backslash\)}
00072 \textcolor{preprocessor}{  if (computeV()) m\_matrixV = localV.adjoint(); \(\backslash\)}
00073 \textcolor{preprocessor}{ }\textcolor{comment}{/* for(int i=0;i<m\_diagSize;i++) if (m\_singularValues.coeffRef(i) < precision) \{
       m\_nonzeroSingularValues--; m\_singularValues.coeffRef(i)=RealScalar(0);\}*/}\textcolor{preprocessor}{ \(\backslash\)}
00074 \textcolor{preprocessor}{  m\_isInitialized = true; \(\backslash\)}
00075 \textcolor{preprocessor}{  return *this; \(\backslash\)}
00076 \textcolor{preprocessor}{\}}
00077 
00078 EIGEN\_LAPACKE\_SVD(\textcolor{keywordtype}{double},   \textcolor{keywordtype}{double},                \textcolor{keywordtype}{double}, d, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}, LAPACK\_COL\_MAJOR)
00079 EIGEN\_LAPACKE\_SVD(\textcolor{keywordtype}{float},    \textcolor{keywordtype}{float},                 \textcolor{keywordtype}{float} , s, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}, LAPACK\_COL\_MAJOR)
00080 EIGEN\_LAPACKE\_SVD(dcomplex, lapack\_complex\_double, \textcolor{keywordtype}{double}, z, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}, LAPACK\_COL\_MAJOR)
00081 EIGEN\_LAPACKE\_SVD(scomplex, lapack\_complex\_float,  \textcolor{keywordtype}{float} , c, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}, LAPACK\_COL\_MAJOR)
00082 
00083 EIGEN\_LAPACKE\_SVD(\textcolor{keywordtype}{double},   \textcolor{keywordtype}{double},                \textcolor{keywordtype}{double}, d, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor}, LAPACK\_ROW\_MAJOR)
00084 EIGEN\_LAPACKE\_SVD(\textcolor{keywordtype}{float},    \textcolor{keywordtype}{float},                 \textcolor{keywordtype}{float} , s, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor}, LAPACK\_ROW\_MAJOR)
00085 EIGEN\_LAPACKE\_SVD(dcomplex, lapack\_complex\_double, \textcolor{keywordtype}{double}, z, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor}, LAPACK\_ROW\_MAJOR)
00086 EIGEN\_LAPACKE\_SVD(scomplex, lapack\_complex\_float,  \textcolor{keywordtype}{float} , c, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor}, LAPACK\_ROW\_MAJOR)
00087 
00088 \} \textcolor{comment}{// end namespace Eigen}
00089 
00090 \textcolor{preprocessor}{#endif // EIGEN\_JACOBISVD\_LAPACKE\_H}
\end{DoxyCode}
