\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__assign_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/cxx11\+\_\+tensor\+\_\+assign.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__assign_8cpp_source}\index{cxx11\+\_\+tensor\+\_\+assign.\+cpp@{cxx11\+\_\+tensor\+\_\+assign.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{preprocessor}{#include <Eigen/CXX11/Tensor>}
00013 
00014 \textcolor{keyword}{using} \hyperlink{class_eigen_1_1_tensor}{Eigen::Tensor};
00015 \textcolor{keyword}{using} \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{Eigen::RowMajor};
00016 
00017 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_1d()
00018 \{
00019   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} vec1(6);
00020   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1, RowMajor>} vec2(6);
00021   vec1(0) = 4;  vec2(0) = 0;
00022   vec1(1) = 8;  vec2(1) = 1;
00023   vec1(2) = 15; vec2(2) = 2;
00024   vec1(3) = 16; vec2(3) = 3;
00025   vec1(4) = 23; vec2(4) = 4;
00026   vec1(5) = 42; vec2(5) = 5;
00027 
00028   \textcolor{keywordtype}{int} col\_major[6];
00029   \textcolor{keywordtype}{int} row\_major[6];
00030   memset(col\_major, 0, 6*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
00031   memset(row\_major, 0, 6*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
00032   TensorMap<Tensor<int, 1> > vec3(col\_major, 6);
00033   TensorMap<Tensor<int, 1, RowMajor> > vec4(row\_major, 6);
00034 
00035   vec3 = vec1;
00036   vec4 = vec2;
00037 
00038   VERIFY\_IS\_EQUAL(vec3(0), 4);
00039   VERIFY\_IS\_EQUAL(vec3(1), 8);
00040   VERIFY\_IS\_EQUAL(vec3(2), 15);
00041   VERIFY\_IS\_EQUAL(vec3(3), 16);
00042   VERIFY\_IS\_EQUAL(vec3(4), 23);
00043   VERIFY\_IS\_EQUAL(vec3(5), 42);
00044 
00045   VERIFY\_IS\_EQUAL(vec4(0), 0);
00046   VERIFY\_IS\_EQUAL(vec4(1), 1);
00047   VERIFY\_IS\_EQUAL(vec4(2), 2);
00048   VERIFY\_IS\_EQUAL(vec4(3), 3);
00049   VERIFY\_IS\_EQUAL(vec4(4), 4);
00050   VERIFY\_IS\_EQUAL(vec4(5), 5);
00051 
00052   vec1.setZero();
00053   vec2.setZero();
00054   vec1 = vec3;
00055   vec2 = vec4;
00056 
00057   VERIFY\_IS\_EQUAL(vec1(0), 4);
00058   VERIFY\_IS\_EQUAL(vec1(1), 8);
00059   VERIFY\_IS\_EQUAL(vec1(2), 15);
00060   VERIFY\_IS\_EQUAL(vec1(3), 16);
00061   VERIFY\_IS\_EQUAL(vec1(4), 23);
00062   VERIFY\_IS\_EQUAL(vec1(5), 42);
00063 
00064   VERIFY\_IS\_EQUAL(vec2(0), 0);
00065   VERIFY\_IS\_EQUAL(vec2(1), 1);
00066   VERIFY\_IS\_EQUAL(vec2(2), 2);
00067   VERIFY\_IS\_EQUAL(vec2(3), 3);
00068   VERIFY\_IS\_EQUAL(vec2(4), 4);
00069   VERIFY\_IS\_EQUAL(vec2(5), 5);
00070 \}
00071 
00072 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_2d()
00073 \{
00074   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 2>} mat1(2,3);
00075   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 2, RowMajor>} mat2(2,3);
00076 
00077   mat1(0,0) = 0;
00078   mat1(0,1) = 1;
00079   mat1(0,2) = 2;
00080   mat1(1,0) = 3;
00081   mat1(1,1) = 4;
00082   mat1(1,2) = 5;
00083 
00084   mat2(0,0) = 0;
00085   mat2(0,1) = 1;
00086   mat2(0,2) = 2;
00087   mat2(1,0) = 3;
00088   mat2(1,1) = 4;
00089   mat2(1,2) = 5;
00090 
00091   \textcolor{keywordtype}{int} col\_major[6];
00092   \textcolor{keywordtype}{int} row\_major[6];
00093   memset(col\_major, 0, 6*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
00094   memset(row\_major, 0, 6*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
00095   TensorMap<Tensor<int, 2> > mat3(row\_major, 2, 3);
00096   TensorMap<Tensor<int, 2, RowMajor> > mat4(col\_major, 2, 3);
00097 
00098   mat3 = mat1;
00099   mat4 = mat2;
00100 
00101   VERIFY\_IS\_EQUAL(mat3(0,0), 0);
00102   VERIFY\_IS\_EQUAL(mat3(0,1), 1);
00103   VERIFY\_IS\_EQUAL(mat3(0,2), 2);
00104   VERIFY\_IS\_EQUAL(mat3(1,0), 3);
00105   VERIFY\_IS\_EQUAL(mat3(1,1), 4);
00106   VERIFY\_IS\_EQUAL(mat3(1,2), 5);
00107 
00108   VERIFY\_IS\_EQUAL(mat4(0,0), 0);
00109   VERIFY\_IS\_EQUAL(mat4(0,1), 1);
00110   VERIFY\_IS\_EQUAL(mat4(0,2), 2);
00111   VERIFY\_IS\_EQUAL(mat4(1,0), 3);
00112   VERIFY\_IS\_EQUAL(mat4(1,1), 4);
00113   VERIFY\_IS\_EQUAL(mat4(1,2), 5);
00114 
00115   mat1.setZero();
00116   mat2.setZero();
00117   mat1 = mat3;
00118   mat2 = mat4;
00119 
00120   VERIFY\_IS\_EQUAL(mat1(0,0), 0);
00121   VERIFY\_IS\_EQUAL(mat1(0,1), 1);
00122   VERIFY\_IS\_EQUAL(mat1(0,2), 2);
00123   VERIFY\_IS\_EQUAL(mat1(1,0), 3);
00124   VERIFY\_IS\_EQUAL(mat1(1,1), 4);
00125   VERIFY\_IS\_EQUAL(mat1(1,2), 5);
00126 
00127   VERIFY\_IS\_EQUAL(mat2(0,0), 0);
00128   VERIFY\_IS\_EQUAL(mat2(0,1), 1);
00129   VERIFY\_IS\_EQUAL(mat2(0,2), 2);
00130   VERIFY\_IS\_EQUAL(mat2(1,0), 3);
00131   VERIFY\_IS\_EQUAL(mat2(1,1), 4);
00132   VERIFY\_IS\_EQUAL(mat2(1,2), 5);
00133 \}
00134 
00135 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_3d()
00136 \{
00137   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3>} mat1(2,3,7);
00138   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3, RowMajor>} mat2(2,3,7);
00139 
00140   \textcolor{keywordtype}{int} val = 0;
00141   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00142     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00143       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00144         mat1(i,j,k) = val;
00145         mat2(i,j,k) = val;
00146         val++;
00147       \}
00148     \}
00149   \}
00150 
00151   \textcolor{keywordtype}{int} col\_major[2*3*7];
00152   \textcolor{keywordtype}{int} row\_major[2*3*7];
00153   memset(col\_major, 0, 2*3*7*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
00154   memset(row\_major, 0, 2*3*7*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
00155   TensorMap<Tensor<int, 3> > mat3(col\_major, 2, 3, 7);
00156   TensorMap<Tensor<int, 3, RowMajor> > mat4(row\_major, 2, 3, 7);
00157 
00158   mat3 = mat1;
00159   mat4 = mat2;
00160 
00161   val = 0;
00162   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00163     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00164       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00165         VERIFY\_IS\_EQUAL(mat3(i,j,k), val);
00166         VERIFY\_IS\_EQUAL(mat4(i,j,k), val);
00167         val++;
00168       \}
00169     \}
00170   \}
00171 
00172   mat1.setZero();
00173   mat2.setZero();
00174   mat1 = mat3;
00175   mat2 = mat4;
00176 
00177   val = 0;
00178   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00179     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00180       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00181         VERIFY\_IS\_EQUAL(mat1(i,j,k), val);
00182         VERIFY\_IS\_EQUAL(mat2(i,j,k), val);
00183         val++;
00184       \}
00185     \}
00186   \}
00187 \}
00188 
00189 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_same\_type()
00190 \{
00191   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} orig\_tensor(5);
00192   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} dest\_tensor(5);
00193   orig\_tensor.setRandom();
00194   dest\_tensor.setRandom();
00195   \textcolor{keywordtype}{int}* orig\_data = orig\_tensor.data();
00196   \textcolor{keywordtype}{int}* dest\_data = dest\_tensor.data();
00197   dest\_tensor = orig\_tensor;
00198   VERIFY\_IS\_EQUAL(orig\_tensor.data(), orig\_data);
00199   VERIFY\_IS\_EQUAL(dest\_tensor.data(), dest\_data);
00200   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 5; ++i) \{
00201     VERIFY\_IS\_EQUAL(dest\_tensor(i), orig\_tensor(i));
00202   \}
00203 
00204   TensorFixedSize<int, Sizes<5> > orig\_array;
00205   TensorFixedSize<int, Sizes<5> > dest\_array;
00206   orig\_array.setRandom();
00207   dest\_array.setRandom();
00208   orig\_data = orig\_array.data();
00209   dest\_data = dest\_array.data();
00210   dest\_array = orig\_array;
00211   VERIFY\_IS\_EQUAL(orig\_array.data(), orig\_data);
00212   VERIFY\_IS\_EQUAL(dest\_array.data(), dest\_data);
00213   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 5; ++i) \{
00214     VERIFY\_IS\_EQUAL(dest\_array(i), orig\_array(i));
00215   \}
00216 
00217   \textcolor{keywordtype}{int} orig[5] = \{1, 2, 3, 4, 5\};
00218   \textcolor{keywordtype}{int} dest[5] = \{6, 7, 8, 9, 10\};
00219   TensorMap<Tensor<int, 1> > orig\_map(orig, 5);
00220   TensorMap<Tensor<int, 1> > dest\_map(dest, 5);
00221   orig\_data = orig\_map.data();
00222   dest\_data = dest\_map.data();
00223   dest\_map = orig\_map;
00224   VERIFY\_IS\_EQUAL(orig\_map.data(), orig\_data);
00225   VERIFY\_IS\_EQUAL(dest\_map.data(), dest\_data);
00226   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 5; ++i) \{
00227     VERIFY\_IS\_EQUAL(dest[i], i+1);
00228   \}
00229 \}
00230 
00231 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_auto\_resize()
00232 \{
00233   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} tensor1;
00234   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} tensor2(3);
00235   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} tensor3(5);
00236   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} tensor4(7);
00237 
00238   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} new\_tensor(5);
00239   new\_tensor.setRandom();
00240 
00241   tensor1 = tensor2 = tensor3 = tensor4 = new\_tensor;
00242 
00243   VERIFY\_IS\_EQUAL(tensor1.dimension(0), new\_tensor.dimension(0));
00244   VERIFY\_IS\_EQUAL(tensor2.dimension(0), new\_tensor.dimension(0));
00245   VERIFY\_IS\_EQUAL(tensor3.dimension(0), new\_tensor.dimension(0));
00246   VERIFY\_IS\_EQUAL(tensor4.dimension(0), new\_tensor.dimension(0));
00247   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < new\_tensor.dimension(0); ++i) \{
00248     VERIFY\_IS\_EQUAL(tensor1(i), new\_tensor(i));
00249     VERIFY\_IS\_EQUAL(tensor2(i), new\_tensor(i));
00250     VERIFY\_IS\_EQUAL(tensor3(i), new\_tensor(i));
00251     VERIFY\_IS\_EQUAL(tensor4(i), new\_tensor(i));
00252   \}
00253 \}
00254 
00255 
00256 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_compound\_assign()
00257 \{
00258   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} start\_tensor(10);
00259   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} offset\_tensor(10);
00260   start\_tensor.setRandom();
00261   offset\_tensor.setRandom();
00262 
00263   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} tensor = start\_tensor;
00264   tensor += offset\_tensor;
00265   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 10; ++i) \{
00266     VERIFY\_IS\_EQUAL(tensor(i), start\_tensor(i) + offset\_tensor(i));
00267   \}
00268 
00269   tensor = start\_tensor;
00270   tensor -= offset\_tensor;
00271   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 10; ++i) \{
00272     VERIFY\_IS\_EQUAL(tensor(i), start\_tensor(i) - offset\_tensor(i));
00273   \}
00274 
00275   tensor = start\_tensor;
00276   tensor *= offset\_tensor;
00277   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 10; ++i) \{
00278     VERIFY\_IS\_EQUAL(tensor(i), start\_tensor(i) * offset\_tensor(i));
00279   \}
00280 
00281   tensor = start\_tensor;
00282   tensor /= offset\_tensor;
00283   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 10; ++i) \{
00284     VERIFY\_IS\_EQUAL(tensor(i), start\_tensor(i) / offset\_tensor(i));
00285   \}
00286 \}
00287 
00288 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_std\_initializers\_tensor() \{
00289 \textcolor{preprocessor}{#if EIGEN\_HAS\_VARIADIC\_TEMPLATES}
00290   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} a(3);
00291   a.setValues(\{0, 1, 2\});
00292   VERIFY\_IS\_EQUAL(a(0), 0);
00293   VERIFY\_IS\_EQUAL(a(1), 1);
00294   VERIFY\_IS\_EQUAL(a(2), 2);
00295 
00296   \textcolor{comment}{// It fills the top-left slice.}
00297   a.setValues(\{10, 20\});
00298   VERIFY\_IS\_EQUAL(a(0), 10);
00299   VERIFY\_IS\_EQUAL(a(1), 20);
00300   VERIFY\_IS\_EQUAL(a(2), 2);
00301 
00302   \textcolor{comment}{// Chaining.}
00303   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} a2(3);
00304   a2 = a.setValues(\{100, 200, 300\});
00305   VERIFY\_IS\_EQUAL(a(0), 100);
00306   VERIFY\_IS\_EQUAL(a(1), 200);
00307   VERIFY\_IS\_EQUAL(a(2), 300);
00308   VERIFY\_IS\_EQUAL(a2(0), 100);
00309   VERIFY\_IS\_EQUAL(a2(1), 200);
00310   VERIFY\_IS\_EQUAL(a2(2), 300);
00311 
00312   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 2>} b(2, 3);
00313   b.setValues(\{\{0, 1, 2\}, \{3, 4, 5\}\});
00314   VERIFY\_IS\_EQUAL(b(0, 0), 0);
00315   VERIFY\_IS\_EQUAL(b(0, 1), 1);
00316   VERIFY\_IS\_EQUAL(b(0, 2), 2);
00317   VERIFY\_IS\_EQUAL(b(1, 0), 3);
00318   VERIFY\_IS\_EQUAL(b(1, 1), 4);
00319   VERIFY\_IS\_EQUAL(b(1, 2), 5);
00320 
00321   \textcolor{comment}{// It fills the top-left slice.}
00322   b.setValues(\{\{10, 20\}, \{30\}\});
00323   VERIFY\_IS\_EQUAL(b(0, 0), 10);
00324   VERIFY\_IS\_EQUAL(b(0, 1), 20);
00325   VERIFY\_IS\_EQUAL(b(0, 2), 2);
00326   VERIFY\_IS\_EQUAL(b(1, 0), 30);
00327   VERIFY\_IS\_EQUAL(b(1, 1), 4);
00328   VERIFY\_IS\_EQUAL(b(1, 2), 5);
00329 
00330   \hyperlink{class_eigen_1_1_tensor}{Eigen::Tensor<int, 3>} c(3, 2, 4);
00331   c.setValues(\{\{\{0, 1, 2, 3\}, \{4, 5, 6, 7\}\},
00332                \{\{10, 11, 12, 13\}, \{14, 15, 16, 17\}\},
00333                \{\{20, 21, 22, 23\}, \{24, 25, 26, 27\}\}\});
00334   VERIFY\_IS\_EQUAL(c(0, 0, 0), 0);
00335   VERIFY\_IS\_EQUAL(c(0, 0, 1), 1);
00336   VERIFY\_IS\_EQUAL(c(0, 0, 2), 2);
00337   VERIFY\_IS\_EQUAL(c(0, 0, 3), 3);
00338   VERIFY\_IS\_EQUAL(c(0, 1, 0), 4);
00339   VERIFY\_IS\_EQUAL(c(0, 1, 1), 5);
00340   VERIFY\_IS\_EQUAL(c(0, 1, 2), 6);
00341   VERIFY\_IS\_EQUAL(c(0, 1, 3), 7);
00342   VERIFY\_IS\_EQUAL(c(1, 0, 0), 10);
00343   VERIFY\_IS\_EQUAL(c(1, 0, 1), 11);
00344   VERIFY\_IS\_EQUAL(c(1, 0, 2), 12);
00345   VERIFY\_IS\_EQUAL(c(1, 0, 3), 13);
00346   VERIFY\_IS\_EQUAL(c(1, 1, 0), 14);
00347   VERIFY\_IS\_EQUAL(c(1, 1, 1), 15);
00348   VERIFY\_IS\_EQUAL(c(1, 1, 2), 16);
00349   VERIFY\_IS\_EQUAL(c(1, 1, 3), 17);
00350   VERIFY\_IS\_EQUAL(c(2, 0, 0), 20);
00351   VERIFY\_IS\_EQUAL(c(2, 0, 1), 21);
00352   VERIFY\_IS\_EQUAL(c(2, 0, 2), 22);
00353   VERIFY\_IS\_EQUAL(c(2, 0, 3), 23);
00354   VERIFY\_IS\_EQUAL(c(2, 1, 0), 24);
00355   VERIFY\_IS\_EQUAL(c(2, 1, 1), 25);
00356   VERIFY\_IS\_EQUAL(c(2, 1, 2), 26);
00357   VERIFY\_IS\_EQUAL(c(2, 1, 3), 27);
00358 \textcolor{preprocessor}{#endif  // EIGEN\_HAS\_VARIADIC\_TEMPLATES}
00359 \}
00360 
00361 \textcolor{keywordtype}{void} test\_cxx11\_tensor\_assign()
00362 \{
00363   CALL\_SUBTEST(test\_1d());
00364   CALL\_SUBTEST(test\_2d());
00365   CALL\_SUBTEST(test\_3d());
00366   CALL\_SUBTEST(test\_same\_type());
00367   CALL\_SUBTEST(test\_auto\_resize());
00368   CALL\_SUBTEST(test\_compound\_assign());
00369   CALL\_SUBTEST(test\_std\_initializers\_tensor());
00370 \}
\end{DoxyCode}
