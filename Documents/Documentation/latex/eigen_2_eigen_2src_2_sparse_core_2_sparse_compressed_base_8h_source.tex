\hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source}{}\section{eigen/\+Eigen/src/\+Sparse\+Core/\+Sparse\+Compressed\+Base.h}
\label{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source}\index{Sparse\+Compressed\+Base.\+h@{Sparse\+Compressed\+Base.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2015 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_SPARSE\_COMPRESSED\_BASE\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_SPARSE\_COMPRESSED\_BASE\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00014 
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00015}\hyperlink{group___sparse_core___module}{00015} \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived> \textcolor{keyword}{class }\hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase};
00016   
00017 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00018 
00019 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00020}\hyperlink{struct_eigen_1_1internal_1_1traits_3_01_sparse_compressed_base_3_01_derived_01_4_01_4}{00020} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<\hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}<Derived> > : \hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<Derived>
00021 \{\};
00022 
00023 \} \textcolor{comment}{// end namespace internal}
00024 
00035 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00036 \textcolor{keyword}{class }\hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}
00037   : \textcolor{keyword}{public} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_matrix_base}{SparseMatrixBase}<Derived>
00038 \{
00039   \textcolor{keyword}{public}:
00040     \textcolor{keyword}{typedef} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_matrix_base}{SparseMatrixBase<Derived>} Base;
00041     EIGEN\_SPARSE\_PUBLIC\_INTERFACE(\hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase})
00042     \textcolor{keyword}{using} Base::operator=;
00043     \textcolor{keyword}{using} Base::IsRowMajor;
00044     
00045     \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_inner_iterator}{InnerIterator};
00046     \textcolor{keyword}{class }ReverseInnerIterator;
00047     
00048   \textcolor{keyword}{protected}:
00049     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Base::IndexVector IndexVector;
00050     \hyperlink{group___core___module_class_eigen_1_1_map}{Eigen::Map<IndexVector>} innerNonZeros() \{ \textcolor{keywordflow}{return} 
      \hyperlink{group___core___module_class_eigen_1_1_map}{Eigen::Map<IndexVector>}(innerNonZeroPtr(), isCompressed()?0:derived().outerSize()); 
      \}
00051     \textcolor{keyword}{const}  \hyperlink{group___core___module_class_eigen_1_1_map}{Eigen::Map<const IndexVector>} innerNonZeros()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} 
      \hyperlink{group___core___module_class_eigen_1_1_map}{Eigen::Map<const IndexVector>}(innerNonZeroPtr(), isCompressed()?0:derived().
      outerSize()); \}
00052         
00053   \textcolor{keyword}{public}:
00054     
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00056}\hyperlink{group___sparse_core___module_a03de8b3da2c142ce8698a76123b3e7d3}{00056}     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} \hyperlink{group___sparse_core___module_a03de8b3da2c142ce8698a76123b3e7d3}{nonZeros}()\textcolor{keyword}{ const}
00057 \textcolor{keyword}{    }\{
00058       \textcolor{keywordflow}{if}(Derived::IsVectorAtCompileTime && outerIndexPtr()==0)
00059         \textcolor{keywordflow}{return} derived().nonZeros();
00060       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(isCompressed())
00061         \textcolor{keywordflow}{return} outerIndexPtr()[derived().outerSize()]-outerIndexPtr()[0];
00062       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(derived().outerSize()==0)
00063         \textcolor{keywordflow}{return} 0;
00064       \textcolor{keywordflow}{else}
00065         \textcolor{keywordflow}{return} innerNonZeros().sum();
00066     \}
00067     
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00071}\hyperlink{group___sparse_core___module_a0f44c739398794ea77f310b745cc5627}{00071}     \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar* \hyperlink{group___sparse_core___module_a0f44c739398794ea77f310b745cc5627}{valuePtr}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} derived().valuePtr(); \}
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00075}\hyperlink{group___sparse_core___module_a0f12f72d14b6c277d09be9f5ce2eab95}{00075}     \textcolor{keyword}{inline} Scalar* \hyperlink{group___sparse_core___module_a0f12f72d14b6c277d09be9f5ce2eab95}{valuePtr}() \{ \textcolor{keywordflow}{return} derived().valuePtr(); \}
00076 
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00080}\hyperlink{group___sparse_core___module_aa64818e1aa43015dad01b114b2ab4687}{00080}     \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex}* \hyperlink{group___sparse_core___module_aa64818e1aa43015dad01b114b2ab4687}{innerIndexPtr}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} derived().
      innerIndexPtr(); \}
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00084}\hyperlink{group___sparse_core___module_a197111c1289644f1ea38fe683ccdd82a}{00084}     \textcolor{keyword}{inline} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex}* \hyperlink{group___sparse_core___module_a197111c1289644f1ea38fe683ccdd82a}{innerIndexPtr}() \{ \textcolor{keywordflow}{return} derived().innerIndexPtr(); \}
00085 
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00090}\hyperlink{group___sparse_core___module_a2624d4c2661c582de168246c56e8d71e}{00090}     \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex}* \hyperlink{group___sparse_core___module_a2624d4c2661c582de168246c56e8d71e}{outerIndexPtr}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} derived().
      outerIndexPtr(); \}
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00095}\hyperlink{group___sparse_core___module_a53a82f962686e18c8dc07a4b9a85ed7b}{00095}     \textcolor{keyword}{inline} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex}* \hyperlink{group___sparse_core___module_a53a82f962686e18c8dc07a4b9a85ed7b}{outerIndexPtr}() \{ \textcolor{keywordflow}{return} derived().outerIndexPtr(); \}
00096 
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00100}\hyperlink{group___sparse_core___module_afc056a3895eae1a4c4767252ff04966a}{00100}     \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex}* \hyperlink{group___sparse_core___module_afc056a3895eae1a4c4767252ff04966a}{innerNonZeroPtr}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} derived().
      innerNonZeroPtr(); \}
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00104}\hyperlink{group___sparse_core___module_a411e972b097e6aef225415a4c2d0a0b5}{00104}     \textcolor{keyword}{inline} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex}* \hyperlink{group___sparse_core___module_a411e972b097e6aef225415a4c2d0a0b5}{innerNonZeroPtr}() \{ \textcolor{keywordflow}{return} derived().innerNonZeroPtr();
       \}
00105     
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00107}\hyperlink{group___sparse_core___module_a837934b33a80fe996ff20500373d3a61}{00107}     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \hyperlink{group___sparse_core___module_a837934b33a80fe996ff20500373d3a61}{isCompressed}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} innerNonZeroPtr()==0; \}
00108 
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00114}\hyperlink{group___sparse_core___module_a101b155485ae59ea1261c4f6040f3dc4}{00114}     \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<const Array<Scalar,Dynamic,1>} > 
      \hyperlink{group___sparse_core___module_a101b155485ae59ea1261c4f6040f3dc4}{coeffs}()\textcolor{keyword}{ const }\{ eigen\_assert(isCompressed()); \textcolor{keywordflow}{return} 
      \hyperlink{group___core___module_class_eigen_1_1_array}{Array<Scalar,Dynamic,1>::Map}(valuePtr(),nonZeros()); \}
00115 
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00126}\hyperlink{group___sparse_core___module_a7cf299e08d2a4f6d6869e631e51b12fe}{00126}     \hyperlink{group___core___module_class_eigen_1_1_map}{Map<Array<Scalar,Dynamic,1>} > \hyperlink{group___sparse_core___module_a7cf299e08d2a4f6d6869e631e51b12fe}{coeffs}() \{ eigen\_assert(isCompressed());
       \textcolor{keywordflow}{return} \hyperlink{group___core___module_class_eigen_1_1_array}{Array<Scalar,Dynamic,1>::Map}(valuePtr(),nonZeros()); \}
00127 
00128   \textcolor{keyword}{protected}:
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00130}\hyperlink{group___sparse_core___module_af79f020db965367d97eb954fc68d8f99}{00130}     \hyperlink{group___sparse_core___module_af79f020db965367d97eb954fc68d8f99}{SparseCompressedBase}() \{\}
00131   \textcolor{keyword}{private}:
00132     \textcolor{keyword}{template}<\textcolor{keyword}{typename} OtherDerived> \textcolor{keyword}{explicit} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}(\textcolor{keyword}{const} 
      \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase<OtherDerived>}&);
00133 \};
00134 
00135 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00136}\hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{00136} \textcolor{keyword}{class }\hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}<Derived>::\hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}
00137 \{
00138   \textcolor{keyword}{public}:
00139     \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}()
00140       : m\_values(0), m\_indices(0), m\_outer(0), m\_id(0), m\_end(0)
00141     \{\}
00142 
00143     \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}& other)
00144       : m\_values(other.m\_values), m\_indices(other.m\_indices), m\_outer(other.m\_outer), m\_id(other.m\_id), 
      m\_end(other.m\_end)
00145     \{\}
00146 
00147     \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}& operator=(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}& other)
00148     \{
00149       m\_values = other.m\_values;
00150       m\_indices = other.m\_indices;
00151       \textcolor{keyword}{const\_cast<}\hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{OuterType}&\textcolor{keyword}{>}(m\_outer).setValue(other.m\_outer.value());
00152       m\_id = other.m\_id;
00153       m\_end = other.m\_end;
00154       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00155     \}
00156 
00157     \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}& mat, 
      \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} outer)
00158       : m\_values(mat.\hyperlink{group___sparse_core___module_a0f44c739398794ea77f310b745cc5627}{valuePtr}()), m\_indices(mat.\hyperlink{group___sparse_core___module_aa64818e1aa43015dad01b114b2ab4687}{innerIndexPtr}()), m\_outer(outer)
00159     \{
00160       \textcolor{keywordflow}{if}(Derived::IsVectorAtCompileTime && mat.\hyperlink{group___sparse_core___module_a2624d4c2661c582de168246c56e8d71e}{outerIndexPtr}()==0)
00161       \{
00162         m\_id = 0;
00163         m\_end = mat.\hyperlink{group___sparse_core___module_a03de8b3da2c142ce8698a76123b3e7d3}{nonZeros}();
00164       \}
00165       \textcolor{keywordflow}{else}
00166       \{
00167         m\_id = mat.\hyperlink{group___sparse_core___module_a2624d4c2661c582de168246c56e8d71e}{outerIndexPtr}()[outer];
00168         \textcolor{keywordflow}{if}(mat.\hyperlink{group___sparse_core___module_a837934b33a80fe996ff20500373d3a61}{isCompressed}())
00169           m\_end = mat.\hyperlink{group___sparse_core___module_a2624d4c2661c582de168246c56e8d71e}{outerIndexPtr}()[outer+1];
00170         \textcolor{keywordflow}{else}
00171           m\_end = m\_id + mat.\hyperlink{group___sparse_core___module_afc056a3895eae1a4c4767252ff04966a}{innerNonZeroPtr}()[outer];
00172       \}
00173     \}
00174 
00175     \textcolor{keyword}{explicit} \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}& mat)
00176       : m\_values(mat.\hyperlink{group___sparse_core___module_a0f44c739398794ea77f310b745cc5627}{valuePtr}()), m\_indices(mat.\hyperlink{group___sparse_core___module_aa64818e1aa43015dad01b114b2ab4687}{innerIndexPtr}()), m\_outer(0), m\_id(0),
       m\_end(mat.\hyperlink{group___sparse_core___module_a03de8b3da2c142ce8698a76123b3e7d3}{nonZeros}())
00177     \{
00178       EIGEN\_STATIC\_ASSERT\_VECTOR\_ONLY(Derived);
00179     \}
00180 
00181     \textcolor{keyword}{explicit} \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}(\textcolor{keyword}{const} 
      \hyperlink{class_eigen_1_1internal_1_1_compressed_storage}{internal::CompressedStorage<Scalar,StorageIndex>}& data)
00182       : m\_values(data.valuePtr()), m\_indices(data.indexPtr()), m\_outer(0), m\_id(0), m\_end(data.size())
00183     \{
00184       EIGEN\_STATIC\_ASSERT\_VECTOR\_ONLY(Derived);
00185     \}
00186 
00187     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}& operator++() \{ m\_id++; \textcolor{keywordflow}{return} *\textcolor{keyword}{this}; \}
00188 
00189     \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar& value()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_values[m\_id]; \}
00190     \textcolor{keyword}{inline} Scalar& valueRef() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{const\_cast<}Scalar&\textcolor{keyword}{>}(m\_values[m\_id]); \}
00191 
00192     \textcolor{keyword}{inline} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex} index()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_indices[m\_id]; \}
00193     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} outer()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_outer.value(); \}
00194     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} row()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} IsRowMajor ? m\_outer.value() : index(); \}
00195     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} col()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} IsRowMajor ? index() : m\_outer.value(); \}
00196 
00197     \textcolor{keyword}{inline} \textcolor{keyword}{operator} bool()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} (m\_id < m\_end); \}
00198 
00199   \textcolor{keyword}{protected}:
00200     \textcolor{keyword}{const} Scalar* m\_values;
00201     \textcolor{keyword}{const} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex}* m\_indices;
00202     \textcolor{keyword}{typedef} 
      \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{internal::variable\_if\_dynamic<Index,Derived::IsVectorAtCompileTime?0:Dynamic>}
       \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{OuterType};
00203     \textcolor{keyword}{const} OuterType m\_outer;
00204     \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_id;
00205     \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_end;
00206   \textcolor{keyword}{private}:
00207     \textcolor{comment}{// If you get here, then you're not using the right InnerIterator type, e.g.:}
00208     \textcolor{comment}{//   SparseMatrix<double,RowMajor> A;}
00209     \textcolor{comment}{//   SparseMatrix<double>::InnerIterator it(A,0);}
00210     \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_inner_iterator}{InnerIterator}(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_matrix_base}{SparseMatrixBase<T>}&, 
      \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} outer);
00211 \};
00212 
00213 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00214}\hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_reverse_inner_iterator}{00214} \textcolor{keyword}{class }\hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}<Derived>::\hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_reverse_inner_iterator}{ReverseInnerIterator}
00215 \{
00216   \textcolor{keyword}{public}:
00217     \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_reverse_inner_iterator}{ReverseInnerIterator}(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}& mat, 
      \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} outer)
00218       : m\_values(mat.\hyperlink{group___sparse_core___module_a0f44c739398794ea77f310b745cc5627}{valuePtr}()), m\_indices(mat.\hyperlink{group___sparse_core___module_aa64818e1aa43015dad01b114b2ab4687}{innerIndexPtr}()), m\_outer(outer)
00219     \{
00220       \textcolor{keywordflow}{if}(Derived::IsVectorAtCompileTime && mat.\hyperlink{group___sparse_core___module_a2624d4c2661c582de168246c56e8d71e}{outerIndexPtr}()==0)
00221       \{
00222         m\_start = 0;
00223         m\_id = mat.\hyperlink{group___sparse_core___module_a03de8b3da2c142ce8698a76123b3e7d3}{nonZeros}();
00224       \}
00225       \textcolor{keywordflow}{else}
00226       \{
00227         m\_start = mat.\hyperlink{group___sparse_core___module_a2624d4c2661c582de168246c56e8d71e}{outerIndexPtr}()[outer];
00228         \textcolor{keywordflow}{if}(mat.\hyperlink{group___sparse_core___module_a837934b33a80fe996ff20500373d3a61}{isCompressed}())
00229           m\_id = mat.\hyperlink{group___sparse_core___module_a2624d4c2661c582de168246c56e8d71e}{outerIndexPtr}()[outer+1];
00230         \textcolor{keywordflow}{else}
00231           m\_id = m\_start + mat.\hyperlink{group___sparse_core___module_afc056a3895eae1a4c4767252ff04966a}{innerNonZeroPtr}()[outer];
00232       \}
00233     \}
00234 
00235     \textcolor{keyword}{explicit} \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_reverse_inner_iterator}{ReverseInnerIterator}(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}& mat)
00236       : m\_values(mat.\hyperlink{group___sparse_core___module_a0f44c739398794ea77f310b745cc5627}{valuePtr}()), m\_indices(mat.\hyperlink{group___sparse_core___module_aa64818e1aa43015dad01b114b2ab4687}{innerIndexPtr}()), m\_outer(0), m\_start(
      0), m\_id(mat.\hyperlink{group___sparse_core___module_a03de8b3da2c142ce8698a76123b3e7d3}{nonZeros}())
00237     \{
00238       EIGEN\_STATIC\_ASSERT\_VECTOR\_ONLY(Derived);
00239     \}
00240 
00241     \textcolor{keyword}{explicit} \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_reverse_inner_iterator}{ReverseInnerIterator}(\textcolor{keyword}{const} 
      \hyperlink{class_eigen_1_1internal_1_1_compressed_storage}{internal::CompressedStorage<Scalar,StorageIndex>}& data)
00242       : m\_values(data.valuePtr()), m\_indices(data.indexPtr()), m\_outer(0), m\_start(0), m\_id(data.size())
00243     \{
00244       EIGEN\_STATIC\_ASSERT\_VECTOR\_ONLY(Derived);
00245     \}
00246 
00247     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_sparse_compressed_base_1_1_reverse_inner_iterator}{ReverseInnerIterator}& operator--() \{ --m\_id; \textcolor{keywordflow}{return} *\textcolor{keyword}{this}; \}
00248 
00249     \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar& value()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_values[m\_id-1]; \}
00250     \textcolor{keyword}{inline} Scalar& valueRef() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{const\_cast<}Scalar&\textcolor{keyword}{>}(m\_values[m\_id-1]); \}
00251 
00252     \textcolor{keyword}{inline} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex} index()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_indices[m\_id-1]; \}
00253     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} outer()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_outer.value(); \}
00254     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} row()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} IsRowMajor ? m\_outer.value() : index(); \}
00255     \textcolor{keyword}{inline} \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} col()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} IsRowMajor ? index() : m\_outer.value(); \}
00256 
00257     \textcolor{keyword}{inline} \textcolor{keyword}{operator} bool()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} (m\_id > m\_start); \}
00258 
00259   \textcolor{keyword}{protected}:
00260     \textcolor{keyword}{const} Scalar* m\_values;
00261     \textcolor{keyword}{const} \hyperlink{group___sparse_core___module_a0b540ba724726ebe953f8c0df06081ed}{StorageIndex}* m\_indices;
00262     \textcolor{keyword}{typedef} 
      \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{internal::variable\_if\_dynamic<Index,Derived::IsVectorAtCompileTime?0:Dynamic>}
       \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{OuterType};
00263     \textcolor{keyword}{const} OuterType m\_outer;
00264     \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_start;
00265     \hyperlink{group___core___module_a554f30542cc2316add4b1ea0a492ff02}{Index} m\_id;
00266 \};
00267 
00268 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00269 
00270 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_compressed_base_8h_source_l00271}\hyperlink{struct_eigen_1_1internal_1_1evaluator_3_01_sparse_compressed_base_3_01_derived_01_4_01_4}{00271} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}<\hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_compressed_base}{SparseCompressedBase}<Derived> >
00272   : \hyperlink{struct_eigen_1_1internal_1_1evaluator__base}{evaluator\_base}<Derived>
00273 \{
00274   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Derived::Scalar Scalar;
00275   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Derived::InnerIterator InnerIterator;
00276   
00277   \textcolor{keyword}{enum} \{
00278     CoeffReadCost = \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<Scalar>::ReadCost},
00279     Flags = Derived::Flags
00280   \};
00281   
00282   \hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}() : m\_matrix(0), m\_zero(0)
00283   \{
00284     EIGEN\_INTERNAL\_CHECK\_COST\_VALUE(CoeffReadCost);
00285   \}
00286   \textcolor{keyword}{explicit} \hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}(\textcolor{keyword}{const} Derived &mat) : m\_matrix(&mat), m\_zero(0)
00287   \{
00288     EIGEN\_INTERNAL\_CHECK\_COST\_VALUE(CoeffReadCost);
00289   \}
00290   
00291   \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} nonZerosEstimate()\textcolor{keyword}{ const }\{
00292     \textcolor{keywordflow}{return} m\_matrix->nonZeros();
00293   \}
00294   
00295   \textcolor{keyword}{operator} Derived&() \{ \textcolor{keywordflow}{return} m\_matrix->const\_cast\_derived(); \}
00296   \textcolor{keyword}{operator} \textcolor{keyword}{const} Derived&() \textcolor{keyword}{const} \{ \textcolor{keywordflow}{return} *m\_matrix; \}
00297   
00298   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1_dense_coeffs_base}{DenseCoeffsBase<Derived,ReadOnlyAccessors>::CoeffReturnType}
       CoeffReturnType;
00299   \textcolor{keyword}{const} Scalar& coeff(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col)\textcolor{keyword}{ const}
00300 \textcolor{keyword}{  }\{
00301     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} p = find(row,col);
00302 
00303     \textcolor{keywordflow}{if}(p==\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic})
00304       \textcolor{keywordflow}{return} m\_zero;
00305     \textcolor{keywordflow}{else}
00306       \textcolor{keywordflow}{return} m\_matrix->const\_cast\_derived().valuePtr()[p];
00307   \}
00308 
00309   Scalar& coeffRef(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col)
00310   \{
00311     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} p = find(row,col);
00312     eigen\_assert(p!=\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic} && \textcolor{stringliteral}{"written coefficient does not exist"});
00313     \textcolor{keywordflow}{return} m\_matrix->const\_cast\_derived().valuePtr()[p];
00314   \}
00315 
00316 \textcolor{keyword}{protected}:
00317 
00318   \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} find(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col)\textcolor{keyword}{ const}
00319 \textcolor{keyword}{  }\{
00320     eigen\_internal\_assert(row>=0 && row<m\_matrix->rows() && col>=0 && col<m\_matrix->cols());
00321 
00322     \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer = Derived::IsRowMajor ? row : col;
00323     \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner = Derived::IsRowMajor ? col : row;
00324 
00325     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} start = m\_matrix->outerIndexPtr()[outer];
00326     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} end = m\_matrix->isCompressed() ? m\_matrix->outerIndexPtr()[outer+1] : m\_matrix->
      outerIndexPtr()[outer] + m\_matrix->innerNonZeroPtr()[outer];
00327     eigen\_assert(end>=start && \textcolor{stringliteral}{"you are using a non finalized sparse matrix or written coefficient does not
       exist"});
00328     \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} p = std::lower\_bound(m\_matrix->innerIndexPtr()+start, m\_matrix->innerIndexPtr()+end,
      inner) - m\_matrix->innerIndexPtr();
00329 
00330     \textcolor{keywordflow}{return} ((p<end) && (m\_matrix->innerIndexPtr()[p]==inner)) ? p : \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic};
00331   \}
00332 
00333   \textcolor{keyword}{const} Derived *m\_matrix;
00334   \textcolor{keyword}{const} Scalar m\_zero;
00335 \};
00336 
00337 \}
00338 
00339 \} \textcolor{comment}{// end namespace Eigen}
00340 
00341 \textcolor{preprocessor}{#endif // EIGEN\_SPARSE\_COMPRESSED\_BASE\_H}
\end{DoxyCode}
