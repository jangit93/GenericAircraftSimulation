\hypertarget{matio_2visual__studio_2test_2eigen_2test_2corners_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/test/corners.cpp}
\label{matio_2visual__studio_2test_2eigen_2test_2corners_8cpp_source}\index{corners.\+cpp@{corners.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2006-2010 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{preprocessor}{#define COMPARE\_CORNER(A,B) \(\backslash\)}
00013 \textcolor{preprocessor}{  VERIFY\_IS\_EQUAL(matrix.A, matrix.B); \(\backslash\)}
00014 \textcolor{preprocessor}{  VERIFY\_IS\_EQUAL(const\_matrix.A, const\_matrix.B);}
00015 
00016 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType> \textcolor{keywordtype}{void} corners(\textcolor{keyword}{const} MatrixType& m)
00017 \{
00018   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Index \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
00019   Index rows = m.rows();
00020   Index cols = m.cols();
00021 
00022   Index r = internal::random<Index>(1,rows);
00023   Index c = internal::random<Index>(1,cols);
00024 
00025   MatrixType matrix = MatrixType::Random(rows,cols);
00026   \textcolor{keyword}{const} MatrixType const\_matrix = MatrixType::Random(rows,cols);
00027 
00028   COMPARE\_CORNER(topLeftCorner(r,c), block(0,0,r,c));
00029   COMPARE\_CORNER(topRightCorner(r,c), block(0,cols-c,r,c));
00030   COMPARE\_CORNER(bottomLeftCorner(r,c), block(rows-r,0,r,c));
00031   COMPARE\_CORNER(bottomRightCorner(r,c), block(rows-r,cols-c,r,c));
00032 
00033   Index sr = internal::random<Index>(1,rows) - 1;
00034   Index nr = internal::random<Index>(1,rows-sr);
00035   Index sc = internal::random<Index>(1,cols) - 1;
00036   Index nc = internal::random<Index>(1,cols-sc);
00037 
00038   COMPARE\_CORNER(topRows(r), block(0,0,r,cols));
00039   COMPARE\_CORNER(middleRows(sr,nr), block(sr,0,nr,cols));
00040   COMPARE\_CORNER(bottomRows(r), block(rows-r,0,r,cols));
00041   COMPARE\_CORNER(leftCols(c), block(0,0,rows,c));
00042   COMPARE\_CORNER(middleCols(sc,nc), block(0,sc,rows,nc));
00043   COMPARE\_CORNER(rightCols(c), block(0,cols-c,rows,c));
00044 \}
00045 
00046 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType, \textcolor{keywordtype}{int} CRows, \textcolor{keywordtype}{int} CCols, \textcolor{keywordtype}{int} SRows, \textcolor{keywordtype}{int} SCols> \textcolor{keywordtype}{void} corners\_fixedsize()
00047 \{
00048   MatrixType matrix = MatrixType::Random();
00049   \textcolor{keyword}{const} MatrixType const\_matrix = MatrixType::Random();
00050 
00051   \textcolor{keyword}{enum} \{
00052     rows = MatrixType::RowsAtCompileTime,
00053     cols = MatrixType::ColsAtCompileTime,
00054     r = CRows,
00055     c = CCols,
00056     sr = SRows,
00057     sc = SCols
00058   \};
00059 
00060   VERIFY\_IS\_EQUAL((matrix.template topLeftCorner<r,c>()), (matrix.template block<r,c>(0,0)));
00061   VERIFY\_IS\_EQUAL((matrix.template topRightCorner<r,c>()), (matrix.template block<r,c>(0,cols-c)));
00062   VERIFY\_IS\_EQUAL((matrix.template bottomLeftCorner<r,c>()), (matrix.template block<r,c>(rows-r,0)));
00063   VERIFY\_IS\_EQUAL((matrix.template bottomRightCorner<r,c>()), (matrix.template block<r,c>(rows-r,cols-c)));
00064 
00065   VERIFY\_IS\_EQUAL((matrix.template topLeftCorner<r,c>()), (matrix.template topLeftCorner<r,Dynamic>(r,c)));
00066   VERIFY\_IS\_EQUAL((matrix.template topRightCorner<r,c>()), (matrix.template topRightCorner<r,Dynamic>(r,c))
      );
00067   VERIFY\_IS\_EQUAL((matrix.template bottomLeftCorner<r,c>()), (matrix.template bottomLeftCorner<r,Dynamic>(r
      ,c)));
00068   VERIFY\_IS\_EQUAL((matrix.template bottomRightCorner<r,c>()), (matrix.template bottomRightCorner<r,Dynamic>
      (r,c)));
00069 
00070   VERIFY\_IS\_EQUAL((matrix.template topLeftCorner<r,c>()), (matrix.template topLeftCorner<Dynamic,c>(r,c)));
00071   VERIFY\_IS\_EQUAL((matrix.template topRightCorner<r,c>()), (matrix.template topRightCorner<Dynamic,c>(r,c))
      );
00072   VERIFY\_IS\_EQUAL((matrix.template bottomLeftCorner<r,c>()), (matrix.template bottomLeftCorner<Dynamic,c>(r
      ,c)));
00073   VERIFY\_IS\_EQUAL((matrix.template bottomRightCorner<r,c>()), (matrix.template bottomRightCorner<Dynamic,c>
      (r,c)));
00074 
00075   VERIFY\_IS\_EQUAL((matrix.template topRows<r>()), (matrix.template block<r,cols>(0,0)));
00076   VERIFY\_IS\_EQUAL((matrix.template middleRows<r>(sr)), (matrix.template block<r,cols>(sr,0)));
00077   VERIFY\_IS\_EQUAL((matrix.template bottomRows<r>()), (matrix.template block<r,cols>(rows-r,0)));
00078   VERIFY\_IS\_EQUAL((matrix.template leftCols<c>()), (matrix.template block<rows,c>(0,0)));
00079   VERIFY\_IS\_EQUAL((matrix.template middleCols<c>(sc)), (matrix.template block<rows,c>(0,sc)));
00080   VERIFY\_IS\_EQUAL((matrix.template rightCols<c>()), (matrix.template block<rows,c>(0,cols-c)));
00081 
00082   VERIFY\_IS\_EQUAL((const\_matrix.template topLeftCorner<r,c>()), (const\_matrix.template block<r,c>(0,0)));
00083   VERIFY\_IS\_EQUAL((const\_matrix.template topRightCorner<r,c>()), (const\_matrix.template block<r,c>(0,cols-c
      )));
00084   VERIFY\_IS\_EQUAL((const\_matrix.template bottomLeftCorner<r,c>()), (const\_matrix.template block<r,c>(rows-r
      ,0)));
00085   VERIFY\_IS\_EQUAL((const\_matrix.template bottomRightCorner<r,c>()), (const\_matrix.template block<r,c>(rows-
      r,cols-c)));
00086 
00087   VERIFY\_IS\_EQUAL((const\_matrix.template topLeftCorner<r,c>()), (const\_matrix.template 
      topLeftCorner<r,Dynamic>(r,c)));
00088   VERIFY\_IS\_EQUAL((const\_matrix.template topRightCorner<r,c>()), (const\_matrix.template 
      topRightCorner<r,Dynamic>(r,c)));
00089   VERIFY\_IS\_EQUAL((const\_matrix.template bottomLeftCorner<r,c>()), (const\_matrix.template 
      bottomLeftCorner<r,Dynamic>(r,c)));
00090   VERIFY\_IS\_EQUAL((const\_matrix.template bottomRightCorner<r,c>()), (const\_matrix.template 
      bottomRightCorner<r,Dynamic>(r,c)));
00091 
00092   VERIFY\_IS\_EQUAL((const\_matrix.template topLeftCorner<r,c>()), (const\_matrix.template 
      topLeftCorner<Dynamic,c>(r,c)));
00093   VERIFY\_IS\_EQUAL((const\_matrix.template topRightCorner<r,c>()), (const\_matrix.template 
      topRightCorner<Dynamic,c>(r,c)));
00094   VERIFY\_IS\_EQUAL((const\_matrix.template bottomLeftCorner<r,c>()), (const\_matrix.template 
      bottomLeftCorner<Dynamic,c>(r,c)));
00095   VERIFY\_IS\_EQUAL((const\_matrix.template bottomRightCorner<r,c>()), (const\_matrix.template 
      bottomRightCorner<Dynamic,c>(r,c)));
00096 
00097   VERIFY\_IS\_EQUAL((const\_matrix.template topRows<r>()), (const\_matrix.template block<r,cols>(0,0)));
00098   VERIFY\_IS\_EQUAL((const\_matrix.template middleRows<r>(sr)), (const\_matrix.template block<r,cols>(sr,0)));
00099   VERIFY\_IS\_EQUAL((const\_matrix.template bottomRows<r>()), (const\_matrix.template block<r,cols>(rows-r,0)))
      ;
00100   VERIFY\_IS\_EQUAL((const\_matrix.template leftCols<c>()), (const\_matrix.template block<rows,c>(0,0)));
00101   VERIFY\_IS\_EQUAL((const\_matrix.template middleCols<c>(sc)), (const\_matrix.template block<rows,c>(0,sc)));
00102   VERIFY\_IS\_EQUAL((const\_matrix.template rightCols<c>()), (const\_matrix.template block<rows,c>(0,cols-c)));
00103 \}
00104 
00105 \textcolor{keywordtype}{void} test\_corners()
00106 \{
00107   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++) \{
00108     CALL\_SUBTEST\_1( corners(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 1, 1>}()) );
00109     CALL\_SUBTEST\_2( corners(Matrix4d()) );
00110     CALL\_SUBTEST\_3( corners(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<int,10,12>}()) );
00111     CALL\_SUBTEST\_4( corners(MatrixXcf(5, 7)) );
00112     CALL\_SUBTEST\_5( corners(MatrixXf(21, 20)) );
00113 
00114     CALL\_SUBTEST\_1(( corners\_fixedsize<\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 1, 1>}, 1, 1, 0, 0>() ));
00115     CALL\_SUBTEST\_2(( corners\_fixedsize<Matrix4d,2,2,1,1>() ));
00116     CALL\_SUBTEST\_3(( corners\_fixedsize<\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<int,10,12>},4,7,5,2>() ));
00117   \}
00118 \}
\end{DoxyCode}
