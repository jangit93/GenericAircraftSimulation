\hypertarget{matio_2visual__studio_2test_2eigen_2bench_2btl_2actions_2action__rot_8hh_source}{}\section{matio/visual\+\_\+studio/test/eigen/bench/btl/actions/action\+\_\+rot.hh}
\label{matio_2visual__studio_2test_2eigen_2bench_2btl_2actions_2action__rot_8hh_source}\index{action\+\_\+rot.\+hh@{action\+\_\+rot.\+hh}}

\begin{DoxyCode}
00001 
00002 \textcolor{comment}{// This program is free software; you can redistribute it and/or}
00003 \textcolor{comment}{// modify it under the terms of the GNU General Public License}
00004 \textcolor{comment}{// as published by the Free Software Foundation; either version 2}
00005 \textcolor{comment}{// of the License, or (at your option) any later version.}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{// This program is distributed in the hope that it will be useful,}
00008 \textcolor{comment}{// but WITHOUT ANY WARRANTY; without even the implied warranty of}
00009 \textcolor{comment}{// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00010 \textcolor{comment}{// GNU General Public License for more details.}
00011 \textcolor{comment}{// You should have received a copy of the GNU General Public License}
00012 \textcolor{comment}{// along with this program; if not, write to the Free Software}
00013 \textcolor{comment}{// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.}
00014 \textcolor{comment}{//}
00015 \textcolor{preprocessor}{#ifndef ACTION\_ROT}
00016 \textcolor{preprocessor}{#define ACTION\_ROT}
00017 \textcolor{preprocessor}{#include "utilities.h"}
00018 \textcolor{preprocessor}{#include "STL\_interface.hh"}
00019 \textcolor{preprocessor}{#include <string>}
00020 \textcolor{preprocessor}{#include "init/init\_function.hh"}
00021 \textcolor{preprocessor}{#include "init/init\_vector.hh"}
00022 \textcolor{preprocessor}{#include "init/init\_matrix.hh"}
00023 
00024 \textcolor{keyword}{using namespace }\hyperlink{namespacestd}{std};
00025 
00026 \textcolor{keyword}{template}<\textcolor{keyword}{class} Interface>
00027 \textcolor{keyword}{class }\hyperlink{class_action__rot}{Action\_rot} \{
00028 
00029 public :
00030 
00031   \textcolor{comment}{// Ctor}
00032   BTL\_DONT\_INLINE \hyperlink{class_action__rot}{Action\_rot}( \textcolor{keywordtype}{int} size ):\_size(size)
00033   \{
00034     MESSAGE(\textcolor{stringliteral}{"Action\_rot Ctor"});
00035 
00036     \textcolor{comment}{// STL matrix and vector initialization}
00037     \textcolor{keyword}{typename} Interface::stl\_matrix tmp;
00038     init\_vector<pseudo\_random>(A\_stl,\_size);
00039     init\_vector<pseudo\_random>(B\_stl,\_size);
00040 
00041     \textcolor{comment}{// generic matrix and vector initialization}
00042     Interface::vector\_from\_stl(A\_ref,A\_stl);
00043     Interface::vector\_from\_stl(A,A\_stl);
00044     Interface::vector\_from\_stl(B\_ref,B\_stl);
00045     Interface::vector\_from\_stl(B,B\_stl);
00046   \}
00047 
00048   \textcolor{comment}{// invalidate copy ctor}
00049   \hyperlink{class_action__rot}{Action\_rot}( \textcolor{keyword}{const}  \hyperlink{class_action__rot}{Action\_rot} & )
00050   \{
00051     INFOS(\textcolor{stringliteral}{"illegal call to Action\_rot Copy Ctor"});
00052     exit(1);
00053   \}
00054 
00055   \textcolor{comment}{// Dtor}
00056   BTL\_DONT\_INLINE ~\hyperlink{class_action__rot}{Action\_rot}( \textcolor{keywordtype}{void} )\{
00057     MESSAGE(\textcolor{stringliteral}{"Action\_rot Dtor"});
00058     Interface::free\_vector(A);
00059     Interface::free\_vector(B);
00060     Interface::free\_vector(A\_ref);
00061     Interface::free\_vector(B\_ref);
00062   \}
00063 
00064   \textcolor{comment}{// action name}
00065   \textcolor{keyword}{static} \textcolor{keyword}{inline} std::string name( \textcolor{keywordtype}{void} )
00066   \{
00067     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"rot\_"} + Interface::name();
00068   \}
00069 
00070   \textcolor{keywordtype}{double} nb\_op\_base( \textcolor{keywordtype}{void} )\{
00071     \textcolor{keywordflow}{return} 6.0*\_size;
00072   \}
00073 
00074   BTL\_DONT\_INLINE  \textcolor{keywordtype}{void} initialize( \textcolor{keywordtype}{void} )\{
00075     Interface::copy\_vector(A\_ref,A,\_size);
00076     Interface::copy\_vector(B\_ref,B,\_size);
00077   \}
00078 
00079   BTL\_DONT\_INLINE \textcolor{keywordtype}{void} calculate( \textcolor{keywordtype}{void} ) \{
00080     BTL\_ASM\_COMMENT(\textcolor{stringliteral}{"#begin rot"});
00081     Interface::rot(A,B,0.5,0.6,\_size);
00082     BTL\_ASM\_COMMENT(\textcolor{stringliteral}{"end rot"});
00083   \}
00084 
00085   BTL\_DONT\_INLINE \textcolor{keywordtype}{void} check\_result( \textcolor{keywordtype}{void} )\{
00086     \textcolor{comment}{// calculation check}
00087 \textcolor{comment}{//     Interface::vector\_to\_stl(X,resu\_stl);}
00088 
00089 \textcolor{comment}{//     STL\_interface<typename Interface::real\_type>::rot(A\_stl,B\_stl,X\_stl,\_size);}
00090 
00091 \textcolor{comment}{//     typename Interface::real\_type error=}
00092 \textcolor{comment}{//       STL\_interface<typename Interface::real\_type>::norm\_diff(X\_stl,resu\_stl);}
00093 
00094 \textcolor{comment}{//     if (error>1.e-3)\{}
00095 \textcolor{comment}{//       INFOS("WRONG CALCULATION...residual=" << error);}
00096 \textcolor{comment}{//       exit(0);}
00097 \textcolor{comment}{//     \}}
00098 
00099   \}
00100 
00101 private :
00102 
00103   \textcolor{keyword}{typename} Interface::stl\_vector A\_stl;
00104   \textcolor{keyword}{typename} Interface::stl\_vector B\_stl;
00105 
00106   \textcolor{keyword}{typename} Interface::gene\_vector A\_ref;
00107   \textcolor{keyword}{typename} Interface::gene\_vector B\_ref;
00108 
00109   \textcolor{keyword}{typename} Interface::gene\_vector A;
00110   \textcolor{keyword}{typename} Interface::gene\_vector B;
00111 
00112   \textcolor{keywordtype}{int} \_size;
00113 \};
00114 
00115 
00116 \textcolor{preprocessor}{#endif}
\end{DoxyCode}
