\hypertarget{matio_2visual__studio_2test_2eigen_2test_2eigen2support_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/test/eigen2support.cpp}
\label{matio_2visual__studio_2test_2eigen_2test_2eigen2support_8cpp_source}\index{eigen2support.\+cpp@{eigen2support.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2009 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#define EIGEN2\_SUPPORT}
00011 
00012 \textcolor{preprocessor}{#include "main.h"}
00013 
00014 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType> \textcolor{keywordtype}{void} eigen2support(\textcolor{keyword}{const} MatrixType& m)
00015 \{
00016   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Index \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
00017   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Scalar Scalar;
00018 
00019   Index rows = m.rows();
00020   Index cols = m.cols();
00021 
00022   MatrixType m1 = MatrixType::Random(rows, cols),
00023              m3(rows, cols);
00024 
00025   Scalar  s1 = internal::random<Scalar>(),
00026           s2 = internal::random<Scalar>();
00027 
00028   \textcolor{comment}{// scalar addition}
00029   VERIFY\_IS\_APPROX(m1.cwise() + s1, s1 + m1.cwise());
00030   VERIFY\_IS\_APPROX(m1.cwise() + s1, MatrixType::Constant(rows,cols,s1) + m1);
00031   VERIFY\_IS\_APPROX((m1*Scalar(2)).cwise() - s2, (m1+m1) - MatrixType::Constant(rows,cols,s2) );
00032   m3 = m1;
00033   m3.cwise() += s2;
00034   VERIFY\_IS\_APPROX(m3, m1.cwise() + s2);
00035   m3 = m1;
00036   m3.cwise() -= s1;
00037   VERIFY\_IS\_APPROX(m3, m1.cwise() - s1);
00038 
00039   VERIFY\_IS\_EQUAL((m1.corner(TopLeft,1,1)), (m1.block(0,0,1,1)));
00040   VERIFY\_IS\_EQUAL((m1.template corner<1,1>(TopLeft)), (m1.template block<1,1>(0,0)));
00041   VERIFY\_IS\_EQUAL((m1.col(0).start(1)), (m1.col(0).segment(0,1)));
00042   VERIFY\_IS\_EQUAL((m1.col(0).template start<1>()), (m1.col(0).segment(0,1)));
00043   VERIFY\_IS\_EQUAL((m1.col(0).end(1)), (m1.col(0).segment(rows-1,1)));
00044   VERIFY\_IS\_EQUAL((m1.col(0).template end<1>()), (m1.col(0).segment(rows-1,1)));
00045   
00046   \textcolor{keyword}{using} std::cos;
00047   \textcolor{keyword}{using} numext::real;
00048   \textcolor{keyword}{using} numext::abs2;
00049   VERIFY\_IS\_EQUAL(ei\_cos(s1), cos(s1));
00050   VERIFY\_IS\_EQUAL(ei\_real(s1), real(s1));
00051   VERIFY\_IS\_EQUAL(ei\_abs2(s1), abs2(s1));
00052 
00053   m1.minor(0,0);
00054 \}
00055 
00056 \textcolor{keywordtype}{void} test\_eigen2support()
00057 \{
00058   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++) \{
00059     CALL\_SUBTEST\_1( eigen2support(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<double,1,1>}()) );
00060     CALL\_SUBTEST\_2( eigen2support(MatrixXd(1,1)) );
00061     CALL\_SUBTEST\_4( eigen2support(Matrix3f()) );
00062     CALL\_SUBTEST\_5( eigen2support(Matrix4d()) );
00063     CALL\_SUBTEST\_2( eigen2support(MatrixXf(200,200)) );
00064     CALL\_SUBTEST\_6( eigen2support(MatrixXcd(100,100)) );
00065   \}
00066 \}
\end{DoxyCode}
