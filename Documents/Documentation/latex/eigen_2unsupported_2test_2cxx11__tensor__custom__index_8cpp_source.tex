\hypertarget{eigen_2unsupported_2test_2cxx11__tensor__custom__index_8cpp_source}{}\section{eigen/unsupported/test/cxx11\+\_\+tensor\+\_\+custom\+\_\+index.cpp}
\label{eigen_2unsupported_2test_2cxx11__tensor__custom__index_8cpp_source}\index{cxx11\+\_\+tensor\+\_\+custom\+\_\+index.\+cpp@{cxx11\+\_\+tensor\+\_\+custom\+\_\+index.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2015 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 \textcolor{preprocessor}{#include <limits>}
00012 \textcolor{preprocessor}{#include <map>}
00013 
00014 \textcolor{preprocessor}{#include <Eigen/Dense>}
00015 \textcolor{preprocessor}{#include <Eigen/CXX11/Tensor>}
00016 
00017 \textcolor{keyword}{using} \hyperlink{class_eigen_1_1_tensor}{Eigen::Tensor};
00018 
00019 
00020 \textcolor{keyword}{template} <\textcolor{keywordtype}{int} DataLayout>
00021 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_map\_as\_index()
00022 \{
00023 \textcolor{preprocessor}{#ifdef EIGEN\_HAS\_SFINAE}
00024   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} tensor(2, 3, 5, 7);
00025   tensor.setRandom();
00026 
00027   \textcolor{keyword}{using} NormalIndex = DSizes<ptrdiff\_t, 4>;
00028   \textcolor{keyword}{using} CustomIndex = std::map<ptrdiff\_t, ptrdiff\_t>;
00029   CustomIndex coeffC;
00030   coeffC[0] = 1;
00031   coeffC[1] = 2;
00032   coeffC[2] = 4;
00033   coeffC[3] = 1;
00034   NormalIndex coeff(1,2,4,1);
00035 
00036   VERIFY\_IS\_EQUAL(tensor.coeff(coeffC), tensor.coeff(coeff));
00037   VERIFY\_IS\_EQUAL(tensor.coeffRef(coeffC), tensor.coeffRef(coeff));
00038 \textcolor{preprocessor}{#endif}
00039 \}
00040 
00041 
00042 \textcolor{keyword}{template} <\textcolor{keywordtype}{int} DataLayout>
00043 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_matrix\_as\_index()
00044 \{
00045 \textcolor{preprocessor}{#ifdef EIGEN\_HAS\_SFINAE}
00046   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} tensor(2, 3, 5, 7);
00047   tensor.setRandom();
00048 
00049   \textcolor{keyword}{using} NormalIndex = DSizes<ptrdiff\_t, 4>;
00050   \textcolor{keyword}{using} CustomIndex = Matrix<unsigned int, 4, 1>;
00051   CustomIndex coeffC(1,2,4,1);
00052   NormalIndex coeff(1,2,4,1);
00053 
00054   VERIFY\_IS\_EQUAL(tensor.coeff(coeffC), tensor.coeff(coeff));
00055   VERIFY\_IS\_EQUAL(tensor.coeffRef(coeffC), tensor.coeffRef(coeff));
00056 \textcolor{preprocessor}{#endif}
00057 \}
00058 
00059 
00060 \textcolor{keyword}{template} <\textcolor{keywordtype}{int} DataLayout>
00061 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_varlist\_as\_index()
00062 \{
00063 \textcolor{preprocessor}{#ifdef EIGEN\_HAS\_SFINAE}
00064   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} tensor(2, 3, 5, 7);
00065   tensor.setRandom();
00066 
00067   DSizes<ptrdiff\_t, 4> coeff(1,2,4,1);
00068 
00069   VERIFY\_IS\_EQUAL(tensor.coeff(\{1,2,4,1\}), tensor.coeff(coeff));
00070   VERIFY\_IS\_EQUAL(tensor.coeffRef(\{1,2,4,1\}), tensor.coeffRef(coeff));
00071 \textcolor{preprocessor}{#endif}
00072 \}
00073 
00074 
00075 \textcolor{keyword}{template} <\textcolor{keywordtype}{int} DataLayout>
00076 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_sizes\_as\_index()
00077 \{
00078 \textcolor{preprocessor}{#ifdef EIGEN\_HAS\_SFINAE}
00079   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} tensor(2, 3, 5, 7);
00080   tensor.setRandom();
00081 
00082   DSizes<ptrdiff\_t, 4> coeff(1,2,4,1);
00083   Sizes<1,2,4,1> coeffC;
00084 
00085   VERIFY\_IS\_EQUAL(tensor.coeff(coeffC), tensor.coeff(coeff));
00086   VERIFY\_IS\_EQUAL(tensor.coeffRef(coeffC), tensor.coeffRef(coeff));
00087 \textcolor{preprocessor}{#endif}
00088 \}
00089 
00090 
00091 \textcolor{keywordtype}{void} test\_cxx11\_tensor\_custom\_index() \{
00092   test\_map\_as\_index<ColMajor>();
00093   test\_map\_as\_index<RowMajor>();
00094   test\_matrix\_as\_index<ColMajor>();
00095   test\_matrix\_as\_index<RowMajor>();
00096   test\_varlist\_as\_index<ColMajor>();
00097   test\_varlist\_as\_index<RowMajor>();
00098   test\_sizes\_as\_index<ColMajor>();
00099   test\_sizes\_as\_index<RowMajor>();
00100 \}
\end{DoxyCode}
