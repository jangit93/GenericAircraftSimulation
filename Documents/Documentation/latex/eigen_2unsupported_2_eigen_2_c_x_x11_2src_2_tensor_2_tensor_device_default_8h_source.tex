\hypertarget{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_device_default_8h_source}{}\section{eigen/unsupported/\+Eigen/\+C\+X\+X11/src/\+Tensor/\+Tensor\+Device\+Default.h}
\label{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_device_default_8h_source}\index{Tensor\+Device\+Default.\+h@{Tensor\+Device\+Default.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_CXX11\_TENSOR\_TENSOR\_DEVICE\_DEFAULT\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_CXX11\_TENSOR\_TENSOR\_DEVICE\_DEFAULT\_H}
00012 
00013 
00014 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00015 
00016 \textcolor{comment}{// Default device for the machine (typically a single cpu core)}
\Hypertarget{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_device_default_8h_source_l00017}\hyperlink{struct_eigen_1_1_default_device}{00017} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1_default_device}{DefaultDevice} \{
00018   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void}* allocate(\textcolor{keywordtype}{size\_t} num\_bytes)\textcolor{keyword}{ const }\{
00019     \textcolor{keywordflow}{return} internal::aligned\_malloc(num\_bytes);
00020   \}
00021   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} deallocate(\textcolor{keywordtype}{void}* buffer)\textcolor{keyword}{ const }\{
00022     internal::aligned\_free(buffer);
00023   \}
00024   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} memcpy(\textcolor{keywordtype}{void}* dst, \textcolor{keyword}{const} \textcolor{keywordtype}{void}* src, \textcolor{keywordtype}{size\_t} n)\textcolor{keyword}{ const }\{
00025     ::memcpy(dst, src, n);
00026   \}
00027   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} memcpyHostToDevice(\textcolor{keywordtype}{void}* dst, \textcolor{keyword}{const} \textcolor{keywordtype}{void}* src, \textcolor{keywordtype}{size\_t} n)\textcolor{keyword}{ const
       }\{
00028     memcpy(dst, src, n);
00029   \}
00030   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} memcpyDeviceToHost(\textcolor{keywordtype}{void}* dst, \textcolor{keyword}{const} \textcolor{keywordtype}{void}* src, \textcolor{keywordtype}{size\_t} n)\textcolor{keyword}{ const
       }\{
00031     memcpy(dst, src, n);
00032   \}
00033   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} memset(\textcolor{keywordtype}{void}* buffer, \textcolor{keywordtype}{int} c, \textcolor{keywordtype}{size\_t} n)\textcolor{keyword}{ const }\{
00034     ::memset(buffer, c, n);
00035   \}
00036 
00037   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{size\_t} numThreads()\textcolor{keyword}{ const }\{
00038 \textcolor{preprocessor}{#ifndef \_\_CUDA\_ARCH\_\_}
00039     \textcolor{comment}{// Running on the host CPU}
00040     \textcolor{keywordflow}{return} 1;
00041 \textcolor{preprocessor}{#else}
00042     \textcolor{comment}{// Running on a CUDA device}
00043     \textcolor{keywordflow}{return} 32;
00044 \textcolor{preprocessor}{#endif}
00045   \}
00046 
00047   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{size\_t} firstLevelCacheSize()\textcolor{keyword}{ const }\{
00048 \textcolor{preprocessor}{#ifndef \_\_CUDA\_ARCH\_\_}
00049     \textcolor{comment}{// Running on the host CPU}
00050     \textcolor{keywordflow}{return} \hyperlink{namespace_eigen_a2669f89ff38296a38e6d973552eb4e33}{l1CacheSize}();
00051 \textcolor{preprocessor}{#else}
00052     \textcolor{comment}{// Running on a CUDA device, return the amount of shared memory available.}
00053     \textcolor{keywordflow}{return} 48*1024;
00054 \textcolor{preprocessor}{#endif}
00055   \}
00056 
00057   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{size\_t} lastLevelCacheSize()\textcolor{keyword}{ const }\{
00058 \textcolor{preprocessor}{#ifndef \_\_CUDA\_ARCH\_\_}
00059     \textcolor{comment}{// Running single threaded on the host CPU}
00060     \textcolor{keywordflow}{return} \hyperlink{namespace_eigen_ae2efa4852ea90c2d47b7dcec5b40ba2b}{l3CacheSize}();
00061 \textcolor{preprocessor}{#else}
00062     \textcolor{comment}{// Running on a CUDA device}
00063     \textcolor{keywordflow}{return} firstLevelCacheSize();
00064 \textcolor{preprocessor}{#endif}
00065   \}
00066 
00067   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{int} majorDeviceVersion()\textcolor{keyword}{ const }\{
00068 \textcolor{preprocessor}{#ifndef \_\_CUDA\_ARCH\_\_}
00069     \textcolor{comment}{// Running single threaded on the host CPU}
00070     \textcolor{comment}{// Should return an enum that encodes the ISA supported by the CPU}
00071     \textcolor{keywordflow}{return} 1;
00072 \textcolor{preprocessor}{#else}
00073     \textcolor{comment}{// Running on a CUDA device}
00074     \textcolor{keywordflow}{return} \_\_CUDA\_ARCH\_\_ / 100;
00075 \textcolor{preprocessor}{#endif}
00076   \}
00077 \};
00078 
00079 \}  \textcolor{comment}{// namespace Eigen}
00080 
00081 \textcolor{preprocessor}{#endif // EIGEN\_CXX11\_TENSOR\_TENSOR\_DEVICE\_DEFAULT\_H}
\end{DoxyCode}
