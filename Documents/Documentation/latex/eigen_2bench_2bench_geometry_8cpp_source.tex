\hypertarget{eigen_2bench_2bench_geometry_8cpp_source}{}\section{eigen/bench/bench\+Geometry.cpp}
\label{eigen_2bench_2bench_geometry_8cpp_source}\index{bench\+Geometry.\+cpp@{bench\+Geometry.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include <iostream>}
00002 \textcolor{preprocessor}{#include <iomanip>}
00003 \textcolor{preprocessor}{#include <Eigen/Core>}
00004 \textcolor{preprocessor}{#include <Eigen/Geometry>}
00005 \textcolor{preprocessor}{#include <bench/BenchTimer.h>}
00006 
00007 \textcolor{keyword}{using namespace }\hyperlink{namespace_eigen}{Eigen};
00008 \textcolor{keyword}{using namespace }\hyperlink{namespacestd}{std};
00009 
00010 \textcolor{preprocessor}{#ifndef REPEAT}
00011 \textcolor{preprocessor}{#define REPEAT 1000000}
00012 \textcolor{preprocessor}{#endif}
00013 
00014 \textcolor{keyword}{enum} func\_opt
00015 \{
00016     TV,
00017     TMATV,
00018     TMATVMAT,
00019 \};
00020 
00021 
00022 \textcolor{keyword}{template} <\textcolor{keyword}{class} res, \textcolor{keyword}{class} arg1, \textcolor{keyword}{class} arg2, \textcolor{keywordtype}{int} opt>
\Hypertarget{eigen_2bench_2bench_geometry_8cpp_source_l00023}\hyperlink{structfunc}{00023} \textcolor{keyword}{struct }\hyperlink{structfunc}{func};
00024 
00025 \textcolor{keyword}{template} <\textcolor{keyword}{class} res, \textcolor{keyword}{class} arg1, \textcolor{keyword}{class} arg2>
\Hypertarget{eigen_2bench_2bench_geometry_8cpp_source_l00026}\hyperlink{structfunc_3_01res_00_01arg1_00_01arg2_00_01_t_v_01_4}{00026} \textcolor{keyword}{struct }\hyperlink{structfunc}{func}<res, arg1, arg2, TV>
00027 \{
00028     \textcolor{keyword}{static} EIGEN\_DONT\_INLINE res run( arg1& a1, arg2& a2 )
00029     \{
00030     \textcolor{keyword}{asm} (\textcolor{stringliteral}{""});
00031     \textcolor{keywordflow}{return} a1 * a2;
00032     \}
00033 \};
00034 
00035 \textcolor{keyword}{template} <\textcolor{keyword}{class} res, \textcolor{keyword}{class} arg1, \textcolor{keyword}{class} arg2>
\Hypertarget{eigen_2bench_2bench_geometry_8cpp_source_l00036}\hyperlink{structfunc_3_01res_00_01arg1_00_01arg2_00_01_t_m_a_t_v_01_4}{00036} \textcolor{keyword}{struct }\hyperlink{structfunc}{func}<res, arg1, arg2, TMATV>
00037 \{
00038     \textcolor{keyword}{static} EIGEN\_DONT\_INLINE res run( arg1& a1, arg2& a2 )
00039     \{
00040     \textcolor{keyword}{asm} (\textcolor{stringliteral}{""});
00041     \textcolor{keywordflow}{return} a1.matrix() * a2;
00042     \}
00043 \};
00044 
00045 \textcolor{keyword}{template} <\textcolor{keyword}{class} res, \textcolor{keyword}{class} arg1, \textcolor{keyword}{class} arg2>
\Hypertarget{eigen_2bench_2bench_geometry_8cpp_source_l00046}\hyperlink{structfunc_3_01res_00_01arg1_00_01arg2_00_01_t_m_a_t_v_m_a_t_01_4}{00046} \textcolor{keyword}{struct }\hyperlink{structfunc}{func}<res, arg1, arg2, TMATVMAT>
00047 \{
00048     \textcolor{keyword}{static} EIGEN\_DONT\_INLINE res run( arg1& a1, arg2& a2 )
00049     \{
00050     \textcolor{keyword}{asm} (\textcolor{stringliteral}{""});
00051     \textcolor{keywordflow}{return} res(a1.matrix() * a2.matrix());
00052     \}
00053 \};
00054 
00055 \textcolor{keyword}{template} <\textcolor{keyword}{class} func, \textcolor{keyword}{class} arg1, \textcolor{keyword}{class} arg2>
\Hypertarget{eigen_2bench_2bench_geometry_8cpp_source_l00056}\hyperlink{structtest__transform}{00056} \textcolor{keyword}{struct }\hyperlink{structtest__transform}{test\_transform}
00057 \{
00058     \textcolor{keyword}{static} \textcolor{keywordtype}{void} run()
00059     \{
00060     arg1 a1;
00061     a1.setIdentity();
00062     arg2 a2;
00063     a2.setIdentity();
00064 
00065     \hyperlink{class_eigen_1_1_bench_timer}{BenchTimer} timer;
00066     timer.reset();
00067     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k=0; k<10; ++k)
00068     \{
00069         timer.start();
00070         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k=0; k<REPEAT; ++k)
00071         a2 = func::run( a1, a2 );
00072         timer.stop();
00073     \}
00074     cout << setprecision(4) << fixed << timer.\hyperlink{class_eigen_1_1_bench_timer_a26760f963ed8b64c126159bfea57735e}{value}() << \textcolor{stringliteral}{"s  "} << endl;;
00075     \}
00076 \};
00077 
00078 
00079 \textcolor{preprocessor}{#define run\_vec( op, scalar, mode, option, vsize ) \(\backslash\)}
00080 \textcolor{preprocessor}{    std::cout << #scalar << "\(\backslash\)t " << #mode << "\(\backslash\)t " << #option << " " << #vsize " "; \(\backslash\)}
00081 \textcolor{preprocessor}{    \{\(\backslash\)}
00082 \textcolor{preprocessor}{    typedef Transform<scalar, 3, mode, option> Trans;\(\backslash\)}
00083 \textcolor{preprocessor}{    typedef Matrix<scalar, vsize, 1, option> Vec;\(\backslash\)}
00084 \textcolor{preprocessor}{    typedef func<Vec,Trans,Vec,op> Func;\(\backslash\)}
00085 \textcolor{preprocessor}{    test\_transform< Func, Trans, Vec >::run();\(\backslash\)}
00086 \textcolor{preprocessor}{    \}}
00087 
00088 \textcolor{preprocessor}{#define run\_trans( op, scalar, mode, option ) \(\backslash\)}
00089 \textcolor{preprocessor}{    std::cout << #scalar << "\(\backslash\)t " << #mode << "\(\backslash\)t " << #option << "   "; \(\backslash\)}
00090 \textcolor{preprocessor}{    \{\(\backslash\)}
00091 \textcolor{preprocessor}{    typedef Transform<scalar, 3, mode, option> Trans;\(\backslash\)}
00092 \textcolor{preprocessor}{    typedef func<Trans,Trans,Trans,op> Func;\(\backslash\)}
00093 \textcolor{preprocessor}{    test\_transform< Func, Trans, Trans >::run();\(\backslash\)}
00094 \textcolor{preprocessor}{    \}}
00095 
00096 \textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}* argv[])
00097 \{
00098     cout << \textcolor{stringliteral}{"vec = trans * vec"} << endl;
00099     run\_vec(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign}, 3);
00100     run\_vec(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}, 3);
00101     run\_vec(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign}, 4);
00102     run\_vec(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}, 4);
00103     run\_vec(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107aead6a2de12a17aaa4f5c523215dfccad}{Projective}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign}, 4);
00104     run\_vec(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107aead6a2de12a17aaa4f5c523215dfccad}{Projective}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}, 4);
00105     run\_vec(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign}, 3);
00106     run\_vec(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}, 3);
00107     run\_vec(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign}, 4);
00108     run\_vec(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}, 4);
00109     run\_vec(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107aead6a2de12a17aaa4f5c523215dfccad}{Projective}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign}, 4);
00110     run\_vec(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107aead6a2de12a17aaa4f5c523215dfccad}{Projective}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}, 4);
00111 
00112     cout << \textcolor{stringliteral}{"vec = trans.matrix() * vec"} << endl;
00113     run\_vec(TMATV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign}, 4);
00114     run\_vec(TMATV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}, 4);
00115     run\_vec(TMATV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign}, 4);
00116     run\_vec(TMATV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}, 4);
00117 
00118     cout << \textcolor{stringliteral}{"trans = trans1 * trans"} << endl;
00119     run\_trans(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign});
00120     run\_trans(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign});
00121     run\_trans(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign});
00122     run\_trans(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign});
00123     run\_trans(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107aead6a2de12a17aaa4f5c523215dfccad}{Projective}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign});
00124     run\_trans(TV, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107aead6a2de12a17aaa4f5c523215dfccad}{Projective}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign});
00125     run\_trans(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107aead6a2de12a17aaa4f5c523215dfccad}{Projective}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign});
00126     run\_trans(TV, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107aead6a2de12a17aaa4f5c523215dfccad}{Projective}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign});
00127 
00128     cout << \textcolor{stringliteral}{"trans = trans1.matrix() * trans.matrix()"} << endl;
00129     run\_trans(TMATVMAT, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign});
00130     run\_trans(TMATVMAT, \textcolor{keywordtype}{float},  \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign});
00131     run\_trans(TMATVMAT, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a28d63c0dd8560827162decfd898804f4}{AutoAlign});
00132     run\_trans(TMATVMAT, \textcolor{keywordtype}{double}, \hyperlink{group__enums_ggaee59a86102f150923b0cac6d4ff05107a080cd5366173608f701cd945c2335568}{Isometry}, \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign});
00133 \}
00134 
\end{DoxyCode}
