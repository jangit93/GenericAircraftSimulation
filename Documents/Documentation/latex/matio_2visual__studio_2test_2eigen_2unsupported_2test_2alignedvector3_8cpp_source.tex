\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2alignedvector3_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/alignedvector3.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2alignedvector3_8cpp_source}\index{alignedvector3.\+cpp@{alignedvector3.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2009 Gael Guennebaud <g.gael@free.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 \textcolor{preprocessor}{#include <unsupported/Eigen/AlignedVector3>}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00014 
00015 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T,\textcolor{keyword}{typename} Derived>
00016 \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} test\_relative\_error(\textcolor{keyword}{const} AlignedVector3<T> &a, \textcolor{keyword}{const} MatrixBase<Derived> &b)
00017 \{
00018   \textcolor{keywordflow}{return} test\_relative\_error(a.coeffs().template head<3>(), b);
00019 \}
00020 
00021 \}
00022 
00023 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar>
00024 \textcolor{keywordtype}{void} alignedvector3()
00025 \{
00026   Scalar s1 = internal::random<Scalar>();
00027   Scalar s2 = internal::random<Scalar>();
00028   \textcolor{keyword}{typedef} Matrix<Scalar,3,1> RefType;
00029   \textcolor{keyword}{typedef} Matrix<Scalar,3,3> Mat33;
00030   \textcolor{keyword}{typedef} AlignedVector3<Scalar> FastType;
00031   RefType  r1(RefType::Random()), r2(RefType::Random()), r3(RefType::Random()),
00032            r4(RefType::Random()), r5(RefType::Random());
00033   FastType f1(r1), f2(r2), f3(r3), f4(r4), f5(r5);
00034   Mat33 m1(Mat33::Random());
00035   
00036   VERIFY\_IS\_APPROX(f1,r1);
00037   VERIFY\_IS\_APPROX(f4,r4);
00038 
00039   VERIFY\_IS\_APPROX(f4+f1,r4+r1);
00040   VERIFY\_IS\_APPROX(f4-f1,r4-r1);
00041   VERIFY\_IS\_APPROX(f4+f1-f2,r4+r1-r2);
00042   VERIFY\_IS\_APPROX(f4+=f3,r4+=r3);
00043   VERIFY\_IS\_APPROX(f4-=f5,r4-=r5);
00044   VERIFY\_IS\_APPROX(f4-=f5+f1,r4-=r5+r1);
00045   VERIFY\_IS\_APPROX(f5+f1-s1*f2,r5+r1-s1*r2);
00046   VERIFY\_IS\_APPROX(f5+f1/s2-s1*f2,r5+r1/s2-s1*r2);
00047   
00048   VERIFY\_IS\_APPROX(m1*f4,m1*r4);
00049   VERIFY\_IS\_APPROX(f4.transpose()*m1,r4.transpose()*m1);
00050   
00051   VERIFY\_IS\_APPROX(f2.dot(f3),r2.dot(r3));
00052   VERIFY\_IS\_APPROX(f2.cross(f3),r2.cross(r3));
00053   VERIFY\_IS\_APPROX(f2.norm(),r2.norm());
00054 
00055   VERIFY\_IS\_APPROX(f2.normalized(),r2.normalized());
00056 
00057   VERIFY\_IS\_APPROX((f2+f1).normalized(),(r2+r1).normalized());
00058   
00059   f2.normalize();
00060   r2.normalize();
00061   VERIFY\_IS\_APPROX(f2,r2);
00062   
00063   \{
00064     FastType f6 = RefType::Zero();
00065     FastType f7 = FastType::Zero();
00066     VERIFY\_IS\_APPROX(f6,f7);
00067     f6 = r4+r1;
00068     VERIFY\_IS\_APPROX(f6,r4+r1);
00069     f6 -= Scalar(2)*r4;
00070     VERIFY\_IS\_APPROX(f6,r1-r4);
00071   \}
00072   
00073   std::stringstream ss1, ss2;
00074   ss1 << f1;
00075   ss2 << r1;
00076   VERIFY(ss1.str()==ss2.str());
00077 \}
00078 
00079 \textcolor{keywordtype}{void} test\_alignedvector3()
00080 \{
00081   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++) \{
00082     CALL\_SUBTEST( alignedvector3<float>() );
00083   \}
00084 \}
\end{DoxyCode}
