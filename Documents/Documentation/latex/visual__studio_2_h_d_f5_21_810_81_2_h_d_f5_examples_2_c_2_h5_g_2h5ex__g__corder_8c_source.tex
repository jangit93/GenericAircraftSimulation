\hypertarget{visual__studio_2_h_d_f5_21_810_81_2_h_d_f5_examples_2_c_2_h5_g_2h5ex__g__corder_8c_source}{}\section{visual\+\_\+studio/\+H\+D\+F5/1.10.1/\+H\+D\+F5\+Examples/\+C/\+H5\+G/h5ex\+\_\+g\+\_\+corder.c}
\label{visual__studio_2_h_d_f5_21_810_81_2_h_d_f5_examples_2_c_2_h5_g_2h5ex__g__corder_8c_source}\index{h5ex\+\_\+g\+\_\+corder.\+c@{h5ex\+\_\+g\+\_\+corder.\+c}}

\begin{DoxyCode}
00001 \textcolor{comment}{/************************************************************}
00002 \textcolor{comment}{}
00003 \textcolor{comment}{  This example shows how to track links in a group by}
00004 \textcolor{comment}{  creation order.  The program creates a series of groups,}
00005 \textcolor{comment}{  then reads back their names: first in alphabetical order,}
00006 \textcolor{comment}{  then in creation order.}
00007 \textcolor{comment}{}
00008 \textcolor{comment}{  This file is intended for use with HDF5 Library version 1.8}
00009 \textcolor{comment}{}
00010 \textcolor{comment}{ ************************************************************/}
00011 
00012 \textcolor{preprocessor}{#include "hdf5.h"}
00013 \textcolor{preprocessor}{#include <stdio.h>}
00014 \textcolor{preprocessor}{#include <stdlib.h>}
00015 
00016 \textcolor{preprocessor}{#define FILE       "h5ex\_g\_corder.h5"}
00017 
00018 \textcolor{keywordtype}{int}
00019 main (\textcolor{keywordtype}{void})
00020 \{
00021     hid\_t       \hyperlink{structfile}{file}, group, subgroup, gcpl;        \textcolor{comment}{/* Handles */}
00022     herr\_t      status;
00023     \hyperlink{struct_h5_g__info__t}{H5G\_info\_t}  ginfo;
00024     ssize\_t     size;                               \textcolor{comment}{/* Size of name */}
00025     hsize\_t     i;                                  \textcolor{comment}{/* Index */}
00026     \textcolor{keywordtype}{char}        *name;                              \textcolor{comment}{/* Output buffer */}
00027 
00028     \textcolor{comment}{/*}
00029 \textcolor{comment}{     * Create a new file using the default properties.}
00030 \textcolor{comment}{     */}
00031     file = H5Fcreate (FILE, H5F\_ACC\_TRUNC, H5P\_DEFAULT, H5P\_DEFAULT);
00032 
00033     \textcolor{comment}{/*}
00034 \textcolor{comment}{     * Create group creation property list and enable link creation}
00035 \textcolor{comment}{     * order tracking.  Attempting to track by creation order in a}
00036 \textcolor{comment}{     * group that does not have this property set will result in an}
00037 \textcolor{comment}{     * error.}
00038 \textcolor{comment}{     */}
00039     gcpl = H5Pcreate (H5P\_GROUP\_CREATE);
00040     status = H5Pset\_link\_creation\_order( gcpl, H5P\_CRT\_ORDER\_TRACKED |
00041                 H5P\_CRT\_ORDER\_INDEXED );
00042 
00043     \textcolor{comment}{/*}
00044 \textcolor{comment}{     * Create primary group using the property list.}
00045 \textcolor{comment}{     */}
00046     group = H5Gcreate (file, \textcolor{stringliteral}{"index\_group"}, H5P\_DEFAULT, gcpl, H5P\_DEFAULT);
00047 
00048     \textcolor{comment}{/*}
00049 \textcolor{comment}{     * Create subgroups in the primary group.  These will be tracked}
00050 \textcolor{comment}{     * by creation order.  Note that these groups do not have to have}
00051 \textcolor{comment}{     * the creation order tracking property set.}
00052 \textcolor{comment}{     */}
00053     subgroup = H5Gcreate (group, \textcolor{stringliteral}{"H"}, H5P\_DEFAULT, H5P\_DEFAULT, H5P\_DEFAULT);
00054     status = H5Gclose (subgroup);
00055     subgroup = H5Gcreate (group, \textcolor{stringliteral}{"D"}, H5P\_DEFAULT, H5P\_DEFAULT, H5P\_DEFAULT);
00056     status = H5Gclose (subgroup);
00057     subgroup = H5Gcreate (group, \textcolor{stringliteral}{"F"}, H5P\_DEFAULT, H5P\_DEFAULT, H5P\_DEFAULT);
00058     status = H5Gclose (subgroup);
00059     subgroup = H5Gcreate (group, \textcolor{stringliteral}{"5"}, H5P\_DEFAULT, H5P\_DEFAULT, H5P\_DEFAULT);
00060     status = H5Gclose (subgroup);
00061 
00062     \textcolor{comment}{/*}
00063 \textcolor{comment}{     * Get group info.}
00064 \textcolor{comment}{     */}
00065     status = H5Gget\_info (group, &ginfo);
00066 
00067     \textcolor{comment}{/*}
00068 \textcolor{comment}{     * Traverse links in the primary group using alphabetical indices}
00069 \textcolor{comment}{     * (H5\_INDEX\_NAME).}
00070 \textcolor{comment}{     */}
00071     printf(\textcolor{stringliteral}{"Traversing group using alphabetical indices:\(\backslash\)n\(\backslash\)n"});
00072     \textcolor{keywordflow}{for} (i=0; i<ginfo.nlinks; i++) \{
00073 
00074         \textcolor{comment}{/*}
00075 \textcolor{comment}{         * Get size of name, add 1 for null terminator.}
00076 \textcolor{comment}{         */}
00077         size = 1 + H5Lget\_name\_by\_idx (group, \textcolor{stringliteral}{"."}, H5\_INDEX\_NAME, H5\_ITER\_INC,
00078                     i, NULL, 0, H5P\_DEFAULT);
00079 
00080         \textcolor{comment}{/*}
00081 \textcolor{comment}{         * Allocate storage for name.}
00082 \textcolor{comment}{         */}
00083         name = (\textcolor{keywordtype}{char} *) malloc (size);
00084 
00085         \textcolor{comment}{/*}
00086 \textcolor{comment}{         * Retrieve name, print it, and free the previously allocated}
00087 \textcolor{comment}{         * space.}
00088 \textcolor{comment}{         */}
00089         size = H5Lget\_name\_by\_idx (group, \textcolor{stringliteral}{"."}, H5\_INDEX\_NAME, H5\_ITER\_INC, i, name,
00090                     (\textcolor{keywordtype}{size\_t}) size, H5P\_DEFAULT);
00091         printf (\textcolor{stringliteral}{"Index %d: %s\(\backslash\)n"}, (\textcolor{keywordtype}{int}) i, name);
00092         free (name);
00093     \}
00094 
00095     \textcolor{comment}{/*}
00096 \textcolor{comment}{     * Traverse links in the primary group by creation order}
00097 \textcolor{comment}{     * (H5\_INDEX\_CRT\_ORDER).}
00098 \textcolor{comment}{     */}
00099     printf(\textcolor{stringliteral}{"\(\backslash\)nTraversing group using creation order indices:\(\backslash\)n\(\backslash\)n"});
00100     \textcolor{keywordflow}{for} (i=0; i<ginfo.nlinks; i++) \{
00101 
00102         \textcolor{comment}{/*}
00103 \textcolor{comment}{         * Get size of name, add 1 for null terminator.}
00104 \textcolor{comment}{         */}
00105         size = 1 + H5Lget\_name\_by\_idx (group, \textcolor{stringliteral}{"."}, H5\_INDEX\_CRT\_ORDER,
00106                     H5\_ITER\_INC, i, NULL, 0, H5P\_DEFAULT);
00107 
00108         \textcolor{comment}{/*}
00109 \textcolor{comment}{         * Allocate storage for name.}
00110 \textcolor{comment}{         */}
00111         name = (\textcolor{keywordtype}{char} *) malloc (size);
00112 
00113         \textcolor{comment}{/*}
00114 \textcolor{comment}{         * Retrieve name, print it, and free the previously allocated}
00115 \textcolor{comment}{         * space.}
00116 \textcolor{comment}{         */}
00117         size = H5Lget\_name\_by\_idx (group, \textcolor{stringliteral}{"."}, H5\_INDEX\_CRT\_ORDER, H5\_ITER\_INC, i,
00118                     name, (\textcolor{keywordtype}{size\_t}) size, H5P\_DEFAULT);
00119         printf (\textcolor{stringliteral}{"Index %d: %s\(\backslash\)n"}, (\textcolor{keywordtype}{int}) i, name);
00120         free (name);
00121     \}
00122 
00123     \textcolor{comment}{/*}
00124 \textcolor{comment}{     * Close and release resources.}
00125 \textcolor{comment}{     */}
00126     status = H5Pclose (gcpl);
00127     status = H5Gclose (group);
00128     status = H5Fclose (file);
00129 
00130     \textcolor{keywordflow}{return} 0;
00131 \}
\end{DoxyCode}
