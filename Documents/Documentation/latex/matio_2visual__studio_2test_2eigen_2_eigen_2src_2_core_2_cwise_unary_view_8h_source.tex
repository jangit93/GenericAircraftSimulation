\hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_cwise_unary_view_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/\+Eigen/src/\+Core/\+Cwise\+Unary\+View.h}
\label{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_cwise_unary_view_8h_source}\index{Cwise\+Unary\+View.\+h@{Cwise\+Unary\+View.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2009-2010 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_CWISE\_UNARY\_VIEW\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_CWISE\_UNARY\_VIEW\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00014 
00015 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00016 \textcolor{keyword}{template}<\textcolor{keyword}{typename} ViewOp, \textcolor{keyword}{typename} MatrixType>
00017 \textcolor{keyword}{struct }traits<CwiseUnaryView<ViewOp, MatrixType> >
00018  : traits<MatrixType>
00019 \{
00020   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} result\_of<
00021                      ViewOp(\textcolor{keyword}{const} \textcolor{keyword}{typename} traits<MatrixType>::Scalar&)
00022                    >::type Scalar;
00023   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Nested MatrixTypeNested;
00024   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} remove\_all<MatrixTypeNested>::type \_MatrixTypeNested;
00025   \textcolor{keyword}{enum} \{
00026     FlagsLvalueBit = is\_lvalue<MatrixType>::value ? \hyperlink{group__flags_gae2c323957f20dfdc6cb8f44428eaec1a}{LvalueBit} : 0,
00027     Flags = traits<\_MatrixTypeNested>::Flags & (\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit} | FlagsLvalueBit | 
      \hyperlink{group__flags_gabf1e9d0516a933445a4c307ad8f14915}{DirectAccessBit}), \textcolor{comment}{// FIXME DirectAccessBit should not be handled by expressions}
00028     MatrixTypeInnerStride =  inner\_stride\_at\_compile\_time<MatrixType>::ret,
00029     \textcolor{comment}{// need to cast the sizeof's from size\_t to int explicitly, otherwise:}
00030     \textcolor{comment}{// "error: no integral type can represent all of the enumerator values}
00031     InnerStrideAtCompileTime = MatrixTypeInnerStride == \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic}
00032                              ? \textcolor{keywordtype}{int}(\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic})
00033                              : int(MatrixTypeInnerStride) * int(sizeof(typename traits<MatrixType>::Scalar)
       / sizeof(Scalar)),
00034     OuterStrideAtCompileTime = outer\_stride\_at\_compile\_time<MatrixType>::ret == 
      \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic}
00035                              ? int(\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic})
00036                              : outer\_stride\_at\_compile\_time<MatrixType>::ret * int(sizeof(typename traits<
      MatrixType>::Scalar) / sizeof(Scalar))
00037   \};
00038 \};
00039 \}
00040 
00041 \textcolor{keyword}{template}<\textcolor{keyword}{typename} ViewOp, \textcolor{keyword}{typename} MatrixType, \textcolor{keyword}{typename} StorageKind>
00042 \textcolor{keyword}{class }CwiseUnaryViewImpl;
00043 
00057 \textcolor{keyword}{template}<\textcolor{keyword}{typename} ViewOp, \textcolor{keyword}{typename} MatrixType>
00058 \textcolor{keyword}{class }CwiseUnaryView : \textcolor{keyword}{public} CwiseUnaryViewImpl<ViewOp, MatrixType, typename internal::traits<MatrixType>:
      :StorageKind>
00059 \{
00060   \textcolor{keyword}{public}:
00061 
00062     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} CwiseUnaryViewImpl<ViewOp, MatrixType,typename
       internal::traits<MatrixType>::StorageKind>::Base Base;
00063     EIGEN\_GENERIC\_PUBLIC\_INTERFACE(CwiseUnaryView)
00064     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} internal::ref\_selector<MatrixType>::non\_const\_type MatrixTypeNested;
00065     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} internal::remove\_all<MatrixType>::type NestedExpression;
00066 
00067     \textcolor{keyword}{explicit} \textcolor{keyword}{inline} CwiseUnaryView(MatrixType& mat, \textcolor{keyword}{const} ViewOp& \hyperlink{structfunc}{func} = ViewOp())
00068       : m\_matrix(mat), m\_functor(\hyperlink{structfunc}{func}) \{\}
00069 
00070     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(CwiseUnaryView)
00071 
00072     EIGEN\_STRONG\_INLINE \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_matrix.rows(); \}
00073     EIGEN\_STRONG\_INLINE \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_matrix.cols(); \}
00074 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_cwise_unary_view_8h_source_l00076}\hyperlink{group___core___module_af01271cdadcbcf195b5d3130ff2e1a48}{00076}     \textcolor{keyword}{const} ViewOp& \hyperlink{group___core___module_af01271cdadcbcf195b5d3130ff2e1a48}{functor}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_functor; \}
00077 
00079     \textcolor{keyword}{const} \textcolor{keyword}{typename} \hyperlink{group___sparse_core___module}{internal::remove\_all<MatrixTypeNested>::type}
      &
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_cwise_unary_view_8h_source_l00080}\hyperlink{group___core___module_a21d59e387e600b1d650cb002175760b4}{00080}     \hyperlink{group___core___module_a21d59e387e600b1d650cb002175760b4}{nestedExpression}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_matrix; \}
00081 
00083     \textcolor{keyword}{typename} \hyperlink{group___sparse_core___module}{internal::remove\_reference<MatrixTypeNested>::type}
      &
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_cwise_unary_view_8h_source_l00084}\hyperlink{group___core___module_add6689b53e595e968e89592ea30b6800}{00084}     \hyperlink{group___core___module_add6689b53e595e968e89592ea30b6800}{nestedExpression}() \{ \textcolor{keywordflow}{return} m\_matrix.const\_cast\_derived(); \}
00085 
00086   \textcolor{keyword}{protected}:
00087     MatrixTypeNested m\_matrix;
00088     ViewOp m\_functor;
00089 \};
00090 
00091 \textcolor{comment}{// Generic API dispatcher}
00092 \textcolor{keyword}{template}<\textcolor{keyword}{typename} ViewOp, \textcolor{keyword}{typename} XprType, \textcolor{keyword}{typename} StorageKind>
00093 \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_cwise_unary_view_impl}{CwiseUnaryViewImpl}
00094   : \textcolor{keyword}{public} \hyperlink{struct_eigen_1_1internal_1_1generic__xpr__base}{internal::generic\_xpr\_base}<CwiseUnaryView<ViewOp, XprType> >::type
00095 \{
00096 \textcolor{keyword}{public}:
00097   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1generic__xpr__base}{internal::generic\_xpr\_base<CwiseUnaryView<ViewOp, XprType>}
       >::type Base;
00098 \};
00099 
00100 \textcolor{keyword}{template}<\textcolor{keyword}{typename} ViewOp, \textcolor{keyword}{typename} MatrixType>
00101 \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_cwise_unary_view_impl}{CwiseUnaryViewImpl}<ViewOp,MatrixType,Dense>
00102   : \textcolor{keyword}{public} \hyperlink{struct_eigen_1_1internal_1_1dense__xpr__base}{internal::dense\_xpr\_base}< CwiseUnaryView<ViewOp, MatrixType> >::type
00103 \{
00104   \textcolor{keyword}{public}:
00105 
00106     \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_cwise_unary_view}{CwiseUnaryView<ViewOp, MatrixType>} Derived;
00107     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1dense__xpr__base}{internal::dense\_xpr\_base< CwiseUnaryView<ViewOp, MatrixType>}
       >::type Base;
00108 
00109     EIGEN\_DENSE\_PUBLIC\_INTERFACE(Derived)
00110     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(\hyperlink{class_eigen_1_1_cwise_unary_view_impl}{CwiseUnaryViewImpl})
00111     
00112     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar* data() \{ \textcolor{keywordflow}{return} &(this->coeffRef(0)); \}
00113     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar* data()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} &(this->coeff(0)); \}
00114 
00115     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} innerStride()\textcolor{keyword}{ const}
00116 \textcolor{keyword}{    }\{
00117       \textcolor{keywordflow}{return} derived().nestedExpression().innerStride() * \textcolor{keyword}{sizeof}(\textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<MatrixType>::Scalar}) / \textcolor{keyword}{sizeof}(Scalar);
00118     \}
00119 
00120     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outerStride()\textcolor{keyword}{ const}
00121 \textcolor{keyword}{    }\{
00122       \textcolor{keywordflow}{return} derived().nestedExpression().outerStride() * \textcolor{keyword}{sizeof}(\textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<MatrixType>::Scalar}) / \textcolor{keyword}{sizeof}(Scalar);
00123     \}
00124 \};
00125 
00126 \} \textcolor{comment}{// end namespace Eigen}
00127 
00128 \textcolor{preprocessor}{#endif // EIGEN\_CWISE\_UNARY\_VIEW\_H}
\end{DoxyCode}
