\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__sugar_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/cxx11\+\_\+tensor\+\_\+sugar.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__sugar_8cpp_source}\index{cxx11\+\_\+tensor\+\_\+sugar.\+cpp@{cxx11\+\_\+tensor\+\_\+sugar.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "main.h"}
00002 
00003 \textcolor{preprocessor}{#include <Eigen/CXX11/Tensor>}
00004 
00005 \textcolor{keyword}{using} \hyperlink{class_eigen_1_1_tensor}{Eigen::Tensor};
00006 \textcolor{keyword}{using} \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{Eigen::RowMajor};
00007 
00008 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_comparison\_sugar() \{
00009   \textcolor{comment}{// we already trust comparisons between tensors, we're simply checking that}
00010   \textcolor{comment}{// the sugared versions are doing the same thing}
00011   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3>} t(6, 7, 5);
00012 
00013   t.setRandom();
00014   \textcolor{comment}{// make sure we have at least one value == 0}
00015   t(0,0,0) = 0;
00016 
00017   \hyperlink{class_eigen_1_1_tensor}{Tensor<bool,0>} b;
00018 
00019 \textcolor{preprocessor}{#define TEST\_TENSOR\_EQUAL(e1, e2) \(\backslash\)}
00020 \textcolor{preprocessor}{  b = ((e1) == (e2)).all();       \(\backslash\)}
00021 \textcolor{preprocessor}{  VERIFY(b())}
00022 
00023 \textcolor{preprocessor}{#define TEST\_OP(op) TEST\_TENSOR\_EQUAL(t op 0, t op t.constant(0))}
00024 
00025   TEST\_OP(==);
00026   TEST\_OP(!=);
00027   TEST\_OP(<=);
00028   TEST\_OP(>=);
00029   TEST\_OP(<);
00030   TEST\_OP(>);
00031 \textcolor{preprocessor}{#undef TEST\_OP}
00032 \textcolor{preprocessor}{#undef TEST\_TENSOR\_EQUAL}
00033 \}
00034 
00035 
00036 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_scalar\_sugar\_add\_mul() \{
00037   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}(6, 7, 5);
00038   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} \hyperlink{group___core___module_class_eigen_1_1_matrix}{B}(6, 7, 5);
00039   \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}.\hyperlink{class_eigen_1_1_plain_object_base_af0e576a0e1aefc9ee346de44cc352ba3}{setRandom}();
00040   \hyperlink{group___core___module_class_eigen_1_1_matrix}{B}.\hyperlink{class_eigen_1_1_plain_object_base_af0e576a0e1aefc9ee346de44cc352ba3}{setRandom}();
00041 
00042   \textcolor{keyword}{const} \textcolor{keywordtype}{float} alpha = 0.43f;
00043   \textcolor{keyword}{const} \textcolor{keywordtype}{float} beta = 0.21f;
00044   \textcolor{keyword}{const} \textcolor{keywordtype}{float} gamma = 0.14f;
00045 
00046   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} R = \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}.constant(gamma) + \hyperlink{group___core___module_class_eigen_1_1_matrix}{A} * \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}.constant(alpha) + 
      \hyperlink{group___core___module_class_eigen_1_1_matrix}{B} * \hyperlink{group___core___module_class_eigen_1_1_matrix}{B}.constant(beta);
00047   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} S = \hyperlink{group___core___module_class_eigen_1_1_matrix}{A} * alpha + \hyperlink{group___core___module_class_eigen_1_1_matrix}{B} * beta + gamma;
00048   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} \hyperlink{group___sparse_core___module}{T} = gamma + alpha * \hyperlink{group___core___module_class_eigen_1_1_matrix}{A} + beta * \hyperlink{group___core___module_class_eigen_1_1_matrix}{B};
00049 
00050   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 6*7*5; ++i) \{
00051     VERIFY\_IS\_APPROX(R(i), S(i));
00052     VERIFY\_IS\_APPROX(R(i), T(i));
00053   \}
00054 \}
00055 
00056 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_scalar\_sugar\_sub\_div() \{
00057   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}(6, 7, 5);
00058   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} B(6, 7, 5);
00059   \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}.\hyperlink{class_eigen_1_1_plain_object_base_af0e576a0e1aefc9ee346de44cc352ba3}{setRandom}();
00060   B.setRandom();
00061 
00062   \textcolor{keyword}{const} \textcolor{keywordtype}{float} alpha = 0.43f;
00063   \textcolor{keyword}{const} \textcolor{keywordtype}{float} beta = 0.21f;
00064   \textcolor{keyword}{const} \textcolor{keywordtype}{float} gamma = 0.14f;
00065   \textcolor{keyword}{const} \textcolor{keywordtype}{float} delta = 0.32f;
00066 
00067   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} R = \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}.constant(gamma) - \hyperlink{group___core___module_class_eigen_1_1_matrix}{A} / \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}.constant(alpha)
00068       - B.constant(beta) / B - \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}.constant(delta);
00069   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3>} S = gamma - \hyperlink{group___core___module_class_eigen_1_1_matrix}{A} / alpha - beta / B - delta;
00070 
00071   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 6*7*5; ++i) \{
00072     VERIFY\_IS\_APPROX(R(i), S(i));
00073   \}
00074 \}
00075 
00076 \textcolor{keywordtype}{void} test\_cxx11\_tensor\_sugar()
00077 \{
00078   CALL\_SUBTEST(test\_comparison\_sugar());
00079   CALL\_SUBTEST(test\_scalar\_sugar\_add\_mul());
00080   CALL\_SUBTEST(test\_scalar\_sugar\_sub\_div());
00081 \}
\end{DoxyCode}
