\hypertarget{eigen_2doc_2special__examples_2_tutorial__sparse__example_8cpp_source}{}\section{eigen/doc/special\+\_\+examples/\+Tutorial\+\_\+sparse\+\_\+example.cpp}
\label{eigen_2doc_2special__examples_2_tutorial__sparse__example_8cpp_source}\index{Tutorial\+\_\+sparse\+\_\+example.\+cpp@{Tutorial\+\_\+sparse\+\_\+example.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include <Eigen/Sparse>}
00002 \textcolor{preprocessor}{#include <vector>}
00003 
00004 \textcolor{keyword}{typedef} \hyperlink{group___sparse_core___module}{Eigen::SparseMatrix<double>} \hyperlink{group___sparse_core___module}{SpMat}; \textcolor{comment}{// declares a column-major
       sparse matrix type of double}
00005 \textcolor{keyword}{typedef} \hyperlink{group___sparse_core___module}{Eigen::Triplet<double>} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T};
00006 
00007 \textcolor{keywordtype}{void} buildProblem(std::vector<T>& coefficients, Eigen::VectorXd& b, \textcolor{keywordtype}{int} n);
00008 \textcolor{keywordtype}{void} saveAsBitmap(\textcolor{keyword}{const} Eigen::VectorXd& x, \textcolor{keywordtype}{int} n, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename);
00009 
00010 \textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv)
00011 \{
00012   assert(argc==2);
00013   
00014   \textcolor{keywordtype}{int} n = 300;  \textcolor{comment}{// size of the image}
00015   \textcolor{keywordtype}{int} m = n*n;  \textcolor{comment}{// number of unknows (=number of pixels)}
00016 
00017   \textcolor{comment}{// Assembly:}
00018   std::vector<T> coefficients;            \textcolor{comment}{// list of non-zeros coefficients}
00019   Eigen::VectorXd b(m);                   \textcolor{comment}{// the right hand side-vector resulting from the constraints}
00020   buildProblem(coefficients, b, n);
00021 
00022   \hyperlink{group___sparse_core___module}{SpMat} A(m,m);
00023   A.setFromTriplets(coefficients.begin(), coefficients.end());
00024 
00025   \textcolor{comment}{// Solving:}
00026   \hyperlink{group___sparse_cholesky___module_class_eigen_1_1_simplicial_cholesky}{Eigen::SimplicialCholesky<SpMat>} chol(A);  \textcolor{comment}{// performs a Cholesky
       factorization of A}
00027   Eigen::VectorXd x = chol.solve(b);         \textcolor{comment}{// use the factorization to solve for the given right hand
       side}
00028 
00029   \textcolor{comment}{// Export the result to a file:}
00030   saveAsBitmap(x, n, argv[1]);
00031 
00032   \textcolor{keywordflow}{return} 0;
00033 \}
00034 
\end{DoxyCode}
