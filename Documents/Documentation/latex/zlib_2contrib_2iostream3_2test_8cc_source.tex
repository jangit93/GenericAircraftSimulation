\hypertarget{zlib_2contrib_2iostream3_2test_8cc_source}{}\section{zlib/contrib/iostream3/test.cc}
\label{zlib_2contrib_2iostream3_2test_8cc_source}\index{test.\+cc@{test.\+cc}}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * Test program for gzifstream and gzofstream}
00003 \textcolor{comment}{ *}
00004 \textcolor{comment}{ * by Ludwig Schwardt <schwardt@sun.ac.za>}
00005 \textcolor{comment}{ * original version by Kevin Ruland <kevin@rodin.wustl.edu>}
00006 \textcolor{comment}{ */}
00007 
00008 \textcolor{preprocessor}{#include "zfstream.h"}
00009 \textcolor{preprocessor}{#include <iostream>}      \textcolor{comment}{// for cout}
00010 
00011 \textcolor{keywordtype}{int} main() \{
00012 
00013   \hyperlink{classgzofstream}{gzofstream} outf;
00014   \hyperlink{classgzifstream}{gzifstream} inf;
00015   \textcolor{keywordtype}{char} buf[80];
00016 
00017   outf.\hyperlink{classgzofstream_aee3eb31f07eda7f5ad1f60d59ea4b239}{open}(\textcolor{stringliteral}{"test1.txt.gz"});
00018   outf << \textcolor{stringliteral}{"The quick brown fox sidestepped the lazy canine\(\backslash\)n"}
00019        << 1.3 << \textcolor{stringliteral}{"\(\backslash\)nPlan "} << 9 << std::endl;
00020   outf.\hyperlink{classgzofstream_a59e8b01e1c9741085f18ca456c4b8f54}{close}();
00021   std::cout << \textcolor{stringliteral}{"Wrote the following message to 'test1.txt.gz' (check with zcat or zless):\(\backslash\)n"}
00022             << \textcolor{stringliteral}{"The quick brown fox sidestepped the lazy canine\(\backslash\)n"}
00023             << 1.3 << \textcolor{stringliteral}{"\(\backslash\)nPlan "} << 9 << std::endl;
00024 
00025   std::cout << \textcolor{stringliteral}{"\(\backslash\)nReading 'test1.txt.gz' (buffered) produces:\(\backslash\)n"};
00026   inf.\hyperlink{classgzifstream_a8105f9300d36dafbe8b10c204583f5a1}{open}(\textcolor{stringliteral}{"test1.txt.gz"});
00027   \textcolor{keywordflow}{while} (inf.getline(buf,80,\textcolor{charliteral}{'\(\backslash\)n'})) \{
00028     std::cout << buf << \textcolor{stringliteral}{"\(\backslash\)t("} << inf.\hyperlink{classgzifstream_a1c5a0ab4f99f8d8e3406af7bfd82b133}{rdbuf}()->in\_avail() << \textcolor{stringliteral}{" chars left in buffer)\(\backslash\)n"};
00029   \}
00030   inf.\hyperlink{classgzifstream_a073fadd9dc90195c47a6ae2d863c8ace}{close}();
00031 
00032   outf.\hyperlink{classgzofstream_a2fef74202b114357f41cfeb28f1d2acc}{rdbuf}()->pubsetbuf(0,0);
00033   outf.\hyperlink{classgzofstream_aee3eb31f07eda7f5ad1f60d59ea4b239}{open}(\textcolor{stringliteral}{"test2.txt.gz"});
00034   outf << setcompression(Z\_NO\_COMPRESSION)
00035        << \textcolor{stringliteral}{"The quick brown fox sidestepped the lazy canine\(\backslash\)n"}
00036        << 1.3 << \textcolor{stringliteral}{"\(\backslash\)nPlan "} << 9 << std::endl;
00037   outf.\hyperlink{classgzofstream_a59e8b01e1c9741085f18ca456c4b8f54}{close}();
00038   std::cout << \textcolor{stringliteral}{"\(\backslash\)nWrote the same message to 'test2.txt.gz' in uncompressed form"};
00039 
00040   std::cout << \textcolor{stringliteral}{"\(\backslash\)nReading 'test2.txt.gz' (unbuffered) produces:\(\backslash\)n"};
00041   inf.\hyperlink{classgzifstream_a1c5a0ab4f99f8d8e3406af7bfd82b133}{rdbuf}()->pubsetbuf(0,0);
00042   inf.\hyperlink{classgzifstream_a8105f9300d36dafbe8b10c204583f5a1}{open}(\textcolor{stringliteral}{"test2.txt.gz"});
00043   \textcolor{keywordflow}{while} (inf.getline(buf,80,\textcolor{charliteral}{'\(\backslash\)n'})) \{
00044     std::cout << buf << \textcolor{stringliteral}{"\(\backslash\)t("} << inf.\hyperlink{classgzifstream_a1c5a0ab4f99f8d8e3406af7bfd82b133}{rdbuf}()->in\_avail() << \textcolor{stringliteral}{" chars left in buffer)\(\backslash\)n"};
00045   \}
00046   inf.\hyperlink{classgzifstream_a073fadd9dc90195c47a6ae2d863c8ace}{close}();
00047 
00048   \textcolor{keywordflow}{return} 0;
00049 
00050 \}
\end{DoxyCode}
