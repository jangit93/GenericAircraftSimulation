\hypertarget{eigen_2bench_2btl_2libs_2ublas_2ublas__interface_8hh_source}{}\section{eigen/bench/btl/libs/ublas/ublas\+\_\+interface.hh}
\label{eigen_2bench_2btl_2libs_2ublas_2ublas__interface_8hh_source}\index{ublas\+\_\+interface.\+hh@{ublas\+\_\+interface.\+hh}}

\begin{DoxyCode}
00001 \textcolor{comment}{//=====================================================}
00002 \textcolor{comment}{// File   :  ublas\_interface.hh}
00003 \textcolor{comment}{// Author :  L. Plagne <laurent.plagne@edf.fr)>}
00004 \textcolor{comment}{// Copyright (C) EDF R&D,  lun sep 30 14:23:27 CEST 2002}
00005 \textcolor{comment}{//=====================================================}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{// This program is free software; you can redistribute it and/or}
00008 \textcolor{comment}{// modify it under the terms of the GNU General Public License}
00009 \textcolor{comment}{// as published by the Free Software Foundation; either version 2}
00010 \textcolor{comment}{// of the License, or (at your option) any later version.}
00011 \textcolor{comment}{//}
00012 \textcolor{comment}{// This program is distributed in the hope that it will be useful,}
00013 \textcolor{comment}{// but WITHOUT ANY WARRANTY; without even the implied warranty of}
00014 \textcolor{comment}{// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00015 \textcolor{comment}{// GNU General Public License for more details.}
00016 \textcolor{comment}{// You should have received a copy of the GNU General Public License}
00017 \textcolor{comment}{// along with this program; if not, write to the Free Software}
00018 \textcolor{comment}{// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.}
00019 \textcolor{comment}{//}
00020 \textcolor{preprocessor}{#ifndef UBLAS\_INTERFACE\_HH}
00021 \textcolor{preprocessor}{#define UBLAS\_INTERFACE\_HH}
00022 
00023 \textcolor{preprocessor}{#include <boost/numeric/ublas/vector.hpp>}
00024 \textcolor{preprocessor}{#include <boost/numeric/ublas/matrix.hpp>}
00025 \textcolor{preprocessor}{#include <boost/numeric/ublas/io.hpp>}
00026 \textcolor{preprocessor}{#include <boost/numeric/ublas/triangular.hpp>}
00027 
00028 \textcolor{keyword}{using namespace }\hyperlink{namespaceboost_1_1numeric}{boost::numeric};
00029 
00030 \textcolor{keyword}{template} <\textcolor{keyword}{class} real>
\Hypertarget{eigen_2bench_2btl_2libs_2ublas_2ublas__interface_8hh_source_l00031}\hyperlink{classublas__interface}{00031} \textcolor{keyword}{class }\hyperlink{classublas__interface}{ublas\_interface}\{
00032 
00033 public :
00034 
00035   \textcolor{keyword}{typedef} real real\_type ;
00036 
00037   \textcolor{keyword}{typedef} std::vector<real> stl\_vector;
00038   \textcolor{keyword}{typedef} std::vector<stl\_vector> stl\_matrix;
00039 
00040   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} boost::numeric::ublas::matrix<real,boost::numeric::ublas::column\_major> gene\_matrix;
00041   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} boost::numeric::ublas::vector<real> gene\_vector;
00042 
00043   \textcolor{keyword}{static} \textcolor{keyword}{inline} std::string name( \textcolor{keywordtype}{void} ) \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"ublas"}; \}
00044 
00045   \textcolor{keyword}{static} \textcolor{keywordtype}{void} free\_matrix(gene\_matrix & \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}, \textcolor{keywordtype}{int} N) \{\}
00046 
00047   \textcolor{keyword}{static} \textcolor{keywordtype}{void} free\_vector(gene\_vector & \hyperlink{group___core___module_class_eigen_1_1_matrix}{B}) \{\}
00048 
00049   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_from\_stl(gene\_matrix & A, stl\_matrix & A\_stl)\{
00050     A.resize(A\_stl.size(),A\_stl[0].size());
00051     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0; j<A\_stl.size() ; j++)
00052       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<A\_stl[j].size() ; i++)
00053         A(i,j)=A\_stl[j][i];
00054   \}
00055 
00056   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} vector\_from\_stl(gene\_vector & B, stl\_vector & B\_stl)\{
00057     B.resize(B\_stl.size());
00058     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<B\_stl.size() ; i++)
00059       B(i)=B\_stl[i];
00060   \}
00061 
00062   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} vector\_to\_stl(gene\_vector & B, stl\_vector & B\_stl)\{
00063     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<B\_stl.size() ; i++)
00064       B\_stl[i]=B(i);
00065   \}
00066 
00067   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_to\_stl(gene\_matrix & A, stl\_matrix & A\_stl)\{
00068     \textcolor{keywordtype}{int} N=A\_stl.size();
00069     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0;j<N;j++)
00070     \{
00071       A\_stl[j].resize(N);
00072       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<N;i++)
00073         A\_stl[j][i]=A(i,j);
00074     \}
00075   \}
00076 
00077   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} copy\_vector(\textcolor{keyword}{const} gene\_vector & source, gene\_vector & cible, \textcolor{keywordtype}{int} N)\{
00078     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<N;i++)\{
00079       cible(i) = source(i);
00080     \}
00081   \}
00082 
00083   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} copy\_matrix(\textcolor{keyword}{const} gene\_matrix & source, gene\_matrix & cible, \textcolor{keywordtype}{int} N)\{
00084     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<N;i++)\{
00085       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0;j<N;j++)\{
00086         cible(i,j) = source(i,j);
00087       \}
00088     \}
00089   \}
00090 
00091   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_vector\_product\_slow(gene\_matrix & A, gene\_vector & B, gene\_vector & X, \textcolor{keywordtype}{int} N)\{
00092     X =  prod(A,B);
00093   \}
00094 
00095   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_matrix\_product\_slow(gene\_matrix & A, gene\_matrix & B, gene\_matrix & X, \textcolor{keywordtype}{int} N)\{
00096     X =  prod(A,B);
00097   \}
00098 
00099   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} axpy\_slow(\textcolor{keyword}{const} real coef, \textcolor{keyword}{const} gene\_vector & X, gene\_vector & Y, \textcolor{keywordtype}{int} N)\{
00100     Y+=coef*X;
00101   \}
00102 
00103   \textcolor{comment}{// alias free assignements}
00104 
00105   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_vector\_product(gene\_matrix & A, gene\_vector & B, gene\_vector & X, \textcolor{keywordtype}{int} N)\{
00106     X.assign(prod(A,B));
00107   \}
00108 
00109   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} atv\_product(gene\_matrix & A, gene\_vector & B, gene\_vector & X, \textcolor{keywordtype}{int} N)\{
00110     X.assign(prod(trans(A),B));
00111   \}
00112 
00113   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_matrix\_product(gene\_matrix & A, gene\_matrix & B, gene\_matrix & X, \textcolor{keywordtype}{int} N)\{
00114     X.assign(prod(A,B));
00115   \}
00116 
00117   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} axpy(\textcolor{keyword}{const} real coef, \textcolor{keyword}{const} gene\_vector & X, gene\_vector & Y, \textcolor{keywordtype}{int} N)\{
00118     Y.plus\_assign(coef*X);
00119   \}
00120 
00121   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} axpby(real a, \textcolor{keyword}{const} gene\_vector & X, real b, gene\_vector & Y, \textcolor{keywordtype}{int} N)\{
00122     Y = a*X + b*Y;
00123   \}
00124 
00125   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} ata\_product(gene\_matrix & A, gene\_matrix & X, \textcolor{keywordtype}{int} N)\{
00126     \textcolor{comment}{// X =  prod(trans(A),A);}
00127     X.assign(prod(trans(A),A));
00128   \}
00129 
00130   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} aat\_product(gene\_matrix & A, gene\_matrix & X, \textcolor{keywordtype}{int} N)\{
00131     \textcolor{comment}{// X =  prod(A,trans(A));}
00132     X.assign(prod(A,trans(A)));
00133   \}
00134 
00135   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} trisolve\_lower(\textcolor{keyword}{const} gene\_matrix & L, \textcolor{keyword}{const} gene\_vector& B, gene\_vector & X, \textcolor{keywordtype}{int} N)\{
00136     X = solve(L, B, ublas::lower\_tag ());
00137   \}
00138 
00139 \};
00140 
00141 \textcolor{preprocessor}{#endif}
\end{DoxyCode}
