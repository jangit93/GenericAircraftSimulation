\hypertarget{_h_d_f5_21_810_81_2_h_d_f5_examples_2_j_a_v_a_2_h_d_f5_dataset_create_8java_source}{}\section{H\+D\+F5/1.10.1/\+H\+D\+F5\+Examples/\+J\+A\+V\+A/\+H\+D\+F5\+Dataset\+Create.java}
\label{_h_d_f5_21_810_81_2_h_d_f5_examples_2_j_a_v_a_2_h_d_f5_dataset_create_8java_source}\index{H\+D\+F5\+Dataset\+Create.\+java@{H\+D\+F5\+Dataset\+Create.\+java}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}
00002 \textcolor{comment}{ * Copyright by The HDF Group.                                               *}
00003 \textcolor{comment}{ * Copyright by the Board of Trustees of the University of Illinois.         *}
00004 \textcolor{comment}{ * All rights reserved.                                                      *}
00005 \textcolor{comment}{ *                                                                           *}
00006 \textcolor{comment}{ * This file is part of HDF5.  The full HDF5 copyright notice, including     *}
00007 \textcolor{comment}{ * terms governing use, modification, and redistribution, is contained in    *}
00008 \textcolor{comment}{ * the files COPYING and Copyright.html.  COPYING can be found at the root   *}
00009 \textcolor{comment}{ * of the source code distribution tree; Copyright.html can be found at the  *}
00010 \textcolor{comment}{ * root level of an installed copy of the electronic HDF5 document set and   *}
00011 \textcolor{comment}{ * is linked from the top-level documents page.  It can also be found at     *}
00012 \textcolor{comment}{ * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *}
00013 \textcolor{comment}{ * access to either file, you may request a copy from help@hdfgroup.org.     *}
00014 \textcolor{comment}{ * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */}
00015 
00016 \textcolor{keyword}{import} hdf.hdf5lib.H5;
00017 \textcolor{keyword}{import} hdf.hdf5lib.HDF5Constants;
00018 
\Hypertarget{_h_d_f5_21_810_81_2_h_d_f5_examples_2_j_a_v_a_2_h_d_f5_dataset_create_8java_source_l00040}\hyperlink{class_h_d_f5_dataset_create}{00040} \textcolor{keyword}{public} \textcolor{keyword}{class }\hyperlink{class_h_d_f5_dataset_create}{HDF5DatasetCreate} \{
00041     \textcolor{keyword}{private} \textcolor{keyword}{static} String fname  = \textcolor{stringliteral}{"HDF5DatasetCreate.h5"};
00042     \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{long}[] dims2D = \{ 20, 10 \};
00043     \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{long}[] dims3D = \{ 20, 10, 5 \};
00044 
00045     \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{void} main(String args[]) \textcolor{keywordflow}{throws} Exception \{
00046         \textcolor{keywordtype}{long} file\_id = -1;
00047         \textcolor{keywordtype}{long} group\_id1 = -1;
00048         \textcolor{keywordtype}{long} group\_id2 = -1;
00049         \textcolor{keywordtype}{long} dataspace\_id1 = -1;
00050         \textcolor{keywordtype}{long} dataspace\_id2 = -1;
00051         \textcolor{keywordtype}{long} dataset\_id = -1;
00052 
00053         \textcolor{comment}{// Create a new file using default properties.}
00054         \textcolor{keywordflow}{try} \{
00055             file\_id = \hyperlink{namespace_h5}{H5}.H5Fcreate(fname, HDF5Constants.H5F\_ACC\_TRUNC,
00056                     HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00057         \}
00058         \textcolor{keywordflow}{catch} (Exception e) \{
00059             e.printStackTrace();
00060             \hyperlink{namespace_system}{System}.err.println(\textcolor{stringliteral}{"Failed to create file:"} + fname);
00061             \textcolor{keywordflow}{return};
00062         \}
00063 
00064         \textcolor{comment}{// Create a group in the file.}
00065         \textcolor{keywordflow}{try} \{
00066             \textcolor{keywordflow}{if} (file\_id >= 0) \{
00067                 group\_id1 = \hyperlink{namespace_h5}{H5}.H5Gcreate(file\_id, \textcolor{stringliteral}{"g1"},
00068                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00069                 group\_id2 = \hyperlink{namespace_h5}{H5}.H5Gcreate(file\_id, \textcolor{stringliteral}{"g2"},
00070                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00071             \}
00072         \}
00073         \textcolor{keywordflow}{catch} (Exception e) \{
00074             e.printStackTrace();
00075         \}
00076 
00077         \textcolor{comment}{// Create the data space for the  2D dataset.}
00078         \textcolor{keywordflow}{try} \{
00079             dataspace\_id1 = \hyperlink{namespace_h5}{H5}.H5Screate\_simple(2, dims2D, null);
00080         \}
00081         \textcolor{keywordflow}{catch} (Exception e) \{
00082             e.printStackTrace();
00083         \}
00084 
00085         \textcolor{comment}{// Create the data space for the  3D dataset.}
00086         \textcolor{keywordflow}{try} \{
00087             dataspace\_id2 = \hyperlink{namespace_h5}{H5}.H5Screate\_simple(3, dims3D, null);
00088         \}
00089         \textcolor{keywordflow}{catch} (Exception e) \{
00090             e.printStackTrace();
00091         \}
00092 
00093         \textcolor{comment}{// create 2D 32-bit (4 bytes) integer dataset of 20 by 10}
00094         \textcolor{keywordflow}{try} \{
00095             \textcolor{keywordflow}{if} ((group\_id1 >= 0) && (dataspace\_id1 >= 0)) \{
00096                 dataset\_id = \hyperlink{namespace_h5}{H5}.H5Dcreate(group\_id1, \textcolor{stringliteral}{"2D 32-bit integer 20x10"},
00097                         HDF5Constants.H5T\_NATIVE\_INT32, dataspace\_id1,
00098                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00099                 \textcolor{keywordflow}{if} (dataset\_id >= 0)
00100                     \hyperlink{namespace_h5}{H5}.H5Dclose(dataset\_id);
00101             \}
00102         \}
00103         \textcolor{keywordflow}{catch} (Exception e) \{
00104             e.printStackTrace();
00105         \}
00106 
00107         \textcolor{comment}{// create 3D 8-bit (1 byte) unsigned integer dataset of 20 by 10 by 5}
00108         \textcolor{keywordflow}{try} \{
00109             \textcolor{keywordflow}{if} ((group\_id1 >= 0) && (dataspace\_id2 >= 0)) \{
00110                 dataset\_id = \hyperlink{namespace_h5}{H5}.H5Dcreate(group\_id1, \textcolor{stringliteral}{"3D 8-bit unsigned integer 20x10x5"},
00111                         HDF5Constants.H5T\_NATIVE\_INT8, dataspace\_id2,
00112                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00113                 \textcolor{keywordflow}{if} (dataset\_id >= 0)
00114                     \hyperlink{namespace_h5}{H5}.H5Dclose(dataset\_id);
00115             \}
00116         \}
00117         \textcolor{keywordflow}{catch} (Exception e) \{
00118             e.printStackTrace();
00119         \}
00120 
00121         \textcolor{comment}{// create 2D 64-bit (8 bytes) double dataset of 20 by 10}
00122         \textcolor{keywordflow}{try} \{
00123             \textcolor{keywordflow}{if} ((group\_id2 >= 0) && (dataspace\_id1 >= 0)) \{
00124                 dataset\_id = \hyperlink{namespace_h5}{H5}.H5Dcreate(group\_id2, \textcolor{stringliteral}{"2D 64-bit double 20x10"},
00125                         HDF5Constants.H5T\_NATIVE\_DOUBLE, dataspace\_id1,
00126                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00127                 \textcolor{keywordflow}{if} (dataset\_id >= 0)
00128                     \hyperlink{namespace_h5}{H5}.H5Dclose(dataset\_id);
00129             \}
00130         \}
00131         \textcolor{keywordflow}{catch} (Exception e) \{
00132             e.printStackTrace();
00133         \}
00134 
00135         \textcolor{comment}{// create 3D 32-bit (4 bytes) float dataset of 20 by 10 by 5}
00136         \textcolor{keywordflow}{try} \{
00137             \textcolor{keywordflow}{if} ((group\_id2 >= 0) && (dataspace\_id2 >= 0)) \{
00138                 dataset\_id = \hyperlink{namespace_h5}{H5}.H5Dcreate(group\_id2, \textcolor{stringliteral}{"3D 32-bit float  20x10x5"},
00139                         HDF5Constants.H5T\_NATIVE\_FLOAT, dataspace\_id2,
00140                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00141                 \textcolor{keywordflow}{if} (dataset\_id >= 0)
00142                     \hyperlink{namespace_h5}{H5}.H5Dclose(dataset\_id);
00143             \}
00144         \}
00145         \textcolor{keywordflow}{catch} (Exception e) \{
00146             e.printStackTrace();
00147         \}
00148 
00149         \textcolor{comment}{// Terminate access to the data space.}
00150         \textcolor{keywordflow}{try} \{
00151             \textcolor{keywordflow}{if} (dataspace\_id2 >= 0)
00152                 \hyperlink{namespace_h5}{H5}.H5Sclose(dataspace\_id2);
00153         \}
00154         \textcolor{keywordflow}{catch} (Exception e) \{
00155             e.printStackTrace();
00156         \}
00157         \textcolor{keywordflow}{try} \{
00158             \textcolor{keywordflow}{if} (dataspace\_id1 >= 0)
00159                 \hyperlink{namespace_h5}{H5}.H5Sclose(dataspace\_id1);
00160         \}
00161         \textcolor{keywordflow}{catch} (Exception e) \{
00162             e.printStackTrace();
00163         \}
00164 
00165         \textcolor{comment}{// Close the groups.}
00166         \textcolor{keywordflow}{try} \{
00167             \textcolor{keywordflow}{if} (group\_id2 >= 0)
00168                 \hyperlink{namespace_h5}{H5}.H5Gclose(group\_id2);
00169         \}
00170         \textcolor{keywordflow}{catch} (Exception e) \{
00171             e.printStackTrace();
00172         \}
00173         \textcolor{keywordflow}{try} \{
00174             \textcolor{keywordflow}{if} (group\_id1 >= 0)
00175                 \hyperlink{namespace_h5}{H5}.H5Gclose(group\_id1);
00176         \}
00177         \textcolor{keywordflow}{catch} (Exception e) \{
00178             e.printStackTrace();
00179         \}
00180 
00181         \textcolor{comment}{// Close the file.}
00182         \textcolor{keywordflow}{try} \{
00183             \textcolor{keywordflow}{if} (file\_id >= 0)
00184                 \hyperlink{namespace_h5}{H5}.H5Fclose(file\_id);
00185         \}
00186         \textcolor{keywordflow}{catch} (Exception e) \{
00187             e.printStackTrace();
00188         \}
00189     \}
00190 \}
\end{DoxyCode}
