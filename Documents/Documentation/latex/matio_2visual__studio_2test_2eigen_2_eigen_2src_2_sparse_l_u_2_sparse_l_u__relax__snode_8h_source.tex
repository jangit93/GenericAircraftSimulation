\hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_sparse_l_u_2_sparse_l_u__relax__snode_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/\+Eigen/src/\+Sparse\+L\+U/\+Sparse\+L\+U\+\_\+relax\+\_\+snode.h}
\label{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_sparse_l_u_2_sparse_l_u__relax__snode_8h_source}\index{Sparse\+L\+U\+\_\+relax\+\_\+snode.\+h@{Sparse\+L\+U\+\_\+relax\+\_\+snode.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2012 Désiré Nuentsa-Wakam <desire.nuentsa\_wakam@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{comment}{/* This file is a modified version of heap\_relax\_snode.c file in SuperLU}
00011 \textcolor{comment}{ * -- SuperLU routine (version 3.0) --}
00012 \textcolor{comment}{ * Univ. of California Berkeley, Xerox Palo Alto Research Center,}
00013 \textcolor{comment}{ * and Lawrence Berkeley National Lab.}
00014 \textcolor{comment}{ * October 15, 2003}
00015 \textcolor{comment}{ *}
00016 \textcolor{comment}{ * Copyright (c) 1994 by Xerox Corporation.  All rights reserved.}
00017 \textcolor{comment}{ *}
00018 \textcolor{comment}{ * THIS MATERIAL IS PROVIDED AS IS, WITH ABSOLUTELY NO WARRANTY}
00019 \textcolor{comment}{ * EXPRESSED OR IMPLIED.  ANY USE IS AT YOUR OWN RISK.}
00020 \textcolor{comment}{ *}
00021 \textcolor{comment}{ * Permission is hereby granted to use or copy this program for any}
00022 \textcolor{comment}{ * purpose, provided the above notices are retained on all copies.}
00023 \textcolor{comment}{ * Permission to modify the code and to distribute modified code is}
00024 \textcolor{comment}{ * granted, provided the above notices are retained, and a notice that}
00025 \textcolor{comment}{ * the code was modified is included with the above copyright notice.}
00026 \textcolor{comment}{ */}
00027 
00028 \textcolor{preprocessor}{#ifndef SPARSELU\_RELAX\_SNODE\_H}
00029 \textcolor{preprocessor}{#define SPARSELU\_RELAX\_SNODE\_H}
00030 
00031 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00032 
00033 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00034  
00046 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Scalar, \textcolor{keyword}{typename} StorageIndex>
00047 \textcolor{keywordtype}{void} \hyperlink{group___sparse_l_u___module_a33672df380f94e774c5a6919d3474af4}{SparseLUImpl<Scalar,StorageIndex>::relax\_snode} (\textcolor{keyword}{const} 
      \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} n, IndexVector& et, \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} relax\_columns, IndexVector& descendants, IndexVector& 
      relax\_end)
00048 \{
00049   
00050   \textcolor{comment}{// compute the number of descendants of each node in the etree}
00051   \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} parent; 
00052   relax\_end.setConstant(emptyIdxLU);
00053   descendants.setZero();
00054   \textcolor{keywordflow}{for} (\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} j = 0; j < n; j++) 
00055   \{
00056     parent = et(j);
00057     \textcolor{keywordflow}{if} (parent != n) \textcolor{comment}{// not the dummy root}
00058       descendants(parent) += descendants(j) + 1;
00059   \}
00060   \textcolor{comment}{// Identify the relaxed supernodes by postorder traversal of the etree}
00061   \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} snode\_start; \textcolor{comment}{// beginning of a snode }
00062   \textcolor{keywordflow}{for} (\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} j = 0; j < n; )
00063   \{
00064     parent = et(j);
00065     snode\_start = j; 
00066     \textcolor{keywordflow}{while} ( parent != n && descendants(parent) < relax\_columns ) 
00067     \{
00068       j = parent; 
00069       parent = et(j);
00070     \}
00071     \textcolor{comment}{// Found a supernode in postordered etree, j is the last column }
00072     relax\_end(snode\_start) = StorageIndex(j); \textcolor{comment}{// Record last column}
00073     j++;
00074     \textcolor{comment}{// Search for a new leaf}
00075     \textcolor{keywordflow}{while} (descendants(j) != 0 && j < n) j++;
00076   \} \textcolor{comment}{// End postorder traversal of the etree}
00077   
00078 \}
00079 
00080 \} \textcolor{comment}{// end namespace internal}
00081 
00082 \} \textcolor{comment}{// end namespace Eigen}
00083 \textcolor{preprocessor}{#endif}
\end{DoxyCode}
