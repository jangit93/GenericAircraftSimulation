\hypertarget{eigen_2bench_2basicbenchmark_8cpp_source}{}\section{eigen/bench/basicbenchmark.cpp}
\label{eigen_2bench_2basicbenchmark_8cpp_source}\index{basicbenchmark.\+cpp@{basicbenchmark.\+cpp}}

\begin{DoxyCode}
00001 
00002 \textcolor{preprocessor}{#include <iostream>}
00003 \textcolor{preprocessor}{#include "BenchUtil.h"}
00004 \textcolor{preprocessor}{#include "basicbenchmark.h"}
00005 
00006 \textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])
00007 \{
00008   DISABLE\_SSE\_EXCEPTIONS();
00009 
00010   \textcolor{comment}{// this is the list of matrix type and size we want to bench:}
00011   \textcolor{comment}{// ((suffix) (matrix size) (number of iterations))}
00012 \textcolor{preprocessor}{  #define MODES ((3d)(3)(4000000)) ((4d)(4)(1000000)) ((Xd)(4)(1000000)) ((Xd)(20)(10000))}
00013 \textcolor{comment}{//   #define MODES ((Xd)(20)(10000))}
00014 
00015 \textcolor{preprocessor}{  #define \_GENERATE\_HEADER(R,ARG,EL) << BOOST\_PP\_STRINGIZE(BOOST\_PP\_SEQ\_HEAD(EL)) << "-" \(\backslash\)}
00016 \textcolor{preprocessor}{    << BOOST\_PP\_STRINGIZE(BOOST\_PP\_SEQ\_ELEM(1,EL)) << "x" \(\backslash\)}
00017 \textcolor{preprocessor}{    << BOOST\_PP\_STRINGIZE(BOOST\_PP\_SEQ\_ELEM(1,EL)) << "   /   "}
00018 
00019   std::cout BOOST\_PP\_SEQ\_FOR\_EACH(\_GENERATE\_HEADER, ~, MODES ) << endl;
00020 
00021   \textcolor{keyword}{const} \textcolor{keywordtype}{int} tries = 10;
00022 
00023 \textcolor{preprocessor}{  #define \_RUN\_BENCH(R,ARG,EL) \(\backslash\)}
00024 \textcolor{preprocessor}{    std::cout << ARG( \(\backslash\)}
00025 \textcolor{preprocessor}{      BOOST\_PP\_CAT(Matrix, BOOST\_PP\_SEQ\_HEAD(EL)) (\(\backslash\)}
00026 \textcolor{preprocessor}{         BOOST\_PP\_SEQ\_ELEM(1,EL),BOOST\_PP\_SEQ\_ELEM(1,EL)), BOOST\_PP\_SEQ\_ELEM(2,EL), tries) \(\backslash\)}
00027 \textcolor{preprocessor}{    << "   ";}
00028 
00029   BOOST\_PP\_SEQ\_FOR\_EACH(\_RUN\_BENCH, benchBasic<LazyEval>, MODES );
00030   std::cout << endl;
00031   BOOST\_PP\_SEQ\_FOR\_EACH(\_RUN\_BENCH, benchBasic<EarlyEval>, MODES );
00032   std::cout << endl;
00033 
00034   \textcolor{keywordflow}{return} 0;
00035 \}
\end{DoxyCode}
