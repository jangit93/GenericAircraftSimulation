\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_functors_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/\+Eigen/\+C\+X\+X11/src/\+Tensor/\+Tensor\+Functors.h}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_functors_8h_source}\index{Tensor\+Functors.\+h@{Tensor\+Functors.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_CXX11\_TENSOR\_TENSOR\_FUNCTORS\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_CXX11\_TENSOR\_TENSOR\_FUNCTORS\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00014 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00015 
00016 
00020 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Scalar>
00021 \textcolor{keyword}{struct }scalar\_mod\_op \{
00022   EIGEN\_DEVICE\_FUNC scalar\_mod\_op(\textcolor{keyword}{const} Scalar& divisor) : m\_divisor(divisor) \{\}
00023   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar operator() (\textcolor{keyword}{const} Scalar& a)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} a % m\_divisor; \}
00024   \textcolor{keyword}{const} Scalar m\_divisor;
00025 \};
00026 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Scalar>
00027 \textcolor{keyword}{struct }functor\_traits<scalar\_mod\_op<Scalar> >
00028 \{ \textcolor{keyword}{enum} \{ Cost = scalar\_div\_cost<Scalar,false>::value, PacketAccess = \textcolor{keyword}{false} \}; \};
00029 
00030 
00034 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Scalar>
00035 \textcolor{keyword}{struct }scalar\_mod2\_op \{
00036   EIGEN\_EMPTY\_STRUCT\_CTOR(scalar\_mod2\_op);
00037   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar operator() (\textcolor{keyword}{const} Scalar& a, \textcolor{keyword}{const} Scalar& b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} a % b; \}
00038 \};
00039 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Scalar>
00040 \textcolor{keyword}{struct }functor\_traits<scalar\_mod2\_op<Scalar> >
00041 \{ \textcolor{keyword}{enum} \{ Cost = scalar\_div\_cost<Scalar,false>::value, PacketAccess = \textcolor{keyword}{false} \}; \};
00042 
00043 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Scalar>
00044 \textcolor{keyword}{struct }scalar\_fmod\_op \{
00045   EIGEN\_EMPTY\_STRUCT\_CTOR(scalar\_fmod\_op);
00046   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Scalar
00047   operator()(\textcolor{keyword}{const} Scalar& a, \textcolor{keyword}{const} Scalar& b)\textcolor{keyword}{ const }\{
00048     \textcolor{keywordflow}{return} numext::fmod(a, b);
00049   \}
00050 \};
00051 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Scalar>
00052 \textcolor{keyword}{struct }functor\_traits<scalar\_fmod\_op<Scalar> > \{
00053   \textcolor{keyword}{enum} \{ Cost = 13,  \textcolor{comment}{// Reciprocal throughput of FPREM on Haswell.}
00054          PacketAccess = \textcolor{keyword}{false} \};
00055 \};
00056 
00057 
00062 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>
00063 \textcolor{keyword}{struct }scalar\_sigmoid\_op \{
00064   EIGEN\_EMPTY\_STRUCT\_CTOR(scalar\_sigmoid\_op)
00065   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} operator()(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}& x)\textcolor{keyword}{ const }\{
00066     \textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} one = \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}(1);
00067     \textcolor{keywordflow}{return} one / (one + numext::exp(-x));
00068   \}
00069 
00070   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet> EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE
00071   Packet packetOp(\textcolor{keyword}{const} Packet& x)\textcolor{keyword}{ const }\{
00072     \textcolor{keyword}{const} Packet one = pset1<Packet>(\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}(1));
00073     \textcolor{keywordflow}{return} pdiv(one, padd(one, pexp(pnegate(x))));
00074   \}
00075 \};
00076 
00077 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>
00078 \textcolor{keyword}{struct }functor\_traits<scalar\_sigmoid\_op<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}> > \{
00079   \textcolor{keyword}{enum} \{
00080     Cost = NumTraits<T>::AddCost * 2 + NumTraits<T>::MulCost * 6,
00081     PacketAccess = packet\_traits<T>::HasAdd && packet\_traits<T>::HasDiv &&
00082                    packet\_traits<T>::HasNegate && packet\_traits<T>::HasExp
00083   \};
00084 \};
00085 
00086 
00087 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Reducer, \textcolor{keyword}{typename} Device>
00088 \textcolor{keyword}{struct }reducer\_traits \{
00089   \textcolor{keyword}{enum} \{
00090     Cost = 1,
00091     PacketAccess = \textcolor{keyword}{false}
00092   \};
00093 \};
00094 
00095 \textcolor{comment}{// Standard reduction functors}
00096 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{struct }SumReducer
00097 \{
00098   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = packet\_traits<T>::HasAdd;
00099   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{false};
00100 
00101   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} t, \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}* accum)\textcolor{keyword}{ const }\{
00102     internal::scalar\_sum\_op<T> sum\_op;
00103     *accum = sum\_op(*accum, t);
00104   \}
00105   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00106   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reducePacket(\textcolor{keyword}{const} Packet& p, Packet* accum)\textcolor{keyword}{ const }\{
00107     (*accum) = padd<Packet>(*accum, p);
00108   \}
00109 
00110   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} initialize()\textcolor{keyword}{ const }\{
00111     internal::scalar\_cast\_op<int, T> conv;
00112     \textcolor{keywordflow}{return} conv(0);
00113   \}
00114   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00115   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet initializePacket()\textcolor{keyword}{ const }\{
00116     \textcolor{keywordflow}{return} pset1<Packet>(initialize());
00117   \}
00118   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalize(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} accum)\textcolor{keyword}{ const }\{
00119     \textcolor{keywordflow}{return} accum;
00120   \}
00121   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00122   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet finalizePacket(\textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00123     \textcolor{keywordflow}{return} vaccum;
00124   \}
00125   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00126   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalizeBoth(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} saccum, \textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00127     internal::scalar\_sum\_op<T> sum\_op;
00128     \textcolor{keywordflow}{return} sum\_op(saccum, predux(vaccum));
00129   \}
00130 \};
00131 
00132 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Device>
00133 \textcolor{keyword}{struct }reducer\_traits<SumReducer<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}>, Device> \{
00134   \textcolor{keyword}{enum} \{
00135     Cost = NumTraits<T>::AddCost,
00136     PacketAccess = PacketType<T, Device>::HasAdd
00137   \};
00138 \};
00139 
00140 
00141 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{struct }MeanReducer
00142 \{
00143   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = packet\_traits<T>::HasAdd && !NumTraits<T>::IsInteger;
00144   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{true};
00145 
00146   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE
00147   MeanReducer() : scalarCount\_(0), packetCount\_(0) \{ \}
00148 
00149   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} t, \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}* accum) \{
00150     internal::scalar\_sum\_op<T> sum\_op;
00151     *accum = sum\_op(*accum, t);
00152     scalarCount\_++;
00153   \}
00154   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00155   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reducePacket(\textcolor{keyword}{const} Packet& p, Packet* accum) \{
00156     (*accum) = padd<Packet>(*accum, p);
00157     packetCount\_++;
00158   \}
00159 
00160   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} initialize()\textcolor{keyword}{ const }\{
00161     internal::scalar\_cast\_op<int, T> conv;
00162     \textcolor{keywordflow}{return} conv(0);
00163   \}
00164   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00165   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet initializePacket()\textcolor{keyword}{ const }\{
00166     \textcolor{keywordflow}{return} pset1<Packet>(initialize());
00167   \}
00168   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalize(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} accum)\textcolor{keyword}{ const }\{
00169     \textcolor{keywordflow}{return} accum / scalarCount\_;
00170   \}
00171   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00172   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet finalizePacket(\textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00173     \textcolor{keywordflow}{return} pdiv(vaccum, pset1<Packet>(packetCount\_));
00174   \}
00175   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00176   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalizeBoth(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} saccum, \textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00177     internal::scalar\_sum\_op<T> sum\_op;
00178     \textcolor{keywordflow}{return} sum\_op(saccum, predux(vaccum)) / (scalarCount\_ + packetCount\_ * unpacket\_traits<Packet>::size);
00179   \}
00180 
00181   \textcolor{keyword}{protected}:
00182     DenseIndex scalarCount\_;
00183     DenseIndex packetCount\_;
00184 \};
00185 
00186 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Device>
00187 \textcolor{keyword}{struct }reducer\_traits<MeanReducer<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}>, Device> \{
00188   \textcolor{keyword}{enum} \{
00189     Cost = NumTraits<T>::AddCost,
00190     PacketAccess = PacketType<T, Device>::HasAdd
00191   \};
00192 \};
00193 
00194 
00195 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keywordtype}{bool} IsMax = true, \textcolor{keywordtype}{bool} IsInteger = true>
00196 \textcolor{keyword}{struct }MinMaxBottomValue \{
00197   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} bottom\_value() \{
00198     \textcolor{keywordflow}{return} \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{Eigen::NumTraits<T>::lowest}();
00199   \}
00200 \};
00201 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>
00202 \textcolor{keyword}{struct }MinMaxBottomValue<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}, true, false> \{
00203   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} bottom\_value() \{
00204     \textcolor{keywordflow}{return} -\hyperlink{group___core___module_struct_eigen_1_1_num_traits}{Eigen::NumTraits<T>::infinity}();
00205   \}
00206 \};
00207 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>
00208 \textcolor{keyword}{struct }MinMaxBottomValue<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}, false, true> \{
00209   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} bottom\_value() \{
00210     \textcolor{keywordflow}{return} \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{Eigen::NumTraits<T>::highest}();
00211   \}
00212 \};
00213 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>
00214 \textcolor{keyword}{struct }MinMaxBottomValue<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}, false, false> \{
00215   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} bottom\_value() \{
00216     \textcolor{keywordflow}{return} \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{Eigen::NumTraits<T>::infinity}();
00217   \}
00218 \};
00219 
00220 
00221 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{struct }MaxReducer
00222 \{
00223   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = packet\_traits<T>::HasMax;
00224   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{false};
00225 
00226   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} t, \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}* accum)\textcolor{keyword}{ const }\{
00227     \textcolor{keywordflow}{if} (t > *accum) \{ *accum = t; \}
00228   \}
00229   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00230   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reducePacket(\textcolor{keyword}{const} Packet& p, Packet* accum)\textcolor{keyword}{ const }\{
00231     (*accum) = pmax<Packet>(*accum, p);
00232   \}
00233   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} initialize()\textcolor{keyword}{ const }\{
00234     \textcolor{keywordflow}{return} MinMaxBottomValue<T, true, Eigen::NumTraits<T>::IsInteger>::bottom\_value();
00235   \}
00236   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00237   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet initializePacket()\textcolor{keyword}{ const }\{
00238     \textcolor{keywordflow}{return} pset1<Packet>(initialize());
00239   \}
00240   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalize(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} accum)\textcolor{keyword}{ const }\{
00241     \textcolor{keywordflow}{return} accum;
00242   \}
00243   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00244   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet finalizePacket(\textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00245     \textcolor{keywordflow}{return} vaccum;
00246   \}
00247   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00248   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalizeBoth(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} saccum, \textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00249     \textcolor{keywordflow}{return} numext::maxi(saccum, predux\_max(vaccum));
00250   \}
00251 \};
00252 
00253 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Device>
00254 \textcolor{keyword}{struct }reducer\_traits<MaxReducer<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}>, Device> \{
00255   \textcolor{keyword}{enum} \{
00256     Cost = NumTraits<T>::AddCost,
00257     PacketAccess = PacketType<T, Device>::HasMax
00258   \};
00259 \};
00260 
00261 
00262 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{struct }MinReducer
00263 \{
00264   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = packet\_traits<T>::HasMin;
00265   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{false};
00266 
00267   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} t, \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}* accum)\textcolor{keyword}{ const }\{
00268     \textcolor{keywordflow}{if} (t < *accum) \{ *accum = t; \}
00269   \}
00270   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00271   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reducePacket(\textcolor{keyword}{const} Packet& p, Packet* accum)\textcolor{keyword}{ const }\{
00272     (*accum) = pmin<Packet>(*accum, p);
00273   \}
00274   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} initialize()\textcolor{keyword}{ const }\{
00275     \textcolor{keywordflow}{return} MinMaxBottomValue<T, false, Eigen::NumTraits<T>::IsInteger>::bottom\_value();
00276   \}
00277   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00278   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet initializePacket()\textcolor{keyword}{ const }\{
00279     \textcolor{keywordflow}{return} pset1<Packet>(initialize());
00280   \}
00281   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalize(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} accum)\textcolor{keyword}{ const }\{
00282     \textcolor{keywordflow}{return} accum;
00283   \}
00284   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00285   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet finalizePacket(\textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00286     \textcolor{keywordflow}{return} vaccum;
00287   \}
00288   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00289   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalizeBoth(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} saccum, \textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00290     \textcolor{keywordflow}{return} numext::mini(saccum, predux\_min(vaccum));
00291   \}
00292 \};
00293 
00294 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Device>
00295 \textcolor{keyword}{struct }reducer\_traits<MinReducer<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}>, Device> \{
00296   \textcolor{keyword}{enum} \{
00297     Cost = NumTraits<T>::AddCost,
00298     PacketAccess = PacketType<T, Device>::HasMin
00299   \};
00300 \};
00301 
00302 
00303 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{struct }ProdReducer
00304 \{
00305   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = packet\_traits<T>::HasMul;
00306   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{false};
00307 
00308   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} t, \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}* accum)\textcolor{keyword}{ const }\{
00309     internal::scalar\_product\_op<T> prod\_op;
00310     (*accum) = prod\_op(*accum, t);
00311   \}
00312   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00313   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reducePacket(\textcolor{keyword}{const} Packet& p, Packet* accum)\textcolor{keyword}{ const }\{
00314     (*accum) = pmul<Packet>(*accum, p);
00315   \}
00316 
00317   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} initialize()\textcolor{keyword}{ const }\{
00318     internal::scalar\_cast\_op<int, T> conv;
00319     \textcolor{keywordflow}{return} conv(1);
00320   \}
00321   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00322   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet initializePacket()\textcolor{keyword}{ const }\{
00323     \textcolor{keywordflow}{return} pset1<Packet>(initialize());
00324   \}
00325   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalize(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} accum)\textcolor{keyword}{ const }\{
00326     \textcolor{keywordflow}{return} accum;
00327   \}
00328   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00329   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Packet finalizePacket(\textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00330     \textcolor{keywordflow}{return} vaccum;
00331   \}
00332   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Packet>
00333   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalizeBoth(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} saccum, \textcolor{keyword}{const} Packet& vaccum)\textcolor{keyword}{ const }\{
00334     internal::scalar\_product\_op<T> prod\_op;
00335     \textcolor{keywordflow}{return} prod\_op(saccum, predux\_mul(vaccum));
00336   \}
00337 \};
00338 
00339 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Device>
00340 \textcolor{keyword}{struct }reducer\_traits<ProdReducer<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}>, Device> \{
00341   \textcolor{keyword}{enum} \{
00342     Cost = NumTraits<T>::MulCost,
00343     PacketAccess = PacketType<T, Device>::HasMul
00344   \};
00345 \};
00346 
00347 
00348 \textcolor{keyword}{struct }AndReducer
00349 \{
00350   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = \textcolor{keyword}{false};
00351   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{false};
00352 
00353   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keywordtype}{bool} t, \textcolor{keywordtype}{bool}* accum)\textcolor{keyword}{ const }\{
00354     *accum = *accum && t;
00355   \}
00356   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{bool} initialize()\textcolor{keyword}{ const }\{
00357     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00358   \}
00359   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{bool} finalize(\textcolor{keywordtype}{bool} accum)\textcolor{keyword}{ const }\{
00360     \textcolor{keywordflow}{return} accum;
00361   \}
00362 \};
00363 
00364 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Device>
00365 \textcolor{keyword}{struct }reducer\_traits<AndReducer, Device> \{
00366   \textcolor{keyword}{enum} \{
00367     Cost = 1,
00368     PacketAccess = \textcolor{keyword}{false}
00369   \};
00370 \};
00371 
00372 
00373 \textcolor{keyword}{struct }OrReducer \{
00374   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = \textcolor{keyword}{false};
00375   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{false};
00376 
00377   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keywordtype}{bool} t, \textcolor{keywordtype}{bool}* accum)\textcolor{keyword}{ const }\{
00378     *accum = *accum || t;
00379   \}
00380   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{bool} initialize()\textcolor{keyword}{ const }\{
00381     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00382   \}
00383   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{bool} finalize(\textcolor{keywordtype}{bool} accum)\textcolor{keyword}{ const }\{
00384     \textcolor{keywordflow}{return} accum;
00385   \}
00386 \};
00387 
00388 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Device>
00389 \textcolor{keyword}{struct }reducer\_traits<OrReducer, Device> \{
00390   \textcolor{keyword}{enum} \{
00391     Cost = 1,
00392     PacketAccess = \textcolor{keyword}{false}
00393   \};
00394 \};
00395 
00396 
00397 \textcolor{comment}{// Argmin/Argmax reducers}
00398 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{struct }ArgMaxTupleReducer
00399 \{
00400   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = \textcolor{keyword}{false};
00401   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{false};
00402 
00403   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} t, \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}* accum)\textcolor{keyword}{ const }\{
00404     \textcolor{keywordflow}{if} (t.second > accum->second) \{ *accum = t; \}
00405   \}
00406   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} initialize()\textcolor{keyword}{ const }\{
00407     \textcolor{keywordflow}{return} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}(0, NumTraits<typename T::second\_type>::lowest());
00408   \}
00409   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalize(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}& accum)\textcolor{keyword}{ const }\{
00410     \textcolor{keywordflow}{return} accum;
00411   \}
00412 \};
00413 
00414 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Device>
00415 \textcolor{keyword}{struct }reducer\_traits<ArgMaxTupleReducer<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}>, Device> \{
00416   \textcolor{keyword}{enum} \{
00417     Cost = NumTraits<T>::AddCost,
00418     PacketAccess = \textcolor{keyword}{false}
00419   \};
00420 \};
00421 
00422 
00423 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{struct }ArgMinTupleReducer
00424 \{
00425   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = \textcolor{keyword}{false};
00426   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} IsStateful = \textcolor{keyword}{false};
00427 
00428   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} reduce(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}& t, \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}* accum)\textcolor{keyword}{ const }\{
00429     \textcolor{keywordflow}{if} (t.second < accum->second) \{ *accum = t; \}
00430   \}
00431   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} initialize()\textcolor{keyword}{ const }\{
00432     \textcolor{keywordflow}{return} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}(0, NumTraits<typename T::second\_type>::highest());
00433   \}
00434   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} finalize(\textcolor{keyword}{const} \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}& accum)\textcolor{keyword}{ const }\{
00435     \textcolor{keywordflow}{return} accum;
00436   \}
00437 \};
00438 
00439 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Device>
00440 \textcolor{keyword}{struct }reducer\_traits<ArgMinTupleReducer<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}>, Device> \{
00441   \textcolor{keyword}{enum} \{
00442     Cost = NumTraits<T>::AddCost,
00443     PacketAccess = \textcolor{keyword}{false}
00444   \};
00445 \};
00446 
00447 
00448 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Index, \textcolor{keywordtype}{size\_t} NumDims>
00449 \textcolor{keyword}{class }GaussianGenerator \{
00450  \textcolor{keyword}{public}:
00451   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{bool} PacketAccess = \textcolor{keyword}{false};
00452 
00453   EIGEN\_DEVICE\_FUNC GaussianGenerator(\textcolor{keyword}{const} array<T, NumDims>& means,
00454                                       \textcolor{keyword}{const} array<T, NumDims>& std\_devs)
00455       : m\_means(means)
00456   \{
00457     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < NumDims; ++i) \{
00458       m\_two\_sigmas[i] = std\_devs[i] * std\_devs[i] * 2;
00459     \}
00460   \}
00461 
00462   EIGEN\_DEVICE\_FUNC \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} operator()(\textcolor{keyword}{const} array<Index, NumDims>& coordinates)\textcolor{keyword}{ const }\{
00463     \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} tmp = \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}(0);
00464     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < NumDims; ++i) \{
00465       \hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T} offset = coordinates[i] - m\_means[i];
00466       tmp += offset * offset / m\_two\_sigmas[i];
00467     \}
00468     \textcolor{keywordflow}{return} numext::exp(-tmp);
00469   \}
00470 
00471  \textcolor{keyword}{private}:
00472   array<T, NumDims> m\_means;
00473   array<T, NumDims> m\_two\_sigmas;
00474 \};
00475 
00476 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Index, \textcolor{keywordtype}{size\_t} NumDims>
00477 \textcolor{keyword}{struct }functor\_traits<GaussianGenerator<\hyperlink{group___sparse_core___module_class_eigen_1_1_triplet}{T}, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}, NumDims> > \{
00478   \textcolor{keyword}{enum} \{
00479     Cost = NumDims * (2 * NumTraits<T>::AddCost + NumTraits<T>::MulCost +
00480                       functor\_traits<scalar\_quotient\_op<T, T> >::Cost) +
00481            functor\_traits<scalar\_exp\_op<T> >::Cost,
00482     PacketAccess = GaussianGenerator<T, Index, NumDims>::PacketAccess
00483   \};
00484 \};
00485 
00486 \} \textcolor{comment}{// end namespace internal}
00487 \} \textcolor{comment}{// end namespace Eigen}
00488 
00489 \textcolor{preprocessor}{#endif // EIGEN\_CXX11\_TENSOR\_TENSOR\_FUNCTORS\_H}
\end{DoxyCode}
