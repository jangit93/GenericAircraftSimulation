\hypertarget{matio_2visual__studio_2test_2eigen_2test_2determinant_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/test/determinant.cpp}
\label{matio_2visual__studio_2test_2eigen_2test_2determinant_8cpp_source}\index{determinant.\+cpp@{determinant.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2008 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{// Copyright (C) 2008 Gael Guennebaud <gael.guennebaud@inria.fr>}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00008 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00009 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00010 
00011 \textcolor{preprocessor}{#include "main.h"}
00012 \textcolor{preprocessor}{#include <Eigen/LU>}
00013 
00014 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType> \textcolor{keywordtype}{void} determinant(\textcolor{keyword}{const} MatrixType& m)
00015 \{
00016   \textcolor{comment}{/* this test covers the following files:}
00017 \textcolor{comment}{     Determinant.h}
00018 \textcolor{comment}{  */}
00019   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Index \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
00020   Index size = m.rows();
00021 
00022   MatrixType m1(size, size), m2(size, size);
00023   m1.setRandom();
00024   m2.setRandom();
00025   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Scalar Scalar;
00026   Scalar x = internal::random<Scalar>();
00027   VERIFY\_IS\_APPROX(MatrixType::Identity(size, size).determinant(), Scalar(1));
00028   VERIFY\_IS\_APPROX((m1*m2).eval().determinant(), m1.determinant() * m2.determinant());
00029   \textcolor{keywordflow}{if}(size==1) \textcolor{keywordflow}{return};
00030   Index i = internal::random<Index>(0, size-1);
00031   Index j;
00032   \textcolor{keywordflow}{do} \{
00033     j = internal::random<Index>(0, size-1);
00034   \} \textcolor{keywordflow}{while}(j==i);
00035   m2 = m1;
00036   m2.row(i).swap(m2.row(j));
00037   VERIFY\_IS\_APPROX(m2.determinant(), -m1.determinant());
00038   m2 = m1;
00039   m2.col(i).swap(m2.col(j));
00040   VERIFY\_IS\_APPROX(m2.determinant(), -m1.determinant());
00041   VERIFY\_IS\_APPROX(m2.determinant(), m2.transpose().determinant());
00042   VERIFY\_IS\_APPROX(numext::conj(m2.determinant()), m2.adjoint().determinant());
00043   m2 = m1;
00044   m2.row(i) += x*m2.row(j);
00045   VERIFY\_IS\_APPROX(m2.determinant(), m1.determinant());
00046   m2 = m1;
00047   m2.row(i) *= x;
00048   VERIFY\_IS\_APPROX(m2.determinant(), m1.determinant() * x);
00049   
00050   \textcolor{comment}{// check empty matrix}
00051   VERIFY\_IS\_APPROX(m2.block(0,0,0,0).determinant(), Scalar(1));
00052 \}
00053 
00054 \textcolor{keywordtype}{void} test\_determinant()
00055 \{
00056   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++) \{
00057     \textcolor{keywordtype}{int} s = 0;
00058     CALL\_SUBTEST\_1( determinant(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 1, 1>}()) );
00059     CALL\_SUBTEST\_2( determinant(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<double, 2, 2>}()) );
00060     CALL\_SUBTEST\_3( determinant(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<double, 3, 3>}()) );
00061     CALL\_SUBTEST\_4( determinant(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<double, 4, 4>}()) );
00062     CALL\_SUBTEST\_5( determinant(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix}<std::complex<double>, 10, 10>()) );
00063     s = internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE/4);
00064     CALL\_SUBTEST\_6( determinant(MatrixXd(s, s)) );
00065     TEST\_SET\_BUT\_UNUSED\_VARIABLE(s)
00066   \}
00067 \}
\end{DoxyCode}
