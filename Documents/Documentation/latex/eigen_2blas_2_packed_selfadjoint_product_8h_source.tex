\hypertarget{eigen_2blas_2_packed_selfadjoint_product_8h_source}{}\section{eigen/blas/\+Packed\+Selfadjoint\+Product.h}
\label{eigen_2blas_2_packed_selfadjoint_product_8h_source}\index{Packed\+Selfadjoint\+Product.\+h@{Packed\+Selfadjoint\+Product.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2012 Chen-Pang He <jdh8@ms63.hinet.net>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_SELFADJOINT\_PACKED\_PRODUCT\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_SELFADJOINT\_PACKED\_PRODUCT\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00014 
00015 \textcolor{comment}{/* Optimized matrix += alpha * uv'}
00016 \textcolor{comment}{ * The matrix is in packed form.}
00017 \textcolor{comment}{ */}
00018 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar, \textcolor{keyword}{typename} Index, \textcolor{keywordtype}{int} StorageOrder, \textcolor{keywordtype}{int} UpLo, \textcolor{keywordtype}{bool} ConjLhs, \textcolor{keywordtype}{bool} ConjRhs>
\Hypertarget{eigen_2blas_2_packed_selfadjoint_product_8h_source_l00019}\hyperlink{structinternal_1_1selfadjoint__packed__rank1__update}{00019} \textcolor{keyword}{struct }\hyperlink{structinternal_1_1selfadjoint__packed__rank1__update}{selfadjoint\_packed\_rank1\_update};
00020 
00021 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar, \textcolor{keyword}{typename} Index, \textcolor{keywordtype}{int} UpLo, \textcolor{keywordtype}{bool} ConjLhs, \textcolor{keywordtype}{bool} ConjRhs>
\Hypertarget{eigen_2blas_2_packed_selfadjoint_product_8h_source_l00022}\hyperlink{structinternal_1_1selfadjoint__packed__rank1__update_3_01_scalar_00_01_index_00_01_col_major_00_cda55a2b2bf1b1755d1ad2703b37584d}{00022} \textcolor{keyword}{struct }\hyperlink{structinternal_1_1selfadjoint__packed__rank1__update}{selfadjoint\_packed\_rank1\_update}<Scalar,Index,
      \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor},UpLo,ConjLhs,ConjRhs>
00023 \{
00024   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} NumTraits<Scalar>::Real RealScalar;
00025   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(Index size, Scalar* mat, \textcolor{keyword}{const} Scalar* vec, RealScalar alpha)
00026   \{
00027     \textcolor{keyword}{typedef} Map<const Matrix<Scalar,Dynamic,1> > OtherMap;
00028     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} conj\_expr\_if<ConjLhs,OtherMap>::type ConjRhsType;
00029     conj\_if<ConjRhs> cj;
00030 
00031     \textcolor{keywordflow}{for} (Index i=0; i<size; ++i)
00032     \{
00033       Map<Matrix<Scalar,Dynamic,1> >(mat, UpLo==\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda891792b8ed394f7607ab16dd716f60e6}{Lower} ? size-i : (i+1)) += alpha * cj(vec[i]) * 
      ConjRhsType(OtherMap(vec+(UpLo==\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda891792b8ed394f7607ab16dd716f60e6}{Lower} ? i : 0), UpLo==\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda891792b8ed394f7607ab16dd716f60e6}{Lower} ? size-i : (i+1)));
00034       \textcolor{comment}{//FIXME This should be handled outside.}
00035       mat[UpLo==\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda891792b8ed394f7607ab16dd716f60e6}{Lower} ? 0 : i] = numext::real(mat[UpLo==\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda891792b8ed394f7607ab16dd716f60e6}{Lower} ? 0 : i]);
00036       mat += UpLo==\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda891792b8ed394f7607ab16dd716f60e6}{Lower} ? size-i : (i+1);
00037     \}
00038   \}
00039 \};
00040 
00041 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar, \textcolor{keyword}{typename} Index, \textcolor{keywordtype}{int} UpLo, \textcolor{keywordtype}{bool} ConjLhs, \textcolor{keywordtype}{bool} ConjRhs>
\Hypertarget{eigen_2blas_2_packed_selfadjoint_product_8h_source_l00042}\hyperlink{structinternal_1_1selfadjoint__packed__rank1__update_3_01_scalar_00_01_index_00_01_row_major_00_9e7850f711875a82e66e0710a9772df5}{00042} \textcolor{keyword}{struct }\hyperlink{structinternal_1_1selfadjoint__packed__rank1__update}{selfadjoint\_packed\_rank1\_update}<Scalar,Index,
      \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor},UpLo,ConjLhs,ConjRhs>
00043 \{
00044   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} NumTraits<Scalar>::Real RealScalar;
00045   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(Index size, Scalar* mat, \textcolor{keyword}{const} Scalar* vec, RealScalar alpha)
00046   \{
00047     
      \hyperlink{structinternal_1_1selfadjoint__packed__rank1__update}{selfadjoint\_packed\_rank1\_update<Scalar,Index,ColMajor,UpLo==Lower?Upper:Lower,ConjRhs,ConjLhs>::run}
      (size,mat,vec,alpha);
00048   \}
00049 \};
00050 
00051 \} \textcolor{comment}{// end namespace internal}
00052 
00053 \textcolor{preprocessor}{#endif // EIGEN\_SELFADJOINT\_PACKED\_PRODUCT\_H}
\end{DoxyCode}
