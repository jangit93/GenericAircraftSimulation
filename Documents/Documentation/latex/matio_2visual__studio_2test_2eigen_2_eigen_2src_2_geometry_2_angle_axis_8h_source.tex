\hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/\+Eigen/src/\+Geometry/\+Angle\+Axis.h}
\label{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source}\index{Angle\+Axis.\+h@{Angle\+Axis.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2008 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_ANGLEAXIS\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_ANGLEAXIS\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00014 
00041 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00042 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar> \textcolor{keyword}{struct }traits<AngleAxis<\_Scalar> >
00043 \{
00044   \textcolor{keyword}{typedef} \_Scalar Scalar;
00045 \};
00046 \}
00047 
00048 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar>
00049 \textcolor{keyword}{class }AngleAxis : \textcolor{keyword}{public} RotationBase<AngleAxis<\_Scalar>,3>
00050 \{
00051   \textcolor{keyword}{typedef} RotationBase<AngleAxis<\_Scalar>,3> Base;
00052 
00053 \textcolor{keyword}{public}:
00054 
00055   \textcolor{keyword}{using} Base::operator*;
00056 
00057   \textcolor{keyword}{enum} \{ Dim = 3 \};
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00059}\hyperlink{group___geometry___module_acd9b10692d7d726b28670e4d3a282fe8}{00059}   \textcolor{keyword}{typedef} \_Scalar \hyperlink{group___geometry___module_acd9b10692d7d726b28670e4d3a282fe8}{Scalar};
00060   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Scalar,3,3>} \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix3};
00061   \textcolor{keyword}{typedef} \hyperlink{group___core___module}{Matrix<Scalar,3,1>} \hyperlink{group___core___module}{Vector3};
00062   \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{QuaternionType};
00063 
00064 \textcolor{keyword}{protected}:
00065 
00066   Vector3 m\_axis;
00067   Scalar m\_angle;
00068 
00069 \textcolor{keyword}{public}:
00070 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00072}\hyperlink{group___geometry___module_a400d37afcd998d1ee348d37b8bd13778}{00072}   EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_a400d37afcd998d1ee348d37b8bd13778}{AngleAxis}() \{\}
00078   \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00079   EIGEN\_DEVICE\_FUNC 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00080}\hyperlink{group___geometry___module_aabac8ee9d467696cddcca18f788a850d}{00080}   \textcolor{keyword}{inline} \hyperlink{group___geometry___module_aabac8ee9d467696cddcca18f788a850d}{AngleAxis}(\textcolor{keyword}{const} Scalar& angle, \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived>}& axis) : 
      m\_axis(axis), m\_angle(angle) \{\}
00084   \textcolor{keyword}{template}<\textcolor{keyword}{typename} QuatDerived> 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00085}\hyperlink{group___geometry___module_a7a77dfb51ed0877a144d935102866542}{00085}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{explicit} \hyperlink{group___geometry___module_a7a77dfb51ed0877a144d935102866542}{AngleAxis}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<QuatDerived>}& q) \{ *\textcolor{keyword}{this} = q; \}
00087   \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00088}\hyperlink{group___geometry___module_aee190c75d9bd91d9148447821635e23d}{00088}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{explicit} \hyperlink{group___geometry___module_aee190c75d9bd91d9148447821635e23d}{AngleAxis}(\textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived>}& m) \{ *\textcolor{keyword}{
      this} = m; \}
00089 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00091}\hyperlink{group___geometry___module_a83d3c08a73c111550b7e480d3ed043d4}{00091}   EIGEN\_DEVICE\_FUNC Scalar \hyperlink{group___geometry___module_a83d3c08a73c111550b7e480d3ed043d4}{angle}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_angle; \}
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00093}\hyperlink{group___geometry___module_aff92498ed4ede5ce8978ca330efd7c4f}{00093}   EIGEN\_DEVICE\_FUNC Scalar& \hyperlink{group___geometry___module_aff92498ed4ede5ce8978ca330efd7c4f}{angle}() \{ \textcolor{keywordflow}{return} m\_angle; \}
00094 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00096}\hyperlink{group___geometry___module_ae40cc36c8dcd9977e1540d91a80696bb}{00096}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{const} Vector3& \hyperlink{group___geometry___module_ae40cc36c8dcd9977e1540d91a80696bb}{axis}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_axis; \}
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00101}\hyperlink{group___geometry___module_afa1d16eb73d70be903a68955ffb4c324}{00101}   EIGEN\_DEVICE\_FUNC Vector3& \hyperlink{group___geometry___module_afa1d16eb73d70be903a68955ffb4c324}{axis}() \{ \textcolor{keywordflow}{return} m\_axis; \}
00102 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00104}\hyperlink{group___geometry___module_ac6fa7e63a28a0682e82a9605f8f70a9a}{00104}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} QuaternionType operator* (\textcolor{keyword}{const} \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis}& other)\textcolor{keyword}{ const}
00105 \textcolor{keyword}{  }\{ \textcolor{keywordflow}{return} QuaternionType(*\textcolor{keyword}{this}) * QuaternionType(other); \}
00106 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00108}\hyperlink{group___geometry___module_ad84c64d475f88ec1aa55c55a35c95cb1}{00108}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} QuaternionType operator* (\textcolor{keyword}{const} QuaternionType& other)\textcolor{keyword}{ const}
00109 \textcolor{keyword}{  }\{ \textcolor{keywordflow}{return} QuaternionType(*\textcolor{keyword}{this}) * other; \}
00110 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00112}\hyperlink{group___geometry___module_ac970fad0583d9f45dcf507cd7d2ae94d}{00112}   \textcolor{keyword}{friend} EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} QuaternionType operator* (\textcolor{keyword}{const} QuaternionType& a, \textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis}& b)
00113   \{ \textcolor{keywordflow}{return} a * QuaternionType(b); \}
00114 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00116}\hyperlink{group___geometry___module_a915c92f43b1a6103762d0d0d059748fb}{00116}   EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis} \hyperlink{group___geometry___module_a915c92f43b1a6103762d0d0d059748fb}{inverse}()\textcolor{keyword}{ const}
00117 \textcolor{keyword}{  }\{ \textcolor{keywordflow}{return} \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis}(-m\_angle, m\_axis); \}
00118 
00119   \textcolor{keyword}{template}<\textcolor{keyword}{class} QuatDerived>
00120   EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis}& operator=(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<QuatDerived>}& q);
00121   \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00122   EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis}& operator=(\textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived>}& m);
00123 
00124   \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00125   EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis}& fromRotationMatrix(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived>}& m);
00126   EIGEN\_DEVICE\_FUNC Matrix3 toRotationMatrix(\textcolor{keywordtype}{void}) \textcolor{keyword}{const};
00127 
00133   \textcolor{keyword}{template}<\textcolor{keyword}{typename} NewScalarType>
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00134}\hyperlink{group___geometry___module_a4baeb843025af6b4ce76e9a29cc08988}{00134}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1cast__return__type}{internal::cast\_return\_type<AngleAxis,AngleAxis<NewScalarType>}
       >::type \hyperlink{group___geometry___module_a4baeb843025af6b4ce76e9a29cc08988}{cast}()\textcolor{keyword}{ const}
00135 \textcolor{keyword}{  }\{ \textcolor{keywordflow}{return} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1cast__return__type}{internal::cast\_return\_type<AngleAxis,AngleAxis<NewScalarType>}
       >::type(*\textcolor{keyword}{this}); \}
00136 
00138   \textcolor{keyword}{template}<\textcolor{keyword}{typename} OtherScalarType>
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00139}\hyperlink{group___geometry___module_a5cc9091af03beb618eb16ee5f910f067}{00139}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{explicit} \hyperlink{group___geometry___module_a5cc9091af03beb618eb16ee5f910f067}{AngleAxis}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<OtherScalarType>}& other)
00140   \{
00141     m\_axis = other.axis().template cast<Scalar>();
00142     m\_angle = Scalar(other.angle());
00143   \}
00144 
00145   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis} Identity() \{ \textcolor{keywordflow}{return} 
      \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis}(Scalar(0), Vector3::UnitX()); \}
00146 
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_geometry_2_angle_axis_8h_source_l00151}\hyperlink{group___geometry___module_a3f219c579dbdce81add9299b8d3938ae}{00151}   EIGEN\_DEVICE\_FUNC \textcolor{keywordtype}{bool} \hyperlink{group___geometry___module_a3f219c579dbdce81add9299b8d3938ae}{isApprox}(\textcolor{keyword}{const} \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis}& other, \textcolor{keyword}{const} \textcolor{keyword}{typename} 
      \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<Scalar>::Real}& prec = 
      \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<Scalar>::dummy\_precision}())\textcolor{keyword}{ const}
00152 \textcolor{keyword}{  }\{ \textcolor{keywordflow}{return} m\_axis.isApprox(other.m\_axis, prec) && internal::isApprox(m\_angle,other.m\_angle, prec); \}
00153 \};
00154 
00157 \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<float>} \hyperlink{group___geometry___module_gadc7128416da41ca99bb8af814b78599e}{AngleAxisf};
00160 \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<double>} \hyperlink{group___geometry___module_gac218cd8f23b49aa36401d0c843bb6835}{AngleAxisd};
00161 
00168 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar>
00169 \textcolor{keyword}{template}<\textcolor{keyword}{typename} QuatDerived>
00170 EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<Scalar>}& 
      \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<Scalar>::operator=}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<QuatDerived>}& q)
00171 \{
00172   EIGEN\_USING\_STD\_MATH(atan2)
00173   EIGEN\_USING\_STD\_MATH(abs)
00174   Scalar n = q.\hyperlink{group___geometry___module_aa8a52640dfd34f910d18f110ccccd1b9}{vec}().norm();
00175   \textcolor{keywordflow}{if}(n<\hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<Scalar>::epsilon}())
00176     n = q.\hyperlink{group___geometry___module_aa8a52640dfd34f910d18f110ccccd1b9}{vec}().stableNorm();
00177 
00178   \textcolor{keywordflow}{if} (n != Scalar(0))
00179   \{
00180     m\_angle = Scalar(2)*atan2(n, abs(q.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}()));
00181     \textcolor{keywordflow}{if}(q.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() < 0)
00182       n = -n;
00183     m\_axis  = q.\hyperlink{group___geometry___module_aa8a52640dfd34f910d18f110ccccd1b9}{vec}() / n;
00184   \}
00185   \textcolor{keywordflow}{else}
00186   \{
00187     m\_angle = Scalar(0);
00188     m\_axis << Scalar(1), Scalar(0), Scalar(0);
00189   \}
00190   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00191 \}
00192 
00195 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar>
00196 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00197 EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<Scalar>}& 
      \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<Scalar>::operator=}(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived>}& mat)
00198 \{
00199   \textcolor{comment}{// Since a direct conversion would not be really faster,}
00200   \textcolor{comment}{// let's use the robust Quaternion implementation:}
00201   \textcolor{keywordflow}{return} *\textcolor{keyword}{this} = QuaternionType(mat);
00202 \}
00203 
00207 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar>
00208 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00209 EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<Scalar>}& 
      \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<Scalar>::fromRotationMatrix}(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived>}& mat)
00210 \{
00211   \textcolor{keywordflow}{return} *\textcolor{keyword}{this} = QuaternionType(mat);
00212 \}
00213 
00216 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar>
00217 \textcolor{keyword}{typename} \hyperlink{group___core___module_class_eigen_1_1_matrix}{AngleAxis<Scalar>::Matrix3}
00218 EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_a750ae6694e576bc6c49b635b56ef5306}{AngleAxis<Scalar>::toRotationMatrix}(\textcolor{keywordtype}{void})\textcolor{keyword}{ const}
00219 \textcolor{keyword}{}\{
00220   EIGEN\_USING\_STD\_MATH(sin)
00221   EIGEN\_USING\_STD\_MATH(cos)
00222   Matrix3 res;
00223   Vector3 sin\_axis  = sin(m\_angle) * m\_axis;
00224   Scalar c = cos(m\_angle);
00225   Vector3 cos1\_axis = (Scalar(1)-c) * m\_axis;
00226 
00227   Scalar tmp;
00228   tmp = cos1\_axis.x() * m\_axis.y();
00229   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(0,1) = tmp - sin\_axis.z();
00230   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(1,0) = tmp + sin\_axis.z();
00231 
00232   tmp = cos1\_axis.x() * m\_axis.z();
00233   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(0,2) = tmp + sin\_axis.y();
00234   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(2,0) = tmp - sin\_axis.y();
00235 
00236   tmp = cos1\_axis.y() * m\_axis.z();
00237   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(1,2) = tmp - sin\_axis.x();
00238   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(2,1) = tmp + sin\_axis.x();
00239 
00240   res.diagonal() = (cos1\_axis.cwiseProduct(m\_axis)).\hyperlink{class_eigen_1_1array}{array}() + c;
00241 
00242   \textcolor{keywordflow}{return} res;
00243 \}
00244 
00245 \} \textcolor{comment}{// end namespace Eigen}
00246 
00247 \textcolor{preprocessor}{#endif // EIGEN\_ANGLEAXIS\_H}
\end{DoxyCode}
