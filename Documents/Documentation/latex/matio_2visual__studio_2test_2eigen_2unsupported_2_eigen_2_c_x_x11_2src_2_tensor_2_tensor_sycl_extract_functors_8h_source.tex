\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_sycl_extract_functors_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/\+Eigen/\+C\+X\+X11/src/\+Tensor/\+Tensor\+Sycl\+Extract\+Functors.h}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_sycl_extract_functors_8h_source}\index{Tensor\+Sycl\+Extract\+Functors.\+h@{Tensor\+Sycl\+Extract\+Functors.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Mehdi Goli    Codeplay Software Ltd.}
00005 \textcolor{comment}{// Ralph Potter  Codeplay Software Ltd.}
00006 \textcolor{comment}{// Luke Iwanski  Codeplay Software Ltd.}
00007 \textcolor{comment}{// Contact: <eigen@codeplay.com>}
00008 \textcolor{comment}{//}
00009 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00010 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00011 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00012 
00013 \textcolor{comment}{/*****************************************************************}
00014 \textcolor{comment}{ * TensorSyclextractFunctors.h}
00015 \textcolor{comment}{ *}
00016 \textcolor{comment}{ * \(\backslash\)brief:}
00017 \textcolor{comment}{ *  Used to extract all the functors allocated to each node of the expression}
00018 \textcolor{comment}{*tree.}
00019 \textcolor{comment}{ *}
00020 \textcolor{comment}{*****************************************************************/}
00021 
00022 \textcolor{preprocessor}{#ifndef UNSUPPORTED\_EIGEN\_CXX11\_SRC\_TENSOR\_TENSORSYCL\_EXTRACT\_FUNCTORS\_HPP}
00023 \textcolor{preprocessor}{#define UNSUPPORTED\_EIGEN\_CXX11\_SRC\_TENSOR\_TENSORSYCL\_EXTRACT\_FUNCTORS\_HPP}
00024 
00025 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00026 \textcolor{keyword}{namespace }TensorSycl \{
00027 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00035 \textcolor{comment}{// This struct is used for leafNode (TensorMap) and nodes behaving like leafNode (TensorForcedEval).}
00036 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Evaluator> \textcolor{keyword}{struct }FunctorExtractor\{
00037   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Evaluator::Dimensions Dimensions;
00038   \textcolor{keyword}{const} Dimensions m\_dimensions;
00039   \textcolor{keyword}{const} Dimensions& dimensions()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_dimensions; \}
00040   FunctorExtractor(\textcolor{keyword}{const} Evaluator& expr)
00041   : m\_dimensions(expr.dimensions()) \{\}
00042 
00043 \};
00044 
00047 \textcolor{keyword}{template} <\textcolor{keyword}{template} <\textcolor{keyword}{class}, \textcolor{keyword}{class}> \textcolor{keyword}{class }UnaryCategory, \textcolor{keyword}{typename} OP, \textcolor{keyword}{typename} RHSExpr, \textcolor{keyword}{typename} Dev>
00048 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<const UnaryCategory<OP, RHSExpr>, Dev> > \{
00049   FunctorExtractor<TensorEvaluator<RHSExpr, Dev> > rhsExpr;
00050   OP \hyperlink{structfunc}{func};
00051   FunctorExtractor(\textcolor{keyword}{const} TensorEvaluator<\textcolor{keyword}{const} UnaryCategory<OP, RHSExpr>, Dev>& expr)
00052   : rhsExpr(expr.impl()), func(expr.functor()) \{\}
00053 \};
00056 \textcolor{keyword}{template} <\textcolor{keyword}{template} <\textcolor{keyword}{class}, \textcolor{keyword}{class}> \textcolor{keyword}{class }UnaryCategory, \textcolor{keyword}{typename} OP, \textcolor{keyword}{typename} RHSExpr, \textcolor{keyword}{typename} Dev>
00057 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<UnaryCategory<OP, RHSExpr>, Dev> >
00058 : FunctorExtractor<TensorEvaluator<const UnaryCategory<OP, RHSExpr>, Dev> >\{\};
00059 
00062 \textcolor{keyword}{template} <\textcolor{keyword}{template}<\textcolor{keyword}{class}, \textcolor{keyword}{class}, \textcolor{keyword}{class}> \textcolor{keyword}{class }BinaryCategory, \textcolor{keyword}{typename} OP, \textcolor{keyword}{typename} LHSExpr, \textcolor{keyword}{typename} 
      RHSExpr, \textcolor{keyword}{typename} Dev>
00063 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<const BinaryCategory<OP, LHSExpr, RHSExpr>, Dev> > \{
00064   FunctorExtractor<TensorEvaluator<LHSExpr, Dev> > lhsExpr;
00065   FunctorExtractor<TensorEvaluator<RHSExpr, Dev> > rhsExpr;
00066   OP \hyperlink{structfunc}{func};
00067   FunctorExtractor(\textcolor{keyword}{const} TensorEvaluator<\textcolor{keyword}{const} BinaryCategory<OP, LHSExpr, RHSExpr>, Dev>& expr)
00068   : lhsExpr(expr.left\_impl()),rhsExpr(expr.right\_impl()),func(expr.functor()) \{\}
00069 \};
00070 
00073 \textcolor{keyword}{template} <\textcolor{keyword}{template} <\textcolor{keyword}{class}, \textcolor{keyword}{class}, \textcolor{keyword}{class}> \textcolor{keyword}{class }BinaryCategory, \textcolor{keyword}{typename} OP, \textcolor{keyword}{typename} LHSExpr, \textcolor{keyword}{typename} 
      RHSExpr, \textcolor{keyword}{typename} Dev>
00074 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<BinaryCategory<OP,  LHSExpr, RHSExpr>, Dev> >
00075 : FunctorExtractor<TensorEvaluator<const BinaryCategory<OP,  LHSExpr, RHSExpr>, Dev> >\{\};
00076 
00079 \textcolor{keyword}{template} <\textcolor{keyword}{template} <\textcolor{keyword}{class}, \textcolor{keyword}{class}, \textcolor{keyword}{class}, \textcolor{keyword}{class}> \textcolor{keyword}{class }TernaryCategory, \textcolor{keyword}{typename} OP, \textcolor{keyword}{typename} Arg1Expr, \textcolor{keyword}{
      typename} Arg2Expr, \textcolor{keyword}{typename} Arg3Expr,\textcolor{keyword}{typename} Dev>
00080 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<const TernaryCategory<OP, Arg1Expr, Arg2Expr, Arg3Expr>, Dev> > \{
00081   FunctorExtractor<TensorEvaluator<Arg1Expr, Dev> > arg1Expr;
00082   FunctorExtractor<TensorEvaluator<Arg2Expr, Dev> > arg2Expr;
00083   FunctorExtractor<TensorEvaluator<Arg3Expr, Dev> > arg3Expr;
00084   OP \hyperlink{structfunc}{func};
00085   FunctorExtractor(\textcolor{keyword}{const} TensorEvaluator<\textcolor{keyword}{const} TernaryCategory<OP, Arg1Expr, Arg2Expr, Arg3Expr>, Dev>& 
      expr)
00086   : arg1Expr(expr.arg1Impl()), arg2Expr(expr.arg2Impl()), arg3Expr(expr.arg3Impl()), func(expr.functor()) \{
      \}
00087 \};
00088 
00091 \textcolor{keyword}{template} <\textcolor{keyword}{template} <\textcolor{keyword}{class}, \textcolor{keyword}{class}, \textcolor{keyword}{class}, \textcolor{keyword}{class}> \textcolor{keyword}{class }TernaryCategory, \textcolor{keyword}{typename} OP, \textcolor{keyword}{typename} Arg1Expr, \textcolor{keyword}{
      typename} Arg2Expr, \textcolor{keyword}{typename} Arg3Expr, \textcolor{keyword}{typename} Dev>
00092 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator< TernaryCategory<OP, Arg1Expr, Arg2Expr, Arg3Expr>, Dev> >
00093 :FunctorExtractor<TensorEvaluator<const TernaryCategory<OP, Arg1Expr, Arg2Expr, Arg3Expr>, Dev> >\{\};
00094 
00097 \textcolor{keyword}{template} <\textcolor{keyword}{typename} IfExpr, \textcolor{keyword}{typename} ThenExpr, \textcolor{keyword}{typename} ElseExpr, \textcolor{keyword}{typename} Dev>
00098 \textcolor{keyword}{struct }FunctorExtractor< TensorEvaluator<const TensorSelectOp<IfExpr, ThenExpr, ElseExpr>, Dev> > \{
00099   FunctorExtractor<TensorEvaluator<IfExpr, Dev> > ifExpr;
00100   FunctorExtractor<TensorEvaluator<ThenExpr, Dev> > thenExpr;
00101   FunctorExtractor<TensorEvaluator<ElseExpr, Dev> > elseExpr;
00102   FunctorExtractor(\textcolor{keyword}{const} TensorEvaluator<\textcolor{keyword}{const} TensorSelectOp<IfExpr, ThenExpr, ElseExpr>, Dev>& expr)
00103   : ifExpr(expr.cond\_impl()), thenExpr(expr.then\_impl()), elseExpr(expr.else\_impl()) \{\}
00104 \};
00105 
00108 \textcolor{keyword}{template} <\textcolor{keyword}{typename} IfExpr, \textcolor{keyword}{typename} ThenExpr, \textcolor{keyword}{typename} ElseExpr, \textcolor{keyword}{typename} Dev>
00109 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<TensorSelectOp<IfExpr, ThenExpr, ElseExpr>, Dev> >
00110 :FunctorExtractor< TensorEvaluator<const TensorSelectOp<IfExpr, ThenExpr, ElseExpr>, Dev> > \{\};
00111 
00114 \textcolor{keyword}{template} <\textcolor{keyword}{typename} LHSExpr, \textcolor{keyword}{typename} RHSExpr, \textcolor{keyword}{typename} Dev>
00115 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<const TensorAssignOp<LHSExpr, RHSExpr>, Dev> > \{
00116   FunctorExtractor<TensorEvaluator<LHSExpr, Dev> > lhsExpr;
00117   FunctorExtractor<TensorEvaluator<RHSExpr, Dev> > rhsExpr;
00118   FunctorExtractor(\textcolor{keyword}{const} TensorEvaluator<\textcolor{keyword}{const} TensorAssignOp<LHSExpr, RHSExpr>, Dev>& expr)
00119   : lhsExpr(expr.left\_impl()), rhsExpr(expr.right\_impl()) \{\}
00120 \};
00121 
00124 \textcolor{keyword}{template} <\textcolor{keyword}{typename} LHSExpr, \textcolor{keyword}{typename} RHSExpr, \textcolor{keyword}{typename} Dev>
00125 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<TensorAssignOp<LHSExpr, RHSExpr>, Dev> >
00126 :FunctorExtractor<TensorEvaluator<const TensorAssignOp<LHSExpr, RHSExpr>, Dev> >\{\};
00127 
00128 
00131 \textcolor{keyword}{template} <\textcolor{keyword}{typename} RHSExpr, \textcolor{keyword}{typename} Dev>
00132 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<const TensorEvalToOp<RHSExpr>, Dev> > \{
00133   FunctorExtractor<TensorEvaluator<RHSExpr, Dev> > rhsExpr;
00134   FunctorExtractor(\textcolor{keyword}{const} TensorEvaluator<\textcolor{keyword}{const} TensorEvalToOp<RHSExpr>, Dev>& expr)
00135   : rhsExpr(expr.impl()) \{\}
00136 \};
00137 
00140 \textcolor{keyword}{template} <\textcolor{keyword}{typename} RHSExpr, \textcolor{keyword}{typename} Dev>
00141 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<TensorEvalToOp<RHSExpr>, Dev> >
00142 : FunctorExtractor<TensorEvaluator<const TensorEvalToOp<RHSExpr>, Dev> > \{\};
00143 
00144 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Dim, \textcolor{keywordtype}{size\_t} NumOutputDim> \textcolor{keyword}{struct }DimConstr \{
00145 \textcolor{keyword}{template}<\textcolor{keyword}{typename} InDim>
00146   \textcolor{keyword}{static} \textcolor{keyword}{inline} Dim getDim(InDim dims ) \{\textcolor{keywordflow}{return} dims;\}
00147 \};
00148 
00149 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Dim> \textcolor{keyword}{struct }DimConstr<Dim, 0> \{
00150   \textcolor{keyword}{template}<\textcolor{keyword}{typename} InDim>
00151     \textcolor{keyword}{static} \textcolor{keyword}{inline} Dim getDim(InDim dims ) \{\textcolor{keywordflow}{return} Dim(dims.TotalSize());\}
00152 \};
00153 
00154 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Op, \textcolor{keyword}{typename} Dims, \textcolor{keyword}{typename} ArgType, \textcolor{keyword}{template} <\textcolor{keyword}{class}> \textcolor{keyword}{class }MakePointer\_, \textcolor{keyword}{typename} Device
      >
00155 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<const TensorReductionOp<Op, Dims, ArgType, MakePointer\_>, Device>>\{
00156   \textcolor{keyword}{typedef} TensorEvaluator<const TensorReductionOp<Op, Dims, ArgType, MakePointer\_>, Device> Evaluator;
00157   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1conditional}{Eigen::internal::conditional<Evaluator::NumOutputDims==0, DSizes<typename Evaluator::Index, 1>}
      , \textcolor{keyword}{typename} Evaluator::Dimensions >::type Dimensions;
00158   \textcolor{keyword}{const} Dimensions m\_dimensions;
00159   \textcolor{keyword}{const} Dimensions& dimensions()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_dimensions; \}
00160   FunctorExtractor(\textcolor{keyword}{const} TensorEvaluator<\textcolor{keyword}{const} TensorReductionOp<Op, Dims, ArgType, MakePointer\_>, Device>&
       expr)
00161   : m\_dimensions(DimConstr<Dimensions, Evaluator::NumOutputDims>::getDim(expr.dimensions())) \{\}
00162 \};
00163 
00164 
00165 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Op, \textcolor{keyword}{typename} Dims, \textcolor{keyword}{typename} ArgType, \textcolor{keyword}{template} <\textcolor{keyword}{class}> \textcolor{keyword}{class }MakePointer\_, \textcolor{keyword}{typename} Device
      >
00166 \textcolor{keyword}{struct }FunctorExtractor<TensorEvaluator<TensorReductionOp<Op, Dims, ArgType, MakePointer\_>, Device>>
00167 : FunctorExtractor<TensorEvaluator<const TensorReductionOp<Op, Dims, ArgType, MakePointer\_>, Device>>\{\};
00169 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Evaluator>
00170 \textcolor{keyword}{auto} \textcolor{keyword}{inline} extractFunctors(\textcolor{keyword}{const} Evaluator& evaluator)-> FunctorExtractor<Evaluator> \{
00171   \textcolor{keywordflow}{return} FunctorExtractor<Evaluator>(evaluator);
00172 \}
00173 \}  \textcolor{comment}{// namespace internal}
00174 \}  \textcolor{comment}{// namespace TensorSycl}
00175 \}  \textcolor{comment}{// namespace Eigen}
00176 
00177 \textcolor{preprocessor}{#endif  // UNSUPPORTED\_EIGEN\_CXX11\_SRC\_TENSOR\_TENSORSYCL\_EXTRACT\_FUNCTORS\_HPP}
\end{DoxyCode}
