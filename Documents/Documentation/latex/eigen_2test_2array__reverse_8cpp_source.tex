\hypertarget{eigen_2test_2array__reverse_8cpp_source}{}\section{eigen/test/array\+\_\+reverse.cpp}
\label{eigen_2test_2array__reverse_8cpp_source}\index{array\+\_\+reverse.\+cpp@{array\+\_\+reverse.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2006-2008 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{// Copyright (C) 2009 Ricard Marxer <email@ricardmarxer.com>}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00008 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00009 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00010 
00011 \textcolor{preprocessor}{#include "main.h"}
00012 \textcolor{preprocessor}{#include <iostream>}
00013 
00014 \textcolor{keyword}{using namespace }\hyperlink{namespacestd}{std};
00015 
00016 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType> \textcolor{keywordtype}{void} reverse(\textcolor{keyword}{const} MatrixType& m)
00017 \{
00018   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Index \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
00019   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Scalar Scalar;
00020   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Scalar, MatrixType::RowsAtCompileTime, 1>} 
      \hyperlink{struct_vector_type}{VectorType};
00021 
00022   Index rows = m.rows();
00023   Index cols = m.cols();
00024 
00025   \textcolor{comment}{// this test relies a lot on Random.h, and there's not much more that we can do}
00026   \textcolor{comment}{// to test it, hence I consider that we will have tested Random.h}
00027   MatrixType m1 = MatrixType::Random(rows, cols), m2;
00028   VectorType v1 = VectorType::Random(rows);
00029 
00030   MatrixType m1\_r = m1.reverse();
00031   \textcolor{comment}{// Verify that MatrixBase::reverse() works}
00032   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < rows; i++ ) \{
00033     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j = 0; j < cols; j++ ) \{
00034       VERIFY\_IS\_APPROX(m1\_r(i, j), m1(rows - 1 - i, cols - 1 - j));
00035     \}
00036   \}
00037 
00038   \hyperlink{group___core___module_class_eigen_1_1_reverse}{Reverse<MatrixType>} m1\_rd(m1);
00039   \textcolor{comment}{// Verify that a Reverse default (in both directions) of an expression works}
00040   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < rows; i++ ) \{
00041     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j = 0; j < cols; j++ ) \{
00042       VERIFY\_IS\_APPROX(m1\_rd(i, j), m1(rows - 1 - i, cols - 1 - j));
00043     \}
00044   \}
00045 
00046   \hyperlink{group___core___module_class_eigen_1_1_reverse}{Reverse<MatrixType, BothDirections>} m1\_rb(m1);
00047   \textcolor{comment}{// Verify that a Reverse in both directions of an expression works}
00048   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < rows; i++ ) \{
00049     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j = 0; j < cols; j++ ) \{
00050       VERIFY\_IS\_APPROX(m1\_rb(i, j), m1(rows - 1 - i, cols - 1 - j));
00051     \}
00052   \}
00053 
00054   \hyperlink{group___core___module_class_eigen_1_1_reverse}{Reverse<MatrixType, Vertical>} m1\_rv(m1);
00055   \textcolor{comment}{// Verify that a Reverse in the vertical directions of an expression works}
00056   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < rows; i++ ) \{
00057     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j = 0; j < cols; j++ ) \{
00058       VERIFY\_IS\_APPROX(m1\_rv(i, j), m1(rows - 1 - i, j));
00059     \}
00060   \}
00061 
00062   \hyperlink{group___core___module_class_eigen_1_1_reverse}{Reverse<MatrixType, Horizontal>} m1\_rh(m1);
00063   \textcolor{comment}{// Verify that a Reverse in the horizontal directions of an expression works}
00064   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < rows; i++ ) \{
00065     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j = 0; j < cols; j++ ) \{
00066       VERIFY\_IS\_APPROX(m1\_rh(i, j), m1(i, cols - 1 - j));
00067     \}
00068   \}
00069 
00070   VectorType v1\_r = v1.reverse();
00071   \textcolor{comment}{// Verify that a VectorType::reverse() of an expression works}
00072   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < rows; i++ ) \{
00073     VERIFY\_IS\_APPROX(v1\_r(i), v1(rows - 1 - i));
00074   \}
00075 
00076   MatrixType m1\_cr = m1.colwise().reverse();
00077   \textcolor{comment}{// Verify that PartialRedux::reverse() works (for colwise())}
00078   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < rows; i++ ) \{
00079     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j = 0; j < cols; j++ ) \{
00080       VERIFY\_IS\_APPROX(m1\_cr(i, j), m1(rows - 1 - i, j));
00081     \}
00082   \}
00083 
00084   MatrixType m1\_rr = m1.rowwise().reverse();
00085   \textcolor{comment}{// Verify that PartialRedux::reverse() works (for rowwise())}
00086   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < rows; i++ ) \{
00087     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j = 0; j < cols; j++ ) \{
00088       VERIFY\_IS\_APPROX(m1\_rr(i, j), m1(i, cols - 1 - j));
00089     \}
00090   \}
00091 
00092   Scalar x = internal::random<Scalar>();
00093 
00094   Index r = internal::random<Index>(0, rows-1),
00095         c = internal::random<Index>(0, cols-1);
00096 
00097   m1.reverse()(r, c) = x;
00098   VERIFY\_IS\_APPROX(x, m1(rows - 1 - r, cols - 1 - c));
00099   
00100   m2 = m1;
00101   m2.reverseInPlace();
00102   VERIFY\_IS\_APPROX(m2,m1.reverse().eval());
00103   
00104   m2 = m1;
00105   m2.col(0).reverseInPlace();
00106   VERIFY\_IS\_APPROX(m2.col(0),m1.col(0).reverse().eval());
00107   
00108   m2 = m1;
00109   m2.row(0).reverseInPlace();
00110   VERIFY\_IS\_APPROX(m2.row(0),m1.row(0).reverse().eval());
00111   
00112   m2 = m1;
00113   m2.rowwise().reverseInPlace();
00114   VERIFY\_IS\_APPROX(m2,m1.rowwise().reverse().eval());
00115   
00116   m2 = m1;
00117   m2.colwise().reverseInPlace();
00118   VERIFY\_IS\_APPROX(m2,m1.colwise().reverse().eval());
00119 
00120   m1.colwise().reverse()(r, c) = x;
00121   VERIFY\_IS\_APPROX(x, m1(rows - 1 - r, c));
00122 
00123   m1.rowwise().reverse()(r, c) = x;
00124   VERIFY\_IS\_APPROX(x, m1(r, cols - 1 - c));
00125 \}
00126 
00127 \textcolor{keywordtype}{void} test\_array\_reverse()
00128 \{
00129   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++) \{
00130     CALL\_SUBTEST\_1( reverse(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 1, 1>}()) );
00131     CALL\_SUBTEST\_2( reverse(Matrix2f()) );
00132     CALL\_SUBTEST\_3( reverse(Matrix4f()) );
00133     CALL\_SUBTEST\_4( reverse(Matrix4d()) );
00134     CALL\_SUBTEST\_5( reverse(MatrixXcf(internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE), internal::random<int>(1
      ,EIGEN\_TEST\_MAX\_SIZE))) );
00135     CALL\_SUBTEST\_6( reverse(MatrixXi(internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE), internal::random<int>(1,
      EIGEN\_TEST\_MAX\_SIZE))) );
00136     CALL\_SUBTEST\_7( reverse(MatrixXcd(internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE), internal::random<int>(1
      ,EIGEN\_TEST\_MAX\_SIZE))) );
00137     CALL\_SUBTEST\_8( reverse(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 100, 100>}()) );
00138     CALL\_SUBTEST\_9( reverse(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float,Dynamic,Dynamic,RowMajor>}(
      internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE), internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE))) );
00139   \}
00140 \textcolor{preprocessor}{#ifdef EIGEN\_TEST\_PART\_3}
00141   Vector4f x; x << 1, 2, 3, 4;
00142   Vector4f y; y << 4, 3, 2, 1;
00143   VERIFY(x.reverse()[1] == 3);
00144   VERIFY(x.reverse() == y);
00145 \textcolor{preprocessor}{#endif}
00146 \}
\end{DoxyCode}
