\hypertarget{eigen_2blas_2f2c_2srotmg_8c_source}{}\section{eigen/blas/f2c/srotmg.c}
\label{eigen_2blas_2f2c_2srotmg_8c_source}\index{srotmg.\+c@{srotmg.\+c}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* srotmg.f -- translated by f2c (version 20100827).}
00002 \textcolor{comment}{   You must link the resulting object file with libf2c:}
00003 \textcolor{comment}{    on Microsoft Windows system, link with libf2c.lib;}
00004 \textcolor{comment}{    on Linux or Unix systems, link with .../path/to/libf2c.a -lm}
00005 \textcolor{comment}{    or, if you install libf2c.a in a standard place, with -lf2c -lm}
00006 \textcolor{comment}{    -- in that order, at the end of the command line, as in}
00007 \textcolor{comment}{        cc *.o -lf2c -lm}
00008 \textcolor{comment}{    Source for libf2c is in /netlib/f2c/libf2c.zip, e.g.,}
00009 \textcolor{comment}{}
00010 \textcolor{comment}{        http://www.netlib.org/f2c/libf2c.zip}
00011 \textcolor{comment}{*/}
00012 
00013 \textcolor{preprocessor}{#include "datatypes.h"}
00014 
00015 \textcolor{comment}{/* Subroutine */} \textcolor{keywordtype}{int} srotmg\_(real *sd1, real *sd2, real *sx1, real *sy1, real 
00016     *sparam)
00017 \{
00018     \textcolor{comment}{/* Initialized data */}
00019 
00020     \textcolor{keyword}{static} real zero = 0.f;
00021     \textcolor{keyword}{static} real one = 1.f;
00022     \textcolor{keyword}{static} real two = 2.f;
00023     \textcolor{keyword}{static} real gam = 4096.f;
00024     \textcolor{keyword}{static} real gamsq = 16777200.f;
00025     \textcolor{keyword}{static} real rgamsq = 5.96046e-8f;
00026 
00027     \textcolor{comment}{/* Format strings */}
00028     \textcolor{keyword}{static} \textcolor{keywordtype}{char} fmt\_120[] = \textcolor{stringliteral}{""};
00029     \textcolor{keyword}{static} \textcolor{keywordtype}{char} fmt\_150[] = \textcolor{stringliteral}{""};
00030     \textcolor{keyword}{static} \textcolor{keywordtype}{char} fmt\_180[] = \textcolor{stringliteral}{""};
00031     \textcolor{keyword}{static} \textcolor{keywordtype}{char} fmt\_210[] = \textcolor{stringliteral}{""};
00032 
00033     \textcolor{comment}{/* System generated locals */}
00034     real r\_\_1;
00035 
00036     \textcolor{comment}{/* Local variables */}
00037     real su, sp1, sp2, sq1, sq2, sh11, sh12, sh21, sh22;
00038     integer igo;
00039     real sflag, stemp;
00040 
00041     \textcolor{comment}{/* Assigned format variables */}
00042     \textcolor{keyword}{static} \textcolor{keywordtype}{char} *igo\_fmt;
00043 
00044 \textcolor{comment}{/*     .. Scalar Arguments .. */}
00045 \textcolor{comment}{/*     .. */}
00046 \textcolor{comment}{/*     .. Array Arguments .. */}
00047 \textcolor{comment}{/*     .. */}
00048 
00049 \textcolor{comment}{/*  Purpose */}
00050 \textcolor{comment}{/*  ======= */}
00051 
00052 \textcolor{comment}{/*     CONSTRUCT THE MODIFIED GIVENS TRANSFORMATION MATRIX H WHICH ZEROS */}
00053 \textcolor{comment}{/*     THE SECOND COMPONENT OF THE 2-VECTOR  (SQRT(SD1)*SX1,SQRT(SD2)* */}
00054 \textcolor{comment}{/*     SY2)**T. */}
00055 \textcolor{comment}{/*     WITH SPARAM(1)=SFLAG, H HAS ONE OF THE FOLLOWING FORMS.. */}
00056 
00057 \textcolor{comment}{/*     SFLAG=-1.E0     SFLAG=0.E0        SFLAG=1.E0     SFLAG=-2.E0 */}
00058 
00059 \textcolor{comment}{/*       (SH11  SH12)    (1.E0  SH12)    (SH11  1.E0)    (1.E0  0.E0) */}
00060 \textcolor{comment}{/*     H=(          )    (          )    (          )    (          ) */}
00061 \textcolor{comment}{/*       (SH21  SH22),   (SH21  1.E0),   (-1.E0 SH22),   (0.E0  1.E0). */}
00062 \textcolor{comment}{/*     LOCATIONS 2-4 OF SPARAM CONTAIN SH11,SH21,SH12, AND SH22 */}
00063 \textcolor{comment}{/*     RESPECTIVELY. (VALUES OF 1.E0, -1.E0, OR 0.E0 IMPLIED BY THE */}
00064 \textcolor{comment}{/*     VALUE OF SPARAM(1) ARE NOT STORED IN SPARAM.) */}
00065 
00066 \textcolor{comment}{/*     THE VALUES OF GAMSQ AND RGAMSQ SET IN THE DATA STATEMENT MAY BE */}
00067 \textcolor{comment}{/*     INEXACT.  THIS IS OK AS THEY ARE ONLY USED FOR TESTING THE SIZE */}
00068 \textcolor{comment}{/*     OF SD1 AND SD2.  ALL ACTUAL SCALING OF DATA IS DONE USING GAM. */}
00069 
00070 
00071 \textcolor{comment}{/*  Arguments */}
00072 \textcolor{comment}{/*  ========= */}
00073 
00074 
00075 \textcolor{comment}{/*  SD1    (input/output) REAL */}
00076 
00077 \textcolor{comment}{/*  SD2    (input/output) REAL */}
00078 
00079 \textcolor{comment}{/*  SX1    (input/output) REAL */}
00080 
00081 \textcolor{comment}{/*  SY1    (input) REAL */}
00082 
00083 
00084 \textcolor{comment}{/*  SPARAM (input/output)  REAL array, dimension 5 */}
00085 \textcolor{comment}{/*     SPARAM(1)=SFLAG */}
00086 \textcolor{comment}{/*     SPARAM(2)=SH11 */}
00087 \textcolor{comment}{/*     SPARAM(3)=SH21 */}
00088 \textcolor{comment}{/*     SPARAM(4)=SH12 */}
00089 \textcolor{comment}{/*     SPARAM(5)=SH22 */}
00090 
00091 \textcolor{comment}{/*  ===================================================================== */}
00092 
00093 \textcolor{comment}{/*     .. Local Scalars .. */}
00094 \textcolor{comment}{/*     .. */}
00095 \textcolor{comment}{/*     .. Intrinsic Functions .. */}
00096 \textcolor{comment}{/*     .. */}
00097 \textcolor{comment}{/*     .. Data statements .. */}
00098 
00099     \textcolor{comment}{/* Parameter adjustments */}
00100     --sparam;
00101 
00102     \textcolor{comment}{/* Function Body */}
00103 \textcolor{comment}{/*     .. */}
00104     \textcolor{keywordflow}{if} (! (*sd1 < zero)) \{
00105     \textcolor{keywordflow}{goto} L10;
00106     \}
00107 \textcolor{comment}{/*       GO ZERO-H-D-AND-SX1.. */}
00108     \textcolor{keywordflow}{goto} L60;
00109 L10:
00110 \textcolor{comment}{/*     CASE-SD1-NONNEGATIVE */}
00111     sp2 = *sd2 * *sy1;
00112     \textcolor{keywordflow}{if} (! (sp2 == zero)) \{
00113     \textcolor{keywordflow}{goto} L20;
00114     \}
00115     sflag = -two;
00116     \textcolor{keywordflow}{goto} L260;
00117 \textcolor{comment}{/*     REGULAR-CASE.. */}
00118 L20:
00119     sp1 = *sd1 * *sx1;
00120     sq2 = sp2 * *sy1;
00121     sq1 = sp1 * *sx1;
00122 
00123     \textcolor{keywordflow}{if} (! (dabs(sq1) > dabs(sq2))) \{
00124     \textcolor{keywordflow}{goto} L40;
00125     \}
00126     sh21 = -(*sy1) / *sx1;
00127     sh12 = sp2 / sp1;
00128 
00129     su = one - sh12 * sh21;
00130 
00131     \textcolor{keywordflow}{if} (! (su <= zero)) \{
00132     \textcolor{keywordflow}{goto} L30;
00133     \}
00134 \textcolor{comment}{/*         GO ZERO-H-D-AND-SX1.. */}
00135     \textcolor{keywordflow}{goto} L60;
00136 L30:
00137     sflag = zero;
00138     *sd1 /= su;
00139     *sd2 /= su;
00140     *sx1 *= su;
00141 \textcolor{comment}{/*         GO SCALE-CHECK.. */}
00142     \textcolor{keywordflow}{goto} L100;
00143 L40:
00144     \textcolor{keywordflow}{if} (! (sq2 < zero)) \{
00145     \textcolor{keywordflow}{goto} L50;
00146     \}
00147 \textcolor{comment}{/*         GO ZERO-H-D-AND-SX1.. */}
00148     \textcolor{keywordflow}{goto} L60;
00149 L50:
00150     sflag = one;
00151     sh11 = sp1 / sp2;
00152     sh22 = *sx1 / *sy1;
00153     su = one + sh11 * sh22;
00154     stemp = *sd2 / su;
00155     *sd2 = *sd1 / su;
00156     *sd1 = stemp;
00157     *sx1 = *sy1 * su;
00158 \textcolor{comment}{/*         GO SCALE-CHECK */}
00159     \textcolor{keywordflow}{goto} L100;
00160 \textcolor{comment}{/*     PROCEDURE..ZERO-H-D-AND-SX1.. */}
00161 L60:
00162     sflag = -one;
00163     sh11 = zero;
00164     sh12 = zero;
00165     sh21 = zero;
00166     sh22 = zero;
00167 
00168     *sd1 = zero;
00169     *sd2 = zero;
00170     *sx1 = zero;
00171 \textcolor{comment}{/*         RETURN.. */}
00172     \textcolor{keywordflow}{goto} L220;
00173 \textcolor{comment}{/*     PROCEDURE..FIX-H.. */}
00174 L70:
00175     \textcolor{keywordflow}{if} (! (sflag >= zero)) \{
00176     \textcolor{keywordflow}{goto} L90;
00177     \}
00178 
00179     \textcolor{keywordflow}{if} (! (sflag == zero)) \{
00180     \textcolor{keywordflow}{goto} L80;
00181     \}
00182     sh11 = one;
00183     sh22 = one;
00184     sflag = -one;
00185     \textcolor{keywordflow}{goto} L90;
00186 L80:
00187     sh21 = -one;
00188     sh12 = one;
00189     sflag = -one;
00190 L90:
00191     \textcolor{keywordflow}{switch} (igo) \{
00192     \textcolor{keywordflow}{case} 0: \textcolor{keywordflow}{goto} L120;
00193     \textcolor{keywordflow}{case} 1: \textcolor{keywordflow}{goto} L150;
00194     \textcolor{keywordflow}{case} 2: \textcolor{keywordflow}{goto} L180;
00195     \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{goto} L210;
00196     \}
00197 \textcolor{comment}{/*     PROCEDURE..SCALE-CHECK */}
00198 L100:
00199 L110:
00200     \textcolor{keywordflow}{if} (! (*sd1 <= rgamsq)) \{
00201     \textcolor{keywordflow}{goto} L130;
00202     \}
00203     \textcolor{keywordflow}{if} (*sd1 == zero) \{
00204     \textcolor{keywordflow}{goto} L160;
00205     \}
00206     igo = 0;
00207     igo\_fmt = fmt\_120;
00208 \textcolor{comment}{/*              FIX-H.. */}
00209     \textcolor{keywordflow}{goto} L70;
00210 L120:
00211 \textcolor{comment}{/* Computing 2nd power */}
00212     r\_\_1 = gam;
00213     *sd1 *= r\_\_1 * r\_\_1;
00214     *sx1 /= gam;
00215     sh11 /= gam;
00216     sh12 /= gam;
00217     \textcolor{keywordflow}{goto} L110;
00218 L130:
00219 L140:
00220     \textcolor{keywordflow}{if} (! (*sd1 >= gamsq)) \{
00221     \textcolor{keywordflow}{goto} L160;
00222     \}
00223     igo = 1;
00224     igo\_fmt = fmt\_150;
00225 \textcolor{comment}{/*              FIX-H.. */}
00226     \textcolor{keywordflow}{goto} L70;
00227 L150:
00228 \textcolor{comment}{/* Computing 2nd power */}
00229     r\_\_1 = gam;
00230     *sd1 /= r\_\_1 * r\_\_1;
00231     *sx1 *= gam;
00232     sh11 *= gam;
00233     sh12 *= gam;
00234     \textcolor{keywordflow}{goto} L140;
00235 L160:
00236 L170:
00237     \textcolor{keywordflow}{if} (! (dabs(*sd2) <= rgamsq)) \{
00238     \textcolor{keywordflow}{goto} L190;
00239     \}
00240     \textcolor{keywordflow}{if} (*sd2 == zero) \{
00241     \textcolor{keywordflow}{goto} L220;
00242     \}
00243     igo = 2;
00244     igo\_fmt = fmt\_180;
00245 \textcolor{comment}{/*              FIX-H.. */}
00246     \textcolor{keywordflow}{goto} L70;
00247 L180:
00248 \textcolor{comment}{/* Computing 2nd power */}
00249     r\_\_1 = gam;
00250     *sd2 *= r\_\_1 * r\_\_1;
00251     sh21 /= gam;
00252     sh22 /= gam;
00253     \textcolor{keywordflow}{goto} L170;
00254 L190:
00255 L200:
00256     \textcolor{keywordflow}{if} (! (dabs(*sd2) >= gamsq)) \{
00257     \textcolor{keywordflow}{goto} L220;
00258     \}
00259     igo = 3;
00260     igo\_fmt = fmt\_210;
00261 \textcolor{comment}{/*              FIX-H.. */}
00262     \textcolor{keywordflow}{goto} L70;
00263 L210:
00264 \textcolor{comment}{/* Computing 2nd power */}
00265     r\_\_1 = gam;
00266     *sd2 /= r\_\_1 * r\_\_1;
00267     sh21 *= gam;
00268     sh22 *= gam;
00269     \textcolor{keywordflow}{goto} L200;
00270 L220:
00271     \textcolor{keywordflow}{if} (sflag < 0.f) \{
00272     \textcolor{keywordflow}{goto} L250;
00273     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sflag == 0) \{
00274     \textcolor{keywordflow}{goto} L230;
00275     \} \textcolor{keywordflow}{else} \{
00276     \textcolor{keywordflow}{goto} L240;
00277     \}
00278 L230:
00279     sparam[3] = sh21;
00280     sparam[4] = sh12;
00281     \textcolor{keywordflow}{goto} L260;
00282 L240:
00283     sparam[2] = sh11;
00284     sparam[5] = sh22;
00285     \textcolor{keywordflow}{goto} L260;
00286 L250:
00287     sparam[2] = sh11;
00288     sparam[3] = sh21;
00289     sparam[4] = sh12;
00290     sparam[5] = sh22;
00291 L260:
00292     sparam[1] = sflag;
00293     \textcolor{keywordflow}{return} 0;
00294 \} \textcolor{comment}{/* srotmg\_ */}
00295 
\end{DoxyCode}
