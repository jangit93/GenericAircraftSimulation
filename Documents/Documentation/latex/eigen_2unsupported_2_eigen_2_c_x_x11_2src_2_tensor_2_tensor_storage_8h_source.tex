\hypertarget{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_storage_8h_source}{}\section{eigen/unsupported/\+Eigen/\+C\+X\+X11/src/\+Tensor/\+Tensor\+Storage.h}
\label{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_storage_8h_source}\index{Tensor\+Storage.\+h@{Tensor\+Storage.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2013 Christian Seiler <christian@iwakd.de>}
00005 \textcolor{comment}{// Copyright (C) 2014-2015 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00008 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00009 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00010 
00011 \textcolor{preprocessor}{#ifndef EIGEN\_CXX11\_TENSOR\_TENSORSTORAGE\_H}
00012 \textcolor{preprocessor}{#define EIGEN\_CXX11\_TENSOR\_TENSORSTORAGE\_H}
00013 
00014 \textcolor{preprocessor}{#ifdef EIGEN\_TENSOR\_STORAGE\_CTOR\_PLUGIN}
00015 \textcolor{preprocessor}{  #define EIGEN\_INTERNAL\_TENSOR\_STORAGE\_CTOR\_PLUGIN EIGEN\_TENSOR\_STORAGE\_CTOR\_PLUGIN;}
00016 \textcolor{preprocessor}{#else}
00017 \textcolor{preprocessor}{  #define EIGEN\_INTERNAL\_TENSOR\_STORAGE\_CTOR\_PLUGIN}
00018 \textcolor{preprocessor}{#endif}
00019 
00020 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00021 
\Hypertarget{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_storage_8h_source_l00034}\hyperlink{class_eigen_1_1_tensor_storage}{00034} \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} Dimensions, \textcolor{keywordtype}{int} Options\_> \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_tensor_storage}{TensorStorage};
00035 
00036 
00037 \textcolor{comment}{// Pure fixed-size storage}
00038 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keywordtype}{int} Options\_, \textcolor{keyword}{typename} FixedDimensions>
\Hypertarget{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_storage_8h_source_l00039}\hyperlink{class_eigen_1_1_tensor_storage_3_01_t_00_01_fixed_dimensions_00_01_options___01_4}{00039} \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_tensor_storage}{TensorStorage}<\hyperlink{group___sparse_core___module}{T}, FixedDimensions, Options\_>
00040 \{
00041  \textcolor{keyword}{private}:
00042   \textcolor{keyword}{static} \textcolor{keyword}{const} std::size\_t Size = FixedDimensions::total\_size;
00043 
00044   \textcolor{comment}{// Allocate an array of size at least one to prevent compiler warnings.}
00045   \textcolor{keyword}{static} \textcolor{keyword}{const} std::size\_t MinSize = \hyperlink{struct_eigen_1_1max__n__1}{max\_n\_1<Size>::size};
00046   EIGEN\_ALIGN\_MAX \hyperlink{group___sparse_core___module}{T} m\_data[MinSize];
00047 
00048   FixedDimensions m\_dimensions;
00049 
00050  \textcolor{keyword}{public}:
00051   EIGEN\_DEVICE\_FUNC
00052   EIGEN\_STRONG\_INLINE \hyperlink{class_eigen_1_1_tensor_storage}{TensorStorage}() \{
00053   \}
00054 
00055   EIGEN\_DEVICE\_FUNC
00056   EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module}{T} *data() \{ \textcolor{keywordflow}{return} m\_data; \}
00057   EIGEN\_DEVICE\_FUNC
00058   EIGEN\_STRONG\_INLINE \textcolor{keyword}{const} \hyperlink{group___sparse_core___module}{T} *data()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_data; \}
00059 
00060   EIGEN\_DEVICE\_FUNC
00061   EIGEN\_STRONG\_INLINE \textcolor{keyword}{const} FixedDimensions& dimensions()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_dimensions; \}
00062 
00063   EIGEN\_DEVICE\_FUNC
00064   EIGEN\_STRONG\_INLINE DenseIndex size()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_dimensions.TotalSize(); \}
00065 \};
00066 
00067 
00068 \textcolor{comment}{// pure dynamic}
00069 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keywordtype}{int} Options\_, \textcolor{keyword}{typename} IndexType, \textcolor{keywordtype}{int} NumIndices\_>
\Hypertarget{eigen_2unsupported_2_eigen_2_c_x_x11_2src_2_tensor_2_tensor_storage_8h_source_l00070}\hyperlink{class_eigen_1_1_tensor_storage_3_01_t_00_01_d_sizes_3_01_index_type_00_01_num_indices___01_4_00_01_options___01_4}{00070} \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_tensor_storage}{TensorStorage}<\hyperlink{group___sparse_core___module}{T}, \hyperlink{struct_eigen_1_1_d_sizes}{DSizes}<IndexType, NumIndices\_>, Options\_>
00071 \{
00072   \textcolor{keyword}{public}:
00073     \textcolor{keyword}{typedef} IndexType \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
00074     \textcolor{keyword}{typedef} \hyperlink{struct_eigen_1_1_d_sizes}{DSizes<IndexType, NumIndices\_>} 
      \hyperlink{struct_eigen_1_1_d_sizes}{Dimensions};
00075     \textcolor{keyword}{typedef} \hyperlink{class_eigen_1_1_tensor_storage}{TensorStorage<T, DSizes<IndexType, NumIndices\_>},
       Options\_> \hyperlink{class_eigen_1_1_tensor_storage_3_01_t_00_01_d_sizes_3_01_index_type_00_01_num_indices___01_4_00_01_options___01_4}{Self};
00076 
00077     EIGEN\_DEVICE\_FUNC \hyperlink{class_eigen_1_1_tensor_storage}{TensorStorage}() : m\_data(0), m\_dimensions() \{
00078       \textcolor{keywordflow}{if} (NumIndices\_ == 0) \{
00079     m\_data = internal::conditional\_aligned\_new\_auto<T,(Options\_&DontAlign)==0>(1);
00080       \}
00081     \}
00082     EIGEN\_DEVICE\_FUNC TensorStorage(
      \hyperlink{struct_eigen_1_1internal_1_1constructor__without__unaligned__array__assert}{internal::constructor\_without\_unaligned\_array\_assert})
00083       : m\_data(0), m\_dimensions(internal::template repeat<NumIndices\_, Index>(0)) \{\}
00084     EIGEN\_DEVICE\_FUNC TensorStorage(Index size, \textcolor{keyword}{const} \hyperlink{class_eigen_1_1array}{array<Index, NumIndices\_>}& 
      dimensions)
00085         : m\_data(internal::conditional\_aligned\_new\_auto<\hyperlink{group___sparse_core___module}{T},(Options\_&\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign})==0>(size)), 
      m\_dimensions(dimensions)
00086       \{ EIGEN\_INTERNAL\_TENSOR\_STORAGE\_CTOR\_PLUGIN \}
00087 
00088 \textcolor{preprocessor}{#if EIGEN\_HAS\_VARIADIC\_TEMPLATES}
00089     \textcolor{keyword}{template} <\textcolor{keyword}{typename}... DenseIndex>
00090     EIGEN\_DEVICE\_FUNC TensorStorage(DenseIndex... indices) : m\_dimensions(indices...) \{
00091       m\_data = internal::conditional\_aligned\_new\_auto<T,(Options\_&DontAlign)==0>(internal::array\_prod(
      m\_dimensions));
00092     \}
00093 \textcolor{preprocessor}{#endif}
00094 
00095     EIGEN\_DEVICE\_FUNC TensorStorage(\textcolor{keyword}{const} Self& other)
00096       : m\_data(internal::conditional\_aligned\_new\_auto<\hyperlink{group___sparse_core___module}{T},(Options\_&DontAlign)==0>(internal::array\_prod(
      other.m\_dimensions)))
00097       , m\_dimensions(other.m\_dimensions)
00098     \{
00099       internal::smart\_copy(other.m\_data, other.m\_data+internal::array\_prod(other.m\_dimensions), m\_data);
00100     \}
00101     EIGEN\_DEVICE\_FUNC Self& operator=(\textcolor{keyword}{const} Self& other)
00102     \{
00103       \textcolor{keywordflow}{if} (\textcolor{keyword}{this} != &other) \{
00104         Self tmp(other);
00105         this->\hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}(tmp);
00106       \}
00107       \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00108     \}
00109 
00110     EIGEN\_DEVICE\_FUNC  ~TensorStorage() \{ 
      internal::conditional\_aligned\_delete\_auto<T,(Options\_&DontAlign)==0>(m\_data, internal::array\_prod(m\_dimensions)); \}
00111     EIGEN\_DEVICE\_FUNC  \textcolor{keywordtype}{void} \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}(Self& other)
00112     \{ \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{numext::swap}(m\_data,other.m\_data); \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{numext::swap}(m\_dimensions,other.
      m\_dimensions); \}
00113 
00114     EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keyword}{const} Dimensions& dimensions()\textcolor{keyword}{ const }\{\textcolor{keywordflow}{return} m\_dimensions;\}
00115 
00116     EIGEN\_DEVICE\_FUNC \textcolor{keywordtype}{void} resize(Index size, \textcolor{keyword}{const} \hyperlink{class_eigen_1_1array}{array<Index, NumIndices\_>}& 
      nbDimensions)
00117     \{
00118       \textcolor{keyword}{const} Index currentSz = internal::array\_prod(m\_dimensions);
00119       \textcolor{keywordflow}{if}(size != currentSz)
00120       \{
00121         internal::conditional\_aligned\_delete\_auto<T,(Options\_&DontAlign)==0>(m\_data, currentSz);
00122         \textcolor{keywordflow}{if} (size)
00123           m\_data = internal::conditional\_aligned\_new\_auto<T,(Options\_&DontAlign)==0>(size);
00124         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (NumIndices\_ == 0) \{
00125       m\_data = internal::conditional\_aligned\_new\_auto<T,(Options\_&DontAlign)==0>(1);
00126     \}
00127     \textcolor{keywordflow}{else} 
00128           m\_data = 0;
00129         EIGEN\_INTERNAL\_DENSE\_STORAGE\_CTOR\_PLUGIN(\{\})
00130       \}
00131       m\_dimensions = nbDimensions;
00132     \}
00133 
00134     EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___sparse_core___module}{T} *data() \{ \textcolor{keywordflow}{return} m\_data; \}
00135     EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keyword}{const} \hyperlink{group___sparse_core___module}{T} *data()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_data; \}
00136 
00137     EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Index size()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_dimensions.TotalSize(); \}
00138 
00139  \textcolor{keyword}{private}:
00140   \hyperlink{group___sparse_core___module}{T} *m\_data;
00141   Dimensions m\_dimensions;
00142 \};
00143 
00144 \} \textcolor{comment}{// end namespace Eigen}
00145 
00146 \textcolor{preprocessor}{#endif // EIGEN\_CXX11\_TENSOR\_TENSORSTORAGE\_H}
\end{DoxyCode}
