\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2polynomialutils_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/polynomialutils.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2polynomialutils_8cpp_source}\index{polynomialutils.\+cpp@{polynomialutils.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2010 Manuel Yguel <manuel.yguel@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 \textcolor{preprocessor}{#include <unsupported/Eigen/Polynomials>}
00012 \textcolor{preprocessor}{#include <iostream>}
00013 
00014 \textcolor{keyword}{using namespace }\hyperlink{namespacestd}{std};
00015 
00016 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00017 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00018 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} Size>
00019 \textcolor{keyword}{struct }increment\_if\_fixed\_size
00020 \{
00021   \textcolor{keyword}{enum} \{
00022     ret = (Size == \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic}) ? Dynamic : Size+1
00023   \};
00024 \};
00025 \}
00026 \}
00027 
00028 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Deg>
00029 \textcolor{keywordtype}{void} realRoots\_to\_monicPolynomial\_test(\textcolor{keywordtype}{int} deg)
00030 \{
00031   \textcolor{keyword}{typedef} internal::increment\_if\_fixed\_size<\_Deg>            Dim;
00032   \textcolor{keyword}{typedef} Matrix<\_Scalar,Dim::ret,1>                  PolynomialType;
00033   \textcolor{keyword}{typedef} Matrix<\_Scalar,\_Deg,1>                      EvalRootsType;
00034 
00035   PolynomialType pols(deg+1);
00036   EvalRootsType roots = EvalRootsType::Random(deg);
00037   \hyperlink{namespace_eigen_afbc3648f7ef67db3d5d04454fc1257fd}{roots\_to\_monicPolynomial}( roots, pols );
00038 
00039   EvalRootsType evr( deg );
00040   \textcolor{keywordflow}{for}( \textcolor{keywordtype}{int} i=0; i<roots.size(); ++i )\{
00041     evr[i] = std::abs( \hyperlink{namespace_eigen_adb64ffddaa9e83634e3ab0e3fd3664f5}{poly\_eval}( pols, roots[i] ) ); \}
00042 
00043   \textcolor{keywordtype}{bool} evalToZero = evr.isZero( test\_precision<\_Scalar>() );
00044   \textcolor{keywordflow}{if}( !evalToZero )\{
00045     cerr << evr.transpose() << endl; \}
00046   VERIFY( evalToZero );
00047 \}
00048 
00049 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar> \textcolor{keywordtype}{void} realRoots\_to\_monicPolynomial\_scalar()
00050 \{
00051   CALL\_SUBTEST\_2( (realRoots\_to\_monicPolynomial\_test<\_Scalar,2>(2)) );
00052   CALL\_SUBTEST\_3( (realRoots\_to\_monicPolynomial\_test<\_Scalar,3>(3)) );
00053   CALL\_SUBTEST\_4( (realRoots\_to\_monicPolynomial\_test<\_Scalar,4>(4)) );
00054   CALL\_SUBTEST\_5( (realRoots\_to\_monicPolynomial\_test<\_Scalar,5>(5)) );
00055   CALL\_SUBTEST\_6( (realRoots\_to\_monicPolynomial\_test<\_Scalar,6>(6)) );
00056   CALL\_SUBTEST\_7( (realRoots\_to\_monicPolynomial\_test<\_Scalar,7>(7)) );
00057   CALL\_SUBTEST\_8( (realRoots\_to\_monicPolynomial\_test<\_Scalar,17>(17)) );
00058 
00059   CALL\_SUBTEST\_9( (realRoots\_to\_monicPolynomial\_test<\_Scalar,Dynamic>(
00060           internal::random<int>(18,26) )) );
00061 \}
00062 
00063 
00064 
00065 
00066 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Deg>
00067 \textcolor{keywordtype}{void} CauchyBounds(\textcolor{keywordtype}{int} deg)
00068 \{
00069   \textcolor{keyword}{typedef} internal::increment\_if\_fixed\_size<\_Deg>            Dim;
00070   \textcolor{keyword}{typedef} Matrix<\_Scalar,Dim::ret,1>                  PolynomialType;
00071   \textcolor{keyword}{typedef} Matrix<\_Scalar,\_Deg,1>                      EvalRootsType;
00072 
00073   PolynomialType pols(deg+1);
00074   EvalRootsType roots = EvalRootsType::Random(deg);
00075   \hyperlink{namespace_eigen_afbc3648f7ef67db3d5d04454fc1257fd}{roots\_to\_monicPolynomial}( roots, pols );
00076   \_Scalar \hyperlink{group___core___module_class_eigen_1_1_matrix}{M} = \hyperlink{namespace_eigen_ac90ec4513aa09bb8ad54daa209322d03}{cauchy\_max\_bound}( pols );
00077   \_Scalar m = \hyperlink{namespace_eigen_a43f0af310d5cc131eb5e806f241af951}{cauchy\_min\_bound}( pols );
00078   \_Scalar Max = roots.array().abs().maxCoeff();
00079   \_Scalar min = roots.array().abs().minCoeff();
00080   \textcolor{keywordtype}{bool} eval = (M >= Max) && (m <= min);
00081   \textcolor{keywordflow}{if}( !eval )
00082   \{
00083     cerr << \textcolor{stringliteral}{"Roots: "} << roots << endl;
00084     cerr << \textcolor{stringliteral}{"Bounds: ("} << m << \textcolor{stringliteral}{", "} << M << \textcolor{stringliteral}{")"} << endl;
00085     cerr << \textcolor{stringliteral}{"Min,Max: ("} << min << \textcolor{stringliteral}{", "} << Max << \textcolor{stringliteral}{")"} << endl;
00086   \}
00087   VERIFY( eval );
00088 \}
00089 
00090 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar> \textcolor{keywordtype}{void} CauchyBounds\_scalar()
00091 \{
00092   CALL\_SUBTEST\_2( (CauchyBounds<\_Scalar,2>(2)) );
00093   CALL\_SUBTEST\_3( (CauchyBounds<\_Scalar,3>(3)) );
00094   CALL\_SUBTEST\_4( (CauchyBounds<\_Scalar,4>(4)) );
00095   CALL\_SUBTEST\_5( (CauchyBounds<\_Scalar,5>(5)) );
00096   CALL\_SUBTEST\_6( (CauchyBounds<\_Scalar,6>(6)) );
00097   CALL\_SUBTEST\_7( (CauchyBounds<\_Scalar,7>(7)) );
00098   CALL\_SUBTEST\_8( (CauchyBounds<\_Scalar,17>(17)) );
00099 
00100   CALL\_SUBTEST\_9( (CauchyBounds<\_Scalar,Dynamic>(
00101           internal::random<int>(18,26) )) );
00102 \}
00103 
00104 \textcolor{keywordtype}{void} test\_polynomialutils()
00105 \{
00106   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++)
00107   \{
00108     realRoots\_to\_monicPolynomial\_scalar<double>();
00109     realRoots\_to\_monicPolynomial\_scalar<float>();
00110     CauchyBounds\_scalar<double>();
00111     CauchyBounds\_scalar<float>();
00112   \}
00113 \}
\end{DoxyCode}
