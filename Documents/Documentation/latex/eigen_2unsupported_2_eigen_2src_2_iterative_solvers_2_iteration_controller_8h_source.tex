\hypertarget{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source}{}\section{eigen/unsupported/\+Eigen/src/\+Iterative\+Solvers/\+Iteration\+Controller.h}
\label{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source}\index{Iteration\+Controller.\+h@{Iteration\+Controller.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2008-2009 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 
00006 \textcolor{comment}{/* NOTE The class IterationController has been adapted from the iteration}
00007 \textcolor{comment}{ *      class of the GMM++ and ITL libraries.}
00008 \textcolor{comment}{ */}
00009 
00010 \textcolor{comment}{//=======================================================================}
00011 \textcolor{comment}{// Copyright (C) 1997-2001}
00012 \textcolor{comment}{// Authors: Andrew Lumsdaine <lums@osl.iu.edu> }
00013 \textcolor{comment}{//          Lie-Quan Lee     <llee@osl.iu.edu>}
00014 \textcolor{comment}{//}
00015 \textcolor{comment}{// This file is part of the Iterative Template Library}
00016 \textcolor{comment}{//}
00017 \textcolor{comment}{// You should have received a copy of the License Agreement for the}
00018 \textcolor{comment}{// Iterative Template Library along with the software;  see the}
00019 \textcolor{comment}{// file LICENSE.  }
00020 \textcolor{comment}{//}
00021 \textcolor{comment}{// Permission to modify the code and to distribute modified code is}
00022 \textcolor{comment}{// granted, provided the text of this NOTICE is retained, a notice that}
00023 \textcolor{comment}{// the code was modified is included with the above COPYRIGHT NOTICE and}
00024 \textcolor{comment}{// with the COPYRIGHT NOTICE in the LICENSE file, and that the LICENSE}
00025 \textcolor{comment}{// file is distributed with the modified code.}
00026 \textcolor{comment}{//}
00027 \textcolor{comment}{// LICENSOR MAKES NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED.}
00028 \textcolor{comment}{// By way of example, but not limitation, Licensor MAKES NO}
00029 \textcolor{comment}{// REPRESENTATIONS OR WARRANTIES OF MERCHANTABILITY OR FITNESS FOR ANY}
00030 \textcolor{comment}{// PARTICULAR PURPOSE OR THAT THE USE OF THE LICENSED SOFTWARE COMPONENTS}
00031 \textcolor{comment}{// OR DOCUMENTATION WILL NOT INFRINGE ANY PATENTS, COPYRIGHTS, TRADEMARKS}
00032 \textcolor{comment}{// OR OTHER RIGHTS.}
00033 \textcolor{comment}{//=======================================================================}
00034 
00035 \textcolor{comment}{//========================================================================}
00036 \textcolor{comment}{//}
00037 \textcolor{comment}{// Copyright (C) 2002-2007 Yves Renard}
00038 \textcolor{comment}{//}
00039 \textcolor{comment}{// This file is a part of GETFEM++}
00040 \textcolor{comment}{//}
00041 \textcolor{comment}{// Getfem++ is free software; you can redistribute it and/or modify}
00042 \textcolor{comment}{// it under the terms of the GNU Lesser General Public License as}
00043 \textcolor{comment}{// published by the Free Software Foundation; version 2.1 of the License.}
00044 \textcolor{comment}{//}
00045 \textcolor{comment}{// This program is distributed in the hope that it will be useful,}
00046 \textcolor{comment}{// but WITHOUT ANY WARRANTY; without even the implied warranty of}
00047 \textcolor{comment}{// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00048 \textcolor{comment}{// GNU Lesser General Public License for more details.}
00049 \textcolor{comment}{// You should have received a copy of the GNU Lesser General Public}
00050 \textcolor{comment}{// License along with this program; if not, write to the Free Software}
00051 \textcolor{comment}{// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301,}
00052 \textcolor{comment}{// USA.}
00053 \textcolor{comment}{//}
00054 \textcolor{comment}{//========================================================================}
00055 
00056 \textcolor{preprocessor}{#include "../../../../Eigen/src/Core/util/NonMPL2.h"}
00057 
00058 \textcolor{preprocessor}{#ifndef EIGEN\_ITERATION\_CONTROLLER\_H}
00059 \textcolor{preprocessor}{#define EIGEN\_ITERATION\_CONTROLLER\_H}
00060 
00061 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00062 
\Hypertarget{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source_l00071}\hyperlink{class_eigen_1_1_iteration_controller}{00071} \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_iteration_controller}{IterationController}
00072 \{
00073   protected :
\Hypertarget{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source_l00074}\hyperlink{class_eigen_1_1_iteration_controller_a43364d62c43861aff44cb0a86c4615a6}{00074}     \textcolor{keywordtype}{double} \hyperlink{class_eigen_1_1_iteration_controller_a43364d62c43861aff44cb0a86c4615a6}{m\_rhsn};        
\Hypertarget{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source_l00075}\hyperlink{class_eigen_1_1_iteration_controller_a42f72b0f3d490a6ceaa7bc76a51c1471}{00075}     \textcolor{keywordtype}{size\_t} \hyperlink{class_eigen_1_1_iteration_controller_a42f72b0f3d490a6ceaa7bc76a51c1471}{m\_maxiter};     
\Hypertarget{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source_l00076}\hyperlink{class_eigen_1_1_iteration_controller_afcff4288066c186967f15defcd833f5d}{00076}     \textcolor{keywordtype}{int} \hyperlink{class_eigen_1_1_iteration_controller_afcff4288066c186967f15defcd833f5d}{m\_noise};          
\Hypertarget{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source_l00077}\hyperlink{class_eigen_1_1_iteration_controller_a5342235a082ee820516fd593ee1efeac}{00077}     \textcolor{keywordtype}{double} \hyperlink{class_eigen_1_1_iteration_controller_a5342235a082ee820516fd593ee1efeac}{m\_resmax};      
00078     \textcolor{keywordtype}{double} m\_resminreach, m\_resadd;
\Hypertarget{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source_l00079}\hyperlink{class_eigen_1_1_iteration_controller_ac9d122615471416cc827a3d8e8ea15f2}{00079}     \textcolor{keywordtype}{size\_t} \hyperlink{class_eigen_1_1_iteration_controller_ac9d122615471416cc827a3d8e8ea15f2}{m\_nit};         
\Hypertarget{eigen_2unsupported_2_eigen_2src_2_iterative_solvers_2_iteration_controller_8h_source_l00080}\hyperlink{class_eigen_1_1_iteration_controller_af60d33d2bdd09f3d00fd73ddc91fc1e6}{00080}     \textcolor{keywordtype}{double} \hyperlink{class_eigen_1_1_iteration_controller_af60d33d2bdd09f3d00fd73ddc91fc1e6}{m\_res};         
00081     \textcolor{keywordtype}{bool} m\_written;
00082     void (*m\_callback)(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_iteration_controller}{IterationController}&);
00083   public :
00084 
00085     \textcolor{keywordtype}{void} \hyperlink{structinit}{init}()
00086     \{
00087       m\_nit = 0; m\_res = 0.0; m\_written = \textcolor{keyword}{false};
00088       m\_resminreach = 1E50; m\_resadd = 0.0;
00089       m\_callback = 0;
00090     \}
00091 
00092     \hyperlink{class_eigen_1_1_iteration_controller}{IterationController}(\textcolor{keywordtype}{double} r = 1.0E-8, \textcolor{keywordtype}{int} noi = 0, \textcolor{keywordtype}{size\_t} mit = \textcolor{keywordtype}{size\_t}(-1))
00093       : \hyperlink{class_eigen_1_1_iteration_controller_a43364d62c43861aff44cb0a86c4615a6}{m\_rhsn}(1.0), \hyperlink{class_eigen_1_1_iteration_controller_a42f72b0f3d490a6ceaa7bc76a51c1471}{m\_maxiter}(mit), \hyperlink{class_eigen_1_1_iteration_controller_afcff4288066c186967f15defcd833f5d}{m\_noise}(noi), 
      \hyperlink{class_eigen_1_1_iteration_controller_a5342235a082ee820516fd593ee1efeac}{m\_resmax}(r) \{ \hyperlink{structinit}{init}(); \}
00094 
00095     \textcolor{keywordtype}{void} operator ++(\textcolor{keywordtype}{int}) \{ m\_nit++; m\_written = \textcolor{keyword}{false}; m\_resadd += \hyperlink{class_eigen_1_1_iteration_controller_af60d33d2bdd09f3d00fd73ddc91fc1e6}{m\_res}; \}
00096     \textcolor{keywordtype}{void} operator ++() \{ (*this)++; \}
00097 
00098     \textcolor{keywordtype}{bool} first() \{ \textcolor{keywordflow}{return} m\_nit == 0; \}
00099 
00100     \textcolor{comment}{/* get/set the "noisyness" (verbosity) of the solvers */}
00101     \textcolor{keywordtype}{int} noiseLevel()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \hyperlink{class_eigen_1_1_iteration_controller_afcff4288066c186967f15defcd833f5d}{m\_noise}; \}
00102     \textcolor{keywordtype}{void} setNoiseLevel(\textcolor{keywordtype}{int} n) \{ m\_noise = n; \}
00103     \textcolor{keywordtype}{void} reduceNoiseLevel() \{ \textcolor{keywordflow}{if} (m\_noise > 0) m\_noise--; \}
00104 
00105     \textcolor{keywordtype}{double} maxResidual()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \hyperlink{class_eigen_1_1_iteration_controller_a5342235a082ee820516fd593ee1efeac}{m\_resmax}; \}
00106     \textcolor{keywordtype}{void} setMaxResidual(\textcolor{keywordtype}{double} r) \{ m\_resmax = r; \}
00107 
00108     \textcolor{keywordtype}{double} residual()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \hyperlink{class_eigen_1_1_iteration_controller_af60d33d2bdd09f3d00fd73ddc91fc1e6}{m\_res}; \}
00109 
00110     \textcolor{comment}{/* change the user-definable callback, called after each iteration */}
00111     \textcolor{keywordtype}{void} setCallback(\textcolor{keywordtype}{void} (*t)(\textcolor{keyword}{const} \hyperlink{class_eigen_1_1_iteration_controller}{IterationController}&))
00112     \{
00113       m\_callback = t;
00114     \}
00115 
00116     \textcolor{keywordtype}{size\_t} iteration()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \hyperlink{class_eigen_1_1_iteration_controller_ac9d122615471416cc827a3d8e8ea15f2}{m\_nit}; \}
00117     \textcolor{keywordtype}{void} setIteration(\textcolor{keywordtype}{size\_t} i) \{ m\_nit = i; \}
00118 
00119     \textcolor{keywordtype}{size\_t} maxIterarions()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \hyperlink{class_eigen_1_1_iteration_controller_a42f72b0f3d490a6ceaa7bc76a51c1471}{m\_maxiter}; \}
00120     \textcolor{keywordtype}{void} setMaxIterations(\textcolor{keywordtype}{size\_t} i) \{ m\_maxiter = i; \}
00121 
00122     \textcolor{keywordtype}{double} rhsNorm()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \hyperlink{class_eigen_1_1_iteration_controller_a43364d62c43861aff44cb0a86c4615a6}{m\_rhsn}; \}
00123     \textcolor{keywordtype}{void} setRhsNorm(\textcolor{keywordtype}{double} r) \{ m\_rhsn = r; \}
00124 
00125     \textcolor{keywordtype}{bool} converged()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_res <= m\_rhsn * \hyperlink{class_eigen_1_1_iteration_controller_a5342235a082ee820516fd593ee1efeac}{m\_resmax}; \}
00126     \textcolor{keywordtype}{bool} converged(\textcolor{keywordtype}{double} nr)
00127     \{
00128       \textcolor{keyword}{using} std::abs;
00129       m\_res = abs(nr); 
00130       m\_resminreach = (std::min)(m\_resminreach, m\_res);
00131       \textcolor{keywordflow}{return} converged();
00132     \}
00133     \textcolor{keyword}{template}<\textcolor{keyword}{typename} VectorType> \textcolor{keywordtype}{bool} converged(\textcolor{keyword}{const} \hyperlink{struct_vector_type}{VectorType} &v)
00134     \{ \textcolor{keywordflow}{return} converged(v.squaredNorm()); \}
00135 
00136     \textcolor{keywordtype}{bool} finished(\textcolor{keywordtype}{double} nr)
00137     \{
00138       \textcolor{keywordflow}{if} (m\_callback) m\_callback(*\textcolor{keyword}{this});
00139       \textcolor{keywordflow}{if} (m\_noise > 0 && !m\_written)
00140       \{
00141         converged(nr);
00142         m\_written = \textcolor{keyword}{true};
00143       \}
00144       \textcolor{keywordflow}{return} (m\_nit >= m\_maxiter || converged(nr));
00145     \}
00146     \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00147     \textcolor{keywordtype}{bool} finished(\textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<VectorType>} &v)
00148     \{ \textcolor{keywordflow}{return} finished(\textcolor{keywordtype}{double}(v.\hyperlink{group___core___module_a8782faeb21e43908cdce47cec06fba23}{squaredNorm}())); \}
00149 
00150 \};
00151 
00152 \} \textcolor{comment}{// end namespace Eigen}
00153 
00154 \textcolor{preprocessor}{#endif // EIGEN\_ITERATION\_CONTROLLER\_H}
\end{DoxyCode}
