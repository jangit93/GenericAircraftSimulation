\hypertarget{eigen_2test_2constructor_8cpp_source}{}\section{eigen/test/constructor.cpp}
\label{eigen_2test_2constructor_8cpp_source}\index{constructor.\+cpp@{constructor.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2017 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 
00011 \textcolor{preprocessor}{#define TEST\_ENABLE\_TEMPORARY\_TRACKING}
00012 
00013 \textcolor{preprocessor}{#include "main.h"}
00014 
\Hypertarget{eigen_2test_2constructor_8cpp_source_l00015}\hyperlink{struct_wrapper}{00015} \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType> \textcolor{keyword}{struct }\hyperlink{struct_wrapper}{Wrapper}
00016 \{
00017   MatrixType m\_mat;
00018   \textcolor{keyword}{inline} \hyperlink{struct_wrapper}{Wrapper}(\textcolor{keyword}{const} MatrixType &x) : m\_mat(x) \{\}
00019   \textcolor{keyword}{inline} \textcolor{keyword}{operator} \textcolor{keyword}{const} MatrixType& () \textcolor{keyword}{const} \{ \textcolor{keywordflow}{return} m\_mat; \}
00020   \textcolor{keyword}{inline} \textcolor{keyword}{operator} MatrixType& () \{ \textcolor{keywordflow}{return} m\_mat; \}
00021 \};
00022 
00023 \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType> \textcolor{keywordtype}{void} ctor\_init1(\textcolor{keyword}{const} MatrixType& m)
00024 \{
00025   \textcolor{comment}{// Check logic in PlainObjectBase::\_init1}
00026   \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows = m.rows();
00027   \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols = m.cols();
00028 
00029   MatrixType m0 = MatrixType::Random(rows,cols);
00030 
00031   VERIFY\_EVALUATION\_COUNT( MatrixType m1(m0), 1);
00032   VERIFY\_EVALUATION\_COUNT( MatrixType m2(m0+m0), 1);
00033   VERIFY\_EVALUATION\_COUNT( MatrixType m2(m0.block(0,0,rows,cols)) , 1);
00034 
00035   \hyperlink{struct_wrapper}{Wrapper<MatrixType>} wrapper(m0);
00036   VERIFY\_EVALUATION\_COUNT( MatrixType m3(wrapper) , 1);
00037 \}
00038 
00039 
00040 \textcolor{keywordtype}{void} test\_constructor()
00041 \{
00042   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < g\_repeat; i++) \{
00043     CALL\_SUBTEST\_1( ctor\_init1(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 1, 1>}()) );
00044     CALL\_SUBTEST\_1( ctor\_init1(Matrix4d()) );
00045     CALL\_SUBTEST\_1( ctor\_init1(MatrixXcf(internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE), 
      internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE))) );
00046     CALL\_SUBTEST\_1( ctor\_init1(MatrixXi(internal::random<int>(1,EIGEN\_TEST\_MAX\_SIZE), internal::random<int>
      (1,EIGEN\_TEST\_MAX\_SIZE))) );
00047   \}
00048   \{
00049     \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Index,1,1>} a(123);
00050     VERIFY\_IS\_EQUAL(a[0], 123);
00051   \}
00052   \{
00053     \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Index,1,1>} a(123.0);
00054     VERIFY\_IS\_EQUAL(a[0], 123);
00055   \}
00056   \{
00057     \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float,1,1>} a(123);
00058     VERIFY\_IS\_EQUAL(a[0], 123.f);
00059   \}
00060   \{
00061     \hyperlink{group___core___module_class_eigen_1_1_array}{Array<Index,1,1>} a(123);
00062     VERIFY\_IS\_EQUAL(a[0], 123);
00063   \}
00064   \{
00065     \hyperlink{group___core___module_class_eigen_1_1_array}{Array<Index,1,1>} a(123.0);
00066     VERIFY\_IS\_EQUAL(a[0], 123);
00067   \}
00068   \{
00069     \hyperlink{group___core___module_class_eigen_1_1_array}{Array<float,1,1>} a(123);
00070     VERIFY\_IS\_EQUAL(a[0], 123.f);
00071   \}
00072   \{
00073     \hyperlink{group___core___module_class_eigen_1_1_array}{Array<Index,3,3>} a(123);
00074     VERIFY\_IS\_EQUAL(a(4), 123);
00075   \}
00076   \{
00077     \hyperlink{group___core___module_class_eigen_1_1_array}{Array<Index,3,3>} a(123.0);
00078     VERIFY\_IS\_EQUAL(a(4), 123);
00079   \}
00080   \{
00081     \hyperlink{group___core___module_class_eigen_1_1_array}{Array<float,3,3>} a(123);
00082     VERIFY\_IS\_EQUAL(a(4), 123.f);
00083   \}
00084 \}
\end{DoxyCode}
