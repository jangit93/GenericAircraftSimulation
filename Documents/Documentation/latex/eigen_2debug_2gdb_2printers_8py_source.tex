\hypertarget{eigen_2debug_2gdb_2printers_8py_source}{}\section{eigen/debug/gdb/printers.py}
\label{eigen_2debug_2gdb_2printers_8py_source}\index{printers.\+py@{printers.\+py}}

\begin{DoxyCode}
00001 \textcolor{comment}{# -*- coding: utf-8 -*-}
00002 \textcolor{comment}{# This file is part of Eigen, a lightweight C++ template library}
00003 \textcolor{comment}{# for linear algebra.}
00004 \textcolor{comment}{#}
00005 \textcolor{comment}{# Copyright (C) 2009 Benjamin Schindler <bschindler@inf.ethz.ch>}
00006 \textcolor{comment}{#}
00007 \textcolor{comment}{# This Source Code Form is subject to the terms of the Mozilla Public}
00008 \textcolor{comment}{# License, v. 2.0. If a copy of the MPL was not distributed with this}
00009 \textcolor{comment}{# file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00010 
00011 \textcolor{comment}{# Pretty printers for Eigen::Matrix}
00012 \textcolor{comment}{# This is still pretty basic as the python extension to gdb is still pretty basic. }
00013 \textcolor{comment}{# It cannot handle complex eigen types and it doesn't support any of the other eigen types}
00014 \textcolor{comment}{# Such as quaternion or some other type. }
00015 \textcolor{comment}{# This code supports fixed size as well as dynamic size matrices}
00016 
00017 \textcolor{comment}{# To use it:}
00018 \textcolor{comment}{#}
00019 \textcolor{comment}{# * Create a directory and put the file as well as an empty \_\_init\_\_.py in }
00020 \textcolor{comment}{#   that directory.}
00021 \textcolor{comment}{# * Create a ~/.gdbinit file, that contains the following:}
00022 \textcolor{comment}{#      python}
00023 \textcolor{comment}{#      import sys}
00024 \textcolor{comment}{#      sys.path.insert(0, '/path/to/eigen/printer/directory')}
00025 \textcolor{comment}{#      from printers import register\_eigen\_printers}
00026 \textcolor{comment}{#      register\_eigen\_printers (None)}
00027 \textcolor{comment}{#      end}
00028 
00029 \textcolor{keyword}{import} gdb
00030 \textcolor{keyword}{import} re
00031 \textcolor{keyword}{import} itertools
00032 
00033 
\Hypertarget{eigen_2debug_2gdb_2printers_8py_source_l00034}\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer}{00034} \textcolor{keyword}{class }\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer}{EigenMatrixPrinter}:
00035     \textcolor{stringliteral}{"Print Eigen Matrix or Array of some kind"}
00036 
00037     \textcolor{keyword}{def }\_\_init\_\_(self, variety, val):
00038         \textcolor{stringliteral}{"Extract all the necessary information"}
00039         
00040         \textcolor{comment}{# Save the variety (presumably "Matrix" or "Array") for later usage}
00041         self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a706e8682ab610f25271e997cfbacabce}{variety} = variety
00042         
00043         \textcolor{comment}{# The gdb extension does not support value template arguments - need to extract them by hand}
00044         type = val.type
00045         \textcolor{keywordflow}{if} type.code == gdb.TYPE\_CODE\_REF:
00046             type = type.target()
00047         self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a6fc3a15662e000efb3e2cbd7341d98b9}{type} = type.unqualified().strip\_typedefs()
00048         tag = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a6fc3a15662e000efb3e2cbd7341d98b9}{type}.tag
00049         regex = re.compile(\textcolor{stringliteral}{'\(\backslash\)<.*\(\backslash\)>'})
00050         m = regex.findall(tag)[0][1:-1]
00051         template\_params = m.split(\textcolor{stringliteral}{','})
00052         template\_params = [x.replace(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{""}) \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} template\_params]
00053         
00054         \textcolor{keywordflow}{if} template\_params[1] == \textcolor{stringliteral}{'-0x00000000000000001'} \textcolor{keywordflow}{or} template\_params[1] == \textcolor{stringliteral}{'-0x000000001'} \textcolor{keywordflow}{or} 
      template\_params[1] == \textcolor{stringliteral}{'-1'}:
00055             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a318702910d600ddbdf9527dd7eae3f30}{rows} = val[\textcolor{stringliteral}{'m\_storage'}][\textcolor{stringliteral}{'m\_rows'}]
00056         \textcolor{keywordflow}{else}:
00057             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a318702910d600ddbdf9527dd7eae3f30}{rows} = int(template\_params[1])
00058         
00059         \textcolor{keywordflow}{if} template\_params[2] == \textcolor{stringliteral}{'-0x00000000000000001'} \textcolor{keywordflow}{or} template\_params[2] == \textcolor{stringliteral}{'-0x000000001'} \textcolor{keywordflow}{or} 
      template\_params[2] == \textcolor{stringliteral}{'-1'}:
00060             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a77a2e4064d4a319804a7854a1210134c}{cols} = val[\textcolor{stringliteral}{'m\_storage'}][\textcolor{stringliteral}{'m\_cols'}]
00061         \textcolor{keywordflow}{else}:
00062             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a77a2e4064d4a319804a7854a1210134c}{cols} = int(template\_params[2])
00063         
00064         self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_af8ecc37eae514e72e2a34920022927a2}{options} = 0 \textcolor{comment}{# default value}
00065         \textcolor{keywordflow}{if} len(template\_params) > 3:
00066             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_af8ecc37eae514e72e2a34920022927a2}{options} = template\_params[3];
00067         
00068         self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_acbb6814ea73eef3d2de6b1223a282141}{rowMajor} = (int(self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_af8ecc37eae514e72e2a34920022927a2}{options}) & 0x1)
00069         
00070         self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a5a997f47de9c058821888aa34b098912}{innerType} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a6fc3a15662e000efb3e2cbd7341d98b9}{type}.template\_argument(0)
00071         
00072         self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a83db538dfdbaac45c514829e3c063f0f}{val} = val
00073         
00074         \textcolor{comment}{# Fixed size matrices have a struct as their storage, so we need to walk through this}
00075         self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_ac1076f942c3ee368f68b9fa304e3458d}{data} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a83db538dfdbaac45c514829e3c063f0f}{val}[\textcolor{stringliteral}{'m\_storage'}][\textcolor{stringliteral}{'m\_data'}]
00076         \textcolor{keywordflow}{if} self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_ac1076f942c3ee368f68b9fa304e3458d}{data}.type.code == gdb.TYPE\_CODE\_STRUCT:
00077             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_ac1076f942c3ee368f68b9fa304e3458d}{data} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_ac1076f942c3ee368f68b9fa304e3458d}{data}[\textcolor{stringliteral}{'array'}]
00078             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_ac1076f942c3ee368f68b9fa304e3458d}{data} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_ac1076f942c3ee368f68b9fa304e3458d}{data}.cast(self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_a5a997f47de9c058821888aa34b098912}{innerType}.pointer())
00079             
\Hypertarget{eigen_2debug_2gdb_2printers_8py_source_l00080}\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator}{00080}     \textcolor{keyword}{class }\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator}{\_iterator}:
00081         \textcolor{keyword}{def }\_\_init\_\_ (self, rows, cols, dataPtr, rowMajor):
00082             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_acff03395eb53e1ef6d9f7eef1234bccc}{rows} = rows
00083             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a3a335d95f1c2951d79e805be7df26456}{cols} = cols
00084             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_aab0f8a4a235788aa09f2d364361532dd}{dataPtr} = dataPtr
00085             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow} = 0
00086             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol} = 0
00087             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a0d116dd242972d7eda7e275bb7bd5c25}{rowMajor} = rowMajor
00088             
00089         \textcolor{keyword}{def }\_\_iter\_\_ (self):
00090             \textcolor{keywordflow}{return} self
00091 
00092         \textcolor{keyword}{def }next(self):
00093                         \textcolor{keywordflow}{return} self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a46f72eca8ff8788d46671ac364beef1b}{\_\_next\_\_}()  \textcolor{comment}{# Python 2.x compatibility}
00094 
00095         \textcolor{keyword}{def }\_\_next\_\_(self):
00096             
00097             row = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow}
00098             col = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol}
00099             \textcolor{keywordflow}{if} self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a0d116dd242972d7eda7e275bb7bd5c25}{rowMajor} == 0:
00100                 \textcolor{keywordflow}{if} self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol} >= self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a3a335d95f1c2951d79e805be7df26456}{cols}:
00101                     \textcolor{keywordflow}{raise} StopIteration
00102                     
00103                 self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow} + 1
00104                 \textcolor{keywordflow}{if} self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow} >= self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_acff03395eb53e1ef6d9f7eef1234bccc}{rows}:
00105                     self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow} = 0
00106                     self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol} + 1
00107             \textcolor{keywordflow}{else}:
00108                 \textcolor{keywordflow}{if} self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow} >= self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_acff03395eb53e1ef6d9f7eef1234bccc}{rows}:
00109                     \textcolor{keywordflow}{raise} StopIteration
00110                     
00111                 self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol} + 1
00112                 \textcolor{keywordflow}{if} self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol} >= self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a3a335d95f1c2951d79e805be7df26456}{cols}:
00113                     self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a6160cf852602f8dfa421a64ebe9295cd}{currentCol} = 0
00114                     self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a2812e15ea77ca1bc412cef0f2d8e1d2b}{currentRow} + 1
00115                 
00116             
00117             item = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_aab0f8a4a235788aa09f2d364361532dd}{dataPtr}.dereference()
00118             self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_aab0f8a4a235788aa09f2d364361532dd}{dataPtr} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_aab0f8a4a235788aa09f2d364361532dd}{dataPtr} + 1
00119             \textcolor{keywordflow}{if} (self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a3a335d95f1c2951d79e805be7df26456}{cols} == 1): \textcolor{comment}{#if it's a column vector}
00120                 \textcolor{keywordflow}{return} (\textcolor{stringliteral}{'[%d]'} % (row,), item)
00121             \textcolor{keywordflow}{elif} (self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_acff03395eb53e1ef6d9f7eef1234bccc}{rows} == 1): \textcolor{comment}{#if it's a row vector}
00122                 \textcolor{keywordflow}{return} (\textcolor{stringliteral}{'[%d]'} % (col,), item)
00123             \textcolor{keywordflow}{return} (\textcolor{stringliteral}{'[%d,%d]'} % (row, col), item)
00124             
00125     \textcolor{keyword}{def }children(self):
00126         
00127         \textcolor{keywordflow}{return} self.\_iterator(self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_acff03395eb53e1ef6d9f7eef1234bccc}{rows}, self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a3a335d95f1c2951d79e805be7df26456}{cols}, self.data, self.
      \hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a0d116dd242972d7eda7e275bb7bd5c25}{rowMajor})
00128         
00129     \textcolor{keyword}{def }to\_string(self):
00130         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Eigen::%s<%s,%d,%d,%s> (data ptr: %s)"} % (self.variety, self.innerType, self.
      \hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_acff03395eb53e1ef6d9f7eef1234bccc}{rows}, self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a3a335d95f1c2951d79e805be7df26456}{cols}, \textcolor{stringliteral}{"RowMajor"} \textcolor{keywordflow}{if} self.\hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer_1_1__iterator_a0d116dd242972d7eda7e275bb7bd5c25}{rowMajor} \textcolor{keywordflow}{else}  \textcolor{stringliteral}{"ColMajor"}, self.data)
00131 
\Hypertarget{eigen_2debug_2gdb_2printers_8py_source_l00132}\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer}{00132} \textcolor{keyword}{class }\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer}{EigenQuaternionPrinter}:
00133     \textcolor{stringliteral}{"Print an Eigen Quaternion"}
00134     
00135     \textcolor{keyword}{def }\_\_init\_\_(self, val):
00136         \textcolor{stringliteral}{"Extract all the necessary information"}
00137         \textcolor{comment}{# The gdb extension does not support value template arguments - need to extract them by hand}
00138         type = val.type
00139         \textcolor{keywordflow}{if} type.code == gdb.TYPE\_CODE\_REF:
00140             type = type.target()
00141         self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_ab40b0ed521a160f47f5d147b7fd56c52}{type} = type.unqualified().strip\_typedefs()
00142         self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_a276cf42149fe814d518ae964c17318c9}{innerType} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_ab40b0ed521a160f47f5d147b7fd56c52}{type}.template\_argument(0)
00143         self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_a18d9023a370e6e94dd4fcd8d90c4727a}{val} = val
00144         
00145         \textcolor{comment}{# Quaternions have a struct as their storage, so we need to walk through this}
00146         self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_a107dac2de48dd871a24e387ea8e4c081}{data} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_a18d9023a370e6e94dd4fcd8d90c4727a}{val}[\textcolor{stringliteral}{'m\_coeffs'}][\textcolor{stringliteral}{'m\_storage'}][\textcolor{stringliteral}{'m\_data'}][\textcolor{stringliteral}{'array'}]
00147         self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_a107dac2de48dd871a24e387ea8e4c081}{data} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_a107dac2de48dd871a24e387ea8e4c081}{data}.cast(self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_a276cf42149fe814d518ae964c17318c9}{innerType}.pointer())
00148             
\Hypertarget{eigen_2debug_2gdb_2printers_8py_source_l00149}\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator}{00149}     \textcolor{keyword}{class }\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator}{\_iterator}:
00150         \textcolor{keyword}{def }\_\_init\_\_ (self, dataPtr):
00151             self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a5b6b06d61ff8013f66aec4f22c03ac89}{dataPtr} = dataPtr
00152             self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a3cd1bb196e9be9cd58a045da0a3686b1}{currentElement} = 0
00153             self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a84c39abaf18c7985b60eea277e77eda5}{elementNames} = [\textcolor{stringliteral}{'x'}, \textcolor{stringliteral}{'y'}, \textcolor{stringliteral}{'z'}, \textcolor{stringliteral}{'w'}]
00154             
00155         \textcolor{keyword}{def }\_\_iter\_\_ (self):
00156             \textcolor{keywordflow}{return} self
00157     
00158         \textcolor{keyword}{def }next(self):
00159                         \textcolor{keywordflow}{return} self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a11d582280237f3ba949db06c283cbd4d}{\_\_next\_\_}()  \textcolor{comment}{# Python 2.x compatibility}
00160 
00161         \textcolor{keyword}{def }\_\_next\_\_(self):
00162             element = self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a3cd1bb196e9be9cd58a045da0a3686b1}{currentElement}
00163             
00164             \textcolor{keywordflow}{if} self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a3cd1bb196e9be9cd58a045da0a3686b1}{currentElement} >= 4: \textcolor{comment}{#there are 4 elements in a quanternion}
00165                 \textcolor{keywordflow}{raise} StopIteration
00166             
00167             self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a3cd1bb196e9be9cd58a045da0a3686b1}{currentElement} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a3cd1bb196e9be9cd58a045da0a3686b1}{currentElement} + 1
00168             
00169             item = self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a5b6b06d61ff8013f66aec4f22c03ac89}{dataPtr}.dereference()
00170             self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a5b6b06d61ff8013f66aec4f22c03ac89}{dataPtr} = self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a5b6b06d61ff8013f66aec4f22c03ac89}{dataPtr} + 1
00171             \textcolor{keywordflow}{return} (\textcolor{stringliteral}{'[%s]'} % (self.\hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer_1_1__iterator_a84c39abaf18c7985b60eea277e77eda5}{elementNames}[element],), item)
00172             
00173     \textcolor{keyword}{def }children(self):
00174         
00175         \textcolor{keywordflow}{return} self.\_iterator(self.data)
00176     
00177     \textcolor{keyword}{def }to\_string(self):
00178         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Eigen::Quaternion<%s> (data ptr: %s)"} % (self.innerType, self.data)
00179 
00180 \textcolor{keyword}{def }build\_eigen\_dictionary ():
00181     pretty\_printers\_dict[re.compile(\textcolor{stringliteral}{'^Eigen::Quaternion<.*>$'})] = \textcolor{keyword}{lambda} val: 
      \hyperlink{classgdb_1_1printers_1_1_eigen_quaternion_printer}{EigenQuaternionPrinter}(val)
00182     pretty\_printers\_dict[re.compile(\textcolor{stringliteral}{'^Eigen::Matrix<.*>$'})] = \textcolor{keyword}{lambda} val: 
      \hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer}{EigenMatrixPrinter}(\textcolor{stringliteral}{"Matrix"}, val)
00183     pretty\_printers\_dict[re.compile(\textcolor{stringliteral}{'^Eigen::Array<.*>$'})]  = \textcolor{keyword}{lambda} val: 
      \hyperlink{classgdb_1_1printers_1_1_eigen_matrix_printer}{EigenMatrixPrinter}(\textcolor{stringliteral}{"Array"},  val)
00184 
00185 \textcolor{keyword}{def }register\_eigen\_printers(obj):
00186     \textcolor{stringliteral}{"Register eigen pretty-printers with objfile Obj"}
00187 
00188     \textcolor{keywordflow}{if} obj == \textcolor{keywordtype}{None}:
00189         obj = gdb
00190     obj.pretty\_printers.append(lookup\_function)
00191 
00192 \textcolor{keyword}{def }lookup\_function(val):
00193     \textcolor{stringliteral}{"Look-up and return a pretty-printer that can print va."}
00194     
00195     type = val.type
00196     
00197     \textcolor{keywordflow}{if} type.code == gdb.TYPE\_CODE\_REF:
00198         type = type.target()
00199     
00200     type = type.unqualified().strip\_typedefs()
00201     
00202     typename = type.tag
00203     \textcolor{keywordflow}{if} typename == \textcolor{keywordtype}{None}:
00204         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
00205     
00206     \textcolor{keywordflow}{for} function \textcolor{keywordflow}{in} pretty\_printers\_dict:
00207         \textcolor{keywordflow}{if} function.search(typename):
00208             \textcolor{keywordflow}{return} pretty\_printers\_dict[function](val)
00209     
00210     \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
00211 
00212 pretty\_printers\_dict = \{\}
00213 
00214 build\_eigen\_dictionary ()
\end{DoxyCode}
