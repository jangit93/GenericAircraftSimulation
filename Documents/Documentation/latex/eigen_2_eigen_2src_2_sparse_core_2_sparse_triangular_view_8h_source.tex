\hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_triangular_view_8h_source}{}\section{eigen/\+Eigen/src/\+Sparse\+Core/\+Sparse\+Triangular\+View.h}
\label{eigen_2_eigen_2src_2_sparse_core_2_sparse_triangular_view_8h_source}\index{Sparse\+Triangular\+View.\+h@{Sparse\+Triangular\+View.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2009-2015 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{// Copyright (C) 2012 Désiré Nuentsa-Wakam <desire.nuentsa\_wakam@inria.fr>}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00008 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00009 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00010 
00011 \textcolor{preprocessor}{#ifndef EIGEN\_SPARSE\_TRIANGULARVIEW\_H}
00012 \textcolor{preprocessor}{#define EIGEN\_SPARSE\_TRIANGULARVIEW\_H}
00013 
00014 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00015 
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_triangular_view_8h_source_l00025}\hyperlink{group___sparse_core___module}{00025} \textcolor{keyword}{template}<\textcolor{keyword}{typename} MatrixType, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} Mode> \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_triangular_view_impl}{TriangularViewImpl}<MatrixType,Mode
      ,\hyperlink{struct_eigen_1_1_sparse}{Sparse}>
00026   : \textcolor{keyword}{public} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_matrix_base}{SparseMatrixBase}<TriangularView<MatrixType,Mode> >
00027 \{
00028     \textcolor{keyword}{enum} \{ SkipFirst = ((Mode&\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda891792b8ed394f7607ab16dd716f60e6}{Lower}) && !(MatrixType::Flags&\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit}))
00029                     || ((Mode&\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda6bcb58be3b8b8ec84859ce0c5ac0aaec}{Upper}) &&  (MatrixType::Flags&\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit})),
00030            SkipLast = !SkipFirst,
00031            SkipDiag = (Mode&\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda884ff7240392e85aa6e4b3c957e36483}{ZeroDiag}) ? 1 : 0,
00032            HasUnitDiag = (Mode&\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cdaddb72f888ac85d5a1c52333e54f9374b}{UnitDiag}) ? 1 : 0
00033     \};
00034     
00035     \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_triangular_view}{TriangularView<MatrixType,Mode>} 
      \hyperlink{group___core___module_class_eigen_1_1_triangular_view}{TriangularViewType};
00036     
00037   \textcolor{keyword}{protected}:
00038     \textcolor{comment}{// dummy solve function to make TriangularView happy.}
00039     \textcolor{keywordtype}{void} solve() \textcolor{keyword}{const};
00040 
00041     \textcolor{keyword}{typedef} \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_matrix_base}{SparseMatrixBase<TriangularViewType>} 
      \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_matrix_base}{Base};
00042   \textcolor{keyword}{public}:
00043     
00044     EIGEN\_SPARSE\_PUBLIC\_INTERFACE(TriangularViewType)
00045     
00046     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Nested MatrixTypeNested;
00047     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{group___sparse_core___module}{internal::remove\_reference<MatrixTypeNested>::type}
       \hyperlink{group___sparse_core___module}{MatrixTypeNestedNonRef};
00048     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{group___sparse_core___module}{internal::remove\_all<MatrixTypeNested>::type}
       \hyperlink{group___sparse_core___module}{MatrixTypeNestedCleaned};
00049 
00050     \textcolor{keyword}{template}<\textcolor{keyword}{typename} RhsType, \textcolor{keyword}{typename} DstType>
00051     EIGEN\_DEVICE\_FUNC
00052     EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} \_solve\_impl(\textcolor{keyword}{const} RhsType &rhs, DstType &dst)\textcolor{keyword}{ const }\{
00053       \textcolor{keywordflow}{if}(!(\hyperlink{struct_eigen_1_1internal_1_1is__same}{internal::is\_same<RhsType,DstType>::value} && 
      internal::extract\_data(dst) == internal::extract\_data(rhs)))
00054         dst = rhs;
00055       this->solveInPlace(dst);
00056     \}
00057 
00059     \textcolor{keyword}{template}<\textcolor{keyword}{typename} OtherDerived> \textcolor{keywordtype}{void} solveInPlace(\hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<OtherDerived>}& 
      other) \textcolor{keyword}{const};
00060 
00062     \textcolor{keyword}{template}<\textcolor{keyword}{typename} OtherDerived> \textcolor{keywordtype}{void} solveInPlace(
      \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_matrix_base}{SparseMatrixBase<OtherDerived>}& other) \textcolor{keyword}{const};
00063   
00064 \};
00065 
00066 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00067 
00068 \textcolor{keyword}{template}<\textcolor{keyword}{typename} ArgType, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} Mode>
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_triangular_view_8h_source_l00069}\hyperlink{struct_eigen_1_1internal_1_1unary__evaluator_3_01_triangular_view_3_01_arg_type_00_01_mode_01_4_00_01_iterator_based_01_4}{00069} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1unary__evaluator}{unary\_evaluator}<\hyperlink{group___core___module_class_eigen_1_1_triangular_view}{TriangularView}<ArgType,Mode>, 
      \hyperlink{struct_eigen_1_1internal_1_1_iterator_based}{IteratorBased}>
00070  : \hyperlink{struct_eigen_1_1internal_1_1evaluator__base}{evaluator\_base}<TriangularView<ArgType,Mode> >
00071 \{
00072   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_triangular_view}{TriangularView<ArgType,Mode>} \hyperlink{group___core___module_class_eigen_1_1_triangular_view}{XprType};
00073   
00074 \textcolor{keyword}{protected}:
00075   
00076   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} XprType::Scalar Scalar;
00077   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} XprType::StorageIndex StorageIndex;
00078   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator<ArgType>::InnerIterator} EvalIterator;
00079   
00080   \textcolor{keyword}{enum} \{ SkipFirst = ((Mode&\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda891792b8ed394f7607ab16dd716f60e6}{Lower}) && !(ArgType::Flags&\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit}))
00081                     || ((Mode&\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda6bcb58be3b8b8ec84859ce0c5ac0aaec}{Upper}) &&  (ArgType::Flags&\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit})),
00082          SkipLast = !SkipFirst,
00083          SkipDiag = (Mode&\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cda884ff7240392e85aa6e4b3c957e36483}{ZeroDiag}) ? 1 : 0,
00084          HasUnitDiag = (Mode&\hyperlink{group__enums_gga39e3366ff5554d731e7dc8bb642f83cdaddb72f888ac85d5a1c52333e54f9374b}{UnitDiag}) ? 1 : 0
00085   \};
00086   
00087 \textcolor{keyword}{public}:
00088   
00089   \textcolor{keyword}{enum} \{
00090     CoeffReadCost = \hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator<ArgType>::CoeffReadCost},
00091     Flags = XprType::Flags
00092   \};
00093     
00094   \textcolor{keyword}{explicit} \hyperlink{struct_eigen_1_1internal_1_1unary__evaluator}{unary\_evaluator}(\textcolor{keyword}{const} XprType &xpr) : m\_argImpl(xpr.
      \hyperlink{group___core___module_a83b7cdd9d9ea543a3c893fc2e74d8fbb}{nestedExpression}()), m\_arg(xpr.\hyperlink{group___core___module_a83b7cdd9d9ea543a3c893fc2e74d8fbb}{nestedExpression}()) \{\}
00095   
00096   \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} nonZerosEstimate()\textcolor{keyword}{ const }\{
00097     \textcolor{keywordflow}{return} m\_argImpl.nonZerosEstimate();
00098   \}
00099   
\Hypertarget{eigen_2_eigen_2src_2_sparse_core_2_sparse_triangular_view_8h_source_l00100}\hyperlink{class_eigen_1_1internal_1_1unary__evaluator_3_01_triangular_view_3_01_arg_type_00_01_mode_01_4_0e8ca4efc3cb45e07bfa597fdc256f969}{00100}   \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_inner_iterator}{InnerIterator} : \textcolor{keyword}{public} EvalIterator
00101   \{
00102       \textcolor{keyword}{typedef} EvalIterator Base;
00103     \textcolor{keyword}{public}:
00104 
00105       EIGEN\_STRONG\_INLINE \hyperlink{class_eigen_1_1_inner_iterator}{InnerIterator}(\textcolor{keyword}{const} \hyperlink{struct_eigen_1_1internal_1_1unary__evaluator}{unary\_evaluator}& xprEval, 
      \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer)
00106         : Base(xprEval.m\_argImpl,outer), m\_returnOne(\textcolor{keyword}{false}), m\_containsDiag(Base::outer()<xprEval.m\_arg.
      innerSize())
00107       \{
00108         \textcolor{keywordflow}{if}(SkipFirst)
00109         \{
00110           \textcolor{keywordflow}{while}((*\textcolor{keyword}{this}) && ((HasUnitDiag||SkipDiag)  ? this->index()<=outer : this->index()<outer))
00111             Base::operator++();
00112           \textcolor{keywordflow}{if}(HasUnitDiag)
00113             m\_returnOne = m\_containsDiag;
00114         \}
00115         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(HasUnitDiag && ((!Base::operator \textcolor{keywordtype}{bool}()) || Base::index()>=Base::outer()))
00116         \{
00117           \textcolor{keywordflow}{if}((!SkipFirst) && Base::operator \textcolor{keywordtype}{bool}())
00118             Base::operator++();
00119           m\_returnOne = m\_containsDiag;
00120         \}
00121       \}
00122 
00123       EIGEN\_STRONG\_INLINE InnerIterator& operator++()
00124       \{
00125         \textcolor{keywordflow}{if}(HasUnitDiag && m\_returnOne)
00126           m\_returnOne = \textcolor{keyword}{false};
00127         \textcolor{keywordflow}{else}
00128         \{
00129           Base::operator++();
00130           \textcolor{keywordflow}{if}(HasUnitDiag && (!SkipFirst) && ((!Base::operator \textcolor{keywordtype}{bool}()) || Base::index()>=Base::outer()))
00131           \{
00132             \textcolor{keywordflow}{if}((!SkipFirst) && Base::operator \textcolor{keywordtype}{bool}())
00133               Base::operator++();
00134             m\_returnOne = m\_containsDiag;
00135           \}
00136         \}
00137         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00138       \}
00139       
00140       EIGEN\_STRONG\_INLINE \textcolor{keyword}{operator} bool()\textcolor{keyword}{ const}
00141 \textcolor{keyword}{      }\{
00142         \textcolor{keywordflow}{if}(HasUnitDiag && m\_returnOne)
00143           \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00144         \textcolor{keywordflow}{if}(SkipFirst) \textcolor{keywordflow}{return}  Base::operator bool();
00145         \textcolor{keywordflow}{else}
00146         \{
00147           \textcolor{keywordflow}{if} (SkipDiag) \textcolor{keywordflow}{return} (Base::operator \textcolor{keywordtype}{bool}() && this->index() < this->outer());
00148           \textcolor{keywordflow}{else} \textcolor{keywordflow}{return} (Base::operator \textcolor{keywordtype}{bool}() && this->index() <= this->outer());
00149         \}
00150       \}
00151 
00152 \textcolor{comment}{//       inline Index row() const \{ return (ArgType::Flags&RowMajorBit ? Base::outer() : this->index()); \}}
00153 \textcolor{comment}{//       inline Index col() const \{ return (ArgType::Flags&RowMajorBit ? this->index() : Base::outer()); \}}
00154       \textcolor{keyword}{inline} StorageIndex index()\textcolor{keyword}{ const}
00155 \textcolor{keyword}{      }\{
00156         \textcolor{keywordflow}{if}(HasUnitDiag && m\_returnOne)  \textcolor{keywordflow}{return} internal::convert\_index<StorageIndex>(Base::outer());
00157         \textcolor{keywordflow}{else}                            \textcolor{keywordflow}{return} Base::index();
00158       \}
00159       \textcolor{keyword}{inline} Scalar value()\textcolor{keyword}{ const}
00160 \textcolor{keyword}{      }\{
00161         \textcolor{keywordflow}{if}(HasUnitDiag && m\_returnOne)  \textcolor{keywordflow}{return} Scalar(1);
00162         \textcolor{keywordflow}{else}                            \textcolor{keywordflow}{return} Base::value();
00163       \}
00164 
00165     \textcolor{keyword}{protected}:
00166       \textcolor{keywordtype}{bool} m\_returnOne;
00167       \textcolor{keywordtype}{bool} m\_containsDiag;
00168     \textcolor{keyword}{private}:
00169       Scalar& valueRef();
00170   \};
00171   
00172 \textcolor{keyword}{protected}:
00173   \hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator<ArgType>} m\_argImpl;
00174   \textcolor{keyword}{const} ArgType& m\_arg;
00175 \};
00176 
00177 \} \textcolor{comment}{// end namespace internal}
00178 
00179 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
00180 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} Mode>
00181 \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_triangular_view}{TriangularView<const Derived, Mode>}
00182 \hyperlink{group___sparse_core___module_class_eigen_1_1_sparse_matrix_base}{SparseMatrixBase<Derived>::triangularView}()\textcolor{keyword}{ const}
00183 \textcolor{keyword}{}\{
00184   \textcolor{keywordflow}{return} \hyperlink{group___core___module_class_eigen_1_1_triangular_view}{TriangularView<const Derived, Mode>}(derived());
00185 \}
00186 
00187 \} \textcolor{comment}{// end namespace Eigen}
00188 
00189 \textcolor{preprocessor}{#endif // EIGEN\_SPARSE\_TRIANGULARVIEW\_H}
\end{DoxyCode}
