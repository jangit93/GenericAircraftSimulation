\hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/\+Eigen/src/\+Core/\+Block.h}
\label{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source}\index{Block.\+h@{Block.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2008 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{// Copyright (C) 2006-2010 Benoit Jacob <jacob.benoit.1@gmail.com>}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00008 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00009 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00010 
00011 \textcolor{preprocessor}{#ifndef EIGEN\_BLOCK\_H}
00012 \textcolor{preprocessor}{#define EIGEN\_BLOCK\_H}
00013 
00014 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00015 
00016 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00017 \textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType, \textcolor{keywordtype}{int} BlockRows, \textcolor{keywordtype}{int} BlockCols, \textcolor{keywordtype}{bool} InnerPanel>
00018 \textcolor{keyword}{struct }traits<Block<XprType, BlockRows, BlockCols, InnerPanel> > : traits<XprType>
00019 \{
00020   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} traits<XprType>::Scalar Scalar;
00021   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} traits<XprType>::StorageKind StorageKind;
00022   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} traits<XprType>::XprKind XprKind;
00023   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} ref\_selector<XprType>::type XprTypeNested;
00024   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} remove\_reference<XprTypeNested>::type \_XprTypeNested;
00025   \textcolor{keyword}{enum}\{
00026     MatrixRows = traits<XprType>::RowsAtCompileTime,
00027     MatrixCols = traits<XprType>::ColsAtCompileTime,
00028     RowsAtCompileTime = MatrixRows == 0 ? 0 : BlockRows,
00029     ColsAtCompileTime = MatrixCols == 0 ? 0 : BlockCols,
00030     MaxRowsAtCompileTime = BlockRows==0 ? 0
00031                          : RowsAtCompileTime != \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic} ? int(RowsAtCompileTime)
00032                          : int(traits<XprType>::MaxRowsAtCompileTime),
00033     MaxColsAtCompileTime = BlockCols==0 ? 0
00034                          : ColsAtCompileTime != \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic} ? int(ColsAtCompileTime)
00035                          : int(traits<XprType>::MaxColsAtCompileTime),
00036 
00037     XprTypeIsRowMajor = (int(traits<XprType>::Flags)&\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit}) != 0,
00038     IsRowMajor = (MaxRowsAtCompileTime==1&&MaxColsAtCompileTime!=1) ? 1
00039                : (MaxColsAtCompileTime==1&&MaxRowsAtCompileTime!=1) ? 0
00040                : XprTypeIsRowMajor,
00041     HasSameStorageOrderAsXprType = (IsRowMajor == XprTypeIsRowMajor),
00042     InnerSize = IsRowMajor ? int(ColsAtCompileTime) : int(RowsAtCompileTime),
00043     InnerStrideAtCompileTime = HasSameStorageOrderAsXprType
00044                              ? int(inner\_stride\_at\_compile\_time<XprType>::ret)
00045                              : int(outer\_stride\_at\_compile\_time<XprType>::ret),
00046     OuterStrideAtCompileTime = HasSameStorageOrderAsXprType
00047                              ? int(outer\_stride\_at\_compile\_time<XprType>::ret)
00048                              : int(inner\_stride\_at\_compile\_time<XprType>::ret),
00049 
00050     \textcolor{comment}{// FIXME, this traits is rather specialized for dense object and it needs to be cleaned further}
00051     FlagsLvalueBit = is\_lvalue<XprType>::value ? \hyperlink{group__flags_gae2c323957f20dfdc6cb8f44428eaec1a}{LvalueBit} : 0,
00052     FlagsRowMajorBit = IsRowMajor ? \hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit} : 0,
00053     Flags = (traits<XprType>::Flags & (\hyperlink{group__flags_gabf1e9d0516a933445a4c307ad8f14915}{DirectAccessBit} | (InnerPanel?
      \hyperlink{group__flags_gaed0244284da47a2b8661261431173caf}{CompressedAccessBit}:0))) | FlagsLvalueBit | FlagsRowMajorBit,
00054     \textcolor{comment}{// FIXME DirectAccessBit should not be handled by expressions}
00055     \textcolor{comment}{// }
00056     \textcolor{comment}{// Alignment is needed by MapBase's assertions}
00057     \textcolor{comment}{// We can sefely set it to false here. Internal alignment errors will be detected by an
       eigen\_internal\_assert in the respective evaluator}
00058     Alignment = 0
00059   \};
00060 \};
00061 
00062 \textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType, \textcolor{keywordtype}{int} BlockRows=\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic}, \textcolor{keywordtype}{int} BlockCols=\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic}, \textcolor{keywordtype}{bool} InnerPanel = \textcolor{keyword}{
      false},
00063          \textcolor{keywordtype}{bool} HasDirectAccess = internal::has\_direct\_access<XprType>::ret> \textcolor{keyword}{class }BlockImpl\_dense;
00064          
00065 \} \textcolor{comment}{// end namespace internal}
00066 
00067 \textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType, \textcolor{keywordtype}{int} BlockRows, \textcolor{keywordtype}{int} BlockCols, \textcolor{keywordtype}{bool} InnerPanel, \textcolor{keyword}{typename} StorageKind> \textcolor{keyword}{class }
      BlockImpl;
00068 
00103 \textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType, \textcolor{keywordtype}{int} BlockRows, \textcolor{keywordtype}{int} BlockCols, \textcolor{keywordtype}{bool} InnerPanel> \textcolor{keyword}{class }Block
00104   : \textcolor{keyword}{public} BlockImpl<XprType, BlockRows, BlockCols, InnerPanel, typename internal::traits<XprType>::Storage
      Kind>
00105 \{
00106     \textcolor{keyword}{typedef} BlockImpl<XprType, BlockRows, BlockCols, InnerPanel, typename
       internal::traits<XprType>::StorageKind> Impl;
00107   \textcolor{keyword}{public}:
00108     \textcolor{comment}{//typedef typename Impl::Base Base;}
00109     \textcolor{keyword}{typedef} Impl Base;
00110     EIGEN\_GENERIC\_PUBLIC\_INTERFACE(Block)
00111     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(Block)
00112     
00113     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} internal::remove\_all<XprType>::type NestedExpression;
00114   
00117     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00118}\hyperlink{group___core___module_ab45272f7223731c9a61937e55795c728}{00118}     \textcolor{keyword}{inline} \hyperlink{group___core___module_ab45272f7223731c9a61937e55795c728}{Block}(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} i) : Impl(xpr,i)
00119     \{
00120       eigen\_assert( (i>=0) && (
00121           ((BlockRows==1) && (BlockCols==XprType::ColsAtCompileTime) && i<xpr.rows())
00122         ||((BlockRows==XprType::RowsAtCompileTime) && (BlockCols==1) && i<xpr.cols())));
00123     \}
00124 
00127     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00128}\hyperlink{group___core___module_afdf396b628ef3874414bbfc4ebd72ab4}{00128}     \textcolor{keyword}{inline} \hyperlink{group___core___module_afdf396b628ef3874414bbfc4ebd72ab4}{Block}(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startRow, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startCol)
00129       : Impl(xpr, startRow, startCol)
00130     \{
00131       EIGEN\_STATIC\_ASSERT(RowsAtCompileTime!=\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic} && ColsAtCompileTime!=
      \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic},THIS\_METHOD\_IS\_ONLY\_FOR\_FIXED\_SIZE)
00132       eigen\_assert(startRow >= 0 && BlockRows >= 0 && startRow + BlockRows <= xpr.rows()
00133              && startCol >= 0 && BlockCols >= 0 && startCol + BlockCols <= xpr.cols());
00134     \}
00135 
00138     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00139}\hyperlink{group___core___module_a09e495968e1c52a5838bfd102978e09e}{00139}     \textcolor{keyword}{inline} \hyperlink{group___core___module_a09e495968e1c52a5838bfd102978e09e}{Block}(XprType& xpr,
00140           \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startRow, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startCol,
00141           \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockRows, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockCols)
00142       : Impl(xpr, startRow, startCol, blockRows, blockCols)
00143     \{
00144       eigen\_assert((RowsAtCompileTime==\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic} || RowsAtCompileTime==blockRows)
00145           && (ColsAtCompileTime==\hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic} || ColsAtCompileTime==blockCols));
00146       eigen\_assert(startRow >= 0 && blockRows >= 0 && startRow  <= xpr.rows() - blockRows
00147           && startCol >= 0 && blockCols >= 0 && startCol <= xpr.cols() - blockCols);
00148     \}
00149 \};
00150          
00151 \textcolor{comment}{// The generic default implementation for dense block simplu forward to the internal::BlockImpl\_dense}
00152 \textcolor{comment}{// that must be specialized for direct and non-direct access...}
00153 \textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType, \textcolor{keywordtype}{int} BlockRows, \textcolor{keywordtype}{int} BlockCols, \textcolor{keywordtype}{bool} InnerPanel>
00154 \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_block_impl}{BlockImpl}<XprType, BlockRows, BlockCols, InnerPanel, Dense>
00155   : \textcolor{keyword}{public} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense}{internal::BlockImpl\_dense}<XprType, BlockRows, BlockCols, InnerPanel>
00156 \{
00157     \textcolor{keyword}{typedef} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense}{internal::BlockImpl\_dense<XprType, BlockRows, BlockCols, InnerPanel>}
       \hyperlink{class_eigen_1_1_block_impl}{Impl};
00158     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} XprType::StorageIndex StorageIndex;
00159   \textcolor{keyword}{public}:
00160     \textcolor{keyword}{typedef} Impl \hyperlink{class_eigen_1_1_block_impl}{Base};
00161     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(\hyperlink{class_eigen_1_1_block_impl}{BlockImpl})
00162     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1_block_impl}{BlockImpl}(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} i) : Impl(xpr,i) \{\}
00163     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} BlockImpl(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startRow, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startCol) : Impl(xpr, 
      startRow, startCol) \{\}
00164     EIGEN\_DEVICE\_FUNC
00165     \textcolor{keyword}{inline} BlockImpl(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startRow, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startCol, 
      \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockRows, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockCols)
00166       : Impl(xpr, startRow, startCol, blockRows, blockCols) \{\}
00167 \};
00168 
00169 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00170 
00172 \textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType, \textcolor{keywordtype}{int} BlockRows, \textcolor{keywordtype}{int} BlockCols, \textcolor{keywordtype}{bool} InnerPanel, \textcolor{keywordtype}{bool} HasDirectAccess> \textcolor{keyword}{class }
      BlockImpl\_dense
00173   : \textcolor{keyword}{public} \hyperlink{struct_eigen_1_1internal_1_1dense__xpr__base}{internal::dense\_xpr\_base}<Block<XprType, BlockRows, BlockCols, InnerPanel
      > >::type
00174 \{
00175     \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_block}{Block<XprType, BlockRows, BlockCols, InnerPanel>}
       BlockType;
00176     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1_tensor_lazy_evaluator_writable}{internal::ref\_selector<XprType>::non\_const\_type}
       XprTypeNested;
00177   \textcolor{keyword}{public}:
00178 
00179     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1dense__xpr__base}{internal::dense\_xpr\_base<BlockType>::type} 
      \hyperlink{class_eigen_1_1_block_impl}{Base};
00180     EIGEN\_DENSE\_PUBLIC\_INTERFACE(BlockType)
00181     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(BlockImpl\_dense)
00182 
00183     \textcolor{comment}{// class InnerIterator; // FIXME apparently never used}
00184 
00185     
00187     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00188}\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_af68c0eafb607bb884cfe507bee39052e}{00188}     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_af68c0eafb607bb884cfe507bee39052e}{BlockImpl\_dense}(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} i)
00189       : m\_xpr(xpr),
00190         \textcolor{comment}{// It is a row if and only if BlockRows==1 and BlockCols==XprType::ColsAtCompileTime,}
00191         \textcolor{comment}{// and it is a column if and only if BlockRows==XprType::RowsAtCompileTime and BlockCols==1,}
00192         \textcolor{comment}{// all other cases are invalid.}
00193         \textcolor{comment}{// The case a 1x1 matrix seems ambiguous, but the result is the same anyway.}
00194         m\_startRow( (BlockRows==1) && (BlockCols==XprType::ColsAtCompileTime) ? i : 0),
00195         m\_startCol( (BlockRows==XprType::RowsAtCompileTime) && (BlockCols==1) ? i : 0),
00196         m\_blockRows(BlockRows==1 ? 1 : xpr.rows()),
00197         m\_blockCols(BlockCols==1 ? 1 : xpr.cols())
00198     \{\}
00199 
00202     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00203}\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_aa77daae8d8aef85ce9445cfd23363cbf}{00203}     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_aa77daae8d8aef85ce9445cfd23363cbf}{BlockImpl\_dense}(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startRow, 
      \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startCol)
00204       : m\_xpr(xpr), m\_startRow(startRow), m\_startCol(startCol),
00205                     m\_blockRows(BlockRows), m\_blockCols(BlockCols)
00206     \{\}
00207 
00210     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00211}\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_a187c7918e6f200bf1d7d9a9c2f608547}{00211}     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_a187c7918e6f200bf1d7d9a9c2f608547}{BlockImpl\_dense}(XprType& xpr,
00212           \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startRow, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startCol,
00213           \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockRows, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockCols)
00214       : m\_xpr(xpr), m\_startRow(startRow), m\_startCol(startCol),
00215                     m\_blockRows(blockRows), m\_blockCols(blockCols)
00216     \{\}
00217 
00218     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_blockRows.value(); \}
00219     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_blockCols.value(); \}
00220 
00221     EIGEN\_DEVICE\_FUNC
00222     \textcolor{keyword}{inline} Scalar& coeffRef(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rowId, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} colId)
00223     \{
00224       EIGEN\_STATIC\_ASSERT\_LVALUE(XprType)
00225       \textcolor{keywordflow}{return} m\_xpr.coeffRef(rowId + m\_startRow.value(), colId + m\_startCol.value());
00226     \}
00227 
00228     EIGEN\_DEVICE\_FUNC
00229     \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar& coeffRef(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rowId, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} colId)\textcolor{keyword}{ const}
00230 \textcolor{keyword}{    }\{
00231       \textcolor{keywordflow}{return} m\_xpr.derived().coeffRef(rowId + m\_startRow.value(), colId + m\_startCol.value());
00232     \}
00233 
00234     EIGEN\_DEVICE\_FUNC
00235     EIGEN\_STRONG\_INLINE \textcolor{keyword}{const} CoeffReturnType coeff(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rowId, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} colId)\textcolor{keyword}{ const}
00236 \textcolor{keyword}{    }\{
00237       \textcolor{keywordflow}{return} m\_xpr.coeff(rowId + m\_startRow.value(), colId + m\_startCol.value());
00238     \}
00239 
00240     EIGEN\_DEVICE\_FUNC
00241     \textcolor{keyword}{inline} Scalar& coeffRef(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} index)
00242     \{
00243       EIGEN\_STATIC\_ASSERT\_LVALUE(XprType)
00244       \textcolor{keywordflow}{return} m\_xpr.coeffRef(m\_startRow.value() + (RowsAtCompileTime == 1 ? 0 : index),
00245                             m\_startCol.value() + (RowsAtCompileTime == 1 ? index : 0));
00246     \}
00247 
00248     EIGEN\_DEVICE\_FUNC
00249     \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar& coeffRef(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} index)\textcolor{keyword}{ const}
00250 \textcolor{keyword}{    }\{
00251       \textcolor{keywordflow}{return} m\_xpr.coeffRef(m\_startRow.value() + (RowsAtCompileTime == 1 ? 0 : index),
00252                             m\_startCol.value() + (RowsAtCompileTime == 1 ? index : 0));
00253     \}
00254 
00255     EIGEN\_DEVICE\_FUNC
00256     \textcolor{keyword}{inline} \textcolor{keyword}{const} CoeffReturnType coeff(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} index)\textcolor{keyword}{ const}
00257 \textcolor{keyword}{    }\{
00258       \textcolor{keywordflow}{return} m\_xpr.coeff(m\_startRow.value() + (RowsAtCompileTime == 1 ? 0 : index),
00259                          m\_startCol.value() + (RowsAtCompileTime == 1 ? index : 0));
00260     \}
00261 
00262     \textcolor{keyword}{template}<\textcolor{keywordtype}{int} LoadMode>
00263     \textcolor{keyword}{inline} PacketScalar packet(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rowId, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} colId)\textcolor{keyword}{ const}
00264 \textcolor{keyword}{    }\{
00265       \textcolor{keywordflow}{return} m\_xpr.template packet<Unaligned>(rowId + m\_startRow.value(), colId + m\_startCol.value());
00266     \}
00267 
00268     \textcolor{keyword}{template}<\textcolor{keywordtype}{int} LoadMode>
00269     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} writePacket(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rowId, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} colId, \textcolor{keyword}{const} PacketScalar& val)
00270     \{
00271       m\_xpr.template writePacket<Unaligned>(rowId + m\_startRow.value(), colId + m\_startCol.value(), val);
00272     \}
00273 
00274     \textcolor{keyword}{template}<\textcolor{keywordtype}{int} LoadMode>
00275     \textcolor{keyword}{inline} PacketScalar packet(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} index)\textcolor{keyword}{ const}
00276 \textcolor{keyword}{    }\{
00277       \textcolor{keywordflow}{return} m\_xpr.template packet<Unaligned>
00278               (m\_startRow.value() + (RowsAtCompileTime == 1 ? 0 : index),
00279                m\_startCol.value() + (RowsAtCompileTime == 1 ? index : 0));
00280     \}
00281 
00282     \textcolor{keyword}{template}<\textcolor{keywordtype}{int} LoadMode>
00283     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} writePacket(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} index, \textcolor{keyword}{const} PacketScalar& val)
00284     \{
00285       m\_xpr.template writePacket<Unaligned>
00286          (m\_startRow.value() + (RowsAtCompileTime == 1 ? 0 : index),
00287           m\_startCol.value() + (RowsAtCompileTime == 1 ? index : 0), val);
00288     \}
00289 
00290 \textcolor{preprocessor}{    #ifdef EIGEN\_PARSED\_BY\_DOXYGEN}
00291 
00292     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{const} Scalar* data() \textcolor{keyword}{const};
00293     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} innerStride() \textcolor{keyword}{const};
00294     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outerStride() \textcolor{keyword}{const};
00295 \textcolor{preprocessor}{    #endif}
00296 
00297     EIGEN\_DEVICE\_FUNC
00298     \textcolor{keyword}{const} \textcolor{keyword}{typename} \hyperlink{group___sparse_core___module}{internal::remove\_all<XprTypeNested>::type}& 
      nestedExpression()\textcolor{keyword}{ const}
00299 \textcolor{keyword}{    }\{ 
00300       \textcolor{keywordflow}{return} m\_xpr; 
00301     \}
00302 
00303     EIGEN\_DEVICE\_FUNC
00304     XprType& nestedExpression() \{ \textcolor{keywordflow}{return} m\_xpr; \}
00305       
00306     EIGEN\_DEVICE\_FUNC
00307     StorageIndex startRow()\textcolor{keyword}{ const}
00308 \textcolor{keyword}{    }\{ 
00309       \textcolor{keywordflow}{return} m\_startRow.value(); 
00310     \}
00311       
00312     EIGEN\_DEVICE\_FUNC
00313     StorageIndex startCol()\textcolor{keyword}{ const}
00314 \textcolor{keyword}{    }\{ 
00315       \textcolor{keywordflow}{return} m\_startCol.value(); 
00316     \}
00317 
00318   \textcolor{keyword}{protected}:
00319 
00320     XprTypeNested m\_xpr;
00321     \textcolor{keyword}{const} 
      \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{internal::variable\_if\_dynamic<StorageIndex, (XprType::RowsAtCompileTime == 1 && BlockRows==1) ? 0 :
       Dynamic>}
       m\_startRow;
00322     \textcolor{keyword}{const} 
      \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{internal::variable\_if\_dynamic<StorageIndex, (XprType::ColsAtCompileTime == 1 && BlockCols==1) ? 0 :
       Dynamic>}
       m\_startCol;
00323     \textcolor{keyword}{const} \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{internal::variable\_if\_dynamic<StorageIndex, RowsAtCompileTime>}
       m\_blockRows;
00324     \textcolor{keyword}{const} \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{internal::variable\_if\_dynamic<StorageIndex, ColsAtCompileTime>}
       m\_blockCols;
00325 \};
00326 
00328 \textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType, \textcolor{keywordtype}{int} BlockRows, \textcolor{keywordtype}{int} BlockCols, \textcolor{keywordtype}{bool} InnerPanel>
00329 \textcolor{keyword}{class }\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense}{BlockImpl\_dense}<XprType,BlockRows,BlockCols, InnerPanel,true>
00330   : \textcolor{keyword}{public} \hyperlink{class_eigen_1_1_map_base}{MapBase}<Block<XprType, BlockRows, BlockCols, InnerPanel> >
00331 \{
00332     \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_block}{Block<XprType, BlockRows, BlockCols, InnerPanel>}
       \hyperlink{group___core___module_class_eigen_1_1_block}{BlockType};
00333     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1_tensor_lazy_evaluator_writable}{internal::ref\_selector<XprType>::non\_const\_type}
       XprTypeNested;
00334     \textcolor{keyword}{enum} \{
00335       XprTypeIsRowMajor = (int(\hyperlink{struct_eigen_1_1internal_1_1traits}{traits<XprType>::Flags})&
      \hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit}) != 0
00336     \};
00337   \textcolor{keyword}{public}:
00338 
00339     \textcolor{keyword}{typedef} \hyperlink{class_eigen_1_1_map_base}{MapBase<BlockType>} Base;
00340     EIGEN\_DENSE\_PUBLIC\_INTERFACE(BlockType)
00341     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense}{BlockImpl\_dense})
00342 
00343     
00345     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00346}\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_a72b340bbcd3acefc375e7a5eacd790f5}{00346}     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_a72b340bbcd3acefc375e7a5eacd790f5}{BlockImpl\_dense}(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} i)
00347       : Base(xpr.data() + i * (    ((BlockRows==1) && (BlockCols==XprType::ColsAtCompileTime) && (!
      XprTypeIsRowMajor)) 
00348                                 || ((BlockRows==XprType::RowsAtCompileTime) && (BlockCols==1) && ( 
      XprTypeIsRowMajor)) ? xpr.innerStride() : xpr.outerStride()),
00349              BlockRows==1 ? 1 : xpr.rows(),
00350              BlockCols==1 ? 1 : xpr.cols()),
00351         m\_xpr(xpr),
00352         m\_startRow( (BlockRows==1) && (BlockCols==XprType::ColsAtCompileTime) ? i : 0),
00353         m\_startCol( (BlockRows==XprType::RowsAtCompileTime) && (BlockCols==1) ? i : 0)
00354     \{
00355       \hyperlink{structinit}{init}();
00356     \}
00357 
00360     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00361}\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_aaa47737cd19396275d5bcb6d9520e49f}{00361}     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_aaa47737cd19396275d5bcb6d9520e49f}{BlockImpl\_dense}(XprType& xpr, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startRow, 
      \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startCol)
00362       : Base(xpr.data()+xpr.innerStride()*(XprTypeIsRowMajor?startCol:startRow) + xpr.outerStride()*(
      XprTypeIsRowMajor?startRow:startCol)),
00363         m\_xpr(xpr), m\_startRow(startRow), m\_startCol(startCol)
00364     \{
00365       \hyperlink{structinit}{init}();
00366     \}
00367 
00370     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00371}\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_a9e2d1e641a5000ca0c10b1eaeab84adf}{00371}     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_a9e2d1e641a5000ca0c10b1eaeab84adf}{BlockImpl\_dense}(XprType& xpr,
00372           \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startRow, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} startCol,
00373           \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockRows, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockCols)
00374       : Base(xpr.data()+xpr.innerStride()*(XprTypeIsRowMajor?startCol:startRow) + xpr.outerStride()*(
      XprTypeIsRowMajor?startRow:startCol), blockRows, blockCols),
00375         m\_xpr(xpr), m\_startRow(startRow), m\_startCol(startCol)
00376     \{
00377       \hyperlink{structinit}{init}();
00378     \}
00379 
00380     EIGEN\_DEVICE\_FUNC
00381     \textcolor{keyword}{const} \textcolor{keyword}{typename} \hyperlink{group___sparse_core___module}{internal::remove\_all<XprTypeNested>::type}& 
      nestedExpression()\textcolor{keyword}{ const}
00382 \textcolor{keyword}{    }\{ 
00383       \textcolor{keywordflow}{return} m\_xpr; 
00384     \}
00385 
00386     EIGEN\_DEVICE\_FUNC
00387     XprType& nestedExpression() \{ \textcolor{keywordflow}{return} m\_xpr; \}
00388       
00390     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00391}\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_a91fea2e027a3b057b5f70ab52a1a24b7}{00391}     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_a91fea2e027a3b057b5f70ab52a1a24b7}{innerStride}()\textcolor{keyword}{ const}
00392 \textcolor{keyword}{    }\{
00393       \textcolor{keywordflow}{return} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<BlockType>::HasSameStorageOrderAsXprType}
00394              ? m\_xpr.innerStride()
00395              : m\_xpr.outerStride();
00396     \}
00397 
00399     EIGEN\_DEVICE\_FUNC
\Hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_block_8h_source_l00400}\hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_ac6f37b9a06897f0891fcd7b65ce2800e}{00400}     \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense_3_01_xpr_type_00_01_block_rows_00_01_block_cols_00_01_inner_panel_00_01true_01_4_ac6f37b9a06897f0891fcd7b65ce2800e}{outerStride}()\textcolor{keyword}{ const}
00401 \textcolor{keyword}{    }\{
00402       \textcolor{keywordflow}{return} m\_outerStride;
00403     \}
00404 
00405     EIGEN\_DEVICE\_FUNC
00406     StorageIndex startRow()\textcolor{keyword}{ const}
00407 \textcolor{keyword}{    }\{
00408       \textcolor{keywordflow}{return} m\_startRow.value();
00409     \}
00410 
00411     EIGEN\_DEVICE\_FUNC
00412     StorageIndex startCol()\textcolor{keyword}{ const}
00413 \textcolor{keyword}{    }\{
00414       \textcolor{keywordflow}{return} m\_startCol.value();
00415     \}
00416 
00417 \textcolor{preprocessor}{  #ifndef \_\_SUNPRO\_CC}
00418   \textcolor{comment}{// FIXME sunstudio is not friendly with the above friend...}
00419   \textcolor{comment}{// META-FIXME there is no 'friend' keyword around here. Is this obsolete?}
00420   \textcolor{keyword}{protected}:
00421 \textcolor{preprocessor}{  #endif}
00422 
00423 \textcolor{preprocessor}{    #ifndef EIGEN\_PARSED\_BY\_DOXYGEN}
00424 
00425     EIGEN\_DEVICE\_FUNC
00426     \textcolor{keyword}{inline} \hyperlink{class_eigen_1_1internal_1_1_block_impl__dense}{BlockImpl\_dense}(XprType& xpr, \textcolor{keyword}{const} Scalar* data, 
      \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockRows, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} blockCols)
00427       : Base(data, blockRows, blockCols), m\_xpr(xpr)
00428     \{
00429       \hyperlink{structinit}{init}();
00430     \}
00431 \textcolor{preprocessor}{    #endif}
00432 
00433   \textcolor{keyword}{protected}:
00434     EIGEN\_DEVICE\_FUNC
00435     \textcolor{keywordtype}{void} \hyperlink{structinit}{init}()
00436     \{
00437       m\_outerStride = \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<BlockType>::HasSameStorageOrderAsXprType}
00438                     ? m\_xpr.outerStride()
00439                     : m\_xpr.innerStride();
00440     \}
00441 
00442     XprTypeNested m\_xpr;
00443     \textcolor{keyword}{const} 
      \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{internal::variable\_if\_dynamic<StorageIndex, (XprType::RowsAtCompileTime == 1 && BlockRows==1) ? 0 :
       Dynamic>}
       m\_startRow;
00444     \textcolor{keyword}{const} 
      \hyperlink{class_eigen_1_1internal_1_1variable__if__dynamic}{internal::variable\_if\_dynamic<StorageIndex, (XprType::ColsAtCompileTime == 1 && BlockCols==1) ? 0 :
       Dynamic>}
       m\_startCol;
00445     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} m\_outerStride;
00446 \};
00447 
00448 \} \textcolor{comment}{// end namespace internal}
00449 
00450 \} \textcolor{comment}{// end namespace Eigen}
00451 
00452 \textcolor{preprocessor}{#endif // EIGEN\_BLOCK\_H}
\end{DoxyCode}
