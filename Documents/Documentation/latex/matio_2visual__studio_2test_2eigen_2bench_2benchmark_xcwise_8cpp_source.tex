\hypertarget{matio_2visual__studio_2test_2eigen_2bench_2benchmark_xcwise_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/bench/benchmark\+Xcwise.cpp}
\label{matio_2visual__studio_2test_2eigen_2bench_2benchmark_xcwise_8cpp_source}\index{benchmark\+Xcwise.\+cpp@{benchmark\+Xcwise.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// g++ -O3 -DNDEBUG benchmarkX.cpp -o benchmarkX && time ./benchmarkX}
00002 
00003 \textcolor{preprocessor}{#include <iostream>}
00004 \textcolor{preprocessor}{#include <Eigen/Core>}
00005 
00006 \textcolor{keyword}{using namespace }\hyperlink{namespacestd}{std};
00007 \textcolor{keyword}{using namespace }\hyperlink{namespace_eigen}{Eigen};
00008 
00009 \textcolor{preprocessor}{#ifndef VECTYPE}
00010 \textcolor{preprocessor}{#define VECTYPE VectorXLd}
00011 \textcolor{preprocessor}{#endif}
00012 
00013 \textcolor{preprocessor}{#ifndef VECSIZE}
00014 \textcolor{preprocessor}{#define VECSIZE 1000000}
00015 \textcolor{preprocessor}{#endif}
00016 
00017 \textcolor{preprocessor}{#ifndef REPEAT}
00018 \textcolor{preprocessor}{#define REPEAT 1000}
00019 \textcolor{preprocessor}{#endif}
00020 
00021 \textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])
00022 \{
00023     VECTYPE I = VECTYPE::Ones(VECSIZE);
00024     VECTYPE m(VECSIZE,1);
00025     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < VECSIZE; i++)
00026     \{
00027         m[i] = 0.1 * i/VECSIZE;
00028     \}
00029     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} a = 0; a < REPEAT; a++)
00030     \{
00031         m = VECTYPE::Ones(VECSIZE) + 0.00005 * (m.cwise().square() + m/4);
00032     \}
00033     cout << m[0] << endl;
00034     \textcolor{keywordflow}{return} 0;
00035 \}
\end{DoxyCode}
