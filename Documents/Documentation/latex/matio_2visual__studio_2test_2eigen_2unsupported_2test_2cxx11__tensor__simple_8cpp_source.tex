\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__simple_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/cxx11\+\_\+tensor\+\_\+simple.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__simple_8cpp_source}\index{cxx11\+\_\+tensor\+\_\+simple.\+cpp@{cxx11\+\_\+tensor\+\_\+simple.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2013 Christian Seiler <christian@iwakd.de>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{preprocessor}{#include <Eigen/CXX11/Tensor>}
00013 
00014 \textcolor{keyword}{using} \hyperlink{class_eigen_1_1_tensor}{Eigen::Tensor};
00015 \textcolor{keyword}{using} \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{Eigen::RowMajor};
00016 
00017 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_0d()
00018 \{
00019   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 0>} scalar1;
00020   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 0, RowMajor>} scalar2;
00021   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 0>} scalar3;
00022   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 0, RowMajor>} scalar4;
00023 
00024   scalar3.\hyperlink{class_eigen_1_1_tensor_a5ab1ec6dc9b05d5e4db3600bc9d2cc6b}{resize}();
00025   scalar4.\hyperlink{class_eigen_1_1_tensor_a5ab1ec6dc9b05d5e4db3600bc9d2cc6b}{resize}();
00026 
00027   scalar1() = 7;
00028   scalar2() = 13;
00029   scalar3.setValues(17);
00030   scalar4.setZero();
00031 
00032   VERIFY\_IS\_EQUAL(scalar1.rank(), 0);
00033   VERIFY\_IS\_EQUAL(scalar1.size(), 1);
00034 
00035   VERIFY\_IS\_EQUAL(scalar1(), 7);
00036   VERIFY\_IS\_EQUAL(scalar2(), 13);
00037   VERIFY\_IS\_EQUAL(scalar3(), 17);
00038   VERIFY\_IS\_EQUAL(scalar4(), 0);
00039 
00040   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 0>} scalar5(scalar1);
00041 
00042   VERIFY\_IS\_EQUAL(scalar5(), 7);
00043   VERIFY\_IS\_EQUAL(scalar5.data()[0], 7);
00044 \}
00045 
00046 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_1d()
00047 \{
00048   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} vec1(6);
00049   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1, RowMajor>} vec2(6);
00050   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} vec3;
00051   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1, RowMajor>} vec4;
00052 
00053   vec3.\hyperlink{class_eigen_1_1_tensor_a5ab1ec6dc9b05d5e4db3600bc9d2cc6b}{resize}(6);
00054   vec4.\hyperlink{class_eigen_1_1_tensor_a5ab1ec6dc9b05d5e4db3600bc9d2cc6b}{resize}(6);
00055 
00056   vec1(0) = 4;  vec2(0) = 0; vec3(0) = 5;
00057   vec1(1) = 8;  vec2(1) = 1; vec3(1) = 4;
00058   vec1(2) = 15; vec2(2) = 2; vec3(2) = 3;
00059   vec1(3) = 16; vec2(3) = 3; vec3(3) = 2;
00060   vec1(4) = 23; vec2(4) = 4; vec3(4) = 1;
00061   vec1(5) = 42; vec2(5) = 5; vec3(5) = 0;
00062   vec4.setZero();
00063 
00064   VERIFY\_IS\_EQUAL((vec1.rank()), 1);
00065   VERIFY\_IS\_EQUAL((vec1.size()), 6);
00066   VERIFY\_IS\_EQUAL((vec1.dimensions()[0]), 6);
00067 
00068   VERIFY\_IS\_EQUAL((vec1[0]), 4);
00069   VERIFY\_IS\_EQUAL((vec1[1]), 8);
00070   VERIFY\_IS\_EQUAL((vec1[2]), 15);
00071   VERIFY\_IS\_EQUAL((vec1[3]), 16);
00072   VERIFY\_IS\_EQUAL((vec1[4]), 23);
00073   VERIFY\_IS\_EQUAL((vec1[5]), 42);
00074 
00075   VERIFY\_IS\_EQUAL((vec2[0]), 0);
00076   VERIFY\_IS\_EQUAL((vec2[1]), 1);
00077   VERIFY\_IS\_EQUAL((vec2[2]), 2);
00078   VERIFY\_IS\_EQUAL((vec2[3]), 3);
00079   VERIFY\_IS\_EQUAL((vec2[4]), 4);
00080   VERIFY\_IS\_EQUAL((vec2[5]), 5);
00081 
00082   VERIFY\_IS\_EQUAL((vec3[0]), 5);
00083   VERIFY\_IS\_EQUAL((vec3[1]), 4);
00084   VERIFY\_IS\_EQUAL((vec3[2]), 3);
00085   VERIFY\_IS\_EQUAL((vec3[3]), 2);
00086   VERIFY\_IS\_EQUAL((vec3[4]), 1);
00087   VERIFY\_IS\_EQUAL((vec3[5]), 0);
00088 
00089   VERIFY\_IS\_EQUAL((vec4[0]), 0);
00090   VERIFY\_IS\_EQUAL((vec4[1]), 0);
00091   VERIFY\_IS\_EQUAL((vec4[2]), 0);
00092   VERIFY\_IS\_EQUAL((vec4[3]), 0);
00093   VERIFY\_IS\_EQUAL((vec4[4]), 0);
00094   VERIFY\_IS\_EQUAL((vec4[5]), 0);
00095 
00096   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 1>} vec5(vec1);
00097 
00098   VERIFY\_IS\_EQUAL((vec5(0)), 4);
00099   VERIFY\_IS\_EQUAL((vec5(1)), 8);
00100   VERIFY\_IS\_EQUAL((vec5(2)), 15);
00101   VERIFY\_IS\_EQUAL((vec5(3)), 16);
00102   VERIFY\_IS\_EQUAL((vec5(4)), 23);
00103   VERIFY\_IS\_EQUAL((vec5(5)), 42);
00104 
00105   VERIFY\_IS\_EQUAL((vec5.data()[0]), 4);
00106   VERIFY\_IS\_EQUAL((vec5.data()[1]), 8);
00107   VERIFY\_IS\_EQUAL((vec5.data()[2]), 15);
00108   VERIFY\_IS\_EQUAL((vec5.data()[3]), 16);
00109   VERIFY\_IS\_EQUAL((vec5.data()[4]), 23);
00110   VERIFY\_IS\_EQUAL((vec5.data()[5]), 42);
00111 \}
00112 
00113 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_2d()
00114 \{
00115   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 2>} mat1(2,3);
00116   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 2, RowMajor>} mat2(2,3);
00117 
00118   mat1(0,0) = 0;
00119   mat1(0,1) = 1;
00120   mat1(0,2) = 2;
00121   mat1(1,0) = 3;
00122   mat1(1,1) = 4;
00123   mat1(1,2) = 5;
00124 
00125   mat2(0,0) = 0;
00126   mat2(0,1) = 1;
00127   mat2(0,2) = 2;
00128   mat2(1,0) = 3;
00129   mat2(1,1) = 4;
00130   mat2(1,2) = 5;
00131 
00132   VERIFY\_IS\_EQUAL((mat1.rank()), 2);
00133   VERIFY\_IS\_EQUAL((mat1.size()), 6);
00134   VERIFY\_IS\_EQUAL((mat1.dimensions()[0]), 2);
00135   VERIFY\_IS\_EQUAL((mat1.dimensions()[1]), 3);
00136 
00137   VERIFY\_IS\_EQUAL((mat2.rank()), 2);
00138   VERIFY\_IS\_EQUAL((mat2.size()), 6);
00139   VERIFY\_IS\_EQUAL((mat2.dimensions()[0]), 2);
00140   VERIFY\_IS\_EQUAL((mat2.dimensions()[1]), 3);
00141 
00142   VERIFY\_IS\_EQUAL((mat1.data()[0]), 0);
00143   VERIFY\_IS\_EQUAL((mat1.data()[1]), 3);
00144   VERIFY\_IS\_EQUAL((mat1.data()[2]), 1);
00145   VERIFY\_IS\_EQUAL((mat1.data()[3]), 4);
00146   VERIFY\_IS\_EQUAL((mat1.data()[4]), 2);
00147   VERIFY\_IS\_EQUAL((mat1.data()[5]), 5);
00148 
00149   VERIFY\_IS\_EQUAL((mat2.data()[0]), 0);
00150   VERIFY\_IS\_EQUAL((mat2.data()[1]), 1);
00151   VERIFY\_IS\_EQUAL((mat2.data()[2]), 2);
00152   VERIFY\_IS\_EQUAL((mat2.data()[3]), 3);
00153   VERIFY\_IS\_EQUAL((mat2.data()[4]), 4);
00154   VERIFY\_IS\_EQUAL((mat2.data()[5]), 5);
00155 \}
00156 
00157 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_3d()
00158 \{
00159   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3>} epsilon(3,3,3);
00160   epsilon.setZero();
00161   epsilon(0,1,2) = epsilon(2,0,1) = epsilon(1,2,0) = 1;
00162   epsilon(2,1,0) = epsilon(0,2,1) = epsilon(1,0,2) = -1;
00163 
00164   VERIFY\_IS\_EQUAL((epsilon.size()), 27);
00165   VERIFY\_IS\_EQUAL((epsilon.dimensions()[0]), 3);
00166   VERIFY\_IS\_EQUAL((epsilon.dimensions()[1]), 3);
00167   VERIFY\_IS\_EQUAL((epsilon.dimensions()[2]), 3);
00168 
00169   VERIFY\_IS\_EQUAL((epsilon(0,0,0)), 0);
00170   VERIFY\_IS\_EQUAL((epsilon(0,0,1)), 0);
00171   VERIFY\_IS\_EQUAL((epsilon(0,0,2)), 0);
00172   VERIFY\_IS\_EQUAL((epsilon(0,1,0)), 0);
00173   VERIFY\_IS\_EQUAL((epsilon(0,1,1)), 0);
00174   VERIFY\_IS\_EQUAL((epsilon(0,2,0)), 0);
00175   VERIFY\_IS\_EQUAL((epsilon(0,2,2)), 0);
00176   VERIFY\_IS\_EQUAL((epsilon(1,0,0)), 0);
00177   VERIFY\_IS\_EQUAL((epsilon(1,0,1)), 0);
00178   VERIFY\_IS\_EQUAL((epsilon(1,1,0)), 0);
00179   VERIFY\_IS\_EQUAL((epsilon(1,1,1)), 0);
00180   VERIFY\_IS\_EQUAL((epsilon(1,1,2)), 0);
00181   VERIFY\_IS\_EQUAL((epsilon(1,2,1)), 0);
00182   VERIFY\_IS\_EQUAL((epsilon(1,2,2)), 0);
00183   VERIFY\_IS\_EQUAL((epsilon(2,0,0)), 0);
00184   VERIFY\_IS\_EQUAL((epsilon(2,0,2)), 0);
00185   VERIFY\_IS\_EQUAL((epsilon(2,1,1)), 0);
00186   VERIFY\_IS\_EQUAL((epsilon(2,1,2)), 0);
00187   VERIFY\_IS\_EQUAL((epsilon(2,2,0)), 0);
00188   VERIFY\_IS\_EQUAL((epsilon(2,2,1)), 0);
00189   VERIFY\_IS\_EQUAL((epsilon(2,2,2)), 0);
00190 
00191   VERIFY\_IS\_EQUAL((epsilon(0,1,2)), 1);
00192   VERIFY\_IS\_EQUAL((epsilon(2,0,1)), 1);
00193   VERIFY\_IS\_EQUAL((epsilon(1,2,0)), 1);
00194   VERIFY\_IS\_EQUAL((epsilon(2,1,0)), -1);
00195   VERIFY\_IS\_EQUAL((epsilon(0,2,1)), -1);
00196   VERIFY\_IS\_EQUAL((epsilon(1,0,2)), -1);
00197 
00198   array<Eigen::DenseIndex, 3> dims;
00199   dims[0] = 2;
00200   dims[1] = 3;
00201   dims[2] = 4;
00202   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3>} t1(dims);
00203   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3, RowMajor>} t2(dims);
00204 
00205   VERIFY\_IS\_EQUAL((t1.size()), 24);
00206   VERIFY\_IS\_EQUAL((t1.dimensions()[0]), 2);
00207   VERIFY\_IS\_EQUAL((t1.dimensions()[1]), 3);
00208   VERIFY\_IS\_EQUAL((t1.dimensions()[2]), 4);
00209 
00210   VERIFY\_IS\_EQUAL((t2.size()), 24);
00211   VERIFY\_IS\_EQUAL((t2.dimensions()[0]), 2);
00212   VERIFY\_IS\_EQUAL((t2.dimensions()[1]), 3);
00213   VERIFY\_IS\_EQUAL((t2.dimensions()[2]), 4);
00214 
00215   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; i++) \{
00216     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; j++) \{
00217       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 4; k++) \{
00218         t1(i, j, k) = 100 * i + 10 * j + k;
00219         t2(i, j, k) = 100 * i + 10 * j + k;
00220       \}
00221     \}
00222   \}
00223 
00224   VERIFY\_IS\_EQUAL((t1.data()[0]),    0);
00225   VERIFY\_IS\_EQUAL((t1.data()[1]),  100);
00226   VERIFY\_IS\_EQUAL((t1.data()[2]),   10);
00227   VERIFY\_IS\_EQUAL((t1.data()[3]),  110);
00228   VERIFY\_IS\_EQUAL((t1.data()[4]),   20);
00229   VERIFY\_IS\_EQUAL((t1.data()[5]),  120);
00230   VERIFY\_IS\_EQUAL((t1.data()[6]),    1);
00231   VERIFY\_IS\_EQUAL((t1.data()[7]),  101);
00232   VERIFY\_IS\_EQUAL((t1.data()[8]),   11);
00233   VERIFY\_IS\_EQUAL((t1.data()[9]),  111);
00234   VERIFY\_IS\_EQUAL((t1.data()[10]),  21);
00235   VERIFY\_IS\_EQUAL((t1.data()[11]), 121);
00236   VERIFY\_IS\_EQUAL((t1.data()[12]),   2);
00237   VERIFY\_IS\_EQUAL((t1.data()[13]), 102);
00238   VERIFY\_IS\_EQUAL((t1.data()[14]),  12);
00239   VERIFY\_IS\_EQUAL((t1.data()[15]), 112);
00240   VERIFY\_IS\_EQUAL((t1.data()[16]),  22);
00241   VERIFY\_IS\_EQUAL((t1.data()[17]), 122);
00242   VERIFY\_IS\_EQUAL((t1.data()[18]),   3);
00243   VERIFY\_IS\_EQUAL((t1.data()[19]), 103);
00244   VERIFY\_IS\_EQUAL((t1.data()[20]),  13);
00245   VERIFY\_IS\_EQUAL((t1.data()[21]), 113);
00246   VERIFY\_IS\_EQUAL((t1.data()[22]),  23);
00247   VERIFY\_IS\_EQUAL((t1.data()[23]), 123);
00248 
00249   VERIFY\_IS\_EQUAL((t2.data()[0]),    0);
00250   VERIFY\_IS\_EQUAL((t2.data()[1]),    1);
00251   VERIFY\_IS\_EQUAL((t2.data()[2]),    2);
00252   VERIFY\_IS\_EQUAL((t2.data()[3]),    3);
00253   VERIFY\_IS\_EQUAL((t2.data()[4]),   10);
00254   VERIFY\_IS\_EQUAL((t2.data()[5]),   11);
00255   VERIFY\_IS\_EQUAL((t2.data()[6]),   12);
00256   VERIFY\_IS\_EQUAL((t2.data()[7]),   13);
00257   VERIFY\_IS\_EQUAL((t2.data()[8]),   20);
00258   VERIFY\_IS\_EQUAL((t2.data()[9]),   21);
00259   VERIFY\_IS\_EQUAL((t2.data()[10]),  22);
00260   VERIFY\_IS\_EQUAL((t2.data()[11]),  23);
00261   VERIFY\_IS\_EQUAL((t2.data()[12]), 100);
00262   VERIFY\_IS\_EQUAL((t2.data()[13]), 101);
00263   VERIFY\_IS\_EQUAL((t2.data()[14]), 102);
00264   VERIFY\_IS\_EQUAL((t2.data()[15]), 103);
00265   VERIFY\_IS\_EQUAL((t2.data()[16]), 110);
00266   VERIFY\_IS\_EQUAL((t2.data()[17]), 111);
00267   VERIFY\_IS\_EQUAL((t2.data()[18]), 112);
00268   VERIFY\_IS\_EQUAL((t2.data()[19]), 113);
00269   VERIFY\_IS\_EQUAL((t2.data()[20]), 120);
00270   VERIFY\_IS\_EQUAL((t2.data()[21]), 121);
00271   VERIFY\_IS\_EQUAL((t2.data()[22]), 122);
00272   VERIFY\_IS\_EQUAL((t2.data()[23]), 123);
00273 \}
00274 
00275 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_simple\_assign()
00276 \{
00277   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3>} epsilon(3,3,3);
00278   epsilon.setZero();
00279   epsilon(0,1,2) = epsilon(2,0,1) = epsilon(1,2,0) = 1;
00280   epsilon(2,1,0) = epsilon(0,2,1) = epsilon(1,0,2) = -1;
00281 
00282   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3>} e2(3,3,3);
00283   e2.setZero();
00284   VERIFY\_IS\_EQUAL((e2(1,2,0)), 0);
00285 
00286   e2 = epsilon;
00287   VERIFY\_IS\_EQUAL((e2(1,2,0)), 1);
00288   VERIFY\_IS\_EQUAL((e2(0,1,2)), 1);
00289   VERIFY\_IS\_EQUAL((e2(2,0,1)), 1);
00290   VERIFY\_IS\_EQUAL((e2(2,1,0)), -1);
00291   VERIFY\_IS\_EQUAL((e2(0,2,1)), -1);
00292   VERIFY\_IS\_EQUAL((e2(1,0,2)), -1);
00293 \}
00294 
00295 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_resize()
00296 \{
00297   \hyperlink{class_eigen_1_1_tensor}{Tensor<int, 3>} epsilon;
00298   epsilon.\hyperlink{class_eigen_1_1_tensor_a5ab1ec6dc9b05d5e4db3600bc9d2cc6b}{resize}(2,3,7);
00299   VERIFY\_IS\_EQUAL(epsilon.dimension(0), 2);
00300   VERIFY\_IS\_EQUAL(epsilon.dimension(1), 3);
00301   VERIFY\_IS\_EQUAL(epsilon.dimension(2), 7);
00302   VERIFY\_IS\_EQUAL(epsilon.size(), 2*3*7);
00303 
00304   \textcolor{keyword}{const} \textcolor{keywordtype}{int}* old\_data = epsilon.data();
00305   epsilon.\hyperlink{class_eigen_1_1_tensor_a5ab1ec6dc9b05d5e4db3600bc9d2cc6b}{resize}(3,2,7);
00306   VERIFY\_IS\_EQUAL(epsilon.dimension(0), 3);
00307   VERIFY\_IS\_EQUAL(epsilon.dimension(1), 2);
00308   VERIFY\_IS\_EQUAL(epsilon.dimension(2), 7);
00309   VERIFY\_IS\_EQUAL(epsilon.size(), 2*3*7);
00310   VERIFY\_IS\_EQUAL(epsilon.data(), old\_data);
00311 
00312   epsilon.\hyperlink{class_eigen_1_1_tensor_a5ab1ec6dc9b05d5e4db3600bc9d2cc6b}{resize}(3,5,7);
00313   VERIFY\_IS\_EQUAL(epsilon.dimension(0), 3);
00314   VERIFY\_IS\_EQUAL(epsilon.dimension(1), 5);
00315   VERIFY\_IS\_EQUAL(epsilon.dimension(2), 7);
00316   VERIFY\_IS\_EQUAL(epsilon.size(), 3*5*7);
00317 \}
00318 
00319 \textcolor{keywordtype}{void} test\_cxx11\_tensor\_simple()
00320 \{
00321   CALL\_SUBTEST(test\_0d());
00322   CALL\_SUBTEST(test\_1d());
00323   CALL\_SUBTEST(test\_2d());
00324   CALL\_SUBTEST(test\_3d());
00325   CALL\_SUBTEST(test\_simple\_assign());
00326   CALL\_SUBTEST(test\_resize());
00327 \}
\end{DoxyCode}
