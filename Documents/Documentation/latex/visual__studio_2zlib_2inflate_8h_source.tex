\hypertarget{visual__studio_2zlib_2inflate_8h_source}{}\section{visual\+\_\+studio/zlib/inflate.h}
\label{visual__studio_2zlib_2inflate_8h_source}\index{inflate.\+h@{inflate.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* inflate.h -- internal inflate state definition}
00002 \textcolor{comment}{ * Copyright (C) 1995-2016 Mark Adler}
00003 \textcolor{comment}{ * For conditions of distribution and use, see copyright notice in zlib.h}
00004 \textcolor{comment}{ */}
00005 
00006 \textcolor{comment}{/* WARNING: this file should *not* be used by applications. It is}
00007 \textcolor{comment}{   part of the implementation of the compression library and is}
00008 \textcolor{comment}{   subject to change. Applications should only use zlib.h.}
00009 \textcolor{comment}{ */}
00010 
00011 \textcolor{comment}{/* define NO\_GZIP when compiling if you want to disable gzip header and}
00012 \textcolor{comment}{   trailer decoding by inflate().  NO\_GZIP would be used to avoid linking in}
00013 \textcolor{comment}{   the crc code when it is not needed.  For shared libraries, gzip decoding}
00014 \textcolor{comment}{   should be left enabled. */}
00015 \textcolor{preprocessor}{#ifndef NO\_GZIP}
00016 \textcolor{preprocessor}{#  define GUNZIP}
00017 \textcolor{preprocessor}{#endif}
00018 
00019 \textcolor{comment}{/* Possible inflate modes between inflate() calls */}
00020 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00021     HEAD = 16180,   \textcolor{comment}{/* i: waiting for magic header */}
00022     FLAGS,      \textcolor{comment}{/* i: waiting for method and flags (gzip) */}
00023     TIME,       \textcolor{comment}{/* i: waiting for modification time (gzip) */}
00024     OS,         \textcolor{comment}{/* i: waiting for extra flags and operating system (gzip) */}
00025     EXLEN,      \textcolor{comment}{/* i: waiting for extra length (gzip) */}
00026     EXTRA,      \textcolor{comment}{/* i: waiting for extra bytes (gzip) */}
00027     NAME,       \textcolor{comment}{/* i: waiting for end of file name (gzip) */}
00028     COMMENT,    \textcolor{comment}{/* i: waiting for end of comment (gzip) */}
00029     HCRC,       \textcolor{comment}{/* i: waiting for header crc (gzip) */}
00030     DICTID,     \textcolor{comment}{/* i: waiting for dictionary check value */}
00031     DICT,       \textcolor{comment}{/* waiting for inflateSetDictionary() call */}
00032         TYPE,       \textcolor{comment}{/* i: waiting for type bits, including last-flag bit */}
00033         TYPEDO,     \textcolor{comment}{/* i: same, but skip check to exit inflate on new block */}
00034         STORED,     \textcolor{comment}{/* i: waiting for stored size (length and complement) */}
00035         COPY\_,      \textcolor{comment}{/* i/o: same as COPY below, but only first time in */}
00036         COPY,       \textcolor{comment}{/* i/o: waiting for input or output to copy stored block */}
00037         TABLE,      \textcolor{comment}{/* i: waiting for dynamic block table lengths */}
00038         LENLENS,    \textcolor{comment}{/* i: waiting for code length code lengths */}
00039         CODELENS,   \textcolor{comment}{/* i: waiting for length/lit and distance code lengths */}
00040             LEN\_,       \textcolor{comment}{/* i: same as LEN below, but only first time in */}
00041             LEN,        \textcolor{comment}{/* i: waiting for length/lit/eob code */}
00042             LENEXT,     \textcolor{comment}{/* i: waiting for length extra bits */}
00043             DIST,       \textcolor{comment}{/* i: waiting for distance code */}
00044             DISTEXT,    \textcolor{comment}{/* i: waiting for distance extra bits */}
00045             MATCH,      \textcolor{comment}{/* o: waiting for output space to copy string */}
00046             LIT,        \textcolor{comment}{/* o: waiting for output space to write literal */}
00047     CHECK,      \textcolor{comment}{/* i: waiting for 32-bit check value */}
00048     LENGTH,     \textcolor{comment}{/* i: waiting for 32-bit length (gzip) */}
00049     DONE,       \textcolor{comment}{/* finished check, done -- remain here until reset */}
00050     BAD,        \textcolor{comment}{/* got a data error -- remain here until reset */}
00051     MEM,        \textcolor{comment}{/* got an inflate() memory error -- remain here until reset */}
00052     SYNC        \textcolor{comment}{/* looking for synchronization bytes to restart inflate() */}
00053 \} inflate\_mode;
00054 
00055 \textcolor{comment}{/*}
00056 \textcolor{comment}{    State transitions between above modes -}
00057 \textcolor{comment}{}
00058 \textcolor{comment}{    (most modes can go to BAD or MEM on error -- not shown for clarity)}
00059 \textcolor{comment}{}
00060 \textcolor{comment}{    Process header:}
00061 \textcolor{comment}{        HEAD -> (gzip) or (zlib) or (raw)}
00062 \textcolor{comment}{        (gzip) -> FLAGS -> TIME -> OS -> EXLEN -> EXTRA -> NAME -> COMMENT ->}
00063 \textcolor{comment}{                  HCRC -> TYPE}
00064 \textcolor{comment}{        (zlib) -> DICTID or TYPE}
00065 \textcolor{comment}{        DICTID -> DICT -> TYPE}
00066 \textcolor{comment}{        (raw) -> TYPEDO}
00067 \textcolor{comment}{    Read deflate blocks:}
00068 \textcolor{comment}{            TYPE -> TYPEDO -> STORED or TABLE or LEN\_ or CHECK}
00069 \textcolor{comment}{            STORED -> COPY\_ -> COPY -> TYPE}
00070 \textcolor{comment}{            TABLE -> LENLENS -> CODELENS -> LEN\_}
00071 \textcolor{comment}{            LEN\_ -> LEN}
00072 \textcolor{comment}{    Read deflate codes in fixed or dynamic block:}
00073 \textcolor{comment}{                LEN -> LENEXT or LIT or TYPE}
00074 \textcolor{comment}{                LENEXT -> DIST -> DISTEXT -> MATCH -> LEN}
00075 \textcolor{comment}{                LIT -> LEN}
00076 \textcolor{comment}{    Process trailer:}
00077 \textcolor{comment}{        CHECK -> LENGTH -> DONE}
00078 \textcolor{comment}{ */}
00079 
00080 \textcolor{comment}{/* State maintained between inflate() calls -- approximately 7K bytes, not}
00081 \textcolor{comment}{   including the allocated sliding window, which is up to 32K bytes. */}
00082 \textcolor{keyword}{struct }\hyperlink{structinflate__state}{inflate\_state} \{
00083     z\_streamp strm;             \textcolor{comment}{/* pointer back to this zlib stream */}
00084     inflate\_mode mode;          \textcolor{comment}{/* current inflate mode */}
00085     \textcolor{keywordtype}{int} last;                   \textcolor{comment}{/* true if processing last block */}
00086     \textcolor{keywordtype}{int} wrap;                   \textcolor{comment}{/* bit 0 true for zlib, bit 1 true for gzip,}
00087 \textcolor{comment}{                                   bit 2 true to validate check value */}
00088     \textcolor{keywordtype}{int} havedict;               \textcolor{comment}{/* true if dictionary provided */}
00089     \textcolor{keywordtype}{int} flags;                  \textcolor{comment}{/* gzip header method and flags (0 if zlib) */}
00090     \textcolor{keywordtype}{unsigned} dmax;              \textcolor{comment}{/* zlib header max distance (INFLATE\_STRICT) */}
00091     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} check;        \textcolor{comment}{/* protected copy of check value */}
00092     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} total;        \textcolor{comment}{/* protected copy of output count */}
00093     gz\_headerp head;            \textcolor{comment}{/* where to save gzip header information */}
00094         \textcolor{comment}{/* sliding window */}
00095     \textcolor{keywordtype}{unsigned} wbits;             \textcolor{comment}{/* log base 2 of requested window size */}
00096     \textcolor{keywordtype}{unsigned} wsize;             \textcolor{comment}{/* window size or zero if not using window */}
00097     \textcolor{keywordtype}{unsigned} whave;             \textcolor{comment}{/* valid bytes in the window */}
00098     \textcolor{keywordtype}{unsigned} wnext;             \textcolor{comment}{/* window write index */}
00099     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} FAR *window;  \textcolor{comment}{/* allocated sliding window, if needed */}
00100         \textcolor{comment}{/* bit accumulator */}
00101     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} hold;         \textcolor{comment}{/* input bit accumulator */}
00102     \textcolor{keywordtype}{unsigned} bits;              \textcolor{comment}{/* number of bits in "in" */}
00103         \textcolor{comment}{/* for string and stored block copying */}
00104     \textcolor{keywordtype}{unsigned} length;            \textcolor{comment}{/* literal or length of data to copy */}
00105     \textcolor{keywordtype}{unsigned} offset;            \textcolor{comment}{/* distance back to copy string from */}
00106         \textcolor{comment}{/* for table and code decoding */}
00107     \textcolor{keywordtype}{unsigned} extra;             \textcolor{comment}{/* extra bits needed */}
00108         \textcolor{comment}{/* fixed and dynamic code tables */}
00109     \hyperlink{structcode}{code} \textcolor{keyword}{const} FAR *lencode;    \textcolor{comment}{/* starting table for length/literal codes */}
00110     \hyperlink{structcode}{code} \textcolor{keyword}{const} FAR *distcode;   \textcolor{comment}{/* starting table for distance codes */}
00111     \textcolor{keywordtype}{unsigned} lenbits;           \textcolor{comment}{/* index bits for lencode */}
00112     \textcolor{keywordtype}{unsigned} distbits;          \textcolor{comment}{/* index bits for distcode */}
00113         \textcolor{comment}{/* dynamic table building */}
00114     \textcolor{keywordtype}{unsigned} ncode;             \textcolor{comment}{/* number of code length code lengths */}
00115     \textcolor{keywordtype}{unsigned} nlen;              \textcolor{comment}{/* number of length code lengths */}
00116     \textcolor{keywordtype}{unsigned} ndist;             \textcolor{comment}{/* number of distance code lengths */}
00117     \textcolor{keywordtype}{unsigned} have;              \textcolor{comment}{/* number of code lengths in lens[] */}
00118     \hyperlink{structcode}{code} FAR *next;             \textcolor{comment}{/* next available space in codes[] */}
00119     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} lens[320];   \textcolor{comment}{/* temporary storage for code lengths */}
00120     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} work[288];   \textcolor{comment}{/* work area for code table building */}
00121     \hyperlink{structcode}{code} codes[ENOUGH];         \textcolor{comment}{/* space for code tables */}
00122     \textcolor{keywordtype}{int} sane;                   \textcolor{comment}{/* if false, allow invalid distance too far */}
00123     \textcolor{keywordtype}{int} back;                   \textcolor{comment}{/* bits back of last unprocessed length/lit */}
00124     \textcolor{keywordtype}{unsigned} was;               \textcolor{comment}{/* initial length of match */}
00125 \};
\end{DoxyCode}
