\hypertarget{visual__studio_2_h_d_f5_21_810_81_2_h_d_f5_examples_2_j_a_v_a_2_h_d_f5_attribute_create_8java_source}{}\section{visual\+\_\+studio/\+H\+D\+F5/1.10.1/\+H\+D\+F5\+Examples/\+J\+A\+V\+A/\+H\+D\+F5\+Attribute\+Create.java}
\label{visual__studio_2_h_d_f5_21_810_81_2_h_d_f5_examples_2_j_a_v_a_2_h_d_f5_attribute_create_8java_source}\index{H\+D\+F5\+Attribute\+Create.\+java@{H\+D\+F5\+Attribute\+Create.\+java}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}
00002 \textcolor{comment}{ * Copyright by The HDF Group.                                               *}
00003 \textcolor{comment}{ * Copyright by the Board of Trustees of the University of Illinois.         *}
00004 \textcolor{comment}{ * All rights reserved.                                                      *}
00005 \textcolor{comment}{ *                                                                           *}
00006 \textcolor{comment}{ * This file is part of HDF5.  The full HDF5 copyright notice, including     *}
00007 \textcolor{comment}{ * terms governing use, modification, and redistribution, is contained in    *}
00008 \textcolor{comment}{ * the files COPYING and Copyright.html.  COPYING can be found at the root   *}
00009 \textcolor{comment}{ * of the source code distribution tree; Copyright.html can be found at the  *}
00010 \textcolor{comment}{ * root level of an installed copy of the electronic HDF5 document set and   *}
00011 \textcolor{comment}{ * is linked from the top-level documents page.  It can also be found at     *}
00012 \textcolor{comment}{ * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *}
00013 \textcolor{comment}{ * access to either file, you may request a copy from help@hdfgroup.org.     *}
00014 \textcolor{comment}{ * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */}
00015 
00016 \textcolor{keyword}{import} hdf.hdf5lib.H5;
00017 \textcolor{keyword}{import} hdf.hdf5lib.HDF5Constants;
00018 
00036 \textcolor{keyword}{public} \textcolor{keyword}{class }\hyperlink{class_h_d_f5_attribute_create}{HDF5AttributeCreate} \{
00037     \textcolor{keyword}{private} \textcolor{keyword}{static} String fname  = \textcolor{stringliteral}{"HDF5AttributeCreate.h5"};
00038     \textcolor{keyword}{private} \textcolor{keyword}{static} String dsname  = \textcolor{stringliteral}{"2D 32-bit integer 20x10"};
00039     \textcolor{keyword}{private} \textcolor{keyword}{static} String attrname  = \textcolor{stringliteral}{"data range"};
00040     \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{long}[] dims2D = \{ 20, 10 \};
00041 
00042     \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{void} main(String args[]) \textcolor{keywordflow}{throws} Exception \{
00043         \textcolor{keywordtype}{long} file\_id = -1;
00044         \textcolor{keywordtype}{long} dataspace\_id = -1;
00045         \textcolor{keywordtype}{long} dataset\_id = -1;
00046         \textcolor{keywordtype}{long} attribute\_id = -1;
00047 
00048         \textcolor{comment}{// create the file and add groups and dataset into the file}
00049         createFile();
00050 
00051         \textcolor{comment}{// Open file using the default properties.}
00052         \textcolor{keywordflow}{try} \{
00053             file\_id = \hyperlink{namespace_h5}{H5}.H5Fopen(fname, HDF5Constants.H5F\_ACC\_RDWR, HDF5Constants.H5P\_DEFAULT);
00054         \}
00055         \textcolor{keywordflow}{catch} (Exception e) \{
00056             e.printStackTrace();
00057         \}
00058 
00059         \textcolor{comment}{// Open dataset using the default properties.}
00060         \textcolor{keywordflow}{try} \{
00061             \textcolor{keywordflow}{if} (file\_id >= 0)
00062                 dataset\_id = \hyperlink{namespace_h5}{H5}.H5Dopen(file\_id, dsname, HDF5Constants.H5P\_DEFAULT);
00063         \}
00064         \textcolor{keywordflow}{catch} (Exception e) \{
00065             e.printStackTrace();
00066         \}
00067 
00068         \textcolor{keywordtype}{long}[] attrDims = \{ 2 \}; \textcolor{comment}{// 1D of size two}
00069         \textcolor{keywordtype}{int}[] attrValue = \{ 0, 10000 \}; \textcolor{comment}{// attribute value}
00070 
00071         \textcolor{comment}{// Create the data space for the attribute.}
00072         \textcolor{keywordflow}{try} \{
00073             dataspace\_id = \hyperlink{namespace_h5}{H5}.H5Screate\_simple(1, attrDims, null);
00074         \}
00075         \textcolor{keywordflow}{catch} (Exception e) \{
00076             e.printStackTrace();
00077         \}
00078 
00079         \textcolor{comment}{// Create a dataset attribute.}
00080         \textcolor{keywordflow}{try} \{
00081             \textcolor{keywordflow}{if} ((dataset\_id >= 0) && (dataspace\_id >= 0))
00082                 attribute\_id = \hyperlink{namespace_h5}{H5}.H5Acreate(dataset\_id, attrname,
00083                         HDF5Constants.H5T\_STD\_I32BE, dataspace\_id,
00084                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00085         \}
00086         \textcolor{keywordflow}{catch} (Exception e) \{
00087             e.printStackTrace();
00088         \}
00089         \textcolor{comment}{// Write the attribute data.}
00090         \textcolor{keywordflow}{try} \{
00091             \textcolor{keywordflow}{if} (attribute\_id >= 0)
00092                 \hyperlink{namespace_h5}{H5}.H5Awrite(attribute\_id, HDF5Constants.H5T\_NATIVE\_INT, attrValue);
00093         \}
00094         \textcolor{keywordflow}{catch} (Exception e) \{
00095             e.printStackTrace();
00096         \}
00097 
00098         \textcolor{comment}{// Close the attribute.}
00099         \textcolor{keywordflow}{try} \{
00100             \textcolor{keywordflow}{if} (attribute\_id >= 0)
00101                 \hyperlink{namespace_h5}{H5}.H5Aclose(attribute\_id);
00102         \}
00103         \textcolor{keywordflow}{catch} (Exception e) \{
00104             e.printStackTrace();
00105         \}
00106 
00107         \textcolor{comment}{// Close the dataspace.}
00108         \textcolor{keywordflow}{try} \{
00109             \textcolor{keywordflow}{if} (dataspace\_id >= 0)
00110                 \hyperlink{namespace_h5}{H5}.H5Sclose(dataspace\_id);
00111         \}
00112         \textcolor{keywordflow}{catch} (Exception e) \{
00113             e.printStackTrace();
00114         \}
00115 
00116         \textcolor{keywordflow}{try} \{
00117             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00118                 attribute\_id = \hyperlink{namespace_h5}{H5}.H5Aopen\_by\_name(dataset\_id, \textcolor{stringliteral}{"."}, attrname,
00119                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00120         \}
00121         \textcolor{keywordflow}{catch} (Exception e) \{
00122             e.printStackTrace();
00123         \}
00124 
00125         \textcolor{comment}{// Get dataspace and allocate memory for read buffer.}
00126         \textcolor{keywordflow}{try} \{
00127             \textcolor{keywordflow}{if} (attribute\_id >= 0)
00128                 dataspace\_id = \hyperlink{namespace_h5}{H5}.H5Aget\_space(attribute\_id);
00129         \}
00130         \textcolor{keywordflow}{catch} (Exception e) \{
00131             e.printStackTrace();
00132         \}
00133 
00134         \textcolor{keywordflow}{try} \{
00135             \textcolor{keywordflow}{if} (dataspace\_id >= 0)
00136                 \hyperlink{namespace_h5}{H5}.H5Sget\_simple\_extent\_dims(dataspace\_id, attrDims, null);
00137         \}
00138         \textcolor{keywordflow}{catch} (Exception e) \{
00139             e.printStackTrace();
00140         \}
00141 
00142         \textcolor{comment}{// Allocate array of pointers to two-dimensional arrays (the}
00143         \textcolor{comment}{// elements of the dataset.}
00144         \textcolor{keywordtype}{int}[] attrData = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[(int) attrDims[0]];
00145 
00146         \textcolor{comment}{// Read data.}
00147         \textcolor{keywordflow}{try} \{
00148             \textcolor{keywordflow}{if} (attribute\_id >= 0)
00149                 \hyperlink{namespace_h5}{H5}.H5Aread(attribute\_id, HDF5Constants.H5T\_NATIVE\_INT, attrData);
00150         \}
00151         \textcolor{keywordflow}{catch} (Exception e) \{
00152             e.printStackTrace();
00153         \}
00154 
00155         \textcolor{comment}{// print out attribute value}
00156         \hyperlink{namespace_system}{System}.out.println(attrname);
00157         \hyperlink{namespace_system}{System}.out.println(attrData[0] + \textcolor{stringliteral}{"  "} + attrData[1]);
00158 
00159         \textcolor{comment}{// Close the dataspace.}
00160         \textcolor{keywordflow}{try} \{
00161             \textcolor{keywordflow}{if} (dataspace\_id >= 0)
00162                 \hyperlink{namespace_h5}{H5}.H5Sclose(dataspace\_id);
00163         \}
00164         \textcolor{keywordflow}{catch} (Exception e) \{
00165             e.printStackTrace();
00166         \}
00167 
00168         \textcolor{comment}{// Close to the dataset.}
00169         \textcolor{keywordflow}{try} \{
00170             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00171                 \hyperlink{namespace_h5}{H5}.H5Dclose(dataset\_id);
00172         \}
00173         \textcolor{keywordflow}{catch} (Exception e) \{
00174             e.printStackTrace();
00175         \}
00176 
00177         \textcolor{comment}{// Close the file.}
00178         \textcolor{keywordflow}{try} \{
00179             \textcolor{keywordflow}{if} (file\_id >= 0)
00180                 \hyperlink{namespace_h5}{H5}.H5Fclose(file\_id);
00181         \}
00182         \textcolor{keywordflow}{catch} (Exception e) \{
00183             e.printStackTrace();
00184         \}
00185     \}
00186 
00194     \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{void} createFile() throws Exception \{
00195         \textcolor{keywordtype}{long} file\_id = -1;
00196         \textcolor{keywordtype}{long} dataspace\_id = -1;
00197         \textcolor{keywordtype}{long} dataset\_id = -1;
00198 
00199         \textcolor{comment}{// Create a new file using default properties.}
00200         \textcolor{keywordflow}{try} \{
00201             file\_id = \hyperlink{namespace_h5}{H5}.H5Fcreate(fname, HDF5Constants.H5F\_ACC\_TRUNC,
00202                     HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00203         \}
00204         \textcolor{keywordflow}{catch} (Exception e) \{
00205             e.printStackTrace();
00206         \}
00207 
00208         \textcolor{comment}{// Create the data space for the dataset.}
00209         \textcolor{keywordflow}{try} \{
00210             dataspace\_id = \hyperlink{namespace_h5}{H5}.H5Screate\_simple(2, dims2D, null);
00211         \}
00212         \textcolor{keywordflow}{catch} (Exception e) \{
00213             e.printStackTrace();
00214         \}
00215 
00216         \textcolor{comment}{// Create the dataset.}
00217         \textcolor{keywordflow}{try} \{
00218             \textcolor{keywordflow}{if} ((file\_id >= 0) && (dataspace\_id >= 0))
00219                 dataset\_id = \hyperlink{namespace_h5}{H5}.H5Dcreate(file\_id, dsname,
00220                         HDF5Constants.H5T\_STD\_I32LE, dataspace\_id,
00221                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00222         \}
00223         \textcolor{keywordflow}{catch} (Exception e) \{
00224             e.printStackTrace();
00225         \}
00226 
00227         \textcolor{comment}{// Terminate access to the data space.}
00228         \textcolor{keywordflow}{try} \{
00229             \textcolor{keywordflow}{if} (dataspace\_id >= 0)
00230                 \hyperlink{namespace_h5}{H5}.H5Sclose(dataspace\_id);
00231         \}
00232         \textcolor{keywordflow}{catch} (Exception e) \{
00233             e.printStackTrace();
00234         \}
00235 
00236         \textcolor{comment}{// set the data values}
00237         \textcolor{keywordtype}{int}[] dataIn = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[20 * 10];
00238         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 20; i++) \{
00239             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 10; j++) \{
00240                 dataIn[i * 10 + j] = i * 100 + j;
00241             \}
00242         \}
00243 
00244         \textcolor{comment}{// Write the data to the dataset.}
00245         \textcolor{keywordflow}{try} \{
00246             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00247                 \hyperlink{namespace_h5}{H5}.H5Dwrite(dataset\_id, HDF5Constants.H5T\_NATIVE\_INT,
00248                         HDF5Constants.H5S\_ALL, HDF5Constants.H5S\_ALL,
00249                         HDF5Constants.H5P\_DEFAULT, dataIn);
00250         \}
00251         \textcolor{keywordflow}{catch} (Exception e) \{
00252             e.printStackTrace();
00253         \}
00254 
00255         \textcolor{comment}{// End access to the dataset and release resources used by it.}
00256         \textcolor{keywordflow}{try} \{
00257             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00258                 \hyperlink{namespace_h5}{H5}.H5Dclose(dataset\_id);
00259         \}
00260         \textcolor{keywordflow}{catch} (Exception e) \{
00261             e.printStackTrace();
00262         \}
00263 
00264         \textcolor{comment}{// Close the file.}
00265         \textcolor{keywordflow}{try} \{
00266             \textcolor{keywordflow}{if} (file\_id >= 0)
00267                 \hyperlink{namespace_h5}{H5}.H5Fclose(file\_id);
00268         \}
00269         \textcolor{keywordflow}{catch} (Exception e) \{
00270             e.printStackTrace();
00271         \}
00272     \}
00273 
00274 \}
\end{DoxyCode}
