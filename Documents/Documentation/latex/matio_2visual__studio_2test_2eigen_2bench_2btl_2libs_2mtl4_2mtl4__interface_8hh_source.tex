\hypertarget{matio_2visual__studio_2test_2eigen_2bench_2btl_2libs_2mtl4_2mtl4__interface_8hh_source}{}\section{matio/visual\+\_\+studio/test/eigen/bench/btl/libs/mtl4/mtl4\+\_\+interface.hh}
\label{matio_2visual__studio_2test_2eigen_2bench_2btl_2libs_2mtl4_2mtl4__interface_8hh_source}\index{mtl4\+\_\+interface.\+hh@{mtl4\+\_\+interface.\+hh}}

\begin{DoxyCode}
00001 \textcolor{comment}{//=====================================================}
00002 \textcolor{comment}{// Copyright (C) 2008 Gael Guennebaud <gael.guennebaud@inria.fr>}
00003 \textcolor{comment}{//=====================================================}
00004 \textcolor{comment}{//}
00005 \textcolor{comment}{// This program is free software; you can redistribute it and/or}
00006 \textcolor{comment}{// modify it under the terms of the GNU General Public License}
00007 \textcolor{comment}{// as published by the Free Software Foundation; either version 2}
00008 \textcolor{comment}{// of the License, or (at your option) any later version.}
00009 \textcolor{comment}{//}
00010 \textcolor{comment}{// This program is distributed in the hope that it will be useful,}
00011 \textcolor{comment}{// but WITHOUT ANY WARRANTY; without even the implied warranty of}
00012 \textcolor{comment}{// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00013 \textcolor{comment}{// GNU General Public License for more details.}
00014 \textcolor{comment}{// You should have received a copy of the GNU General Public License}
00015 \textcolor{comment}{// along with this program; if not, write to the Free Software}
00016 \textcolor{comment}{// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.}
00017 \textcolor{comment}{//}
00018 \textcolor{preprocessor}{#ifndef MTL4\_INTERFACE\_HH}
00019 \textcolor{preprocessor}{#define MTL4\_INTERFACE\_HH}
00020 
00021 \textcolor{preprocessor}{#include <boost/numeric/mtl/mtl.hpp>}
00022 \textcolor{preprocessor}{#include <boost/numeric/mtl/utility/range\_generator.hpp>}
00023 \textcolor{comment}{// #include <boost/numeric/mtl/operation/cholesky.hpp>}
00024 \textcolor{preprocessor}{#include <vector>}
00025 
00026 \textcolor{keyword}{using namespace }\hyperlink{namespacemtl}{mtl};
00027 
00028 \textcolor{keyword}{template}<\textcolor{keyword}{class} real>
00029 \textcolor{keyword}{class }\hyperlink{classmtl4__interface}{mtl4\_interface} \{
00030 
00031 public :
00032 
00033   \textcolor{keyword}{typedef} real real\_type ;
00034 
00035   \textcolor{keyword}{typedef} std::vector<real>  stl\_vector;
00036   \textcolor{keyword}{typedef} std::vector<stl\_vector > stl\_matrix;
00037 
00038   \textcolor{keyword}{typedef} mtl::dense2D<real, mtl::matrix::parameters<mtl::tag::col\_major> > gene\_matrix;
00039   \textcolor{keyword}{typedef} mtl::dense\_vector<real>  gene\_vector;
00040 
00041   \textcolor{keyword}{static} \textcolor{keyword}{inline} std::string name() \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"mtl4"}; \}
00042 
00043   \textcolor{keyword}{static} \textcolor{keywordtype}{void} free\_matrix(gene\_matrix & \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}, \textcolor{keywordtype}{int} N)\{
00044     return ;
00045   \}
00046 
00047   \textcolor{keyword}{static} \textcolor{keywordtype}{void} free\_vector(gene\_vector & \hyperlink{group___core___module_class_eigen_1_1_matrix}{B})\{
00048     return ;
00049   \}
00050 
00051   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_from\_stl(gene\_matrix & \hyperlink{group___core___module_class_eigen_1_1_matrix}{A}, stl\_matrix & A\_stl)\{
00052     A.change\_dim(A\_stl[0].size(), A\_stl.size());
00053 
00054     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0; j<A\_stl.size() ; j++)\{
00055       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<A\_stl[j].size() ; i++)\{
00056         A(i,j) = A\_stl[j][i];
00057       \}
00058     \}
00059   \}
00060 
00061   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} vector\_from\_stl(gene\_vector & \hyperlink{group___core___module_class_eigen_1_1_matrix}{B}, stl\_vector & B\_stl)\{
00062     B.change\_dim(B\_stl.size());
00063     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<B\_stl.size() ; i++)\{
00064       B[i] = B\_stl[i];
00065     \}
00066   \}
00067 
00068   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} vector\_to\_stl(gene\_vector & B, stl\_vector & B\_stl)\{
00069     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<B\_stl.size() ; i++)\{
00070       B\_stl[i] = B[i];
00071     \}
00072   \}
00073 
00074   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_to\_stl(gene\_matrix & A, stl\_matrix & A\_stl)\{
00075     \textcolor{keywordtype}{int} N=A\_stl.size();
00076     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0;j<N;j++)\{
00077       A\_stl[j].resize(N);
00078       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<N;i++)\{
00079         A\_stl[j][i] = A(i,j);
00080       \}
00081     \}
00082   \}
00083 
00084   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_matrix\_product(\textcolor{keyword}{const} gene\_matrix & A, \textcolor{keyword}{const} gene\_matrix & B, gene\_matrix & X, \textcolor{keywordtype}{
      int} N)\{
00085     X = (A*B);
00086 \textcolor{comment}{//     morton\_dense<double, doppled\_64\_row\_mask> C(N,N);}
00087 \textcolor{comment}{//     C = B;}
00088 \textcolor{comment}{//     X = (A*C);}
00089   \}
00090 
00091   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} transposed\_matrix\_matrix\_product(\textcolor{keyword}{const} gene\_matrix & A, \textcolor{keyword}{const} gene\_matrix & B, 
      gene\_matrix & X, \textcolor{keywordtype}{int} N)\{
00092     X = (trans(A)*trans(B));
00093   \}
00094 
00095 \textcolor{comment}{//   static inline void ata\_product(const gene\_matrix & A, gene\_matrix & X, int N)\{}
00096 \textcolor{comment}{//     X = (trans(A)*A);}
00097 \textcolor{comment}{//   \}}
00098 
00099   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} aat\_product(\textcolor{keyword}{const} gene\_matrix & A, gene\_matrix & X, \textcolor{keywordtype}{int} N)\{
00100     X = (A*trans(A));
00101   \}
00102 
00103   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} matrix\_vector\_product(gene\_matrix & A, gene\_vector & B, gene\_vector & X, \textcolor{keywordtype}{int} N)\{
00104     X = (A*B);
00105   \}
00106 
00107   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} atv\_product(gene\_matrix & A, gene\_vector & B, gene\_vector & X, \textcolor{keywordtype}{int} N)\{
00108     X = (trans(A)*B);
00109   \}
00110 
00111   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} axpy(\textcolor{keyword}{const} real coef, \textcolor{keyword}{const} gene\_vector & X, gene\_vector & Y, \textcolor{keywordtype}{int} N)\{
00112     Y += coef * X;
00113   \}
00114 
00115   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} axpby(real a, \textcolor{keyword}{const} gene\_vector & X, real b, gene\_vector & Y, \textcolor{keywordtype}{int} N)\{
00116     Y = a*X + b*Y;
00117   \}
00118 
00119 \textcolor{comment}{//   static inline void cholesky(const gene\_matrix & X, gene\_matrix & C, int N)\{}
00120 \textcolor{comment}{//     C = X;}
00121 \textcolor{comment}{//     recursive\_cholesky(C);}
00122 \textcolor{comment}{//   \}}
00123 
00124 \textcolor{comment}{//   static inline void lu\_decomp(const gene\_matrix & X, gene\_matrix & R, int N)\{}
00125 \textcolor{comment}{//     R = X;}
00126 \textcolor{comment}{//     std::vector<int> ipvt(N);}
00127 \textcolor{comment}{//     lu\_factor(R, ipvt);}
00128 \textcolor{comment}{//   \}}
00129 
00130   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} trisolve\_lower(\textcolor{keyword}{const} gene\_matrix & L, \textcolor{keyword}{const} gene\_vector& B, gene\_vector & X, \textcolor{keywordtype}{int} N)\{
00131     X = lower\_trisolve(L, B);
00132   \}
00133 
00134   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} copy\_matrix(\textcolor{keyword}{const} gene\_matrix & source, gene\_matrix & cible, \textcolor{keywordtype}{int} N)\{
00135     cible = source;
00136   \}
00137 
00138   \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} copy\_vector(\textcolor{keyword}{const} gene\_vector & source, gene\_vector & cible, \textcolor{keywordtype}{int} N)\{
00139     cible = source;
00140   \}
00141 
00142 \};
00143 
00144 \textcolor{preprocessor}{#endif}
\end{DoxyCode}
