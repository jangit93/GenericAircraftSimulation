\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__layout__swap_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/cxx11\+\_\+tensor\+\_\+layout\+\_\+swap.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__layout__swap_8cpp_source}\index{cxx11\+\_\+tensor\+\_\+layout\+\_\+swap.\+cpp@{cxx11\+\_\+tensor\+\_\+layout\+\_\+swap.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{preprocessor}{#include <Eigen/CXX11/Tensor>}
00013 
00014 \textcolor{keyword}{using} \hyperlink{class_eigen_1_1_tensor}{Eigen::Tensor};
00015 
00016 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_simple\_swap()
00017 \{
00018   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3, ColMajor>} tensor(2,3,7);
00019   tensor.setRandom();
00020 
00021   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3, RowMajor>} tensor2 = tensor.swap\_layout();
00022   VERIFY\_IS\_EQUAL(tensor.dimension(0), tensor2.dimension(2));
00023   VERIFY\_IS\_EQUAL(tensor.dimension(1), tensor2.dimension(1));
00024   VERIFY\_IS\_EQUAL(tensor.dimension(2), tensor2.dimension(0));
00025 
00026   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00027     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00028       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00029         VERIFY\_IS\_EQUAL(tensor(i,j,k), tensor2(k,j,i));
00030       \}
00031     \}
00032   \}
00033 \}
00034 
00035 
00036 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_swap\_as\_lvalue()
00037 \{
00038   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3, ColMajor>} tensor(2,3,7);
00039   tensor.setRandom();
00040 
00041   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3, RowMajor>} tensor2(7,3,2);
00042   tensor2.swap\_layout() = tensor;
00043   VERIFY\_IS\_EQUAL(tensor.dimension(0), tensor2.dimension(2));
00044   VERIFY\_IS\_EQUAL(tensor.dimension(1), tensor2.dimension(1));
00045   VERIFY\_IS\_EQUAL(tensor.dimension(2), tensor2.dimension(0));
00046 
00047   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00048     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00049       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00050         VERIFY\_IS\_EQUAL(tensor(i,j,k), tensor2(k,j,i));
00051       \}
00052     \}
00053   \}
00054 \}
00055 
00056 
00057 \textcolor{keywordtype}{void} test\_cxx11\_tensor\_layout\_swap()
00058 \{
00059   CALL\_SUBTEST(test\_simple\_swap());
00060   CALL\_SUBTEST(test\_swap\_as\_lvalue());
00061 \}
\end{DoxyCode}
