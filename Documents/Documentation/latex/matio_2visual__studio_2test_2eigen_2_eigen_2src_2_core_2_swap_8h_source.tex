\hypertarget{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_swap_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/\+Eigen/src/\+Core/\+Swap.h}
\label{matio_2visual__studio_2test_2eigen_2_eigen_2src_2_core_2_swap_8h_source}\index{Swap.\+h@{Swap.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2006-2008 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_SWAP\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_SWAP\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00014 
00015 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00016 
00017 \textcolor{comment}{// Overload default assignPacket behavior for swapping them}
00018 \textcolor{keyword}{template}<\textcolor{keyword}{typename} DstEvaluatorTypeT, \textcolor{keyword}{typename} SrcEvaluatorTypeT>
00019 \textcolor{keyword}{class }generic\_dense\_assignment\_kernel<DstEvaluatorTypeT, SrcEvaluatorTypeT, swap\_assign\_op<typename 
      DstEvaluatorTypeT::Scalar>, Specialized>
00020  : \textcolor{keyword}{public} generic\_dense\_assignment\_kernel<DstEvaluatorTypeT, SrcEvaluatorTypeT, swap\_assign\_op<typename Dst
      EvaluatorTypeT::Scalar>, BuiltIn>
00021 \{
00022 \textcolor{keyword}{protected}:
00023   \textcolor{keyword}{typedef} generic\_dense\_assignment\_kernel<DstEvaluatorTypeT, SrcEvaluatorTypeT, swap\_assign\_op<typename
       DstEvaluatorTypeT::Scalar>, BuiltIn> Base;
00024   \textcolor{keyword}{using} Base::m\_dst;
00025   \textcolor{keyword}{using} Base::m\_src;
00026   \textcolor{keyword}{using} Base::m\_functor;
00027   
00028 \textcolor{keyword}{public}:
00029   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Base::Scalar Scalar;
00030   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Base::DstXprType DstXprType;
00031   \textcolor{keyword}{typedef} swap\_assign\_op<Scalar> \hyperlink{struct_functor}{Functor};
00032   
00033   EIGEN\_DEVICE\_FUNC generic\_dense\_assignment\_kernel(DstEvaluatorTypeT &dst, \textcolor{keyword}{const} SrcEvaluatorTypeT &src, \textcolor{keyword}{
      const} Functor &\hyperlink{structfunc}{func}, DstXprType& dstExpr)
00034     : Base(dst, src, func, dstExpr)
00035   \{\}
00036   
00037   \textcolor{keyword}{template}<\textcolor{keywordtype}{int} StoreMode, \textcolor{keywordtype}{int} LoadMode, \textcolor{keyword}{typename} PacketType>
00038   \textcolor{keywordtype}{void} assignPacket(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col)
00039   \{
00040     PacketType tmp = m\_src.template packet<LoadMode,PacketType>(row,col);
00041     \textcolor{keyword}{const\_cast<}SrcEvaluatorTypeT&\textcolor{keyword}{>}(m\_src).\textcolor{keyword}{template} writePacket<LoadMode>(row,col, m\_dst.template 
      packet<StoreMode,PacketType>(row,col));
00042     m\_dst.template writePacket<StoreMode>(row,col,tmp);
00043   \}
00044   
00045   \textcolor{keyword}{template}<\textcolor{keywordtype}{int} StoreMode, \textcolor{keywordtype}{int} LoadMode, \textcolor{keyword}{typename} PacketType>
00046   \textcolor{keywordtype}{void} assignPacket(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} index)
00047   \{
00048     PacketType tmp = m\_src.template packet<LoadMode,PacketType>(index);
00049     \textcolor{keyword}{const\_cast<}SrcEvaluatorTypeT&\textcolor{keyword}{>}(m\_src).\textcolor{keyword}{template} writePacket<LoadMode>(index, m\_dst.template 
      packet<StoreMode,PacketType>(index));
00050     m\_dst.template writePacket<StoreMode>(index,tmp);
00051   \}
00052   
00053   \textcolor{comment}{// TODO find a simple way not to have to copy/paste this function from generic\_dense\_assignment\_kernel,
       by simple I mean no CRTP (Gael)}
00054   \textcolor{keyword}{template}<\textcolor{keywordtype}{int} StoreMode, \textcolor{keywordtype}{int} LoadMode, \textcolor{keyword}{typename} PacketType>
00055   \textcolor{keywordtype}{void} assignPacketByOuterInner(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} outer, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} inner)
00056   \{
00057     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row = Base::rowIndexByOuterInner(outer, inner); 
00058     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col = Base::colIndexByOuterInner(outer, inner);
00059     assignPacket<StoreMode,LoadMode,PacketType>(row, col);
00060   \}
00061 \};
00062 
00063 \} \textcolor{comment}{// namespace internal}
00064 
00065 \} \textcolor{comment}{// end namespace Eigen}
00066 
00067 \textcolor{preprocessor}{#endif // EIGEN\_SWAP\_H}
\end{DoxyCode}
