\hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source}{}\section{eigen/\+Eigen/src/\+Core/\+Solve.h}
\label{eigen_2_eigen_2src_2_core_2_solve_8h_source}\index{Solve.\+h@{Solve.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_SOLVE\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_SOLVE\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00014 
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00015}\hyperlink{class_eigen_1_1_solve_impl}{00015} \textcolor{keyword}{template}<\textcolor{keyword}{typename} Decomposition, \textcolor{keyword}{typename} RhsType, \textcolor{keyword}{typename} StorageKind> \textcolor{keyword}{class }
      \hyperlink{class_eigen_1_1_solve_impl}{SolveImpl};
00016   
00029 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00030 
00031 \textcolor{comment}{// this solve\_traits class permits to determine the evaluation type with respect to storage kind (Dense vs
       Sparse)}
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00032}\hyperlink{struct_eigen_1_1internal_1_1solve__traits}{00032} \textcolor{keyword}{template}<\textcolor{keyword}{typename} Decomposition, \textcolor{keyword}{typename} RhsType,\textcolor{keyword}{typename} StorageKind> \textcolor{keyword}{struct }
      \hyperlink{struct_eigen_1_1internal_1_1solve__traits}{solve\_traits};
00033 
00034 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Decomposition, \textcolor{keyword}{typename} RhsType>
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00035}\hyperlink{struct_eigen_1_1internal_1_1solve__traits_3_01_decomposition_00_01_rhs_type_00_01_dense_01_4}{00035} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1solve__traits}{solve\_traits}<Decomposition,RhsType,\hyperlink{struct_eigen_1_1_dense}{Dense}>
00036 \{
00037   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1make__proper__matrix__type}{make\_proper\_matrix\_type}<\textcolor{keyword}{typename} RhsType::Scalar,
00038                  Decomposition::ColsAtCompileTime,
00039                  RhsType::ColsAtCompileTime,
00040                  RhsType::PlainObject::Options,
00041                  Decomposition::MaxColsAtCompileTime,
00042                  RhsType::MaxColsAtCompileTime>::type \hyperlink{group___core___module_class_eigen_1_1_matrix}{PlainObject};
00043 \};
00044 
00045 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Decomposition, \textcolor{keyword}{typename} RhsType>
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00046}\hyperlink{struct_eigen_1_1internal_1_1traits_3_01_solve_3_01_decomposition_00_01_rhs_type_01_4_01_4}{00046} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<\hyperlink{group___core___module_class_eigen_1_1_solve}{Solve}<Decomposition, RhsType> >
00047   : \hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<typename solve\_traits<Decomposition,RhsType,typename internal::traits<RhsType>::StorageKin
      d>::PlainObject>
00048 \{
00049   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1solve__traits}{solve\_traits<Decomposition,RhsType,typename internal::traits<RhsType>::StorageKind}
      >::PlainObject PlainObject;
00050   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1conditional}{promote\_index\_type<typename Decomposition::StorageIndex, typename RhsType::StorageIndex>::type}
       \hyperlink{struct_eigen_1_1internal_1_1conditional}{StorageIndex};
00051   \textcolor{keyword}{typedef} \hyperlink{struct_eigen_1_1internal_1_1traits}{traits<PlainObject>} \hyperlink{struct_eigen_1_1internal_1_1traits}{BaseTraits};
00052   \textcolor{keyword}{enum} \{
00053     Flags = BaseTraits::Flags & \hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit},
00054     CoeffReadCost = \hyperlink{namespace_eigen_a3163430a1c13173faffde69016b48aaf}{HugeCost}
00055   \};
00056 \};
00057 
00058 \}
00059 
00060 
00061 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Decomposition, \textcolor{keyword}{typename} RhsType>
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00062}\hyperlink{group___core___module}{00062} \textcolor{keyword}{class }\hyperlink{group___core___module_class_eigen_1_1_solve}{Solve} : \textcolor{keyword}{public} \hyperlink{class_eigen_1_1_solve_impl}{SolveImpl}<Decomposition,RhsType,typename internal::traits<RhsType>::Stor
      ageKind>
00063 \{
00064 \textcolor{keyword}{public}:
00065   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Solve>::PlainObject} PlainObject;
00066   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Solve>::StorageIndex} StorageIndex;
00067   
00068   \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve}(\textcolor{keyword}{const} Decomposition &dec, \textcolor{keyword}{const} RhsType &rhs)
00069     : m\_dec(dec), m\_rhs(rhs)
00070   \{\}
00071   
00072   EIGEN\_DEVICE\_FUNC \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_dec.cols(); \}
00073   EIGEN\_DEVICE\_FUNC \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_rhs.cols(); \}
00074 
00075   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{const} Decomposition& dec()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_dec; \}
00076   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{const} RhsType&       rhs()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_rhs; \}
00077 
00078 \textcolor{keyword}{protected}:
00079   \textcolor{keyword}{const} Decomposition &m\_dec;
00080   \textcolor{keyword}{const} RhsType       &m\_rhs;
00081 \};
00082 
00083 
00084 \textcolor{comment}{// Specialization of the Solve expression for dense results}
00085 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Decomposition, \textcolor{keyword}{typename} RhsType>
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00086}\hyperlink{class_eigen_1_1_solve_impl_3_01_decomposition_00_01_rhs_type_00_01_dense_01_4}{00086} \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_solve_impl}{SolveImpl}<Decomposition,RhsType,\hyperlink{struct_eigen_1_1_dense}{Dense}>
00087   : \textcolor{keyword}{public} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase}<Solve<Decomposition,RhsType> >
00088 \{
00089   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve<Decomposition,RhsType>} \hyperlink{group___core___module_class_eigen_1_1_solve}{Derived};
00090   
00091 \textcolor{keyword}{public}:
00092   
00093   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Solve<Decomposition,RhsType>} > 
      \hyperlink{class_eigen_1_1_dense_coeffs_base}{Base};
00094   EIGEN\_DENSE\_PUBLIC\_INTERFACE(Derived)
00095 
00096 \textcolor{keyword}{private}:
00097   
00098   \hyperlink{group___core___module_a5feed465b3a8e60c47e73ecce83e39a2}{Scalar} coeff(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} row, \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} col) \textcolor{keyword}{const};
00099   \hyperlink{group___core___module_a5feed465b3a8e60c47e73ecce83e39a2}{Scalar} coeff(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} i) \textcolor{keyword}{const};
00100 \};
00101 
00102 \textcolor{comment}{// Generic API dispatcher}
00103 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Decomposition, \textcolor{keyword}{typename} RhsType, \textcolor{keyword}{typename} StorageKind>
00104 \textcolor{keyword}{class }\hyperlink{class_eigen_1_1_solve_impl}{SolveImpl} : \textcolor{keyword}{public} \hyperlink{struct_eigen_1_1internal_1_1generic__xpr__base}{internal::generic\_xpr\_base}<Solve<Decomposition,
      RhsType>, MatrixXpr, StorageKind>::type
00105 \{
00106   \textcolor{keyword}{public}:
00107     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1generic__xpr__base}{internal::generic\_xpr\_base<Solve<Decomposition,RhsType>}
      , \hyperlink{struct_eigen_1_1_matrix_xpr}{MatrixXpr}, StorageKind>::type \hyperlink{class_eigen_1_1_dense_coeffs_base}{Base};
00108 \};
00109 
00110 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00111 
00112 \textcolor{comment}{// Evaluator of Solve -> eval into a temporary}
00113 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Decomposition, \textcolor{keyword}{typename} RhsType>
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00114}\hyperlink{struct_eigen_1_1internal_1_1evaluator_3_01_solve_3_01_decomposition_00_01_rhs_type_01_4_01_4}{00114} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}<\hyperlink{group___core___module_class_eigen_1_1_solve}{Solve}<Decomposition,RhsType> >
00115   : \textcolor{keyword}{public} \hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}<typename Solve<Decomposition,RhsType>::PlainObject>
00116 \{
00117   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve<Decomposition,RhsType>} \hyperlink{group___core___module_class_eigen_1_1_solve}{SolveType};
00118   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} SolveType::PlainObject PlainObject;
00119   \textcolor{keyword}{typedef} \hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator<PlainObject>} \hyperlink{struct_eigen_1_1internal_1_1evaluator}{Base};
00120 
00121   \textcolor{keyword}{enum} \{ Flags = Base::Flags | \hyperlink{group__flags_gaa34e83bae46a8eeae4e69ebe3aaecbed}{EvalBeforeNestingBit} \};
00122   
00123   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{explicit} \hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}(\textcolor{keyword}{const} SolveType& solve)
00124     : m\_result(solve.rows(), solve.cols())
00125   \{
00126     ::new (static\_cast<Base*>(\textcolor{keyword}{this})) Base(m\_result);
00127     solve.dec().\_solve\_impl(solve.rhs(), m\_result);
00128   \}
00129   
00130 \textcolor{keyword}{protected}:  
00131   PlainObject m\_result;
00132 \};
00133 
00134 \textcolor{comment}{// Specialization for "dst = dec.solve(rhs)"}
00135 \textcolor{comment}{// NOTE we need to specialize it for Dense2Dense to avoid ambiguous specialization error and a
       Sparse2Sparse specialization must exist somewhere}
00136 \textcolor{keyword}{template}<\textcolor{keyword}{typename} DstXprType, \textcolor{keyword}{typename} DecType, \textcolor{keyword}{typename} RhsType, \textcolor{keyword}{typename} Scalar>
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00137}\hyperlink{struct_eigen_1_1internal_1_1_assignment_3_01_dst_xpr_type_00_01_solve_3_01_dec_type_00_01_rhs_ty3ce26f5f592c582be15e9bcd7c0c0744}{00137} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1_assignment}{Assignment}<DstXprType, \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve}<DecType,RhsType>, \hyperlink{namespaceinternal}{internal}::
      \hyperlink{struct_eigen_1_1internal_1_1assign__op}{assign\_op}<Scalar,Scalar>, \hyperlink{struct_eigen_1_1internal_1_1_dense2_dense}{Dense2Dense}>
00138 \{
00139   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve<DecType,RhsType>} \hyperlink{group___core___module_class_eigen_1_1_solve}{SrcXprType};
00140   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(DstXprType &dst, \textcolor{keyword}{const} SrcXprType &src, \textcolor{keyword}{const} 
      \hyperlink{struct_eigen_1_1internal_1_1assign__op}{internal::assign\_op<Scalar,Scalar>} &)
00141   \{
00142     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} dstRows = src.rows();
00143     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} dstCols = src.cols();
00144     \textcolor{keywordflow}{if}((dst.rows()!=dstRows) || (dst.cols()!=dstCols))
00145       dst.resize(dstRows, dstCols);
00146 
00147     src.dec().\_solve\_impl(src.rhs(), dst);
00148   \}
00149 \};
00150 
00151 \textcolor{comment}{// Specialization for "dst = dec.transpose().solve(rhs)"}
00152 \textcolor{keyword}{template}<\textcolor{keyword}{typename} DstXprType, \textcolor{keyword}{typename} DecType, \textcolor{keyword}{typename} RhsType, \textcolor{keyword}{typename} Scalar>
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00153}\hyperlink{struct_eigen_1_1internal_1_1_assignment_3_01_dst_xpr_type_00_01_solve_3_01_transpose_3_01const_002733ef61eadb9652bc6bc1dd0938391}{00153} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1_assignment}{Assignment}<DstXprType, \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve}<\hyperlink{group___core___module_class_eigen_1_1_transpose}{Transpose}<const DecType>,RhsType>, 
      \hyperlink{namespaceinternal}{internal}::\hyperlink{struct_eigen_1_1internal_1_1assign__op}{assign\_op}<Scalar,Scalar>, \hyperlink{struct_eigen_1_1internal_1_1_dense2_dense}{Dense2Dense}>
00154 \{
00155   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve<Transpose<const DecType>},RhsType> 
      \hyperlink{group___core___module_class_eigen_1_1_solve}{SrcXprType};
00156   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(DstXprType &dst, \textcolor{keyword}{const} SrcXprType &src, \textcolor{keyword}{const} 
      \hyperlink{struct_eigen_1_1internal_1_1assign__op}{internal::assign\_op<Scalar,Scalar>} &)
00157   \{
00158     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} dstRows = src.rows();
00159     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} dstCols = src.cols();
00160     \textcolor{keywordflow}{if}((dst.rows()!=dstRows) || (dst.cols()!=dstCols))
00161       dst.resize(dstRows, dstCols);
00162 
00163     src.dec().nestedExpression().template \_solve\_impl\_transposed<false>(src.rhs(), dst);
00164   \}
00165 \};
00166 
00167 \textcolor{comment}{// Specialization for "dst = dec.adjoint().solve(rhs)"}
00168 \textcolor{keyword}{template}<\textcolor{keyword}{typename} DstXprType, \textcolor{keyword}{typename} DecType, \textcolor{keyword}{typename} RhsType, \textcolor{keyword}{typename} Scalar>
\Hypertarget{eigen_2_eigen_2src_2_core_2_solve_8h_source_l00169}\hyperlink{struct_eigen_1_1internal_1_1_assignment_3_01_dst_xpr_type_00_01_solve_3_01_cwise_unary_op_3_01in7a0cdfc0a6924bfcd9bc281e374a4ff8}{00169} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1_assignment}{Assignment}<DstXprType, \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve}<\hyperlink{group___core___module_class_eigen_1_1_cwise_unary_op}{CwiseUnaryOp}<
      \hyperlink{namespaceinternal}{internal}::\hyperlink{struct_eigen_1_1internal_1_1scalar__conjugate__op}{scalar\_conjugate\_op}<typename DecType::Scalar>, const 
      \hyperlink{group___core___module_class_eigen_1_1_transpose}{Transpose}<const DecType> >,RhsType>,
00170                   \hyperlink{struct_eigen_1_1internal_1_1assign__op}{internal::assign\_op}<Scalar,Scalar>, 
      \hyperlink{struct_eigen_1_1internal_1_1_dense2_dense}{Dense2Dense}>
00171 \{
00172   \textcolor{keyword}{typedef} 
      \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve<CwiseUnaryOp<internal::scalar\_conjugate\_op<typename DecType::Scalar>}
      , \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_transpose}{Transpose<const DecType>} >,RhsType> \hyperlink{group___core___module_class_eigen_1_1_solve}{SrcXprType};
00173   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(DstXprType &dst, \textcolor{keyword}{const} SrcXprType &src, \textcolor{keyword}{const} 
      \hyperlink{struct_eigen_1_1internal_1_1assign__op}{internal::assign\_op<Scalar,Scalar>} &)
00174   \{
00175     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} dstRows = src.rows();
00176     \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} dstCols = src.cols();
00177     \textcolor{keywordflow}{if}((dst.rows()!=dstRows) || (dst.cols()!=dstCols))
00178       dst.resize(dstRows, dstCols);
00179     
00180     src.dec().nestedExpression().nestedExpression().template \_solve\_impl\_transposed<true>(src.rhs(), dst);
00181   \}
00182 \};
00183 
00184 \} \textcolor{comment}{// end namepsace internal}
00185 
00186 \} \textcolor{comment}{// end namespace Eigen}
00187 
00188 \textcolor{preprocessor}{#endif // EIGEN\_SOLVE\_H}
\end{DoxyCode}
