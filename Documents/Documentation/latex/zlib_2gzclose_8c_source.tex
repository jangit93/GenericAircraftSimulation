\hypertarget{zlib_2gzclose_8c_source}{}\section{zlib/gzclose.c}
\label{zlib_2gzclose_8c_source}\index{gzclose.\+c@{gzclose.\+c}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* gzclose.c -- zlib gzclose() function}
00002 \textcolor{comment}{ * Copyright (C) 2004, 2010 Mark Adler}
00003 \textcolor{comment}{ * For conditions of distribution and use, see copyright notice in zlib.h}
00004 \textcolor{comment}{ */}
00005 
00006 \textcolor{preprocessor}{#include "gzguts.h"}
00007 
00008 \textcolor{comment}{/* gzclose() is in a separate file so that it is linked in only if it is used.}
00009 \textcolor{comment}{   That way the other gzclose functions can be used instead to avoid linking in}
00010 \textcolor{comment}{   unneeded compression or decompression routines. */}
00011 \textcolor{keywordtype}{int} ZEXPORT gzclose(\hyperlink{structfile}{file})
00012     \hyperlink{structgz_file__s}{gzFile} \hyperlink{structfile}{file};
00013 \{
00014 \textcolor{preprocessor}{#ifndef NO\_GZCOMPRESS}
00015     gz\_statep \hyperlink{structstate}{state};
00016 
00017     \textcolor{keywordflow}{if} (\hyperlink{structfile}{file} == NULL)
00018         \textcolor{keywordflow}{return} Z\_STREAM\_ERROR;
00019     state = (gz\_statep)\hyperlink{structfile}{file};
00020 
00021     \textcolor{keywordflow}{return} state->mode == GZ\_READ ? gzclose\_r(\hyperlink{structfile}{file}) : gzclose\_w(\hyperlink{structfile}{file});
00022 \textcolor{preprocessor}{#else}
00023     \textcolor{keywordflow}{return} gzclose\_r(\hyperlink{structfile}{file});
00024 \textcolor{preprocessor}{#endif}
00025 \}
\end{DoxyCode}
