\hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source}{}\section{eigen/\+Eigen/src/\+Geometry/\+Quaternion.h}
\label{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source}\index{Quaternion.\+h@{Quaternion.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2008-2010 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{// Copyright (C) 2009 Mathieu Gautier <mathieu.gautier@cea.fr>}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00008 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00009 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00010 
00011 \textcolor{preprocessor}{#ifndef EIGEN\_QUATERNION\_H}
00012 \textcolor{preprocessor}{#define EIGEN\_QUATERNION\_H}
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{ 
00014 
00015 
00016 \textcolor{comment}{/***************************************************************************}
00017 \textcolor{comment}{* Definition of QuaternionBase<Derived>}
00018 \textcolor{comment}{* The implementation is at the end of the file}
00019 \textcolor{comment}{***************************************************************************/}
00020 
00021 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00022 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Other,
00023          \textcolor{keywordtype}{int} OtherRows=Other::RowsAtCompileTime,
00024          \textcolor{keywordtype}{int} OtherCols=Other::ColsAtCompileTime>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00025}\hyperlink{struct_eigen_1_1internal_1_1quaternionbase__assign__impl}{00025} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1quaternionbase__assign__impl}{quaternionbase\_assign\_impl};
00026 \}
00027 
00034 \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived>
00035 \textcolor{keyword}{class }\hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase} : \textcolor{keyword}{public} \hyperlink{class_eigen_1_1_rotation_base}{RotationBase}<Derived, 3>
00036 \{
00037  \textcolor{keyword}{public}:
00038   \textcolor{keyword}{typedef} \hyperlink{class_eigen_1_1_rotation_base}{RotationBase<Derived, 3>} Base;
00039 
00040   \textcolor{keyword}{using} Base::operator*;
00041   \textcolor{keyword}{using} Base::derived;
00042 
00043   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::Scalar} Scalar;
00044   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<Scalar>::Real} RealScalar;
00045   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::Coefficients} 
      Coefficients;
00046   \textcolor{keyword}{enum} \{
00047     Flags = \hyperlink{struct_eigen_1_1internal_1_1traits}{Eigen::internal::traits<Derived>::Flags}
00048   \};
00049 
00050  \textcolor{comment}{// typedef typename Matrix<Scalar,4,1> Coefficients;}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00052}\hyperlink{group___geometry___module_a974c0529d55983b0b3a6d99a8466f331}{00052} \textcolor{comment}{}  \textcolor{keyword}{typedef} \hyperlink{group___core___module}{Matrix<Scalar,3,1>} \hyperlink{group___geometry___module_a974c0529d55983b0b3a6d99a8466f331}{Vector3};
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00054}\hyperlink{group___geometry___module_ac3972e6cb0f56cccbe9e3946a7e494f8}{00054}   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Scalar,3,3>} \hyperlink{group___geometry___module_ac3972e6cb0f56cccbe9e3946a7e494f8}{Matrix3};
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00056}\hyperlink{group___geometry___module_aed266c63b10a4028304901d9c8614199}{00056}   \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_angle_axis}{AngleAxis<Scalar>} \hyperlink{group___geometry___module_aed266c63b10a4028304901d9c8614199}{AngleAxisType};
00057 
00058 
00059 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00061}\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{00061}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar \hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} this->derived().coeffs().coeff(0); \}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00063}\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{00063}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar \hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} this->derived().coeffs().coeff(1); \}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00065}\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{00065}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar \hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} this->derived().coeffs().coeff(2); \}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00067}\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{00067}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar \hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} this->derived().coeffs().coeff(3); \}
00068 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00070}\hyperlink{group___geometry___module_afe0a5c46997899f9c14ead6c601de90a}{00070}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar& \hyperlink{group___geometry___module_afe0a5c46997899f9c14ead6c601de90a}{x}() \{ \textcolor{keywordflow}{return} this->derived().coeffs().coeffRef(0); \}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00072}\hyperlink{group___geometry___module_a11e248e8a8405dfbdb7c433d2e891404}{00072}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar& \hyperlink{group___geometry___module_a11e248e8a8405dfbdb7c433d2e891404}{y}() \{ \textcolor{keywordflow}{return} this->derived().coeffs().coeffRef(1); \}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00074}\hyperlink{group___geometry___module_a797d07a97b277ea186ba0d74d2bba6a0}{00074}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar& \hyperlink{group___geometry___module_a797d07a97b277ea186ba0d74d2bba6a0}{z}() \{ \textcolor{keywordflow}{return} this->derived().coeffs().coeffRef(2); \}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00076}\hyperlink{group___geometry___module_a27c88503ccdc87ec14e57b570348f1ae}{00076}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar& \hyperlink{group___geometry___module_a27c88503ccdc87ec14e57b570348f1ae}{w}() \{ \textcolor{keywordflow}{return} this->derived().coeffs().coeffRef(3); \}
00077 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00079}\hyperlink{group___geometry___module_aa8a52640dfd34f910d18f110ccccd1b9}{00079}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_vector_block}{VectorBlock<const Coefficients,3>} 
      \hyperlink{group___geometry___module_aa8a52640dfd34f910d18f110ccccd1b9}{vec}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} coeffs().template head<3>(); \}
00080 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00082}\hyperlink{group___geometry___module_abc489fa38de6a3c22402101fa0e89342}{00082}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{group___core___module_class_eigen_1_1_vector_block}{VectorBlock<Coefficients,3>} 
      \hyperlink{group___geometry___module_abc489fa38de6a3c22402101fa0e89342}{vec}() \{ \textcolor{keywordflow}{return} coeffs().template head<3>(); \}
00083 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00085}\hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{00085}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{const} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::Coefficients}& 
      \hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} derived().coeffs(); \}
00086 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00088}\hyperlink{group___geometry___module_afae737227fb9fb3f3c674cd1fccb4de0}{00088}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::Coefficients}
      & \hyperlink{group___geometry___module_afae737227fb9fb3f3c674cd1fccb4de0}{coeffs}() \{ \textcolor{keywordflow}{return} derived().coeffs(); \}
00089 
00090   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>}& operator=(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>}& other);
00091   \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived> EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Derived& operator=(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other);
00092 
00093 \textcolor{comment}{// disabled this copy operator as it is giving very strange compilation errors when compiling}
00094 \textcolor{comment}{// test\_stdvector with GCC 4.4.2. This looks like a GCC bug though, so feel free to re-enable it if it's}
00095 \textcolor{comment}{// useful; however notice that we already have the templated operator= above and e.g. in MatrixBase}
00096 \textcolor{comment}{// we didn't have to add, in addition to templated operator=, such a non-templated copy operator.}
00097 \textcolor{comment}{//  Derived& operator=(const QuaternionBase& other)}
00098 \textcolor{comment}{//  \{ return operator=<Derived>(other); \}}
00099 
00100   EIGEN\_DEVICE\_FUNC Derived& operator=(\textcolor{keyword}{const} AngleAxisType& aa);
00101   \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived> EIGEN\_DEVICE\_FUNC Derived& operator=(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<OtherDerived>}& m);
00102 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00106}\hyperlink{group___geometry___module_a2e095881344a2538041df4fea938b2e0}{00106}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} \textcolor{keyword}{inline} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} \hyperlink{group___geometry___module_a2e095881344a2538041df4fea938b2e0}{Identity}() \{ \textcolor{keywordflow}{return} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>}(Scalar(1), Scalar(0), Scalar(0), Scalar(0)); \}
00107 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00110}\hyperlink{group___geometry___module_a113a5ffea680c7427dc1144d7c66efe9}{00110}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase}& \hyperlink{group___geometry___module_a113a5ffea680c7427dc1144d7c66efe9}{setIdentity}() \{ coeffs() << Scalar(0), 
      Scalar(0), Scalar(0), Scalar(1); \textcolor{keywordflow}{return} *\textcolor{keyword}{this}; \}
00111 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00115}\hyperlink{group___geometry___module_a5370cf77843374a5adefca3f78770961}{00115}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar \hyperlink{group___geometry___module_a5370cf77843374a5adefca3f78770961}{squaredNorm}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} coeffs().squaredNorm(); \}
00116 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00120}\hyperlink{group___geometry___module_a3c317a676ccae923a9c4a5e80019be17}{00120}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar \hyperlink{group___geometry___module_a3c317a676ccae923a9c4a5e80019be17}{norm}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} coeffs().norm(); \}
00121 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00124}\hyperlink{group___geometry___module_aa8d67d855940925f634327827aed1cad}{00124}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \hyperlink{group___geometry___module_aa8d67d855940925f634327827aed1cad}{normalize}() \{ coeffs().normalize(); \}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00127}\hyperlink{group___geometry___module_af07bcd396dd08136fe4fbbdb182da70f}{00127}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} \hyperlink{group___geometry___module_af07bcd396dd08136fe4fbbdb182da70f}{normalized}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>}(coeffs().normalized()); \}
00128 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00134}\hyperlink{group___geometry___module_aa95c422b3d12869ed6aa46e4dd5a430a}{00134}   \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived> EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Scalar \hyperlink{group___geometry___module_aa95c422b3d12869ed6aa46e4dd5a430a}{dot}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} coeffs().dot(other.
      \hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}()); \}
00135 
00136   \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived> EIGEN\_DEVICE\_FUNC Scalar angularDistance(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other) \textcolor{keyword}{const};
00137 
00139   EIGEN\_DEVICE\_FUNC Matrix3 toRotationMatrix() \textcolor{keyword}{const};
00140 
00142   \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived1, \textcolor{keyword}{typename} Derived2>
00143   EIGEN\_DEVICE\_FUNC Derived& setFromTwoVectors(\textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived1>}& a, \textcolor{keyword}{const} 
      \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived2>}& b);
00144 
00145   \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived> EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} operator* (\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& q) \textcolor{keyword}{const};
00146   \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived> EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Derived& operator*= (\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& q);
00147 
00149   EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} inverse() \textcolor{keyword}{const};
00150 
00152   EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} conjugate() \textcolor{keyword}{const};
00153 
00154   \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived> EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} slerp(\textcolor{keyword}{const} Scalar& t
      , \textcolor{keyword}{const} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other) \textcolor{keyword}{const};
00155 
00160   \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00161}\hyperlink{group___geometry___module_a83c9e817b726fb798d3f2e15002a4241}{00161}   EIGEN\_DEVICE\_FUNC \textcolor{keywordtype}{bool} \hyperlink{group___geometry___module_a83c9e817b726fb798d3f2e15002a4241}{isApprox}(\textcolor{keyword}{const} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& 
      other, \textcolor{keyword}{const} RealScalar& prec = \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<Scalar>::dummy\_precision}())\textcolor{keyword}{ const}
00162 \textcolor{keyword}{  }\{ \textcolor{keywordflow}{return} coeffs().isApprox(other.\hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}(), prec); \}
00163 
00165   EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Vector3 \_transformVector(\textcolor{keyword}{const} Vector3& v) \textcolor{keyword}{const};
00166 
00172   \textcolor{keyword}{template}<\textcolor{keyword}{typename} NewScalarType>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00173}\hyperlink{group___geometry___module_a0ba6cd48ef9b2d850eb99bfaf27474de}{00173}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1cast__return__type}{internal::cast\_return\_type<Derived,Quaternion<NewScalarType>}
       >::type \hyperlink{group___geometry___module_a0ba6cd48ef9b2d850eb99bfaf27474de}{cast}()\textcolor{keyword}{ const}
00174 \textcolor{keyword}{  }\{
00175     \textcolor{keywordflow}{return} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1cast__return__type}{internal::cast\_return\_type<Derived,Quaternion<NewScalarType>}
       >::type(derived());
00176   \}
00177 
00178 \textcolor{preprocessor}{#ifdef EIGEN\_QUATERNIONBASE\_PLUGIN}
00179 \textcolor{preprocessor}{# include EIGEN\_QUATERNIONBASE\_PLUGIN}
00180 \textcolor{preprocessor}{#endif}
00181 \};
00182 
00183 \textcolor{comment}{/***************************************************************************}
00184 \textcolor{comment}{* Definition/implementation of Quaternion<Scalar>}
00185 \textcolor{comment}{***************************************************************************/}
00186 
00212 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00213 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar,\textcolor{keywordtype}{int} \_Options>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00214}\hyperlink{struct_eigen_1_1internal_1_1traits_3_01_quaternion_3_01___scalar_00_01___options_01_4_01_4}{00214} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<\hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion}<\_Scalar,\_Options> >
00215 \{
00216   \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<\_Scalar,\_Options>} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{PlainObject};
00217   \textcolor{keyword}{typedef} \_Scalar Scalar;
00218   \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<\_Scalar,4,1,\_Options>} Coefficients;
00219   \textcolor{keyword}{enum}\{
00220     Alignment = \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Coefficients>::Alignment},
00221     Flags = \hyperlink{group__flags_gae2c323957f20dfdc6cb8f44428eaec1a}{LvalueBit}
00222   \};
00223 \};
00224 \}
00225 
00226 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Options>
00227 \textcolor{keyword}{class }\hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion} : \textcolor{keyword}{public} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase}<Quaternion<\_Scalar,\_Options> >
00228 \{
00229 \textcolor{keyword}{public}:
00230   \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Quaternion<\_Scalar,\_Options>} > Base;
00231   \textcolor{keyword}{enum} \{ NeedsAlignment = \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Quaternion>::Alignment}>0 
      \};
00232 
00233   \textcolor{keyword}{typedef} \_Scalar Scalar;
00234 
00235   EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(\hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion})
00236   \textcolor{keyword}{using} Base::operator*=;
00237 
00238   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Quaternion>::Coefficients} 
      Coefficients;
00239   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Base::AngleAxisType AngleAxisType;
00240 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00242}\hyperlink{group___geometry___module_a7f8e93e2615e56344fd0d89c2916f9be}{00242}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{group___geometry___module_a7f8e93e2615e56344fd0d89c2916f9be}{Quaternion}() \{\}
00243 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00251}\hyperlink{group___geometry___module_a90c179492cd3ca296c85815e20773d60}{00251}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{group___geometry___module_a90c179492cd3ca296c85815e20773d60}{Quaternion}(\textcolor{keyword}{const} Scalar& w, \textcolor{keyword}{const} Scalar& x, \textcolor{keyword}{const} Scalar& y, \textcolor{keyword}{const} 
      Scalar& z) : m\_coeffs(x, y, z, w)\{\}
00252 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00254}\hyperlink{group___geometry___module_abb9e33e5d10806b5bc8b0683e94e8f72}{00254}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{explicit} \textcolor{keyword}{inline} \hyperlink{group___geometry___module_abb9e33e5d10806b5bc8b0683e94e8f72}{Quaternion}(\textcolor{keyword}{const} Scalar* data) : m\_coeffs(data) \{\}
00255 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00257}\hyperlink{group___geometry___module_a272ce2dc4e30e6e0d68f455c7b1cc407}{00257}   \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived> EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___geometry___module_a272ce2dc4e30e6e0d68f455c7b1cc407}{Quaternion}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>}& other) \{ this->Base::operator=(other); \}
00258 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00260}\hyperlink{group___geometry___module_a7ce40a727b6532e52d7d58d399328ce7}{00260}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{explicit} \textcolor{keyword}{inline} \hyperlink{group___geometry___module_a7ce40a727b6532e52d7d58d399328ce7}{Quaternion}(\textcolor{keyword}{const} AngleAxisType& aa) \{ *\textcolor{keyword}{this} = aa; \}
00261 
00266   \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00267}\hyperlink{group___geometry___module_a3a7ed649b5c8c80ec7e78baf1ed0ba4c}{00267}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{explicit} \textcolor{keyword}{inline} \hyperlink{group___geometry___module_a3a7ed649b5c8c80ec7e78baf1ed0ba4c}{Quaternion}(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived>}& other) \{ *\textcolor{keyword}{this} = other; \}
00268 
00270   \textcolor{keyword}{template}<\textcolor{keyword}{typename} OtherScalar, \textcolor{keywordtype}{int} OtherOptions>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00271}\hyperlink{group___geometry___module_af6430466427b40d7ed79bfb6818cccc2}{00271}   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{explicit} \textcolor{keyword}{inline} \hyperlink{group___geometry___module_af6430466427b40d7ed79bfb6818cccc2}{Quaternion}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<OtherScalar, OtherOptions>}& other)
00272   \{ m\_coeffs = other.coeffs().template cast<Scalar>(); \}
00273 
00274   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion} UnitRandom();
00275 
00276   \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived1, \textcolor{keyword}{typename} Derived2>
00277   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion} FromTwoVectors(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived1>}& a, \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived2>}& b);
00278 
00279   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Coefficients& coeffs() \{ \textcolor{keywordflow}{return} m\_coeffs;\}
00280   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{const} Coefficients& coeffs()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_coeffs;\}
00281 
00282   EIGEN\_MAKE\_ALIGNED\_OPERATOR\_NEW\_IF(\textcolor{keywordtype}{bool}(NeedsAlignment))
00283   
00284 \textcolor{preprocessor}{#ifdef EIGEN\_QUATERNION\_PLUGIN}
00285 \textcolor{preprocessor}{# include EIGEN\_QUATERNION\_PLUGIN}
00286 \textcolor{preprocessor}{#endif}
00287 
00288 \textcolor{keyword}{protected}:
00289   Coefficients m\_coeffs;
00290   
00291 \textcolor{preprocessor}{#ifndef EIGEN\_PARSED\_BY\_DOXYGEN}
00292     \textcolor{keyword}{static} EIGEN\_STRONG\_INLINE \textcolor{keywordtype}{void} \_check\_template\_params()
00293     \{
00294       EIGEN\_STATIC\_ASSERT( (\_Options & \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a40a452614141522dd313363dbbd65726}{DontAlign}) == \_Options,
00295         INVALID\_MATRIX\_TEMPLATE\_PARAMETERS)
00296     \}
00297 \textcolor{preprocessor}{#endif}
00298 \};
00299 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00302}\hyperlink{group___geometry___module_ga785b13a5a87f9bf55d4eba51ead2dcf0}{00302} \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<float>} \hyperlink{group___geometry___module_ga785b13a5a87f9bf55d4eba51ead2dcf0}{Quaternionf};
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00305}\hyperlink{group___geometry___module_ga6e77eb8b6aae0e04be2db88107dbc642}{00305} \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<double>} \hyperlink{group___geometry___module_ga6e77eb8b6aae0e04be2db88107dbc642}{Quaterniond};
00306 
00307 \textcolor{comment}{/***************************************************************************}
00308 \textcolor{comment}{* Specialization of Map<Quaternion<Scalar>>}
00309 \textcolor{comment}{***************************************************************************/}
00310 
00311 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00312   \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Options>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00313}\hyperlink{struct_eigen_1_1internal_1_1traits_3_01_map_3_01_quaternion_3_01___scalar_01_4_00_01___options_01_4_01_4}{00313}   \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<\hyperlink{group___core___module_class_eigen_1_1_map}{Map}<\hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion}<\_Scalar>, \_Options> > : \hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<Quaternion<\_Scalar, 
      (int(\_Options)&Aligned)==Aligned ? AutoAlign : DontAlign> >
00314   \{
00315     \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<Matrix<\_Scalar,4,1>}, \_Options> Coefficients;
00316   \};
00317 \}
00318 
00319 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00320   \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Options>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00321}\hyperlink{struct_eigen_1_1internal_1_1traits_3_01_map_3_01const_01_quaternion_3_01___scalar_01_4_00_01___options_01_4_01_4}{00321}   \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<\hyperlink{group___core___module_class_eigen_1_1_map}{Map}<const \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion}<\_Scalar>, \_Options> > : 
      \hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<Quaternion<\_Scalar, (int(\_Options)&Aligned)==Aligned ? AutoAlign : DontAlign> >
00322   \{
00323     \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<const Matrix<\_Scalar,4,1>}, \_Options> Coefficients;
00324     \textcolor{keyword}{typedef} 
      \hyperlink{struct_eigen_1_1internal_1_1traits}{traits<Quaternion<\_Scalar, (int(\_Options)&Aligned)==Aligned ? AutoAlign : DontAlign>}
       > \hyperlink{struct_eigen_1_1internal_1_1traits}{TraitsBase};
00325     \textcolor{keyword}{enum} \{
00326       Flags = TraitsBase::Flags & ~\hyperlink{group__flags_gae2c323957f20dfdc6cb8f44428eaec1a}{LvalueBit}
00327     \};
00328   \};
00329 \}
00330 
00342 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Options>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00343}\hyperlink{group___geometry___module}{00343} \textcolor{keyword}{class }\hyperlink{group___core___module_class_eigen_1_1_map}{Map}<const \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion}<\_Scalar>, \_Options >
00344   : \textcolor{keyword}{public} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase}<Map<const Quaternion<\_Scalar>, \_Options> >
00345 \{
00346   \textcolor{keyword}{public}:
00347     \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Map<const Quaternion<\_Scalar>}, 
      \_Options> > Base;
00348 
00349     \textcolor{keyword}{typedef} \_Scalar Scalar;
00350     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Map>::Coefficients} Coefficients;
00351     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(\hyperlink{group___core___module_class_eigen_1_1_map}{Map})
00352     \textcolor{keyword}{using} Base::operator*=;
00353 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00360}\hyperlink{group___geometry___module_a8b321eb2bf9a4e4b76465564e80f212b}{00360}     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{explicit} EIGEN\_STRONG\_INLINE \hyperlink{group___geometry___module_a8b321eb2bf9a4e4b76465564e80f212b}{Map}(\textcolor{keyword}{const} Scalar* coeffs) : m\_coeffs(coeffs) \{\}
00361 
00362     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{const} Coefficients& coeffs()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_coeffs;\}
00363 
00364   \textcolor{keyword}{protected}:
00365     \textcolor{keyword}{const} Coefficients m\_coeffs;
00366 \};
00367 
00379 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \_Scalar, \textcolor{keywordtype}{int} \_Options>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00380}\hyperlink{group___geometry___module}{00380} \textcolor{keyword}{class }\hyperlink{group___core___module_class_eigen_1_1_map}{Map}<\hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion}<\_Scalar>, \_Options >
00381   : \textcolor{keyword}{public} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase}<Map<Quaternion<\_Scalar>, \_Options> >
00382 \{
00383   \textcolor{keyword}{public}:
00384     \textcolor{keyword}{typedef} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Map<Quaternion<\_Scalar>}, \_Options> > Base;
00385 
00386     \textcolor{keyword}{typedef} \_Scalar Scalar;
00387     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Map>::Coefficients} Coefficients;
00388     EIGEN\_INHERIT\_ASSIGNMENT\_OPERATORS(\hyperlink{group___core___module_class_eigen_1_1_map}{Map})
00389     \textcolor{keyword}{using} Base::operator*=;
00390 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00397}\hyperlink{group___geometry___module_ad94fc6daefd48cccb87aef782e0949e5}{00397}     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{explicit} EIGEN\_STRONG\_INLINE \hyperlink{group___geometry___module_ad94fc6daefd48cccb87aef782e0949e5}{Map}(Scalar* coeffs) : m\_coeffs(coeffs) \{\}
00398 
00399     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Coefficients& coeffs() \{ \textcolor{keywordflow}{return} m\_coeffs; \}
00400     EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{const} Coefficients& coeffs()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_coeffs; \}
00401 
00402   \textcolor{keyword}{protected}:
00403     Coefficients m\_coeffs;
00404 \};
00405 
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00408}\hyperlink{group___geometry___module_ga7dad770768dc28ad3cee4696841a5dd4}{00408} \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<Quaternion<float>}, 0>         \hyperlink{group___geometry___module_ga7dad770768dc28ad3cee4696841a5dd4}{QuaternionMapf};
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00411}\hyperlink{group___geometry___module_gac566b934815fa5293437b5d0c065d4e8}{00411} \textcolor{keyword}{typedef} \hyperlink{group___core___module_class_eigen_1_1_map}{Map<Quaternion<double>}, 0>        \hyperlink{group___geometry___module_gac566b934815fa5293437b5d0c065d4e8}{QuaternionMapd};
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00414}\hyperlink{group___geometry___module_ga1224c70c2ecdaeb4bffa4887dbf2d04d}{00414} \textcolor{keyword}{typedef} Map<Quaternion<float>, \hyperlink{group__enums_gga45fe06e29902b7a2773de05ba27b47a1ad37d4c71425bb286e9b4103830538fbf}{Aligned}>   \hyperlink{group___geometry___module_ga1224c70c2ecdaeb4bffa4887dbf2d04d}{QuaternionMapAlignedf};
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00417}\hyperlink{group___geometry___module_ga4c11d0bbf7602645581380ba3cd6e690}{00417} \textcolor{keyword}{typedef} Map<Quaternion<double>, \hyperlink{group__enums_gga45fe06e29902b7a2773de05ba27b47a1ad37d4c71425bb286e9b4103830538fbf}{Aligned}>  \hyperlink{group___geometry___module_ga4c11d0bbf7602645581380ba3cd6e690}{QuaternionMapAlignedd};
00418 
00419 \textcolor{comment}{/***************************************************************************}
00420 \textcolor{comment}{* Implementation of QuaternionBase methods}
00421 \textcolor{comment}{***************************************************************************/}
00422 
00423 \textcolor{comment}{// Generic Quaternion * Quaternion product}
00424 \textcolor{comment}{// This product can be specialized for a given architecture via the Arch template argument.}
00425 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00426}\hyperlink{struct_eigen_1_1internal_1_1quat__product}{00426} \textcolor{keyword}{template}<\textcolor{keywordtype}{int} Arch, \textcolor{keyword}{class} Derived1, \textcolor{keyword}{class} Derived2, \textcolor{keyword}{typename} Scalar> \textcolor{keyword}{struct }
      \hyperlink{struct_eigen_1_1internal_1_1quat__product}{quat\_product}
00427 \{
00428   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} EIGEN\_STRONG\_INLINE \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} run(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived1>}& a, \textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived2>}& b)\{
00429     \textcolor{keywordflow}{return} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>}
00430     (
00431       a.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() * b.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() - a.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}() * b.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}() - a.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}() * b.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}() - a.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}() * b.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}(),
00432       a.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() * b.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}() + a.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}() * b.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() + a.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}() * b.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}() - a.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}() * b.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}(),
00433       a.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() * b.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}() + a.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}() * b.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() + a.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}() * b.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}() - a.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}() * b.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}(),
00434       a.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() * b.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}() + a.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}() * b.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() + a.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}() * b.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}() - a.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}() * b.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}()
00435     );
00436   \}
00437 \};
00438 \}
00439 
00441 \textcolor{keyword}{template} <\textcolor{keyword}{class} Derived>
00442 \textcolor{keyword}{template} <\textcolor{keyword}{class} OtherDerived>
00443 EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<typename internal::traits<Derived>::Scalar}>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00444}\hyperlink{group___geometry___module_a2335850ed42c118f8c690ff2118e5b81}{00444} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>::operator* }(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other)\textcolor{keyword}{ const}
00445 \textcolor{keyword}{}\{
00446   EIGEN\_STATIC\_ASSERT((
      \hyperlink{struct_eigen_1_1internal_1_1is__same}{internal::is\_same<typename Derived::Scalar, typename OtherDerived::Scalar>::value}
      ),
00447    
      YOU\_MIXED\_DIFFERENT\_NUMERIC\_TYPES\_\_YOU\_NEED\_TO\_USE\_THE\_CAST\_METHOD\_OF\_MATRIXBASE\_TO\_CAST\_NUMERIC\_TYPES\_EXPLICITLY)
00448   \textcolor{keywordflow}{return} \hyperlink{struct_eigen_1_1internal_1_1quat__product}{internal::quat\_product}<Architecture::Target, Derived, OtherDerived,
00449                          \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::Scalar}>::run(
      *\textcolor{keyword}{this}, other);
00450 \}
00451 
00453 \textcolor{keyword}{template} <\textcolor{keyword}{class} Derived>
00454 \textcolor{keyword}{template} <\textcolor{keyword}{class} OtherDerived>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00455}\hyperlink{group___geometry___module_ad5fb3b0792f02b2863f4dc3c3c70ea2d}{00455} EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Derived& 
      \hyperlink{group___geometry___module_ad5fb3b0792f02b2863f4dc3c3c70ea2d}{QuaternionBase<Derived>::operator*= }(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other)
00456 \{
00457   derived() = derived() * other.derived();
00458   \textcolor{keywordflow}{return} derived();
00459 \}
00460 
00468 \textcolor{keyword}{template} <\textcolor{keyword}{class} Derived>
00469 EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \textcolor{keyword}{typename} \hyperlink{group___core___module}{QuaternionBase<Derived>::Vector3}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00470}\hyperlink{group___geometry___module_a03896e1e743aae2c18a0146086cef983}{00470} \hyperlink{group___geometry___module_a03896e1e743aae2c18a0146086cef983}{QuaternionBase<Derived>::\_transformVector}(\textcolor{keyword}{const} Vector3& v)\textcolor{keyword}{ const}
00471 \textcolor{keyword}{}\{
00472     \textcolor{comment}{// Note that this algorithm comes from the optimization by hand}
00473     \textcolor{comment}{// of the conversion to a Matrix followed by a Matrix/Vector product.}
00474     \textcolor{comment}{// It appears to be much faster than the common algorithm found}
00475     \textcolor{comment}{// in the literature (30 versus 39 flops). It also requires two}
00476     \textcolor{comment}{// Vector3 as temporaries.}
00477     Vector3 uv = this->vec().cross(v);
00478     uv += uv;
00479     \textcolor{keywordflow}{return} v + this->w() * uv + this->vec().cross(uv);
00480 \}
00481 
00482 \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived>
00483 EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>}& 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>::operator=}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>}& other)
00484 \{
00485   coeffs() = other.\hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}();
00486   \textcolor{keywordflow}{return} derived();
00487 \}
00488 
00489 \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived>
00490 \textcolor{keyword}{template}<\textcolor{keyword}{class} OtherDerived>
00491 EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Derived& 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>::operator=}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other)
00492 \{
00493   coeffs() = other.\hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}();
00494   \textcolor{keywordflow}{return} derived();
00495 \}
00496 
00499 \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00500}\hyperlink{group___geometry___module_af2f49bb475fcfd4965803787c8784d13}{00500} EIGEN\_DEVICE\_FUNC EIGEN\_STRONG\_INLINE Derived& 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>::operator=}(\textcolor{keyword}{const} AngleAxisType& aa)
00501 \{
00502   EIGEN\_USING\_STD\_MATH(cos)
00503   EIGEN\_USING\_STD\_MATH(sin)
00504   Scalar ha = Scalar(0.5)*aa.\hyperlink{group___geometry___module_a83d3c08a73c111550b7e480d3ed043d4}{angle}(); \textcolor{comment}{// Scalar(0.5) to suppress precision loss warnings}
00505   this->w() = cos(ha);
00506   this->vec() = sin(ha) * aa.\hyperlink{group___geometry___module_ae40cc36c8dcd9977e1540d91a80696bb}{axis}();
00507   \textcolor{keywordflow}{return} derived();
00508 \}
00509 
00516 \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived>
00517 \textcolor{keyword}{template}<\textcolor{keyword}{class} MatrixDerived>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00518}\hyperlink{group___geometry___module_a69cdb4a53e1f582627b74bbabbb80d7a}{00518} EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Derived& \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>::operator=}(\textcolor{keyword}{
      const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<MatrixDerived>}& xpr)
00519 \{
00520   EIGEN\_STATIC\_ASSERT((
      \hyperlink{struct_eigen_1_1internal_1_1is__same}{internal::is\_same<typename Derived::Scalar, typename MatrixDerived::Scalar>::value}
      ),
00521    
      YOU\_MIXED\_DIFFERENT\_NUMERIC\_TYPES\_\_YOU\_NEED\_TO\_USE\_THE\_CAST\_METHOD\_OF\_MATRIXBASE\_TO\_CAST\_NUMERIC\_TYPES\_EXPLICITLY)
00522   \hyperlink{struct_eigen_1_1internal_1_1quaternionbase__assign__impl}{internal::quaternionbase\_assign\_impl<MatrixDerived>::run}
      (*\textcolor{keyword}{this}, xpr.derived());
00523   \textcolor{keywordflow}{return} derived();
00524 \}
00525 
00529 \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived>
00530 EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{typename} \hyperlink{group___core___module_class_eigen_1_1_matrix}{QuaternionBase<Derived>::Matrix3}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00531}\hyperlink{group___geometry___module_a621c71eec9680bf77342b28a473b6874}{00531} \hyperlink{group___geometry___module_a621c71eec9680bf77342b28a473b6874}{QuaternionBase<Derived>::toRotationMatrix}(\textcolor{keywordtype}{void})\textcolor{keyword}{ const}
00532 \textcolor{keyword}{}\{
00533   \textcolor{comment}{// NOTE if inlined, then gcc 4.2 and 4.4 get rid of the temporary (not gcc 4.3 !!)}
00534   \textcolor{comment}{// if not inlined then the cost of the return by value is huge ~ +35%,}
00535   \textcolor{comment}{// however, not inlining this function is an order of magnitude slower, so}
00536   \textcolor{comment}{// it has to be inlined, and so the return by value is not an issue}
00537   Matrix3 res;
00538 
00539   \textcolor{keyword}{const} Scalar tx  = Scalar(2)*this->x();
00540   \textcolor{keyword}{const} Scalar ty  = Scalar(2)*this->y();
00541   \textcolor{keyword}{const} Scalar tz  = Scalar(2)*this->z();
00542   \textcolor{keyword}{const} Scalar twx = tx*this->w();
00543   \textcolor{keyword}{const} Scalar twy = ty*this->w();
00544   \textcolor{keyword}{const} Scalar twz = tz*this->w();
00545   \textcolor{keyword}{const} Scalar txx = tx*this->x();
00546   \textcolor{keyword}{const} Scalar txy = ty*this->x();
00547   \textcolor{keyword}{const} Scalar txz = tz*this->x();
00548   \textcolor{keyword}{const} Scalar tyy = ty*this->y();
00549   \textcolor{keyword}{const} Scalar tyz = tz*this->y();
00550   \textcolor{keyword}{const} Scalar tzz = tz*this->z();
00551 
00552   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(0,0) = Scalar(1)-(tyy+tzz);
00553   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(0,1) = txy-twz;
00554   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(0,2) = txz+twy;
00555   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(1,0) = txy+twz;
00556   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(1,1) = Scalar(1)-(txx+tzz);
00557   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(1,2) = tyz-twx;
00558   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(2,0) = txz-twy;
00559   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(2,1) = tyz+twx;
00560   res.\hyperlink{class_eigen_1_1_plain_object_base_a25626a55b26a4323565f79d1b7c48ea8}{coeffRef}(2,2) = Scalar(1)-(txx+tyy);
00561 
00562   \textcolor{keywordflow}{return} res;
00563 \}
00564 
00575 \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived>
00576 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived1, \textcolor{keyword}{typename} Derived2>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00577}\hyperlink{group___geometry___module_a61ce1b4b1faf6849c9663fd86e9b3a70}{00577} EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} Derived& \hyperlink{group___geometry___module_a61ce1b4b1faf6849c9663fd86e9b3a70}{QuaternionBase<Derived>::setFromTwoVectors}
      (\textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived1>}& a, \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived2>}& b)
00578 \{
00579   EIGEN\_USING\_STD\_MATH(sqrt)
00580   Vector3 v0 = a.\hyperlink{group___core___module_a5cf2fd4c57e59604fd4116158fd34308}{normalized}();
00581   Vector3 v1 = b.\hyperlink{group___core___module_a5cf2fd4c57e59604fd4116158fd34308}{normalized}();
00582   Scalar c = v1.dot(v0);
00583 
00584   \textcolor{comment}{// if dot == -1, vectors are nearly opposites}
00585   \textcolor{comment}{// => accurately compute the rotation axis by computing the}
00586   \textcolor{comment}{//    intersection of the two planes. This is done by solving:}
00587   \textcolor{comment}{//       x^T v0 = 0}
00588   \textcolor{comment}{//       x^T v1 = 0}
00589   \textcolor{comment}{//    under the constraint:}
00590   \textcolor{comment}{//       ||x|| = 1}
00591   \textcolor{comment}{//    which yields a singular value problem}
00592   \textcolor{keywordflow}{if} (c < Scalar(-1)+\hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<Scalar>::dummy\_precision}())
00593   \{
00594     c = numext::maxi(c,Scalar(-1));
00595     \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<Scalar,2,3>} m; m << v0.transpose(), v1.transpose();
00596     \hyperlink{group___s_v_d___module_class_eigen_1_1_jacobi_s_v_d}{JacobiSVD<Matrix<Scalar,2,3>} > svd(m, 
      \hyperlink{group__enums_ggae3e239fb70022eb8747994cf5d68b4a9a52c6f7e80bbf9a42297c88f700245b51}{ComputeFullV});
00597     Vector3 axis = svd.\hyperlink{group___s_v_d___module_a245a453b5e7347f737295c23133238c4}{matrixV}().col(2);
00598 
00599     Scalar w2 = (Scalar(1)+c)*Scalar(0.5);
00600     this->w() = sqrt(w2);
00601     this->vec() = axis * sqrt(Scalar(1) - w2);
00602     \textcolor{keywordflow}{return} derived();
00603   \}
00604   Vector3 axis = v0.cross(v1);
00605   Scalar s = sqrt((Scalar(1)+c)*Scalar(2));
00606   Scalar invs = Scalar(1)/s;
00607   this->vec() = axis * invs;
00608   this->w() = s * Scalar(0.5);
00609 
00610   \textcolor{keywordflow}{return} derived();
00611 \}
00612 
00617 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar, \textcolor{keywordtype}{int} Options>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00618}\hyperlink{group___geometry___module_a8a61f4092bc520c7291e5b5e16e80d71}{00618} EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar,Options>} 
      \hyperlink{group___geometry___module_a8a61f4092bc520c7291e5b5e16e80d71}{Quaternion<Scalar,Options>::UnitRandom}()
00619 \{
00620   EIGEN\_USING\_STD\_MATH(sqrt)
00621   EIGEN\_USING\_STD\_MATH(sin)
00622   EIGEN\_USING\_STD\_MATH(cos)
00623   \textcolor{keyword}{const} Scalar u1 = internal::random<Scalar>(0, 1),
00624                u2 = internal::random<Scalar>(0, 2*EIGEN\_PI),
00625                u3 = internal::random<Scalar>(0, 2*EIGEN\_PI);
00626   \textcolor{keyword}{const} Scalar a = sqrt(1 - u1),
00627                b = sqrt(u1);
00628   \textcolor{keywordflow}{return} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion} (a * sin(u2), a * cos(u2), b * sin(u3), b * cos(u3));
00629 \}
00630 
00631 
00642 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Scalar, \textcolor{keywordtype}{int} Options>
00643 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Derived1, \textcolor{keyword}{typename} Derived2>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00644}\hyperlink{group___geometry___module_a44fa061cd2d1f81419902ad756846a95}{00644} EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar,Options>} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar,Options>::FromTwoVectors}(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived1>}& a, \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Derived2>}& b)
00645 \{
00646     \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion} quat;
00647     quat.\hyperlink{group___geometry___module_a61ce1b4b1faf6849c9663fd86e9b3a70}{setFromTwoVectors}(a, b);
00648     \textcolor{keywordflow}{return} quat;
00649 \}
00650 
00651 
00658 \textcolor{keyword}{template} <\textcolor{keyword}{class} Derived>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00659}\hyperlink{group___geometry___module_a6a1d8af1fe34cb4127f705c0d10ef649}{00659} EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<typename internal::traits<Derived>::Scalar}
      > \hyperlink{group___geometry___module_a6a1d8af1fe34cb4127f705c0d10ef649}{QuaternionBase<Derived>::inverse}()\textcolor{keyword}{ const}
00660 \textcolor{keyword}{}\{
00661   \textcolor{comment}{// FIXME should this function be called multiplicativeInverse and conjugate() be called inverse() or
       opposite()  ??}
00662   Scalar n2 = this->squaredNorm();
00663   \textcolor{keywordflow}{if} (n2 > Scalar(0))
00664     \textcolor{keywordflow}{return} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>}(conjugate().coeffs() / n2);
00665   \textcolor{keywordflow}{else}
00666   \{
00667     \textcolor{comment}{// return an invalid result to flag the error}
00668     \textcolor{keywordflow}{return} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>}(Coefficients::Zero());
00669   \}
00670 \}
00671 
00672 \textcolor{comment}{// Generic conjugate of a Quaternion}
00673 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00674}\hyperlink{struct_eigen_1_1internal_1_1quat__conj}{00674} \textcolor{keyword}{template}<\textcolor{keywordtype}{int} Arch, \textcolor{keyword}{class} Derived, \textcolor{keyword}{typename} Scalar> \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1quat__conj}{quat\_conj}
00675 \{
00676   EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} EIGEN\_STRONG\_INLINE \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} run(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>}& q)\{
00677     \textcolor{keywordflow}{return} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>}(q.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}(),-q.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}(),-q.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}(),-q.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}());
00678   \}
00679 \};
00680 \}
00681                          
00688 \textcolor{keyword}{template} <\textcolor{keyword}{class} Derived>
00689 EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<typename internal::traits<Derived>::Scalar}
      >
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00690}\hyperlink{group___geometry___module_aa82dabadce488031c298a5a0a92cda14}{00690} \hyperlink{group___geometry___module_aa82dabadce488031c298a5a0a92cda14}{QuaternionBase<Derived>::conjugate}()\textcolor{keyword}{ const}
00691 \textcolor{keyword}{}\{
00692   \textcolor{keywordflow}{return} \hyperlink{struct_eigen_1_1internal_1_1quat__conj}{internal::quat\_conj}<Architecture::Target, Derived,
00693                          \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::Scalar}>::run(
      *\textcolor{keyword}{this});
00694                          
00695 \}
00696 
00700 \textcolor{keyword}{template} <\textcolor{keyword}{class} Derived>
00701 \textcolor{keyword}{template} <\textcolor{keyword}{class} OtherDerived>
00702 EIGEN\_DEVICE\_FUNC \textcolor{keyword}{inline} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::Scalar}
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00703}\hyperlink{group___geometry___module_a1731ca642b043f994f7cf2db398b2c0a}{00703} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>::angularDistance}(\textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other)\textcolor{keyword}{ const}
00704 \textcolor{keyword}{}\{
00705   EIGEN\_USING\_STD\_MATH(atan2)
00706   \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>} d = (*this) * other.\hyperlink{group___geometry___module_aa82dabadce488031c298a5a0a92cda14}{conjugate}();
00707   \textcolor{keywordflow}{return} Scalar(2) * atan2( d.\hyperlink{group___geometry___module_aa8a52640dfd34f910d18f110ccccd1b9}{vec}().norm(), numext::abs(d.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}()) );
00708 \}
00709 
00710  
00711     
00718 \textcolor{keyword}{template} <\textcolor{keyword}{class} Derived>
00719 \textcolor{keyword}{template} <\textcolor{keyword}{class} OtherDerived>
00720 EIGEN\_DEVICE\_FUNC \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<typename internal::traits<Derived>::Scalar}
      >
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00721}\hyperlink{group___geometry___module_a75b89a20708949fab311c3ed7cce1a67}{00721} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>::slerp}(\textcolor{keyword}{const} Scalar& t, \textcolor{keyword}{const} 
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<OtherDerived>}& other)\textcolor{keyword}{ const}
00722 \textcolor{keyword}{}\{
00723   EIGEN\_USING\_STD\_MATH(acos)
00724   EIGEN\_USING\_STD\_MATH(sin)
00725   \textcolor{keyword}{const} Scalar one = Scalar(1) - \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<Scalar>::epsilon}();
00726   Scalar d = this->dot(other);
00727   Scalar absD = numext::abs(d);
00728 
00729   Scalar scale0;
00730   Scalar scale1;
00731 
00732   \textcolor{keywordflow}{if}(absD>=one)
00733   \{
00734     scale0 = Scalar(1) - t;
00735     scale1 = t;
00736   \}
00737   \textcolor{keywordflow}{else}
00738   \{
00739     \textcolor{comment}{// theta is the angle between the 2 quaternions}
00740     Scalar theta = acos(absD);
00741     Scalar sinTheta = sin(theta);
00742 
00743     scale0 = sin( ( Scalar(1) - t ) * theta) / sinTheta;
00744     scale1 = sin( ( t * theta) ) / sinTheta;
00745   \}
00746   \textcolor{keywordflow}{if}(d<Scalar(0)) scale1 = -scale1;
00747 
00748   \textcolor{keywordflow}{return} \hyperlink{group___geometry___module_class_eigen_1_1_quaternion}{Quaternion<Scalar>}(scale0 * coeffs() + scale1 * other.
      \hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}());
00749 \}
00750 
00751 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00752 
00753 \textcolor{comment}{// set from a rotation matrix}
00754 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Other>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00755}\hyperlink{struct_eigen_1_1internal_1_1quaternionbase__assign__impl_3_01_other_00_013_00_013_01_4}{00755} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1quaternionbase__assign__impl}{quaternionbase\_assign\_impl}<Other,3,3>
00756 \{
00757   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Other::Scalar Scalar;
00758   \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived> EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} run(
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>}& q, \textcolor{keyword}{const} Other& a\_mat)
00759   \{
00760     \textcolor{keyword}{const} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1_tensor_lazy_evaluator_writable}{internal::nested\_eval<Other,2>::type} mat(a\_mat);
00761     EIGEN\_USING\_STD\_MATH(sqrt)
00762     \textcolor{comment}{// This algorithm comes from  "Quaternion Calculus and Fast Animation",}
00763     \textcolor{comment}{// Ken Shoemake, 1987 SIGGRAPH course notes}
00764     Scalar t = mat.trace();
00765     \textcolor{keywordflow}{if} (t > Scalar(0))
00766     \{
00767       t = sqrt(t + Scalar(1.0));
00768       q.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() = Scalar(0.5)*t;
00769       t = Scalar(0.5)/t;
00770       q.\hyperlink{group___geometry___module_a782b9d83caa9bbe84d6e0b822f2dbea9}{x}() = (mat.coeff(2,1) - mat.coeff(1,2)) * t;
00771       q.\hyperlink{group___geometry___module_a8c7883015c5fa41aa5107350279a5229}{y}() = (mat.coeff(0,2) - mat.coeff(2,0)) * t;
00772       q.\hyperlink{group___geometry___module_abb82ebd1b6ac5e6c4442201ede65449b}{z}() = (mat.coeff(1,0) - mat.coeff(0,1)) * t;
00773     \}
00774     \textcolor{keywordflow}{else}
00775     \{
00776       \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} i = 0;
00777       \textcolor{keywordflow}{if} (mat.coeff(1,1) > mat.coeff(0,0))
00778         i = 1;
00779       \textcolor{keywordflow}{if} (mat.coeff(2,2) > mat.coeff(i,i))
00780         i = 2;
00781       \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} j = (i+1)%3;
00782       \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} k = (j+1)%3;
00783 
00784       t = sqrt(mat.coeff(i,i)-mat.coeff(j,j)-mat.coeff(k,k) + Scalar(1.0));
00785       q.\hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}().coeffRef(i) = Scalar(0.5) * t;
00786       t = Scalar(0.5)/t;
00787       q.\hyperlink{group___geometry___module_a1f3f580927483150d4558c327988a9b4}{w}() = (mat.coeff(k,j)-mat.coeff(j,k))*t;
00788       q.\hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}().coeffRef(j) = (mat.coeff(j,i)+mat.coeff(i,j))*t;
00789       q.\hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}().coeffRef(k) = (mat.coeff(k,i)+mat.coeff(i,k))*t;
00790     \}
00791   \}
00792 \};
00793 
00794 \textcolor{comment}{// set from a vector of coefficients assumed to be a quaternion}
00795 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Other>
\Hypertarget{eigen_2_eigen_2src_2_geometry_2_quaternion_8h_source_l00796}\hyperlink{struct_eigen_1_1internal_1_1quaternionbase__assign__impl_3_01_other_00_014_00_011_01_4}{00796} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1quaternionbase__assign__impl}{quaternionbase\_assign\_impl}<Other,4,1>
00797 \{
00798   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Other::Scalar Scalar;
00799   \textcolor{keyword}{template}<\textcolor{keyword}{class} Derived> EIGEN\_DEVICE\_FUNC \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{void} run(
      \hyperlink{group___geometry___module_class_eigen_1_1_quaternion_base}{QuaternionBase<Derived>}& q, \textcolor{keyword}{const} Other& vec)
00800   \{
00801     q.\hyperlink{group___geometry___module_aa7bb3fc337ffa82b0ad795783eb8a2ce}{coeffs}() = vec;
00802   \}
00803 \};
00804 
00805 \} \textcolor{comment}{// end namespace internal}
00806 
00807 \} \textcolor{comment}{// end namespace Eigen}
00808 
00809 \textcolor{preprocessor}{#endif // EIGEN\_QUATERNION\_H}
\end{DoxyCode}
