\hypertarget{endian_8c_source}{}\section{endian.\+c}
\label{endian_8c_source}\index{endian.\+c@{endian.\+c}}

\begin{DoxyCode}
00001 
00004 \textcolor{comment}{/*}
00005 \textcolor{comment}{ * Copyright (c) 2005-2018, Christopher C. Hulbert}
00006 \textcolor{comment}{ * All rights reserved.}
00007 \textcolor{comment}{ *}
00008 \textcolor{comment}{ * Redistribution and use in source and binary forms, with or without}
00009 \textcolor{comment}{ * modification, are permitted provided that the following conditions are met:}
00010 \textcolor{comment}{ *}
00011 \textcolor{comment}{ * 1. Redistributions of source code must retain the above copyright notice, this}
00012 \textcolor{comment}{ *    list of conditions and the following disclaimer.}
00013 \textcolor{comment}{ *}
00014 \textcolor{comment}{ * 2. Redistributions in binary form must reproduce the above copyright notice,}
00015 \textcolor{comment}{ *    this list of conditions and the following disclaimer in the documentation}
00016 \textcolor{comment}{ *    and/or other materials provided with the distribution.}
00017 \textcolor{comment}{ *}
00018 \textcolor{comment}{ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"}
00019 \textcolor{comment}{ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE}
00020 \textcolor{comment}{ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE}
00021 \textcolor{comment}{ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE}
00022 \textcolor{comment}{ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL}
00023 \textcolor{comment}{ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR}
00024 \textcolor{comment}{ * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER}
00025 \textcolor{comment}{ * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,}
00026 \textcolor{comment}{ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE}
00027 \textcolor{comment}{ * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}
00028 \textcolor{comment}{ */}
00029 
00030 \textcolor{preprocessor}{#include <stdlib.h>}
00031 \textcolor{preprocessor}{#include "matio\_private.h"}
00032 
\Hypertarget{endian_8c_source_l00036}\hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{00036} \textcolor{preprocessor}{#define swap(a,b)   a^=b;b^=a;a^=b}
00037 
00038 \textcolor{preprocessor}{#ifdef HAVE\_MAT\_INT64\_T}
00039 
00044 mat\_int64\_t
00045 Mat\_int64Swap( mat\_int64\_t *a )
00046 \{
00047 
00048     \textcolor{keyword}{union }\{
00049         mat\_int8\_t    i1[8];
00050         mat\_int64\_t   i8;
00051     \} tmp;
00052 
00053     tmp.i8 = *a;
00054 
00055     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[0], tmp.i1[7] );
00056     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[1], tmp.i1[6] );
00057     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[2], tmp.i1[5] );
00058     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[3], tmp.i1[4] );
00059 
00060     *a = tmp.i8;
00061 
00062     \textcolor{keywordflow}{return} *a;
00063 \}
00064 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* HAVE\_MAT\_INT64\_T */}\textcolor{preprocessor}{}
00065 
00066 \textcolor{preprocessor}{#ifdef HAVE\_MAT\_UINT64\_T}
00067 
00072 mat\_uint64\_t
00073 Mat\_uint64Swap( mat\_uint64\_t *a )
00074 \{
00075 
00076     \textcolor{keyword}{union }\{
00077         mat\_uint8\_t    i1[8];
00078         mat\_uint64\_t   i8;
00079     \} tmp;
00080 
00081     tmp.i8 = *a;
00082 
00083     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[0], tmp.i1[7] );
00084     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[1], tmp.i1[6] );
00085     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[2], tmp.i1[5] );
00086     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[3], tmp.i1[4] );
00087 
00088     *a = tmp.i8;
00089 
00090     \textcolor{keywordflow}{return} *a;
00091 \}
00092 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* HAVE\_MAT\_UINT64\_T */}\textcolor{preprocessor}{}
00093 
00099 mat\_int32\_t
\Hypertarget{endian_8c_source_l00100}\hyperlink{endian_8c_a2e0153996243f0a34df9a5286087cfa3}{00100} \hyperlink{endian_8c_a2e0153996243f0a34df9a5286087cfa3}{Mat\_int32Swap}( mat\_int32\_t *a )
00101 \{
00102 
00103     \textcolor{keyword}{union }\{
00104         mat\_int8\_t    i1[4];
00105         mat\_int32\_t   i4;
00106     \} tmp;
00107 
00108     tmp.i4 = *a;
00109 
00110     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[0], tmp.i1[3] );
00111     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[1], tmp.i1[2] );
00112 
00113     *a = tmp.i4;
00114 
00115     \textcolor{keywordflow}{return} *a;
00116 \}
00117 
00123 mat\_uint32\_t
\Hypertarget{endian_8c_source_l00124}\hyperlink{endian_8c_a8cb0d0750e2eaf9840d95db531934f4f}{00124} \hyperlink{endian_8c_a8cb0d0750e2eaf9840d95db531934f4f}{Mat\_uint32Swap}( mat\_uint32\_t *a )
00125 \{
00126 
00127     \textcolor{keyword}{union }\{
00128         mat\_uint8\_t    i1[4];
00129         mat\_uint32\_t   i4;
00130     \} tmp;
00131 
00132     tmp.i4 = *a;
00133 
00134     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[0], tmp.i1[3] );
00135     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[1], tmp.i1[2] );
00136 
00137     *a = tmp.i4;
00138 
00139     \textcolor{keywordflow}{return} *a;
00140 \}
00141 
00147 mat\_int16\_t
\Hypertarget{endian_8c_source_l00148}\hyperlink{endian_8c_a741eb8019dbc3e8addfc0e75adb0dd90}{00148} \hyperlink{endian_8c_a741eb8019dbc3e8addfc0e75adb0dd90}{Mat\_int16Swap}( mat\_int16\_t *a )
00149 \{
00150 
00151     \textcolor{keyword}{union }\{
00152         mat\_int8\_t   i1[2];
00153         mat\_int16\_t  i2;
00154     \} tmp;
00155 
00156     tmp.i2 = *a;
00157 
00158     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[0], tmp.i1[1] );
00159 
00160     *a = tmp.i2;
00161     \textcolor{keywordflow}{return} *a;
00162 \}
00163 
00169 mat\_uint16\_t
\Hypertarget{endian_8c_source_l00170}\hyperlink{endian_8c_a0fd527794c69f2872e80a6f20cd09fd2}{00170} \hyperlink{endian_8c_a0fd527794c69f2872e80a6f20cd09fd2}{Mat\_uint16Swap}( mat\_uint16\_t *a )
00171 \{
00172 
00173     \textcolor{keyword}{union }\{
00174         mat\_uint8\_t   i1[2];
00175         mat\_uint16\_t  i2;
00176     \} tmp;
00177 
00178     tmp.i2 = *a;
00179 
00180     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[0], tmp.i1[1] );
00181 
00182     *a = tmp.i2;
00183     \textcolor{keywordflow}{return} *a;
00184 \}
00185 
00191 \textcolor{keywordtype}{float}
\Hypertarget{endian_8c_source_l00192}\hyperlink{endian_8c_aec590b585dd84bbbae74a857922fced2}{00192} \hyperlink{endian_8c_aec590b585dd84bbbae74a857922fced2}{Mat\_floatSwap}( \textcolor{keywordtype}{float} *a )
00193 \{
00194 
00195     \textcolor{keyword}{union }\{
00196         \textcolor{keywordtype}{char}  i1[4];
00197         \textcolor{keywordtype}{float} r4;
00198     \} tmp;
00199 
00200     tmp.r4 = *a;
00201 
00202     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[0], tmp.i1[3] );
00203     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.i1[1], tmp.i1[2] );
00204 
00205     *a = tmp.r4;
00206     \textcolor{keywordflow}{return} *a;
00207 \}
00208 
00214 \textcolor{keywordtype}{double}
\Hypertarget{endian_8c_source_l00215}\hyperlink{endian_8c_a7f548ab23c3b06fa90ef646ed43dc558}{00215} \hyperlink{endian_8c_a7f548ab23c3b06fa90ef646ed43dc558}{Mat\_doubleSwap}( \textcolor{keywordtype}{double} *a )
00216 \{
00217 \textcolor{preprocessor}{#ifndef SIZEOF\_DOUBLE}
00218 \textcolor{preprocessor}{#define SIZEOF\_DOUBLE 8}
00219 \textcolor{preprocessor}{#endif}
00220 
00221     \textcolor{keyword}{union }\{
00222         \textcolor{keywordtype}{char}   a[SIZEOF\_DOUBLE];
00223         \textcolor{keywordtype}{double} b;
00224     \} tmp;
00225 
00226     tmp.b = *a;
00227 
00228 \textcolor{preprocessor}{#if SIZEOF\_DOUBLE == 4}
00229     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[0], tmp.a[3] );
00230     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[1], tmp.a[2] );
00231 \textcolor{preprocessor}{#elif SIZEOF\_DOUBLE == 8}
00232     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[0], tmp.a[7] );
00233     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[1], tmp.a[6] );
00234     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[2], tmp.a[5] );
00235     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[3], tmp.a[4] );
00236 \textcolor{preprocessor}{#elif SIZEOF\_DOUBLE == 16}
00237     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[0], tmp.a[15] );
00238     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[1], tmp.a[14] );
00239     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[2], tmp.a[13] );
00240     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[3], tmp.a[12] );
00241     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[4], tmp.a[11] );
00242     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[5], tmp.a[10] );
00243     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[6], tmp.a[9] );
00244     \hyperlink{endian_8c_a3ca5ecd34b04d6a243c054ac3a57f68d}{swap}( tmp.a[7], tmp.a[8] );
00245 \textcolor{preprocessor}{#endif}
00246     *a = tmp.b;
00247     \textcolor{keywordflow}{return} *a;
00248 \}
\end{DoxyCode}
