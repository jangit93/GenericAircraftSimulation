\hypertarget{_airframe_8cpp_source}{}\section{Airframe.\+cpp}
\label{_airframe_8cpp_source}\index{Airframe.\+cpp@{Airframe.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "Airframe.h"}
00002 
\Hypertarget{_airframe_8cpp_source_l00003}\hyperlink{group___airframe_a5e6632c7d0c5bc5b889de6cc2407944f}{00003} \hyperlink{group___airframe_a5e6632c7d0c5bc5b889de6cc2407944f}{Airframe::Airframe}()
00004 \{
00005     readIn = \textcolor{keyword}{new} \hyperlink{classread_in_data}{readInData};
00006 \}
00007 
\Hypertarget{_airframe_8cpp_source_l00008}\hyperlink{group___airframe_af849116afbf7c4d7d2d5c189ff68cb7d}{00008} \hyperlink{group___airframe_af849116afbf7c4d7d2d5c189ff68cb7d}{Airframe::~Airframe}()
00009 \{
00010 \}
00011 
\Hypertarget{_airframe_8cpp_source_l00012}\hyperlink{group___airframe_a57b5f7a74d11723186f34fc183e1581b}{00012} \textcolor{keywordtype}{void} \hyperlink{group___airframe_a57b5f7a74d11723186f34fc183e1581b}{Airframe::initAirframe}(AircraftStruct & AircraftData,
00013                             AirframeStruct & AirframeData)
00014 \{
00015     mass = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"mass"}, \textcolor{stringliteral}{"Aircraft.txt"});
00016     AircraftData.mass       = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"mass"}, \textcolor{stringliteral}{"Aircraft.txt"});
00017     AircraftData.wingarea   = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"wing\_area"}, \textcolor{stringliteral}{"Aircraft.txt"});
00018     AircraftData.wingspan   = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"wing\_span"}, \textcolor{stringliteral}{"Aircraft.txt"});
00019     AircraftData.MAC        = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"MAC"}, \textcolor{stringliteral}{"Aircraft.txt"});
00020     AircraftData.X\_CG       = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"X\_CG"}, \textcolor{stringliteral}{"Aircraft.txt"});
00021     AircraftData.Y\_CG       = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"Y\_CG"}, \textcolor{stringliteral}{"Aircraft.txt"});
00022     AircraftData.Z\_CG       = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"Z\_CG"}, \textcolor{stringliteral}{"Aircraft.txt"});
00023 
00024 
00025     AirframeData.intertiaTensor(0, 0) = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"I\_X"}, \textcolor{stringliteral}{"Aircraft.txt"});
00026     AirframeData.intertiaTensor(0, 1) = 0;
00027     AirframeData.intertiaTensor(0, 2) = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"I\_zx"}, \textcolor{stringliteral}{"Aircraft.txt"});
00028 
00029     AirframeData.intertiaTensor(1, 0) = 0;
00030     AirframeData.intertiaTensor(1, 1) = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"I\_Y"}, \textcolor{stringliteral}{"Aircraft.txt"});
00031     AirframeData.intertiaTensor(1, 2) = 0;
00032 
00033     AirframeData.intertiaTensor(2, 0) = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"I\_zx"}, \textcolor{stringliteral}{"Aircraft.txt"});
00034     AirframeData.intertiaTensor(2, 1) = 0;
00035     AirframeData.intertiaTensor(2, 2) = readIn->\hyperlink{classread_in_data_a9ae979e74958b43424cb6cf4a22043d7}{readInParameter}(\textcolor{stringliteral}{"I\_Z"}, \textcolor{stringliteral}{"Aircraft.txt"});
00036 
00037     AirframeData.accRotBody.setZero();
00038     AirframeData.accRotNED.setZero();
00039     AirframeData.accTransBody.setZero();
00040     AirframeData.accTransNED.setZero();
00041     AirframeData.EulerAngles.setZero();
00042     AirframeData.Eulerdot.setZero();
00043     AirframeData.matBodyToNED.setZero();
00044     AirframeData.matNEDToBody.setZero();
00045     AirframeData.matNEDToTraj.setZero();
00046     AirframeData.posNED.setZero();
00047     AirframeData.velBody.setZero();
00048     AirframeData.velNED.setZero();
00049     AirframeData.rotRatesBody.setZero();
00050 
00051     AirframeData.Xi = 0.0;
00052     AirframeData.Eta = 0.0;
00053     AirframeData.Zeta = 0.0;
00054     
00055 \}
00056 
\Hypertarget{_airframe_8cpp_source_l00057}\hyperlink{group___airframe_a29b3a2854700f77468b6a94c5b7d0372}{00057} \textcolor{keywordtype}{void} \hyperlink{group___airframe_a29b3a2854700f77468b6a94c5b7d0372}{Airframe::updateTranslational}(AerodynamicStruct & AeroData, 
00058                                    ThrustStruct & ThrustData,
00059                                     AirframeStruct & AirframeData)
00060 \{
00061     phi     = AirframeData.EulerAngles(0);
00062     theta   = AirframeData.EulerAngles(1);
00063 
00064     AoA = AeroData.AoA *PI / 180;
00065     AoS = AeroData.AoS *PI / 180;
00066 
00067     TotalForce = AeroData.AeroForces + ThrustData.ThrustForce;
00068 
00069     Vec\_fg << -sin(theta),
00070             sin(phi)*cos(theta),
00071             cos(phi)*cos(theta);
00072 
00073     AirframeData.accTransBody = (TotalForce / mass) + Vec\_fg  * GRAVITATIONAL\_CONSTANT;
00074 \}
00075 
\Hypertarget{_airframe_8cpp_source_l00076}\hyperlink{group___airframe_acf8ce5ef44d07ca8815ca36d13cffcc7}{00076} \textcolor{keywordtype}{void} \hyperlink{group___airframe_acf8ce5ef44d07ca8815ca36d13cffcc7}{Airframe::updateRotational}(AerodynamicStruct & AeroData, 
00077                                 ThrustStruct & ThrustData,
00078                                 AirframeStruct &AirframeData)
00079 \{
00080     
00081     TotalMoment = AeroData.AeroMoments + ThrustData.ThrustMoments;
00082 
00083     Vec\_rotTensor << AirframeData.rotRatesBody(1)*AirframeData.rotRatesBody(2)*(AirframeData.intertiaTensor
      (2, 2) - AirframeData.intertiaTensor(1, 1)) - AirframeData.rotRatesBody(0)*AirframeData.rotRatesBody(1)*
      AirframeData.intertiaTensor(0, 2),
00084         AirframeData.rotRatesBody(2)*AirframeData.rotRatesBody(0)*(AirframeData.intertiaTensor(0, 0) - 
      AirframeData.intertiaTensor(2, 2)) + (AirframeData.rotRatesBody(0)*AirframeData.rotRatesBody(0) - AirframeData.
      rotRatesBody(2)*AirframeData.rotRatesBody(2))*AirframeData.intertiaTensor(0, 2),
00085         AirframeData.rotRatesBody(0)*AirframeData.rotRatesBody(1)*(AirframeData.intertiaTensor(1, 1) - 
      AirframeData.intertiaTensor(0, 0)) + AirframeData.rotRatesBody(1)*AirframeData.rotRatesBody(2)*AirframeData.
      intertiaTensor(0, 2);
00086 
00087     AirframeData.accRotBody = AirframeData.intertiaTensor.inverse()*(TotalMoment - Vec\_rotTensor);
00088 
00089     Eulerdot << 1, sin(phi) * tan(theta), cos(phi) * tan(theta),
00090                 0, cos(phi), -sin(phi),
00091                 0, sin(phi) / cos(theta), cos(phi) / cos(theta);
00092 
00093     AirframeData.Eulerdot = Eulerdot *AirframeData.rotRatesBody;
00094 
00095 \}
\end{DoxyCode}
