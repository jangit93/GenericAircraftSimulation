\hypertarget{matio_2visual__studio_2test_2eigen_2lapack_2eigenvalues_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/lapack/eigenvalues.cpp}
\label{matio_2visual__studio_2test_2eigen_2lapack_2eigenvalues_8cpp_source}\index{eigenvalues.\+cpp@{eigenvalues.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2011 Gael Guennebaud <gael.guennebaud@inria.fr>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "lapack\_common.h"}
00011 \textcolor{preprocessor}{#include <Eigen/Eigenvalues>}
00012 
00013 \textcolor{comment}{// computes eigen values and vectors of a general N-by-N matrix A}
00014 EIGEN\_LAPACK\_FUNC(syev,(\textcolor{keywordtype}{char} *jobz, \textcolor{keywordtype}{char} *uplo, \textcolor{keywordtype}{int}* n, Scalar* a, \textcolor{keywordtype}{int} *lda, Scalar* w, Scalar* \textcolor{comment}{/*work*/}, \textcolor{keywordtype}{
      int}* lwork, \textcolor{keywordtype}{int} *info))
00015 \{
00016   \textcolor{comment}{// TODO exploit the work buffer}
00017   \textcolor{keywordtype}{bool} query\_size = *lwork==-1;
00018   
00019   *info = 0;
00020         \textcolor{keywordflow}{if}(*jobz!=\textcolor{charliteral}{'N'} && *jobz!=\textcolor{charliteral}{'V'})                    *info = -1;
00021   \textcolor{keywordflow}{else}  \textcolor{keywordflow}{if}(UPLO(*uplo)==INVALID)                        *info = -2;
00022   \textcolor{keywordflow}{else}  \textcolor{keywordflow}{if}(*n<0)                                        *info = -3;
00023   \textcolor{keywordflow}{else}  \textcolor{keywordflow}{if}(*lda<std::max(1,*n))                         *info = -5;
00024   \textcolor{keywordflow}{else}  \textcolor{keywordflow}{if}((!query\_size) && *lwork<std::max(1,3**n-1))  *info = -8;
00025     
00026   \textcolor{keywordflow}{if}(*info!=0)
00027   \{
00028     \textcolor{keywordtype}{int} e = -*info;
00029     \textcolor{keywordflow}{return} xerbla\_(SCALAR\_SUFFIX\_UP\textcolor{stringliteral}{"SYEV "}, &e, 6);
00030   \}
00031   
00032   \textcolor{keywordflow}{if}(query\_size)
00033   \{
00034     *lwork = 0;
00035     \textcolor{keywordflow}{return} 0;
00036   \}
00037   
00038   \textcolor{keywordflow}{if}(*n==0)
00039     \textcolor{keywordflow}{return} 0;
00040   
00041   \hyperlink{group___core___module_class_eigen_1_1_matrix}{PlainMatrixType} mat(*n,*n);
00042   \textcolor{keywordflow}{if}(UPLO(*uplo)==UP) mat = matrix(a,*n,*n,*lda).adjoint();
00043   \textcolor{keywordflow}{else}                mat = matrix(a,*n,*n,*lda);
00044   
00045   \textcolor{keywordtype}{bool} computeVectors = *jobz==\textcolor{charliteral}{'V'} || *jobz==\textcolor{charliteral}{'v'};
00046   \hyperlink{group___eigenvalues___module_class_eigen_1_1_self_adjoint_eigen_solver}{SelfAdjointEigenSolver<PlainMatrixType>} eig(mat,computeVectors?
      \hyperlink{group__enums_ggae3e239fb70022eb8747994cf5d68b4a9ada93d8885bde32b876ba4af01d3292cc}{ComputeEigenvectors}:\hyperlink{group__enums_ggae3e239fb70022eb8747994cf5d68b4a9ad0c82cf0a9daf2a63bb6e2f10d51f69c}{EigenvaluesOnly});
00047   
00048   \textcolor{keywordflow}{if}(eig.info()==\hyperlink{group__enums_gga85fad7b87587764e5cf6b513a9e0ee5eaba1c8763d1179778070f365ecc4157a8}{NoConvergence})
00049   \{
00050     make\_vector(w,*n).setZero();
00051     \textcolor{keywordflow}{if}(computeVectors)
00052       matrix(a,*n,*n,*lda).setIdentity();
00053     \textcolor{comment}{//*info = 1;}
00054     \textcolor{keywordflow}{return} 0;
00055   \}
00056   
00057   make\_vector(w,*n) = eig.eigenvalues();
00058   \textcolor{keywordflow}{if}(computeVectors)
00059     matrix(a,*n,*n,*lda) = eig.eigenvectors();
00060   
00061   \textcolor{keywordflow}{return} 0;
00062 \}
\end{DoxyCode}
