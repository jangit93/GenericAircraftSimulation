\hypertarget{matio_2visual__studio_2test_2eigen_2demos_2mandelbrot_2mandelbrot_8h_source}{}\section{matio/visual\+\_\+studio/test/eigen/demos/mandelbrot/mandelbrot.h}
\label{matio_2visual__studio_2test_2eigen_2demos_2mandelbrot_2mandelbrot_8h_source}\index{mandelbrot.\+h@{mandelbrot.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2008 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef MANDELBROT\_H}
00011 \textcolor{preprocessor}{#define MANDELBROT\_H}
00012 
00013 \textcolor{preprocessor}{#include <Eigen/Core>}
00014 \textcolor{preprocessor}{#include <QtGui/QApplication>}
00015 \textcolor{preprocessor}{#include <QtGui/QWidget>}
00016 \textcolor{preprocessor}{#include <QtCore/QThread>}
00017 
00018 \textcolor{keyword}{class }\hyperlink{class_mandelbrot_widget}{MandelbrotWidget};
00019 
00020 \textcolor{keyword}{class }\hyperlink{class_mandelbrot_thread}{MandelbrotThread} : \textcolor{keyword}{public} QThread
00021 \{
00022     \textcolor{keyword}{friend} \textcolor{keyword}{class }\hyperlink{class_mandelbrot_widget}{MandelbrotWidget};
00023     \hyperlink{class_mandelbrot_widget}{MandelbrotWidget} *widget;
00024     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} total\_iter;
00025     \textcolor{keywordtype}{int} id, max\_iter;
00026     \textcolor{keywordtype}{bool} single\_precision;
00027 
00028   \textcolor{keyword}{public}:
00029     \hyperlink{class_mandelbrot_thread}{MandelbrotThread}(\hyperlink{class_mandelbrot_widget}{MandelbrotWidget} *w, \textcolor{keywordtype}{int} i) : widget(w), id(i) \{\}
00030     \textcolor{keywordtype}{void} run();
00031     \textcolor{keyword}{template}<\textcolor{keyword}{typename} Real> \textcolor{keywordtype}{void} render(\textcolor{keywordtype}{int} img\_width, \textcolor{keywordtype}{int} img\_height);
00032 \};
00033 
00034 \textcolor{keyword}{class }\hyperlink{class_mandelbrot_widget}{MandelbrotWidget} : \textcolor{keyword}{public} QWidget
00035 \{
00036     Q\_OBJECT
00037 
00038     \textcolor{keyword}{friend} \textcolor{keyword}{class }\hyperlink{class_mandelbrot_thread}{MandelbrotThread};
00039     Eigen::Vector2d center;
00040     \textcolor{keywordtype}{double} xradius;
00041     \textcolor{keywordtype}{int} size;
00042     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *buffer;
00043     QPoint lastpos;
00044     \textcolor{keywordtype}{int} draft;
00045     \hyperlink{class_mandelbrot_thread}{MandelbrotThread} **threads;
00046     \textcolor{keywordtype}{int} threadcount;
00047 
00048   \textcolor{keyword}{protected}:
00049     \textcolor{keywordtype}{void} resizeEvent(QResizeEvent *);
00050     \textcolor{keywordtype}{void} paintEvent(QPaintEvent *);
00051     \textcolor{keywordtype}{void} mousePressEvent(QMouseEvent *event);
00052     \textcolor{keywordtype}{void} mouseMoveEvent(QMouseEvent *event);
00053 
00054   \textcolor{keyword}{public}:
00055     \hyperlink{class_mandelbrot_widget}{MandelbrotWidget}() : QWidget(), center(0,0), xradius(2),
00056                          size(0), buffer(0), draft(16)
00057     \{
00058       setAutoFillBackground(\textcolor{keyword}{false});
00059       threadcount = QThread::idealThreadCount();
00060       threads = \textcolor{keyword}{new} \hyperlink{class_mandelbrot_thread}{MandelbrotThread}*[threadcount];
00061       \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} th = 0; th < threadcount; th++) threads[th] = \textcolor{keyword}{new} \hyperlink{class_mandelbrot_thread}{MandelbrotThread}(\textcolor{keyword}{this}, th);
00062     \}
00063     ~\hyperlink{class_mandelbrot_widget}{MandelbrotWidget}()
00064     \{
00065       \textcolor{keywordflow}{if}(buffer) \textcolor{keyword}{delete}[]buffer;
00066       \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} th = 0; th < threadcount; th++) \textcolor{keyword}{delete} threads[th];
00067       \textcolor{keyword}{delete}[] threads;
00068     \}
00069 \};
00070 
00071 \textcolor{preprocessor}{#endif // MANDELBROT\_H}
\end{DoxyCode}
