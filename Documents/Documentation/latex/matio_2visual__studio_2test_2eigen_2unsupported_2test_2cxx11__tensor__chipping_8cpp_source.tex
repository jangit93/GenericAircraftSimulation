\hypertarget{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__chipping_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/unsupported/test/cxx11\+\_\+tensor\+\_\+chipping.cpp}
\label{matio_2visual__studio_2test_2eigen_2unsupported_2test_2cxx11__tensor__chipping_8cpp_source}\index{cxx11\+\_\+tensor\+\_\+chipping.\+cpp@{cxx11\+\_\+tensor\+\_\+chipping.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{preprocessor}{#include <Eigen/CXX11/Tensor>}
00013 
00014 \textcolor{keyword}{using} \hyperlink{class_eigen_1_1_tensor}{Eigen::Tensor};
00015 
00016 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00017 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_simple\_chip()
00018 \{
00019   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 5, DataLayout>} tensor(2,3,5,7,11);
00020   tensor.setRandom();
00021 
00022   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip1;
00023   chip1 = tensor.template chip<0>(1);
00024 
00025   VERIFY\_IS\_EQUAL(chip1.dimension(0), 3);
00026   VERIFY\_IS\_EQUAL(chip1.dimension(1), 5);
00027   VERIFY\_IS\_EQUAL(chip1.dimension(2), 7);
00028   VERIFY\_IS\_EQUAL(chip1.dimension(3), 11);
00029 
00030   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; ++i) \{
00031     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 5; ++j) \{
00032       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00033         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 11; ++l) \{
00034           VERIFY\_IS\_EQUAL(chip1(i,j,k,l), tensor(1,i,j,k,l));
00035         \}
00036       \}
00037     \}
00038   \}
00039 
00040   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip2 = tensor.template chip<1>(1);
00041   VERIFY\_IS\_EQUAL(chip2.dimension(0), 2);
00042   VERIFY\_IS\_EQUAL(chip2.dimension(1), 5);
00043   VERIFY\_IS\_EQUAL(chip2.dimension(2), 7);
00044   VERIFY\_IS\_EQUAL(chip2.dimension(3), 11);
00045   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00046     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00047       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00048         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 11; ++l) \{
00049           VERIFY\_IS\_EQUAL(chip2(i,j,k,l), tensor(i,1,j,k,l));
00050         \}
00051       \}
00052     \}
00053   \}
00054 
00055   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip3 = tensor.template chip<2>(2);
00056   VERIFY\_IS\_EQUAL(chip3.dimension(0), 2);
00057   VERIFY\_IS\_EQUAL(chip3.dimension(1), 3);
00058   VERIFY\_IS\_EQUAL(chip3.dimension(2), 7);
00059   VERIFY\_IS\_EQUAL(chip3.dimension(3), 11);
00060   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00061     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00062       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00063         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 11; ++l) \{
00064           VERIFY\_IS\_EQUAL(chip3(i,j,k,l), tensor(i,j,2,k,l));
00065         \}
00066       \}
00067     \}
00068   \}
00069 
00070   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip4(tensor.template chip<3>(5));
00071   VERIFY\_IS\_EQUAL(chip4.dimension(0), 2);
00072   VERIFY\_IS\_EQUAL(chip4.dimension(1), 3);
00073   VERIFY\_IS\_EQUAL(chip4.dimension(2), 5);
00074   VERIFY\_IS\_EQUAL(chip4.dimension(3), 11);
00075   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00076     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00077       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00078         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00079           VERIFY\_IS\_EQUAL(chip4(i,j,k,l), tensor(i,j,k,5,l));
00080         \}
00081       \}
00082     \}
00083   \}
00084 
00085   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip5(tensor.template chip<4>(7));
00086   VERIFY\_IS\_EQUAL(chip5.dimension(0), 2);
00087   VERIFY\_IS\_EQUAL(chip5.dimension(1), 3);
00088   VERIFY\_IS\_EQUAL(chip5.dimension(2), 5);
00089   VERIFY\_IS\_EQUAL(chip5.dimension(3), 7);
00090   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00091     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00092       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00093         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00094           VERIFY\_IS\_EQUAL(chip5(i,j,k,l), tensor(i,j,k,l,7));
00095         \}
00096       \}
00097     \}
00098   \}
00099 \}
00100 
00101 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00102 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_dynamic\_chip()
00103 \{
00104   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 5, DataLayout>} tensor(2,3,5,7,11);
00105   tensor.setRandom();
00106 
00107   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip1;
00108   chip1 = tensor.chip(1, 0);
00109   VERIFY\_IS\_EQUAL(chip1.dimension(0), 3);
00110   VERIFY\_IS\_EQUAL(chip1.dimension(1), 5);
00111   VERIFY\_IS\_EQUAL(chip1.dimension(2), 7);
00112   VERIFY\_IS\_EQUAL(chip1.dimension(3), 11);
00113   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; ++i) \{
00114     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 5; ++j) \{
00115       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00116         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 11; ++l) \{
00117           VERIFY\_IS\_EQUAL(chip1(i,j,k,l), tensor(1,i,j,k,l));
00118         \}
00119       \}
00120     \}
00121   \}
00122 
00123   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip2 = tensor.chip(1, 1);
00124   VERIFY\_IS\_EQUAL(chip2.dimension(0), 2);
00125   VERIFY\_IS\_EQUAL(chip2.dimension(1), 5);
00126   VERIFY\_IS\_EQUAL(chip2.dimension(2), 7);
00127   VERIFY\_IS\_EQUAL(chip2.dimension(3), 11);
00128   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00129     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00130       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00131         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 11; ++l) \{
00132           VERIFY\_IS\_EQUAL(chip2(i,j,k,l), tensor(i,1,j,k,l));
00133         \}
00134       \}
00135     \}
00136   \}
00137 
00138   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip3 = tensor.chip(2, 2);
00139   VERIFY\_IS\_EQUAL(chip3.dimension(0), 2);
00140   VERIFY\_IS\_EQUAL(chip3.dimension(1), 3);
00141   VERIFY\_IS\_EQUAL(chip3.dimension(2), 7);
00142   VERIFY\_IS\_EQUAL(chip3.dimension(3), 11);
00143   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00144     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00145       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00146         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 11; ++l) \{
00147           VERIFY\_IS\_EQUAL(chip3(i,j,k,l), tensor(i,j,2,k,l));
00148         \}
00149       \}
00150     \}
00151   \}
00152 
00153   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip4(tensor.chip(5, 3));
00154   VERIFY\_IS\_EQUAL(chip4.dimension(0), 2);
00155   VERIFY\_IS\_EQUAL(chip4.dimension(1), 3);
00156   VERIFY\_IS\_EQUAL(chip4.dimension(2), 5);
00157   VERIFY\_IS\_EQUAL(chip4.dimension(3), 11);
00158   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00159     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00160       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00161         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00162           VERIFY\_IS\_EQUAL(chip4(i,j,k,l), tensor(i,j,k,5,l));
00163         \}
00164       \}
00165     \}
00166   \}
00167 
00168   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} chip5(tensor.chip(7, 4));
00169   VERIFY\_IS\_EQUAL(chip5.dimension(0), 2);
00170   VERIFY\_IS\_EQUAL(chip5.dimension(1), 3);
00171   VERIFY\_IS\_EQUAL(chip5.dimension(2), 5);
00172   VERIFY\_IS\_EQUAL(chip5.dimension(3), 7);
00173   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00174     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00175       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00176         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00177           VERIFY\_IS\_EQUAL(chip5(i,j,k,l), tensor(i,j,k,l,7));
00178         \}
00179       \}
00180     \}
00181   \}
00182 \}
00183 
00184 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00185 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_chip\_in\_expr() \{
00186   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 5, DataLayout>} input1(2,3,5,7,11);
00187   input1.setRandom();
00188   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} input2(3,5,7,11);
00189   input2.setRandom();
00190 
00191   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} result = input1.template chip<0>(0) + input2;
00192   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; ++i) \{
00193     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 5; ++j) \{
00194       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 7; ++k) \{
00195         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 11; ++l) \{
00196           \textcolor{keywordtype}{float} expected = input1(0,i,j,k,l) + input2(i,j,k,l);
00197           VERIFY\_IS\_EQUAL(result(i,j,k,l), expected);
00198         \}
00199       \}
00200     \}
00201   \}
00202 
00203   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3, DataLayout>} input3(3,7,11);
00204   input3.setRandom();
00205   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 3, DataLayout>} result2 = input1.template chip<0>(0).\textcolor{keyword}{template} 
      chip<1>(2) + input3;
00206   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; ++i) \{
00207     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 7; ++j) \{
00208       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 11; ++k) \{
00209         \textcolor{keywordtype}{float} expected = input1(0,i,2,j,k) + input3(i,j,k);
00210         VERIFY\_IS\_EQUAL(result2(i,j,k), expected);
00211       \}
00212     \}
00213   \}
00214 \}
00215 
00216 \textcolor{keyword}{template}<\textcolor{keywordtype}{int} DataLayout>
00217 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_chip\_as\_lvalue()
00218 \{
00219   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 5, DataLayout>} input1(2,3,5,7,11);
00220   input1.setRandom();
00221 
00222   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} input2(3,5,7,11);
00223   input2.setRandom();
00224   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 5, DataLayout>} tensor = input1;
00225   tensor.template chip<0>(1) = input2;
00226   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00227     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00228       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00229         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00230           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} m = 0; m < 11; ++m) \{
00231             \textcolor{keywordflow}{if} (i != 1) \{
00232               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input1(i,j,k,l,m));
00233             \} \textcolor{keywordflow}{else} \{
00234               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input2(j,k,l,m));
00235             \}
00236           \}
00237         \}
00238       \}
00239     \}
00240   \}
00241 
00242   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} input3(2,5,7,11);
00243   input3.setRandom();
00244   tensor = input1;
00245   tensor.template chip<1>(1) = input3;
00246   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00247     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00248       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00249         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00250           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} m = 0; m < 11; ++m) \{
00251             \textcolor{keywordflow}{if} (j != 1) \{
00252               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input1(i,j,k,l,m));
00253             \} \textcolor{keywordflow}{else} \{
00254               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input3(i,k,l,m));
00255             \}
00256           \}
00257         \}
00258       \}
00259     \}
00260   \}
00261 
00262   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} input4(2,3,7,11);
00263   input4.setRandom();
00264   tensor = input1;
00265   tensor.template chip<2>(3) = input4;
00266   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00267     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00268       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00269         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00270           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} m = 0; m < 11; ++m) \{
00271             \textcolor{keywordflow}{if} (k != 3) \{
00272               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input1(i,j,k,l,m));
00273             \} \textcolor{keywordflow}{else} \{
00274               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input4(i,j,l,m));
00275             \}
00276           \}
00277         \}
00278       \}
00279     \}
00280   \}
00281 
00282   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} input5(2,3,5,11);
00283   input5.setRandom();
00284   tensor = input1;
00285   tensor.template chip<3>(4) = input5;
00286   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00287     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00288       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00289         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00290           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} m = 0; m < 11; ++m) \{
00291             \textcolor{keywordflow}{if} (l != 4) \{
00292               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input1(i,j,k,l,m));
00293             \} \textcolor{keywordflow}{else} \{
00294               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input5(i,j,k,m));
00295             \}
00296           \}
00297         \}
00298       \}
00299     \}
00300   \}
00301 
00302   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 4, DataLayout>} input6(2,3,5,7);
00303   input6.setRandom();
00304   tensor = input1;
00305   tensor.template chip<4>(5) = input6;
00306   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00307     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00308       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00309         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00310           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} m = 0; m < 11; ++m) \{
00311             \textcolor{keywordflow}{if} (m != 5) \{
00312               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input1(i,j,k,l,m));
00313             \} \textcolor{keywordflow}{else} \{
00314               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input6(i,j,k,l));
00315             \}
00316           \}
00317         \}
00318       \}
00319     \}
00320   \}
00321 
00322   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 5, DataLayout>} input7(2,3,5,7,11);
00323   input7.setRandom();
00324   tensor = input1;
00325   tensor.chip(0, 0) = input7.chip(0, 0);
00326   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00327     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00328       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00329         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00330           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} m = 0; m < 11; ++m) \{
00331             \textcolor{keywordflow}{if} (i != 0) \{
00332               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input1(i,j,k,l,m));
00333             \} \textcolor{keywordflow}{else} \{
00334               VERIFY\_IS\_EQUAL(tensor(i,j,k,l,m), input7(i,j,k,l,m));
00335             \}
00336           \}
00337         \}
00338       \}
00339     \}
00340   \}
00341 \}
00342 
00343 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_chip\_raw\_data\_col\_major()
00344 \{
00345   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 5, ColMajor>} tensor(2,3,5,7,11);
00346   tensor.setRandom();
00347 
00348   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<4>(3)), DefaultDevice> Evaluator4;
00349   \textcolor{keyword}{auto} chip = Evaluator4(tensor.chip<4>(3), DefaultDevice());
00350   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 2; ++i) \{
00351     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; ++j) \{
00352       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 5; ++k) \{
00353         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 7; ++l) \{
00354           \textcolor{keywordtype}{int} chip\_index = i + 2 * (j + 3 * (k + 5 * l));
00355           VERIFY\_IS\_EQUAL(chip.data()[chip\_index], tensor(i,j,k,l,3));
00356         \}
00357       \}
00358     \}
00359   \}
00360 
00361   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<0>(0)), DefaultDevice> Evaluator0;
00362   \textcolor{keyword}{auto} chip0 = Evaluator0(tensor.chip<0>(0), DefaultDevice());
00363   VERIFY\_IS\_EQUAL(chip0.data(), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(0));
00364 
00365   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<1>(0)), DefaultDevice> Evaluator1;
00366   \textcolor{keyword}{auto} chip1 = Evaluator1(tensor.chip<1>(0), DefaultDevice());
00367   VERIFY\_IS\_EQUAL(chip1.data(), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(0));
00368 
00369   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<2>(0)), DefaultDevice> Evaluator2;
00370   \textcolor{keyword}{auto} chip2 = Evaluator2(tensor.chip<2>(0), DefaultDevice());
00371   VERIFY\_IS\_EQUAL(chip2.data(), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(0));
00372 
00373   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<3>(0)), DefaultDevice> Evaluator3;
00374   \textcolor{keyword}{auto} chip3 = Evaluator3(tensor.chip<3>(0), DefaultDevice());
00375   VERIFY\_IS\_EQUAL(chip3.data(), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(0));
00376 \}
00377 
00378 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_chip\_raw\_data\_row\_major()
00379 \{
00380   \hyperlink{class_eigen_1_1_tensor}{Tensor<float, 5, RowMajor>} tensor(11,7,5,3,2);
00381   tensor.setRandom();
00382 
00383   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<0>(3)), DefaultDevice> Evaluator0;
00384   \textcolor{keyword}{auto} chip = Evaluator0(tensor.chip<0>(3), DefaultDevice());
00385   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 7; ++i) \{
00386     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 5; ++j) \{
00387       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 3; ++k) \{
00388         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} l = 0; l < 2; ++l) \{
00389           \textcolor{keywordtype}{int} chip\_index = l + 2 * (k + 3 * (j + 5 * i));
00390           VERIFY\_IS\_EQUAL(chip.data()[chip\_index], tensor(3,i,j,k,l));
00391         \}
00392       \}
00393     \}
00394   \}
00395 
00396   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<1>(0)), DefaultDevice> Evaluator1;
00397   \textcolor{keyword}{auto} chip1 = Evaluator1(tensor.chip<1>(0), DefaultDevice());
00398   VERIFY\_IS\_EQUAL(chip1.data(), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(0));
00399 
00400   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<2>(0)), DefaultDevice> Evaluator2;
00401   \textcolor{keyword}{auto} chip2 = Evaluator2(tensor.chip<2>(0), DefaultDevice());
00402   VERIFY\_IS\_EQUAL(chip2.data(), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(0));
00403 
00404   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<3>(0)), DefaultDevice> Evaluator3;
00405   \textcolor{keyword}{auto} chip3 = Evaluator3(tensor.chip<3>(0), DefaultDevice());
00406   VERIFY\_IS\_EQUAL(chip3.data(), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(0));
00407 
00408   \textcolor{keyword}{typedef} TensorEvaluator<decltype(tensor.chip<4>(0)), DefaultDevice> Evaluator4;
00409   \textcolor{keyword}{auto} chip4 = Evaluator4(tensor.chip<4>(0), DefaultDevice());
00410   VERIFY\_IS\_EQUAL(chip4.data(), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(0));
00411 \}
00412 
00413 \textcolor{keywordtype}{void} test\_cxx11\_tensor\_chipping()
00414 \{
00415   CALL\_SUBTEST(test\_simple\_chip<ColMajor>());
00416   CALL\_SUBTEST(test\_simple\_chip<RowMajor>());
00417   CALL\_SUBTEST(test\_dynamic\_chip<ColMajor>());
00418   CALL\_SUBTEST(test\_dynamic\_chip<RowMajor>());
00419   CALL\_SUBTEST(test\_chip\_in\_expr<ColMajor>());
00420   CALL\_SUBTEST(test\_chip\_in\_expr<RowMajor>());
00421   CALL\_SUBTEST(test\_chip\_as\_lvalue<ColMajor>());
00422   CALL\_SUBTEST(test\_chip\_as\_lvalue<RowMajor>());
00423   CALL\_SUBTEST(test\_chip\_raw\_data\_col\_major());
00424   CALL\_SUBTEST(test\_chip\_raw\_data\_row\_major());
00425 \}
\end{DoxyCode}
