\hypertarget{matio_2visual__studio_2test_2eigen_2bench_2quatmul_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/bench/quatmul.cpp}
\label{matio_2visual__studio_2test_2eigen_2bench_2quatmul_8cpp_source}\index{quatmul.\+cpp@{quatmul.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include <iostream>}
00002 \textcolor{preprocessor}{#include <Eigen/Core>}
00003 \textcolor{preprocessor}{#include <Eigen/Geometry>}
00004 \textcolor{preprocessor}{#include <bench/BenchTimer.h>}
00005 
00006 \textcolor{keyword}{using namespace }\hyperlink{namespace_eigen}{Eigen}; 
00007 
00008 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Quat>
00009 EIGEN\_DONT\_INLINE \textcolor{keywordtype}{void} quatmul\_default(\textcolor{keyword}{const} Quat& a, \textcolor{keyword}{const} Quat& b, Quat& c)
00010 \{
00011   c = a * b;
00012 \}
00013 
00014 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Quat>
00015 EIGEN\_DONT\_INLINE \textcolor{keywordtype}{void} quatmul\_novec(\textcolor{keyword}{const} Quat& a, \textcolor{keyword}{const} Quat& b, Quat& c)
00016 \{
00017   c = internal::quat\_product<0, Quat, Quat, typename Quat::Scalar, Aligned>::run(a,b);
00018 \}
00019 
00020 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Quat> \textcolor{keywordtype}{void} bench(\textcolor{keyword}{const} std::string& label)
00021 \{
00022   \textcolor{keywordtype}{int} tries = 10;
00023   \textcolor{keywordtype}{int} rep = 1000000;
00024   \hyperlink{class_eigen_1_1_bench_timer}{BenchTimer} t;
00025   
00026   Quat a(4, 1, 2, 3);
00027   Quat b(2, 3, 4, 5);
00028   Quat c;
00029   
00030   std::cout.precision(3);
00031   
00032   BENCH(t, tries, rep, quatmul\_default(a,b,c));
00033   std::cout << label << \textcolor{stringliteral}{" default "} << 1e3*t.\hyperlink{class_eigen_1_1_bench_timer_ae8b673b0fa356d3432c7a65c79e8af0e}{best}(CPU\_TIMER) << \textcolor{stringliteral}{"ms  \(\backslash\)t"} << 1e-6*double(rep)/(t.
      \hyperlink{class_eigen_1_1_bench_timer_ae8b673b0fa356d3432c7a65c79e8af0e}{best}(CPU\_TIMER)) << \textcolor{stringliteral}{" M mul/s\(\backslash\)n"};
00034   
00035   BENCH(t, tries, rep, quatmul\_novec(a,b,c));
00036   std::cout << label << \textcolor{stringliteral}{" novec   "} << 1e3*t.\hyperlink{class_eigen_1_1_bench_timer_ae8b673b0fa356d3432c7a65c79e8af0e}{best}(CPU\_TIMER) << \textcolor{stringliteral}{"ms  \(\backslash\)t"} << 1e-6*double(rep)/(t.
      \hyperlink{class_eigen_1_1_bench_timer_ae8b673b0fa356d3432c7a65c79e8af0e}{best}(CPU\_TIMER)) << \textcolor{stringliteral}{" M mul/s\(\backslash\)n"};
00037 \}
00038 
00039 \textcolor{keywordtype}{int} main()
00040 \{
00041   bench<Quaternionf>(\textcolor{stringliteral}{"float "});
00042   bench<Quaterniond>(\textcolor{stringliteral}{"double"});
00043 
00044   \textcolor{keywordflow}{return} 0;
00045 
00046 \}
00047 
\end{DoxyCode}
