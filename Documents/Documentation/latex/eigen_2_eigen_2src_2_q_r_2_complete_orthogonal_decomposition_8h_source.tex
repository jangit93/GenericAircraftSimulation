\hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source}{}\section{eigen/\+Eigen/src/\+Q\+R/\+Complete\+Orthogonal\+Decomposition.h}
\label{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source}\index{Complete\+Orthogonal\+Decomposition.\+h@{Complete\+Orthogonal\+Decomposition.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2016 Rasmus Munk Larsen <rmlarsen@google.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#ifndef EIGEN\_COMPLETEORTHOGONALDECOMPOSITION\_H}
00011 \textcolor{preprocessor}{#define EIGEN\_COMPLETEORTHOGONALDECOMPOSITION\_H}
00012 
00013 \textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{
00014 
00015 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00016 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_MatrixType>
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00017}\hyperlink{struct_eigen_1_1internal_1_1traits_3_01_complete_orthogonal_decomposition_3_01___matrix_type_01_4_01_4}{00017} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<\hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition}<\_MatrixType> >
00018     : \hyperlink{struct_eigen_1_1internal_1_1traits}{traits}<\_MatrixType> \{
00019   \textcolor{keyword}{enum} \{ Flags = 0 \};
00020 \};
00021 
00022 \}  \textcolor{comment}{// end namespace internal}
00023 
00047 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_MatrixType>
00048 \textcolor{keyword}{class }\hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition} \{
00049  \textcolor{keyword}{public}:
00050   \textcolor{keyword}{typedef} \_MatrixType MatrixType;
00051   \textcolor{keyword}{enum} \{
00052     RowsAtCompileTime = MatrixType::RowsAtCompileTime,
00053     ColsAtCompileTime = MatrixType::ColsAtCompileTime,
00054     MaxRowsAtCompileTime = MatrixType::MaxRowsAtCompileTime,
00055     MaxColsAtCompileTime = MatrixType::MaxColsAtCompileTime
00056   \};
00057   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::Scalar Scalar;
00058   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::RealScalar RealScalar;
00059   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::StorageIndex StorageIndex;
00060   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1_tensor_lazy_evaluator_writable}{internal::plain\_diag\_type<MatrixType>::type} 
      HCoeffsType;
00061   \textcolor{keyword}{typedef} \hyperlink{group___core___module}{PermutationMatrix<ColsAtCompileTime, MaxColsAtCompileTime>}
00062       PermutationType;
00063   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1_tensor_lazy_evaluator_writable}{internal::plain\_row\_type<MatrixType, Index>::type}
00064       IntRowVectorType;
00065   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1_tensor_lazy_evaluator_writable}{internal::plain\_row\_type<MatrixType>::type} 
      RowVectorType;
00066   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1_tensor_lazy_evaluator_writable}{internal::plain\_row\_type<MatrixType, RealScalar>::type}
00067       RealRowVectorType;
00068   \textcolor{keyword}{typedef} \hyperlink{group___householder___module_class_eigen_1_1_householder_sequence}{HouseholderSequence}<
00069       MatrixType, \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1remove__all}{internal::remove\_all}<
00070                       \textcolor{keyword}{typename} HCoeffsType::ConjugateReturnType>::type>
00071       HouseholderSequenceType;
00072   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} MatrixType::PlainObject PlainObject;
00073 
00074  \textcolor{keyword}{private}:
00075   \textcolor{keyword}{typedef} \textcolor{keyword}{typename} PermutationType::Index PermIndexType;
00076 
00077  \textcolor{keyword}{public}:
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00085}\hyperlink{group___q_r___module_a7ba33814fd3fdc62f6179cdcd655c679}{00085}   \hyperlink{group___q_r___module_a7ba33814fd3fdc62f6179cdcd655c679}{CompleteOrthogonalDecomposition}() : m\_cpqr(), m\_zCoeffs(), m\_temp() \{\}
00086 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00093}\hyperlink{group___q_r___module_aa6c282dd7452ebe754024edb71bebd09}{00093}   \hyperlink{group___q_r___module_aa6c282dd7452ebe754024edb71bebd09}{CompleteOrthogonalDecomposition}(\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows, 
      \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols)
00094       : m\_cpqr(rows, cols), m\_zCoeffs((\hyperlink{namespacestd}{std}::min)(rows, cols)), m\_temp(cols) \{\}
00095 
00112   \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputType>
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00113}\hyperlink{group___q_r___module_afcfaf7a395f853247c23bb52b1ffb1cc}{00113}   \textcolor{keyword}{explicit} \hyperlink{group___q_r___module_afcfaf7a395f853247c23bb52b1ffb1cc}{CompleteOrthogonalDecomposition}(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_struct_eigen_1_1_eigen_base}{EigenBase<InputType>}& matrix)
00114       : m\_cpqr(matrix.rows(), matrix.cols()),
00115         m\_zCoeffs((\hyperlink{namespacestd}{std}::min)(matrix.rows(), matrix.cols())),
00116         m\_temp(matrix.cols())
00117   \{
00118     compute(matrix.\hyperlink{group___core___module_a324b16961a11d2ecfd2d1b7dd7946545}{derived}());
00119   \}
00120 
00127   \textcolor{keyword}{template}<\textcolor{keyword}{typename} InputType>
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00128}\hyperlink{group___q_r___module_a082295ba2aac35a8b8b9e2d46e1d7ce4}{00128}   \textcolor{keyword}{explicit} \hyperlink{group___q_r___module_a082295ba2aac35a8b8b9e2d46e1d7ce4}{CompleteOrthogonalDecomposition}(
      \hyperlink{group___core___module_struct_eigen_1_1_eigen_base}{EigenBase<InputType>}& matrix)
00129     : m\_cpqr(matrix.derived()),
00130       m\_zCoeffs((\hyperlink{namespacestd}{std}::min)(matrix.rows(), matrix.cols())),
00131       m\_temp(matrix.cols())
00132   \{
00133     computeInPlace();
00134   \}
00135 
00136 
00146   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Rhs>
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00147}\hyperlink{group___q_r___module_ab303e177cc7df17e435c79dca9ef5654}{00147}   \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve<CompleteOrthogonalDecomposition, Rhs>} 
      \hyperlink{group___q_r___module_ab303e177cc7df17e435c79dca9ef5654}{solve}(
00148       \textcolor{keyword}{const} \hyperlink{group___core___module_class_eigen_1_1_matrix_base}{MatrixBase<Rhs>}& b)\textcolor{keyword}{ const }\{
00149     eigen\_assert(m\_cpqr.m\_isInitialized &&
00150                  \textcolor{stringliteral}{"CompleteOrthogonalDecomposition is not initialized."});
00151     \textcolor{keywordflow}{return} \hyperlink{group___core___module_class_eigen_1_1_solve}{Solve<CompleteOrthogonalDecomposition, Rhs>}(*\textcolor{keyword}{this}, b.
      derived());
00152   \}
00153 
00154   HouseholderSequenceType householderQ(\textcolor{keywordtype}{void}) \textcolor{keyword}{const};
00155   HouseholderSequenceType matrixQ(\textcolor{keywordtype}{void})\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.householderQ(); \}
00156 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00159}\hyperlink{group___q_r___module_a4cd178f13aefe5189d4beeb3eb1c5897}{00159}   MatrixType \hyperlink{group___q_r___module_a4cd178f13aefe5189d4beeb3eb1c5897}{matrixZ}()\textcolor{keyword}{ const }\{
00160     MatrixType Z = MatrixType::Identity(m\_cpqr.cols(), m\_cpqr.cols());
00161     applyZAdjointOnTheLeftInPlace(Z);
00162     \textcolor{keywordflow}{return} Z.adjoint();
00163   \}
00164 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00168}\hyperlink{group___q_r___module_ad89e2529fc1a8721239d9b6be9613a69}{00168}   \textcolor{keyword}{const} MatrixType& \hyperlink{group___q_r___module_ad89e2529fc1a8721239d9b6be9613a69}{matrixQTZ}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.matrixQR(); \}
00169 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00181}\hyperlink{group___q_r___module_a806213f5c96ff765265f47067229586d}{00181}   \textcolor{keyword}{const} MatrixType& \hyperlink{group___q_r___module_a806213f5c96ff765265f47067229586d}{matrixT}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.matrixQR(); \}
00182 
00183   \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputType>
00184   \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition}& compute(\textcolor{keyword}{const} 
      \hyperlink{group___core___module_struct_eigen_1_1_eigen_base}{EigenBase<InputType>}& matrix) \{
00185     \textcolor{comment}{// Compute the column pivoted QR factorization A P = Q R.}
00186     m\_cpqr.compute(matrix);
00187     computeInPlace();
00188     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00189   \}
00190 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00192}\hyperlink{group___q_r___module_a601c67a4a0bbe9c7b25b885279db9ff2}{00192}   \textcolor{keyword}{const} PermutationType& \hyperlink{group___q_r___module_a601c67a4a0bbe9c7b25b885279db9ff2}{colsPermutation}()\textcolor{keyword}{ const }\{
00193     \textcolor{keywordflow}{return} m\_cpqr.colsPermutation();
00194   \}
00195 
00209   \textcolor{keyword}{typename} MatrixType::RealScalar absDeterminant() \textcolor{keyword}{const};
00210 
00224   \textcolor{keyword}{typename} MatrixType::RealScalar logAbsDeterminant() \textcolor{keyword}{const};
00225 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00233}\hyperlink{group___q_r___module_af348f64b26f8467a020062c22b748806}{00233}   \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} \hyperlink{group___q_r___module_af348f64b26f8467a020062c22b748806}{rank}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.rank(); \}
00234 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00242}\hyperlink{group___q_r___module_aca2b59560c4851b7d7701872990a3426}{00242}   \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} \hyperlink{group___q_r___module_aca2b59560c4851b7d7701872990a3426}{dimensionOfKernel}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.dimensionOfKernel(); \}
00243 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00251}\hyperlink{group___q_r___module_a2740067b81ec3e0ad20a2bea9a5a475f}{00251}   \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \hyperlink{group___q_r___module_a2740067b81ec3e0ad20a2bea9a5a475f}{isInjective}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.isInjective(); \}
00252 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00260}\hyperlink{group___q_r___module_a53dd287d3e1bbc548595d63880fd51bf}{00260}   \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \hyperlink{group___q_r___module_a53dd287d3e1bbc548595d63880fd51bf}{isSurjective}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.isSurjective(); \}
00261 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00269}\hyperlink{group___q_r___module_a7c4f24f868295349a3bb99e5f217b069}{00269}   \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \hyperlink{group___q_r___module_a7c4f24f868295349a3bb99e5f217b069}{isInvertible}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.isInvertible(); \}
00270 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00276}\hyperlink{group___q_r___module_a3c89639299720ce089435d26d6822d6f}{00276}   \textcolor{keyword}{inline} \textcolor{keyword}{const} \hyperlink{class_eigen_1_1_inverse}{Inverse<CompleteOrthogonalDecomposition>} 
      \hyperlink{group___q_r___module_a3c89639299720ce089435d26d6822d6f}{pseudoInverse}()\textcolor{keyword}{ const}
00277 \textcolor{keyword}{  }\{
00278     \textcolor{keywordflow}{return} \hyperlink{class_eigen_1_1_inverse}{Inverse<CompleteOrthogonalDecomposition>}(*this);
00279   \}
00280 
00281   \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.rows(); \}
00282   \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.cols(); \}
00283 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00289}\hyperlink{group___q_r___module_ad25a868ecd499d6dda0119e4d3659504}{00289}   \textcolor{keyword}{inline} \textcolor{keyword}{const} HCoeffsType& \hyperlink{group___q_r___module_ad25a868ecd499d6dda0119e4d3659504}{hCoeffs}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.hCoeffs(); \}
00290 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00296}\hyperlink{group___q_r___module_a0b28c24992d313d4b04d109dcc7e5220}{00296}   \textcolor{keyword}{const} HCoeffsType& \hyperlink{group___q_r___module_a0b28c24992d313d4b04d109dcc7e5220}{zCoeffs}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_zCoeffs; \}
00297 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00317}\hyperlink{group___q_r___module_aa9c9f7cbde9d58ca5552381b70ad8d82}{00317}   \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition}& \hyperlink{group___q_r___module_aa9c9f7cbde9d58ca5552381b70ad8d82}{setThreshold}(\textcolor{keyword}{const} RealScalar
      & threshold) \{
00318     m\_cpqr.\hyperlink{group___q_r___module_aa9c9f7cbde9d58ca5552381b70ad8d82}{setThreshold}(threshold);
00319     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00320   \}
00321 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00330}\hyperlink{group___q_r___module_a27c8da71874be7a64d6723bd0cae9f4f}{00330}   \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition}& \hyperlink{group___q_r___module_a27c8da71874be7a64d6723bd0cae9f4f}{setThreshold}(Default\_t) \{
00331     m\_cpqr.\hyperlink{group___q_r___module_aa9c9f7cbde9d58ca5552381b70ad8d82}{setThreshold}(Default);
00332     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
00333   \}
00334 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00339}\hyperlink{group___q_r___module_a3909f07268496c0f08f1b57331d91075}{00339}   RealScalar \hyperlink{group___q_r___module_a3909f07268496c0f08f1b57331d91075}{threshold}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.threshold(); \}
00340 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00348}\hyperlink{group___q_r___module_af9d7a5bdbc16a4a0bf7394ef0dd208da}{00348}   \textcolor{keyword}{inline} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} \hyperlink{group___q_r___module_af9d7a5bdbc16a4a0bf7394ef0dd208da}{nonzeroPivots}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.nonzeroPivots(); \}
00349 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00353}\hyperlink{group___q_r___module_a5b712a58c13b7e5089be9228ec42f738}{00353}   \textcolor{keyword}{inline} RealScalar \hyperlink{group___q_r___module_a5b712a58c13b7e5089be9228ec42f738}{maxPivot}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_cpqr.maxPivot(); \}
00354 
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00363}\hyperlink{group___q_r___module_a1f5c45f78848cfdbb96963cefbbb3274}{00363}   \hyperlink{group__enums_ga85fad7b87587764e5cf6b513a9e0ee5e}{ComputationInfo} \hyperlink{group___q_r___module_a1f5c45f78848cfdbb96963cefbbb3274}{info}()\textcolor{keyword}{ const }\{
00364     eigen\_assert(m\_cpqr.m\_isInitialized && \textcolor{stringliteral}{"Decomposition is not initialized."});
00365     \textcolor{keywordflow}{return} \hyperlink{group__enums_gga85fad7b87587764e5cf6b513a9e0ee5ea52581b035f4b59c203b8ff999ef5fcea}{Success};
00366   \}
00367 
00368 \textcolor{preprocessor}{#ifndef EIGEN\_PARSED\_BY\_DOXYGEN}
00369   \textcolor{keyword}{template} <\textcolor{keyword}{typename} RhsType, \textcolor{keyword}{typename} DstType>
00370   EIGEN\_DEVICE\_FUNC \textcolor{keywordtype}{void} \_solve\_impl(\textcolor{keyword}{const} RhsType& rhs, DstType& dst) \textcolor{keyword}{const};
00371 \textcolor{preprocessor}{#endif}
00372 
00373  \textcolor{keyword}{protected}:
00374   \textcolor{keyword}{static} \textcolor{keywordtype}{void} check\_template\_parameters() \{
00375     EIGEN\_STATIC\_ASSERT\_NON\_INTEGER(Scalar);
00376   \}
00377 
00378   \textcolor{keywordtype}{void} computeInPlace();
00379 
00382   \textcolor{keyword}{template} <\textcolor{keyword}{typename} Rhs>
00383   \textcolor{keywordtype}{void} applyZAdjointOnTheLeftInPlace(Rhs& rhs) \textcolor{keyword}{const};
00384 
00385   \hyperlink{group___q_r___module}{ColPivHouseholderQR<MatrixType>} m\_cpqr;
00386   HCoeffsType m\_zCoeffs;
00387   RowVectorType m\_temp;
00388 \};
00389 
00390 \textcolor{keyword}{template} <\textcolor{keyword}{typename} MatrixType>
00391 \textcolor{keyword}{typename} MatrixType::RealScalar
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00392}\hyperlink{group___q_r___module_ac040c34ce3fb2b68d3f57adc0c29d526}{00392} \hyperlink{group___q_r___module_ac040c34ce3fb2b68d3f57adc0c29d526}{CompleteOrthogonalDecomposition<MatrixType>::absDeterminant}
      ()\textcolor{keyword}{ const }\{
00393   \textcolor{keywordflow}{return} m\_cpqr.absDeterminant();
00394 \}
00395 
00396 \textcolor{keyword}{template} <\textcolor{keyword}{typename} MatrixType>
00397 \textcolor{keyword}{typename} MatrixType::RealScalar
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00398}\hyperlink{group___q_r___module_ad59d6dc78dab52a0038ac372b4a72c0d}{00398} \hyperlink{group___q_r___module_ad59d6dc78dab52a0038ac372b4a72c0d}{CompleteOrthogonalDecomposition<MatrixType>::logAbsDeterminant}
      ()\textcolor{keyword}{ const }\{
00399   \textcolor{keywordflow}{return} m\_cpqr.logAbsDeterminant();
00400 \}
00401 
00409 \textcolor{keyword}{template} <\textcolor{keyword}{typename} MatrixType>
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00410}\hyperlink{group___q_r___module_adb0b963d7d8f96492904e8eda03efbf5}{00410} \textcolor{keywordtype}{void} \hyperlink{group___q_r___module_adb0b963d7d8f96492904e8eda03efbf5}{CompleteOrthogonalDecomposition<MatrixType>::computeInPlace}
      ()
00411 \{
00412   check\_template\_parameters();
00413 
00414   \textcolor{comment}{// the column permutation is stored as int indices, so just to be sure:}
00415   eigen\_assert(m\_cpqr.cols() <= \hyperlink{group___core___module_struct_eigen_1_1_num_traits}{NumTraits<int>::highest}());
00416 
00417   \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rank = m\_cpqr.rank();
00418   \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols = m\_cpqr.cols();
00419   \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rows = m\_cpqr.rows();
00420   m\_zCoeffs.resize((std::min)(rows, cols));
00421   m\_temp.resize(cols);
00422 
00423   \textcolor{keywordflow}{if} (rank < cols) \{
00424     \textcolor{comment}{// We have reduced the (permuted) matrix to the form}
00425     \textcolor{comment}{//   [R11 R12]}
00426     \textcolor{comment}{//   [ 0  R22]}
00427     \textcolor{comment}{// where R11 is r-by-r (r = rank) upper triangular, R12 is}
00428     \textcolor{comment}{// r-by-(n-r), and R22 is empty or the norm of R22 is negligible.}
00429     \textcolor{comment}{// We now compute the complete orthogonal decomposition by applying}
00430     \textcolor{comment}{// Householder transformations from the right to the upper trapezoidal}
00431     \textcolor{comment}{// matrix X = [R11 R12] to zero out R12 and obtain the factorization}
00432     \textcolor{comment}{// [R11 R12] = [T11 0] * Z, where T11 is r-by-r upper triangular and}
00433     \textcolor{comment}{// Z = Z(0) * Z(1) ... Z(r-1) is an n-by-n orthogonal matrix.}
00434     \textcolor{comment}{// We store the data representing Z in R12 and m\_zCoeffs.}
00435     \textcolor{keywordflow}{for} (\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} k = rank - 1; k >= 0; --k) \{
00436       \textcolor{keywordflow}{if} (k != rank - 1) \{
00437         \textcolor{comment}{// Given the API for Householder reflectors, it is more convenient if}
00438         \textcolor{comment}{// we swap the leading parts of columns k and r-1 (zero-based) to form}
00439         \textcolor{comment}{// the matrix X\_k = [X(0:k, k), X(0:k, r:n)]}
00440         m\_cpqr.m\_qr.col(k).head(k + 1).swap(
00441             m\_cpqr.m\_qr.col(rank - 1).head(k + 1));
00442       \}
00443       \textcolor{comment}{// Construct Householder reflector Z(k) to zero out the last row of X\_k,}
00444       \textcolor{comment}{// i.e. choose Z(k) such that}
00445       \textcolor{comment}{// [X(k, k), X(k, r:n)] * Z(k) = [beta, 0, .., 0].}
00446       RealScalar beta;
00447       m\_cpqr.m\_qr.row(k)
00448           .tail(cols - rank + 1)
00449           .makeHouseholderInPlace(m\_zCoeffs(k), beta);
00450       m\_cpqr.m\_qr(k, rank - 1) = beta;
00451       \textcolor{keywordflow}{if} (k > 0) \{
00452         \textcolor{comment}{// Apply Z(k) to the first k rows of X\_k}
00453         m\_cpqr.m\_qr.topRightCorner(k, cols - rank + 1)
00454             .applyHouseholderOnTheRight(
00455                 m\_cpqr.m\_qr.row(k).tail(cols - rank).transpose(), m\_zCoeffs(k),
00456                 &m\_temp(0));
00457       \}
00458       \textcolor{keywordflow}{if} (k != rank - 1) \{
00459         \textcolor{comment}{// Swap X(0:k,k) back to its proper location.}
00460         m\_cpqr.m\_qr.col(k).head(k + 1).swap(
00461             m\_cpqr.m\_qr.col(rank - 1).head(k + 1));
00462       \}
00463     \}
00464   \}
00465 \}
00466 
00467 \textcolor{keyword}{template} <\textcolor{keyword}{typename} MatrixType>
00468 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Rhs>
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00469}\hyperlink{group___q_r___module_a0a89641e0b4ea92c515405f2a31e6abe}{00469} \textcolor{keywordtype}{void} \hyperlink{group___q_r___module_a0a89641e0b4ea92c515405f2a31e6abe}{CompleteOrthogonalDecomposition<MatrixType>::applyZAdjointOnTheLeftInPlace}
      (
00470     Rhs& rhs)\textcolor{keyword}{ const }\{
00471   \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols = this->cols();
00472   \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} nrhs = rhs.cols();
00473   \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rank = this->rank();
00474   \hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<typename MatrixType::Scalar, Dynamic, 1>} temp((
      std::max)(cols, nrhs));
00475   \textcolor{keywordflow}{for} (\hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} k = 0; k < rank; ++k) \{
00476     \textcolor{keywordflow}{if} (k != rank - 1) \{
00477       rhs.row(k).swap(rhs.row(rank - 1));
00478     \}
00479     rhs.middleRows(rank - 1, cols - rank + 1)
00480         .applyHouseholderOnTheLeft(
00481             matrixQTZ().row(k).tail(cols - rank).adjoint(), zCoeffs()(k),
00482             &temp(0));
00483     \textcolor{keywordflow}{if} (k != rank - 1) \{
00484       rhs.row(k).swap(rhs.row(rank - 1));
00485     \}
00486   \}
00487 \}
00488 
00489 \textcolor{preprocessor}{#ifndef EIGEN\_PARSED\_BY\_DOXYGEN}
00490 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_MatrixType>
00491 \textcolor{keyword}{template} <\textcolor{keyword}{typename} RhsType, \textcolor{keyword}{typename} DstType>
00492 \textcolor{keywordtype}{void} \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition<\_MatrixType>::\_solve\_impl}
      (
00493     \textcolor{keyword}{const} RhsType& rhs, DstType& dst)\textcolor{keyword}{ const }\{
00494   eigen\_assert(rhs.rows() == this->rows());
00495 
00496   \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} rank = this->rank();
00497   \textcolor{keywordflow}{if} (rank == 0) \{
00498     dst.setZero();
00499     \textcolor{keywordflow}{return};
00500   \}
00501 
00502   \textcolor{comment}{// Compute c = Q^* * rhs}
00503   \textcolor{comment}{// Note that the matrix Q = H\_0^* H\_1^*... so its inverse is}
00504   \textcolor{comment}{// Q^* = (H\_0 H\_1 ...)^T}
00505   \textcolor{keyword}{typename} RhsType::PlainObject c(rhs);
00506   c.applyOnTheLeft(
00507       \hyperlink{group___householder___module_ga4bd4b85120e014cf1125a054b02d4d92}{householderSequence}(matrixQTZ(), hCoeffs()).setLength(rank).transpose());
00508 
00509   \textcolor{comment}{// Solve T z = c(1:rank, :)}
00510   dst.topRows(rank) = matrixT()
00511                           .topLeftCorner(rank, rank)
00512                           .template triangularView<Upper>()
00513                           .solve(c.topRows(rank));
00514 
00515   \textcolor{keyword}{const} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index} cols = this->cols();
00516   \textcolor{keywordflow}{if} (rank < cols) \{
00517     \textcolor{comment}{// Compute y = Z^* * [ z ]}
00518     \textcolor{comment}{//                   [ 0 ]}
00519     dst.bottomRows(cols - rank).setZero();
00520     applyZAdjointOnTheLeftInPlace(dst);
00521   \}
00522 
00523   \textcolor{comment}{// Undo permutation to get x = P^\{-1\} * y.}
00524   dst = colsPermutation() * dst;
00525 \}
00526 \textcolor{preprocessor}{#endif}
00527 
00528 \textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
00529 
00530 \textcolor{keyword}{template}<\textcolor{keyword}{typename} DstXprType, \textcolor{keyword}{typename} MatrixType>
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00531}\hyperlink{struct_eigen_1_1internal_1_1_assignment_3_01_dst_xpr_type_00_01_inverse_3_01_complete_orthogonalcd5d352c5ea4dcae855a0a56ba39cbfd}{00531} \textcolor{keyword}{struct }\hyperlink{struct_eigen_1_1internal_1_1_assignment}{Assignment}<DstXprType, \hyperlink{class_eigen_1_1_inverse}{Inverse}<
      \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition}<MatrixType> >, 
      \hyperlink{namespaceinternal}{internal}::\hyperlink{struct_eigen_1_1internal_1_1assign__op}{assign\_op}<typename DstXprType::Scalar,typename CompleteOrthogonalDecomposition<M
      atrixType>::Scalar>, \hyperlink{struct_eigen_1_1internal_1_1_dense2_dense}{Dense2Dense}>
00532 \{
00533   \textcolor{keyword}{typedef} \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition<MatrixType>} 
      \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CodType};
00534   \textcolor{keyword}{typedef} \hyperlink{class_eigen_1_1_inverse}{Inverse<CodType>} \hyperlink{class_eigen_1_1_inverse}{SrcXprType};
00535   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(DstXprType &dst, \textcolor{keyword}{const} SrcXprType &src, \textcolor{keyword}{const} 
      \hyperlink{struct_eigen_1_1internal_1_1assign__op}{internal::assign\_op<typename DstXprType::Scalar,typename CodType::Scalar>}
       &)
00536   \{
00537     dst = src.nestedExpression().solve(MatrixType::Identity(src.rows(), src.rows()));
00538   \}
00539 \};
00540 
00541 \} \textcolor{comment}{// end namespace internal}
00542 
00544 \textcolor{keyword}{template} <\textcolor{keyword}{typename} MatrixType>
00545 \textcolor{keyword}{typename} \hyperlink{group___householder___module_class_eigen_1_1_householder_sequence}{CompleteOrthogonalDecomposition<MatrixType>::HouseholderSequenceType}
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00546}\hyperlink{group___q_r___module_ac95b93ddad59c6e57d06fcd4737b27e1}{00546} \hyperlink{group___q_r___module_ac95b93ddad59c6e57d06fcd4737b27e1}{CompleteOrthogonalDecomposition<MatrixType>::householderQ}
      ()\textcolor{keyword}{ const }\{
00547   \textcolor{keywordflow}{return} m\_cpqr.householderQ();
00548 \}
00549 
00554 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Derived>
00555 \textcolor{keyword}{const} \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition<typename MatrixBase<Derived>::PlainObject}
      >
\Hypertarget{eigen_2_eigen_2src_2_q_r_2_complete_orthogonal_decomposition_8h_source_l00556}\hyperlink{group___core___module_ae90b6846f05bd30b8d52b66e427e3e09}{00556} \hyperlink{group___core___module_ae90b6846f05bd30b8d52b66e427e3e09}{MatrixBase<Derived>::completeOrthogonalDecomposition}()\textcolor{keyword}{
       const }\{
00557   \textcolor{keywordflow}{return} \hyperlink{group___q_r___module_class_eigen_1_1_complete_orthogonal_decomposition}{CompleteOrthogonalDecomposition<PlainObject>}(eval());
00558 \}
00559 
00560 \}  \textcolor{comment}{// end namespace Eigen}
00561 
00562 \textcolor{preprocessor}{#endif  // EIGEN\_COMPLETEORTHOGONALDECOMPOSITION\_H}
\end{DoxyCode}
