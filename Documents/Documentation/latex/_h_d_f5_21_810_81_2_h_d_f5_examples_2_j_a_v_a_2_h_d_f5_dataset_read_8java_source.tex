\hypertarget{_h_d_f5_21_810_81_2_h_d_f5_examples_2_j_a_v_a_2_h_d_f5_dataset_read_8java_source}{}\section{H\+D\+F5/1.10.1/\+H\+D\+F5\+Examples/\+J\+A\+V\+A/\+H\+D\+F5\+Dataset\+Read.java}
\label{_h_d_f5_21_810_81_2_h_d_f5_examples_2_j_a_v_a_2_h_d_f5_dataset_read_8java_source}\index{H\+D\+F5\+Dataset\+Read.\+java@{H\+D\+F5\+Dataset\+Read.\+java}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *}
00002 \textcolor{comment}{ * Copyright by The HDF Group.                                               *}
00003 \textcolor{comment}{ * Copyright by the Board of Trustees of the University of Illinois.         *}
00004 \textcolor{comment}{ * All rights reserved.                                                      *}
00005 \textcolor{comment}{ *                                                                           *}
00006 \textcolor{comment}{ * This file is part of HDF5.  The full HDF5 copyright notice, including     *}
00007 \textcolor{comment}{ * terms governing use, modification, and redistribution, is contained in    *}
00008 \textcolor{comment}{ * the files COPYING and Copyright.html.  COPYING can be found at the root   *}
00009 \textcolor{comment}{ * of the source code distribution tree; Copyright.html can be found at the  *}
00010 \textcolor{comment}{ * root level of an installed copy of the electronic HDF5 document set and   *}
00011 \textcolor{comment}{ * is linked from the top-level documents page.  It can also be found at     *}
00012 \textcolor{comment}{ * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *}
00013 \textcolor{comment}{ * access to either file, you may request a copy from help@hdfgroup.org.     *}
00014 \textcolor{comment}{ * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */}
00015 
00016 \textcolor{keyword}{import} hdf.hdf5lib.H5;
00017 \textcolor{keyword}{import} hdf.hdf5lib.HDF5Constants;
00018 
\Hypertarget{_h_d_f5_21_810_81_2_h_d_f5_examples_2_j_a_v_a_2_h_d_f5_dataset_read_8java_source_l00035}\hyperlink{class_h_d_f5_dataset_read}{00035} \textcolor{keyword}{public} \textcolor{keyword}{class }\hyperlink{class_h_d_f5_dataset_read}{HDF5DatasetRead} \{
00036     \textcolor{keyword}{private} \textcolor{keyword}{static} String fname  = \textcolor{stringliteral}{"HDF5DatasetRead.h5"};
00037     \textcolor{keyword}{private} \textcolor{keyword}{static} String dsname  = \textcolor{stringliteral}{"2D 32-bit integer 20x10"};
00038     \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{long}[] dims2D = \{ 20, 10 \};
00039 
00040     \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{void} main(String args[]) \textcolor{keywordflow}{throws} Exception \{
00041         \textcolor{keywordtype}{long} file\_id = -1;
00042         \textcolor{keywordtype}{long} dataset\_id = -1;
00043 
00044         \textcolor{comment}{// create the file and add groups and dataset into the file}
00045         createFile();
00046 
00047         \textcolor{comment}{// Open file using the default properties.}
00048         \textcolor{keywordflow}{try} \{
00049             file\_id = \hyperlink{namespace_h5}{H5}.H5Fopen(fname, HDF5Constants.H5F\_ACC\_RDWR, HDF5Constants.H5P\_DEFAULT);
00050         \}
00051         \textcolor{keywordflow}{catch} (Exception e) \{
00052             e.printStackTrace();
00053         \}
00054 
00055         \textcolor{comment}{// Open dataset using the default properties.}
00056         \textcolor{keywordflow}{try} \{
00057             \textcolor{keywordflow}{if} (file\_id >= 0)
00058                 dataset\_id = \hyperlink{namespace_h5}{H5}.H5Dopen(file\_id, dsname, HDF5Constants.H5P\_DEFAULT);
00059         \}
00060         \textcolor{keywordflow}{catch} (Exception e) \{
00061             e.printStackTrace();
00062         \}
00063 
00064         \textcolor{comment}{// Allocate array of pointers to two-dimensional arrays (the}
00065         \textcolor{comment}{// elements of the dataset.}
00066         \textcolor{keywordtype}{int}[][] dataRead = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[(int) dims2D[0]][(\textcolor{keywordtype}{int}) (dims2D[1])];
00067 
00068         \textcolor{keywordflow}{try} \{
00069             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00070                 \hyperlink{namespace_h5}{H5}.H5Dread(dataset\_id, HDF5Constants.H5T\_NATIVE\_INT,
00071                         HDF5Constants.H5S\_ALL, HDF5Constants.H5S\_ALL,
00072                         HDF5Constants.H5P\_DEFAULT, dataRead);
00073         \}
00074         \textcolor{keywordflow}{catch} (Exception e) \{
00075             e.printStackTrace();
00076         \}
00077 
00078         \textcolor{comment}{// print out the data values}
00079         \hyperlink{namespace_system}{System}.out.println(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)nOriginal Data Values"});
00080         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 20; i++) \{
00081             \hyperlink{namespace_system}{System}.out.print(\textcolor{stringliteral}{"\(\backslash\)n"} + dataRead[i][0]);
00082             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 1; j < 10; j++) \{
00083                 \hyperlink{namespace_system}{System}.out.print(\textcolor{stringliteral}{", "} + dataRead[i][j]);
00084             \}
00085         \}
00086 
00087         \textcolor{comment}{// change data value and write it to file.}
00088         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 20; i++) \{
00089             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 10; j++) \{
00090                 dataRead[i][j]++;
00091             \}
00092         \}
00093 
00094         \textcolor{comment}{// Write the data to the dataset.}
00095         \textcolor{keywordflow}{try} \{
00096             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00097                 \hyperlink{namespace_h5}{H5}.H5Dwrite(dataset\_id, HDF5Constants.H5T\_NATIVE\_INT,
00098                         HDF5Constants.H5S\_ALL, HDF5Constants.H5S\_ALL, HDF5Constants.H5P\_DEFAULT,
00099                         dataRead);
00100         \}
00101         \textcolor{keywordflow}{catch} (Exception e) \{
00102             e.printStackTrace();
00103         \}
00104 
00105         \textcolor{comment}{// reload the data value}
00106         \textcolor{keywordtype}{int}[][] dataModified = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[(int) dims2D[0]][(\textcolor{keywordtype}{int}) (dims2D[1])];
00107 
00108         \textcolor{keywordflow}{try} \{
00109             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00110                 \hyperlink{namespace_h5}{H5}.H5Dread(dataset\_id, HDF5Constants.H5T\_NATIVE\_INT,
00111                         HDF5Constants.H5S\_ALL, HDF5Constants.H5S\_ALL,
00112                         HDF5Constants.H5P\_DEFAULT, dataModified);
00113         \}
00114         \textcolor{keywordflow}{catch} (Exception e) \{
00115             e.printStackTrace();
00116         \}
00117 
00118         \textcolor{comment}{// print out the modified data values}
00119         \hyperlink{namespace_system}{System}.out.println(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)nModified Data Values"});
00120         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 20; i++) \{
00121             \hyperlink{namespace_system}{System}.out.print(\textcolor{stringliteral}{"\(\backslash\)n"} + dataModified[i][0]);
00122             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 1; j < 10; j++) \{
00123                 \hyperlink{namespace_system}{System}.out.print(\textcolor{stringliteral}{", "} + dataModified[i][j]);
00124             \}
00125         \}
00126 
00127         \textcolor{comment}{// Close the dataset.}
00128         \textcolor{keywordflow}{try} \{
00129             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00130                 \hyperlink{namespace_h5}{H5}.H5Dclose(dataset\_id);
00131         \}
00132         \textcolor{keywordflow}{catch} (Exception e) \{
00133             e.printStackTrace();
00134         \}
00135 
00136         \textcolor{comment}{// Close the file.}
00137         \textcolor{keywordflow}{try} \{
00138             \textcolor{keywordflow}{if} (file\_id >= 0)
00139                 \hyperlink{namespace_h5}{H5}.H5Fclose(file\_id);
00140         \}
00141         \textcolor{keywordflow}{catch} (Exception e) \{
00142             e.printStackTrace();
00143         \}
00144     \}
00145 
00153     \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{void} createFile() \textcolor{keywordflow}{throws} Exception \{
00154         \textcolor{keywordtype}{long} file\_id = -1;
00155         \textcolor{keywordtype}{long} dataspace\_id = -1;
00156         \textcolor{keywordtype}{long} dataset\_id = -1;
00157 
00158         \textcolor{comment}{// Create a new file using default properties.}
00159         \textcolor{keywordflow}{try} \{
00160             file\_id = \hyperlink{namespace_h5}{H5}.H5Fcreate(fname, HDF5Constants.H5F\_ACC\_TRUNC,
00161                     HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00162         \}
00163         \textcolor{keywordflow}{catch} (Exception e) \{
00164             e.printStackTrace();
00165         \}
00166 
00167         \textcolor{comment}{// Create the data space for the dataset.}
00168         \textcolor{keywordflow}{try} \{
00169             dataspace\_id = \hyperlink{namespace_h5}{H5}.H5Screate\_simple(2, dims2D, null);
00170         \}
00171         \textcolor{keywordflow}{catch} (Exception e) \{
00172             e.printStackTrace();
00173         \}
00174 
00175         \textcolor{comment}{// Create the dataset.}
00176         \textcolor{keywordflow}{try} \{
00177             \textcolor{keywordflow}{if} ((file\_id >= 0) && (dataspace\_id >= 0))
00178                 dataset\_id = \hyperlink{namespace_h5}{H5}.H5Dcreate(file\_id, dsname,
00179                         HDF5Constants.H5T\_STD\_I32LE, dataspace\_id,
00180                         HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT, HDF5Constants.H5P\_DEFAULT);
00181         \}
00182         \textcolor{keywordflow}{catch} (Exception e) \{
00183             e.printStackTrace();
00184         \}
00185 
00186         \textcolor{comment}{// Terminate access to the data space.}
00187         \textcolor{keywordflow}{try} \{
00188             \textcolor{keywordflow}{if} (dataspace\_id >= 0)
00189                 \hyperlink{namespace_h5}{H5}.H5Sclose(dataspace\_id);
00190         \}
00191         \textcolor{keywordflow}{catch} (Exception e) \{
00192             e.printStackTrace();
00193         \}
00194 
00195         \textcolor{comment}{// set the data values}
00196         \textcolor{keywordtype}{int}[] dataIn = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[20 * 10];
00197         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 20; i++) \{
00198             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 10; j++) \{
00199                 dataIn[i * 10 + j] = i * 100 + j;
00200             \}
00201         \}
00202 
00203         \textcolor{comment}{// Write the data to the dataset.}
00204         \textcolor{keywordflow}{try} \{
00205             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00206                 \hyperlink{namespace_h5}{H5}.H5Dwrite(dataset\_id, HDF5Constants.H5T\_NATIVE\_INT,
00207                         HDF5Constants.H5S\_ALL, HDF5Constants.H5S\_ALL,
00208                         HDF5Constants.H5P\_DEFAULT, dataIn);
00209         \}
00210         \textcolor{keywordflow}{catch} (Exception e) \{
00211             e.printStackTrace();
00212         \}
00213 
00214         \textcolor{comment}{// End access to the dataset and release resources used by it.}
00215         \textcolor{keywordflow}{try} \{
00216             \textcolor{keywordflow}{if} (dataset\_id >= 0)
00217                 \hyperlink{namespace_h5}{H5}.H5Dclose(dataset\_id);
00218         \}
00219         \textcolor{keywordflow}{catch} (Exception e) \{
00220             e.printStackTrace();
00221         \}
00222 
00223         \textcolor{comment}{// Close the file.}
00224         \textcolor{keywordflow}{try} \{
00225             \textcolor{keywordflow}{if} (file\_id >= 0)
00226                 \hyperlink{namespace_h5}{H5}.H5Fclose(file\_id);
00227         \}
00228         \textcolor{keywordflow}{catch} (Exception e) \{
00229             e.printStackTrace();
00230         \}
00231     \}
00232 
00233 \}
\end{DoxyCode}
