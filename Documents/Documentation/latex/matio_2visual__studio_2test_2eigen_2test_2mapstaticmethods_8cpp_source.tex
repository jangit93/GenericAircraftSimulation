\hypertarget{matio_2visual__studio_2test_2eigen_2test_2mapstaticmethods_8cpp_source}{}\section{matio/visual\+\_\+studio/test/eigen/test/mapstaticmethods.cpp}
\label{matio_2visual__studio_2test_2eigen_2test_2mapstaticmethods_8cpp_source}\index{mapstaticmethods.\+cpp@{mapstaticmethods.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
00002 \textcolor{comment}{// for linear algebra.}
00003 \textcolor{comment}{//}
00004 \textcolor{comment}{// Copyright (C) 2011 Benoit Jacob <jacob.benoit.1@gmail.com>}
00005 \textcolor{comment}{//}
00006 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
00007 \textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
00008 \textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}
00009 
00010 \textcolor{preprocessor}{#include "main.h"}
00011 
00012 \textcolor{keywordtype}{float} *ptr;
00013 \textcolor{keyword}{const} \textcolor{keywordtype}{float} *const\_ptr;
00014 
00015 \textcolor{keyword}{template}<\textcolor{keyword}{typename} PlainObjectType,
00016          \textcolor{keywordtype}{bool} IsDynamicSize = PlainObjectType::SizeAtCompileTime == \hyperlink{namespace_eigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic},
00017          \textcolor{keywordtype}{bool} IsVector = PlainObjectType::IsVectorAtCompileTime
00018 >
00019 \textcolor{keyword}{struct }\hyperlink{structmapstaticmethods__impl}{mapstaticmethods\_impl} \{\};
00020 
00021 \textcolor{keyword}{template}<\textcolor{keyword}{typename} PlainObjectType, \textcolor{keywordtype}{bool} IsVector>
00022 \textcolor{keyword}{struct }\hyperlink{structmapstaticmethods__impl}{mapstaticmethods\_impl}<PlainObjectType, false, IsVector>
00023 \{
00024   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(\textcolor{keyword}{const} PlainObjectType& m)
00025   \{
00026     \hyperlink{structmapstaticmethods__impl}{mapstaticmethods\_impl<PlainObjectType, true, IsVector>::run}
      (m);
00027 
00028     \textcolor{keywordtype}{int} i = internal::random<int>(2,5), j = internal::random<int>(2,5);
00029 
00030     PlainObjectType::Map(ptr).setZero();
00031     PlainObjectType::MapAligned(ptr).setZero();
00032     PlainObjectType::Map(const\_ptr).sum();
00033     PlainObjectType::MapAligned(const\_ptr).sum();
00034 
00035     PlainObjectType::Map(ptr, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).setZero();
00036     PlainObjectType::MapAligned(ptr, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).setZero();
00037     PlainObjectType::Map(const\_ptr, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).sum();
00038     PlainObjectType::MapAligned(const\_ptr, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).sum();
00039 
00040     PlainObjectType::Map(ptr, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<2>}()).setZero();
00041     PlainObjectType::MapAligned(ptr, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<3>}()).setZero();
00042     PlainObjectType::Map(const\_ptr, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<4>}()).sum();
00043     PlainObjectType::MapAligned(const\_ptr, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<5>}()).sum();
00044 
00045     PlainObjectType::Map(ptr, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<>}(i)).setZero();
00046     PlainObjectType::MapAligned(ptr, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<>}(i)).setZero();
00047     PlainObjectType::Map(const\_ptr, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<>}(i)).sum();
00048     PlainObjectType::MapAligned(const\_ptr, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<>}(i)).sum();
00049 
00050     PlainObjectType::Map(ptr, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<2>}()).setZero();
00051     PlainObjectType::MapAligned(ptr, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<3>}()).setZero();
00052     PlainObjectType::Map(const\_ptr, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<4>}()).sum();
00053     PlainObjectType::MapAligned(const\_ptr, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<5>}()).sum();
00054 
00055     PlainObjectType::Map(ptr, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<Dynamic, Dynamic>}(i,j)).setZero();
00056     PlainObjectType::MapAligned(ptr, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<2,Dynamic>}(2,i)).setZero();
00057     PlainObjectType::Map(const\_ptr, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<Dynamic,3>}(i,3)).sum();
00058     PlainObjectType::MapAligned(const\_ptr, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<Dynamic, Dynamic>}(i,j)).sum();
00059 
00060     PlainObjectType::Map(ptr, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<2,3>}()).setZero();
00061     PlainObjectType::MapAligned(ptr, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<3,4>}()).setZero();
00062     PlainObjectType::Map(const\_ptr, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<2,4>}()).sum();
00063     PlainObjectType::MapAligned(const\_ptr, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<5,3>}()).sum();
00064   \}
00065 \};
00066 
00067 \textcolor{keyword}{template}<\textcolor{keyword}{typename} PlainObjectType>
00068 \textcolor{keyword}{struct }\hyperlink{structmapstaticmethods__impl}{mapstaticmethods\_impl}<PlainObjectType, true, false>
00069 \{
00070   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(\textcolor{keyword}{const} PlainObjectType& m)
00071   \{
00072     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} PlainObjectType::Index \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
00073     Index rows = m.rows(), cols = m.cols();
00074 
00075     \textcolor{keywordtype}{int} i = internal::random<int>(2,5), j = internal::random<int>(2,5);
00076 
00077     PlainObjectType::Map(ptr, rows, cols).setZero();
00078     PlainObjectType::MapAligned(ptr, rows, cols).setZero();
00079     PlainObjectType::Map(const\_ptr, rows, cols).sum();
00080     PlainObjectType::MapAligned(const\_ptr, rows, cols).sum();
00081 
00082     PlainObjectType::Map(ptr, rows, cols, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).setZero();
00083     PlainObjectType::MapAligned(ptr, rows, cols, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).setZero();
00084     PlainObjectType::Map(const\_ptr, rows, cols, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).sum();
00085     PlainObjectType::MapAligned(const\_ptr, rows, cols, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).sum();
00086 
00087     PlainObjectType::Map(ptr, rows, cols, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<2>}()).setZero();
00088     PlainObjectType::MapAligned(ptr, rows, cols, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<3>}()).setZero();
00089     PlainObjectType::Map(const\_ptr, rows, cols, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<4>}()).sum();
00090     PlainObjectType::MapAligned(const\_ptr, rows, cols, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<5>}()).sum();
00091 
00092     PlainObjectType::Map(ptr, rows, cols, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<>}(i)).setZero();
00093     PlainObjectType::MapAligned(ptr, rows, cols, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<>}(i)).setZero();
00094     PlainObjectType::Map(const\_ptr, rows, cols, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<>}(i)).sum();
00095     PlainObjectType::MapAligned(const\_ptr, rows, cols, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<>}(i)).sum();
00096 
00097     PlainObjectType::Map(ptr, rows, cols, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<2>}()).setZero();
00098     PlainObjectType::MapAligned(ptr, rows, cols, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<3>}()).setZero();
00099     PlainObjectType::Map(const\_ptr, rows, cols, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<4>}()).sum();
00100     PlainObjectType::MapAligned(const\_ptr, rows, cols, \hyperlink{class_eigen_1_1_outer_stride}{OuterStride<5>}()).sum();
00101 
00102     PlainObjectType::Map(ptr, rows, cols, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<Dynamic, Dynamic>}(i,j)).setZero();
00103     PlainObjectType::MapAligned(ptr, rows, cols, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<2,Dynamic>}(2,i)).setZero();
00104     PlainObjectType::Map(const\_ptr, rows, cols, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<Dynamic,3>}(i,3)).sum();
00105     PlainObjectType::MapAligned(const\_ptr, rows, cols, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<Dynamic, Dynamic>}(i,j
      )).sum();
00106 
00107     PlainObjectType::Map(ptr, rows, cols, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<2,3>}()).setZero();
00108     PlainObjectType::MapAligned(ptr, rows, cols, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<3,4>}()).setZero();
00109     PlainObjectType::Map(const\_ptr, rows, cols, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<2,4>}()).sum();
00110     PlainObjectType::MapAligned(const\_ptr, rows, cols, \hyperlink{group___core___module_class_eigen_1_1_stride}{Stride<5,3>}()).sum();
00111   \}
00112 \};
00113 
00114 \textcolor{keyword}{template}<\textcolor{keyword}{typename} PlainObjectType>
00115 \textcolor{keyword}{struct }\hyperlink{structmapstaticmethods__impl}{mapstaticmethods\_impl}<PlainObjectType, true, true>
00116 \{
00117   \textcolor{keyword}{static} \textcolor{keywordtype}{void} run(\textcolor{keyword}{const} PlainObjectType& v)
00118   \{
00119     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} PlainObjectType::Index Index;
00120     Index size = v.size();
00121 
00122     \textcolor{keywordtype}{int} i = internal::random<int>(2,5);
00123 
00124     PlainObjectType::Map(ptr, size).setZero();
00125     PlainObjectType::MapAligned(ptr, size).setZero();
00126     PlainObjectType::Map(const\_ptr, size).sum();
00127     PlainObjectType::MapAligned(const\_ptr, size).sum();
00128 
00129     PlainObjectType::Map(ptr, size, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).setZero();
00130     PlainObjectType::MapAligned(ptr, size, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).setZero();
00131     PlainObjectType::Map(const\_ptr, size, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).sum();
00132     PlainObjectType::MapAligned(const\_ptr, size, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<>}(i)).sum();
00133 
00134     PlainObjectType::Map(ptr, size, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<2>}()).setZero();
00135     PlainObjectType::MapAligned(ptr, size, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<3>}()).setZero();
00136     PlainObjectType::Map(const\_ptr, size, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<4>}()).sum();
00137     PlainObjectType::MapAligned(const\_ptr, size, \hyperlink{class_eigen_1_1_inner_stride}{InnerStride<5>}()).sum();
00138   \}
00139 \};
00140 
00141 \textcolor{keyword}{template}<\textcolor{keyword}{typename} PlainObjectType>
00142 \textcolor{keywordtype}{void} mapstaticmethods(\textcolor{keyword}{const} PlainObjectType& m)
00143 \{
00144   \hyperlink{structmapstaticmethods__impl}{mapstaticmethods\_impl<PlainObjectType>::run}(m);
00145   VERIFY(\textcolor{keyword}{true}); \textcolor{comment}{// just to avoid 'unused function' warning}
00146 \}
00147 
00148 \textcolor{keywordtype}{void} test\_mapstaticmethods()
00149 \{
00150   ptr = internal::aligned\_new<float>(1000);
00151   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < 1000; i++) ptr[i] = \textcolor{keywordtype}{float}(i);
00152 
00153   const\_ptr = ptr;
00154 
00155   CALL\_SUBTEST\_1(( mapstaticmethods(\hyperlink{group___core___module_class_eigen_1_1_matrix}{Matrix<float, 1, 1>}()) ));
00156   CALL\_SUBTEST\_1(( mapstaticmethods(Vector2f()) ));
00157   CALL\_SUBTEST\_2(( mapstaticmethods(Vector3f()) ));
00158   CALL\_SUBTEST\_2(( mapstaticmethods(Matrix2f()) ));
00159   CALL\_SUBTEST\_3(( mapstaticmethods(Matrix4f()) ));
00160   CALL\_SUBTEST\_3(( mapstaticmethods(Array4f()) ));
00161   CALL\_SUBTEST\_4(( mapstaticmethods(Array3f()) ));
00162   CALL\_SUBTEST\_4(( mapstaticmethods(Array33f()) ));
00163   CALL\_SUBTEST\_5(( mapstaticmethods(Array44f()) ));
00164   CALL\_SUBTEST\_5(( mapstaticmethods(VectorXf(1)) ));
00165   CALL\_SUBTEST\_5(( mapstaticmethods(VectorXf(8)) ));
00166   CALL\_SUBTEST\_6(( mapstaticmethods(MatrixXf(1,1)) ));
00167   CALL\_SUBTEST\_6(( mapstaticmethods(MatrixXf(5,7)) ));
00168   CALL\_SUBTEST\_7(( mapstaticmethods(ArrayXf(1)) ));
00169   CALL\_SUBTEST\_7(( mapstaticmethods(ArrayXf(5)) ));
00170   CALL\_SUBTEST\_8(( mapstaticmethods(ArrayXXf(1,1)) ));
00171   CALL\_SUBTEST\_8(( mapstaticmethods(ArrayXXf(8,6)) ));
00172 
00173   internal::aligned\_delete(ptr, 1000);
00174 \}
00175 
\end{DoxyCode}
