\hypertarget{_c_1_2_users_2janol_2_desktop_2_simulation__stand230618_2matio_2visual_studio_2test_2eigen_2unsu859cb1af38ccde16e337b20b69d954c8}{}\section{C\+:/\+Users/janol/\+Desktop/\+Simulation\+\_\+\+Stand230618/matio/visual\+\_\+studio/test/eigen/unsupported/\+Eigen/\+C\+X\+X11/src/\+Tensor/\+Tensor\+Layout\+Swap.\+h}
Tensor$<$float, 2, Col\+Major$>$ input(2, 4); Tensor$<$float, 2, Row\+Major$>$ output = input.\+swap\+\_\+layout(); eigen\+\_\+assert(output.\+dimension(0) == 4); eigen\+\_\+assert(output.\+dimension(1) == 2);

array$<$int, 2$>$ shuffle(1, 0); output = input.\+swap\+\_\+layout().shuffle(shuffle); eigen\+\_\+assert(output.\+dimension(0) == 2); eigen\+\_\+assert(output.\+dimension(1) == 4);


\begin{DoxyCodeInclude}
\textcolor{comment}{// This file is part of Eigen, a lightweight C++ template library}
\textcolor{comment}{// for linear algebra.}
\textcolor{comment}{//}
\textcolor{comment}{// Copyright (C) 2014 Benoit Steiner <benoit.steiner.goog@gmail.com>}
\textcolor{comment}{//}
\textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla}
\textcolor{comment}{// Public License v. 2.0. If a copy of the MPL was not distributed}
\textcolor{comment}{// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.}

\textcolor{preprocessor}{#ifndef EIGEN\_CXX11\_TENSOR\_TENSOR\_LAYOUT\_SWAP\_H}
\textcolor{preprocessor}{#define EIGEN\_CXX11\_TENSOR\_TENSOR\_LAYOUT\_SWAP\_H}

\textcolor{keyword}{namespace }\hyperlink{namespace_eigen}{Eigen} \{

\textcolor{keyword}{namespace }\hyperlink{namespaceinternal}{internal} \{
\textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType>
\textcolor{keyword}{struct }traits<TensorLayoutSwapOp<XprType> > : \textcolor{keyword}{public} traits<XprType>
\{
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{eigen_2bench_2bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{XprType::Scalar} \hyperlink{eigen_2bench_2bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar};
  \textcolor{keyword}{typedef} traits<XprType> XprTraits;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} XprTraits::StorageKind StorageKind;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{XprTraits::Index} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} XprType::Nested Nested;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1remove__reference_a48fc595958f2006d8ddea90f18833ae0}{remove\_reference<Nested>::type} \_Nested;
  \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} NumDimensions = traits<XprType>::NumDimensions;
  \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} Layout = (traits<XprType>::Layout == \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}) ? 
      \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor} : \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor};
\};

\textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType>
\textcolor{keyword}{struct }\hyperlink{eigen_2test_2sparse__permutations_8cpp_ad87822100feba90851ac71ba08fce30b}{eval}<TensorLayoutSwapOp<XprType>, Eigen::Dense>
\{
  \textcolor{keyword}{typedef} \textcolor{keyword}{const} TensorLayoutSwapOp<XprType>& type;
\};

\textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType>
\textcolor{keyword}{struct }nested<TensorLayoutSwapOp<XprType>, 1, typename eval<TensorLayoutSwapOp<XprType> >::type>
\{
  \textcolor{keyword}{typedef} TensorLayoutSwapOp<XprType> type;
\};

\}  \textcolor{comment}{// end namespace internal}



\textcolor{keyword}{template}<\textcolor{keyword}{typename} XprType>
\textcolor{keyword}{class }TensorLayoutSwapOp : \textcolor{keyword}{public} TensorBase<TensorLayoutSwapOp<XprType>, WriteAccessors>
\{
  \textcolor{keyword}{public}:
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{Eigen::internal::traits<TensorLayoutSwapOp>::Scalar}
       \hyperlink{eigen_2bench_2bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar};
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1_generic_num_traits_abca8573812593670795c41f22aa9d5e2}{Eigen::NumTraits<Scalar>::Real} 
      \hyperlink{eigen_2bench_2bench__gemm_8cpp_acb5c3dc237f99cf17167e8a629f01b43}{RealScalar};
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} 
      \hyperlink{struct_eigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename XprType::CoeffReturnType>::type}
       CoeffReturnType;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{class_eigen_1_1internal_1_1_tensor_lazy_evaluator_writable}{Eigen::internal::nested<TensorLayoutSwapOp>::type}
       Nested;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{Eigen::internal::traits<TensorLayoutSwapOp>::StorageKind}
       StorageKind;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1traits}{Eigen::internal::traits<TensorLayoutSwapOp>::Index}
       \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};

  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} TensorLayoutSwapOp(\textcolor{keyword}{const} XprType& expr)
      : m\_xpr(expr) \{\}

    EIGEN\_DEVICE\_FUNC
    \textcolor{keyword}{const} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1internal_1_1remove__all_a5779acf852f62735a7d293d29b18e321}{internal::remove\_all<typename XprType::Nested>::type}
      &
    expression()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_xpr; \}

    EIGEN\_DEVICE\_FUNC
    \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} TensorLayoutSwapOp& operator = (\textcolor{keyword}{const} TensorLayoutSwapOp& other)
    \{
      \textcolor{keyword}{typedef} TensorAssignOp<TensorLayoutSwapOp, const TensorLayoutSwapOp> Assign;
      Assign assign(*\textcolor{keyword}{this}, other);
      \hyperlink{class_eigen_1_1internal_1_1_tensor_executor_a2746f3ea9258215fe221288ec352c0bc}{internal::TensorExecutor<const Assign, DefaultDevice>::run}
      (assign, DefaultDevice());
      \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
    \}

    \textcolor{keyword}{template}<\textcolor{keyword}{typename} OtherDerived>
    EIGEN\_DEVICE\_FUNC
    \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} TensorLayoutSwapOp& operator = (\textcolor{keyword}{const} OtherDerived& other)
    \{
      \textcolor{keyword}{typedef} TensorAssignOp<TensorLayoutSwapOp, const OtherDerived> Assign;
      Assign assign(*\textcolor{keyword}{this}, other);
      \hyperlink{class_eigen_1_1internal_1_1_tensor_executor_a2746f3ea9258215fe221288ec352c0bc}{internal::TensorExecutor<const Assign, DefaultDevice>::run}
      (assign, DefaultDevice());
      \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
    \}

  \textcolor{keyword}{protected}:
    \textcolor{keyword}{typename} XprType::Nested m\_xpr;
\};


\textcolor{comment}{// Eval as rvalue}
\textcolor{keyword}{template}<\textcolor{keyword}{typename} ArgType, \textcolor{keyword}{typename} Device>
\textcolor{keyword}{struct }TensorEvaluator<const TensorLayoutSwapOp<ArgType>, Device>
\{
  \textcolor{keyword}{typedef} TensorLayoutSwapOp<ArgType> XprType;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{XprType::Index} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
  \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} NumDims = internal::array\_size<typename TensorEvaluator<ArgType, Device>::Dimensions>
      ::value;
  \textcolor{keyword}{typedef} DSizes<Index, NumDims> Dimensions;

  \textcolor{keyword}{enum} \{
    IsAligned = \hyperlink{struct_eigen_1_1_tensor_evaluator_a89a733eacb0dd8a051fb66c5ce66d2f0a30fab453af3547d159853340be439a38}{TensorEvaluator<ArgType, Device>::IsAligned},
    PacketAccess = \hyperlink{struct_eigen_1_1_tensor_evaluator_a89a733eacb0dd8a051fb66c5ce66d2f0af2762e97058bc608b68a22f4b1b04e93}{TensorEvaluator<ArgType, Device>::PacketAccess}
      ,
    Layout = (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\hyperlink{struct_eigen_1_1_tensor_evaluator_a89a733eacb0dd8a051fb66c5ce66d2f0aad2f498adfc79da8b4728669ac46f653}{TensorEvaluator<ArgType, Device>::Layout}
      ) == static\_cast<int>(\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor})) ? \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor} : \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor},
    CoordAccess = \textcolor{keyword}{false},  \textcolor{comment}{// to be implemented}
    RawAccess = TensorEvaluator<ArgType, Device>::RawAccess
  \};

  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} TensorEvaluator(\textcolor{keyword}{const} XprType& op, \textcolor{keyword}{const} Device&
       device)
      : m\_impl(op.expression(), device)
  \{
    \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \hyperlink{eigen_2doc_2snippets_2_bi_c_g_s_t_a_b__step__by__step_8cpp_a6f6ccfcf58b31cb6412107d9d5281426}{i} = 0; \hyperlink{eigen_2doc_2snippets_2_bi_c_g_s_t_a_b__step__by__step_8cpp_a6f6ccfcf58b31cb6412107d9d5281426}{i} < NumDims; ++\hyperlink{eigen_2doc_2snippets_2_bi_c_g_s_t_a_b__step__by__step_8cpp_a6f6ccfcf58b31cb6412107d9d5281426}{i}) \{
      m\_dimensions[\hyperlink{eigen_2doc_2snippets_2_bi_c_g_s_t_a_b__step__by__step_8cpp_a6f6ccfcf58b31cb6412107d9d5281426}{i}] = m\_impl.dimensions()[NumDims-1-\hyperlink{eigen_2doc_2snippets_2_bi_c_g_s_t_a_b__step__by__step_8cpp_a6f6ccfcf58b31cb6412107d9d5281426}{i}];
    \}
  \}

  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{eigen_2bench_2bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{XprType::Scalar} \hyperlink{eigen_2bench_2bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar};
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} XprType::CoeffReturnType CoeffReturnType;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1_packet_type_a3408a66e0894db9cb51e39dbf4fe9f0f}{PacketType<CoeffReturnType, Device>::type} 
      PacketReturnType;

  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} \textcolor{keyword}{const} Dimensions& dimensions()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} 
      m\_dimensions; \}

  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} \textcolor{keywordtype}{bool} evalSubExprsIfNeeded(CoeffReturnType* 
      \hyperlink{eigen_2doc_2snippets_2_map__placement__new_8cpp_a0673c926a80474ab7c893cf9a065d0a6}{data}) \{
    \textcolor{keywordflow}{return} m\_impl.evalSubExprsIfNeeded(data);
  \}
  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} \textcolor{keywordtype}{void} \hyperlink{visual__studio_2zlib_2examples_2enough_8c_a0a65638f703cc409774d70ceab9c9c62}{cleanup}() \{
    m\_impl.cleanup();
  \}

  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} CoeffReturnType coeff(Index index)\textcolor{keyword}{ const}
\textcolor{keyword}{  }\{
    \textcolor{keywordflow}{return} m\_impl.coeff(index);
  \}

  \textcolor{keyword}{template}<\textcolor{keywordtype}{int} LoadMode>
  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} PacketReturnType packet(Index index)\textcolor{keyword}{ const}
\textcolor{keyword}{  }\{
    \textcolor{keywordflow}{return} m\_impl.template packet<LoadMode>(index);
  \}

  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} TensorOpCost costPerCoeff(\textcolor{keywordtype}{bool} vectorized)\textcolor{keyword}{ const
       }\{
    \textcolor{keywordflow}{return} m\_impl.costPerCoeff(vectorized);
  \}

  EIGEN\_DEVICE\_FUNC Scalar* \hyperlink{eigen_2doc_2snippets_2_map__placement__new_8cpp_a0673c926a80474ab7c893cf9a065d0a6}{data}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_impl.data(); \}

  \textcolor{keyword}{const} TensorEvaluator<ArgType, Device>& impl()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_impl; \}

 \textcolor{keyword}{protected}:
  TensorEvaluator<ArgType, Device> m\_impl;
  Dimensions m\_dimensions;
\};


\textcolor{comment}{// Eval as lvalue}
\textcolor{keyword}{template}<\textcolor{keyword}{typename} ArgType, \textcolor{keyword}{typename} Device>
  \textcolor{keyword}{struct }TensorEvaluator<TensorLayoutSwapOp<ArgType>, Device>
  : \textcolor{keyword}{public} TensorEvaluator<const TensorLayoutSwapOp<ArgType>, Device>
\{
  \textcolor{keyword}{typedef} TensorEvaluator<const TensorLayoutSwapOp<ArgType>, Device> Base;
  \textcolor{keyword}{typedef} TensorLayoutSwapOp<ArgType> XprType;

  \textcolor{keyword}{enum} \{
    IsAligned = \hyperlink{struct_eigen_1_1_tensor_evaluator_a89a733eacb0dd8a051fb66c5ce66d2f0a30fab453af3547d159853340be439a38}{TensorEvaluator<ArgType, Device>::IsAligned},
    PacketAccess = \hyperlink{struct_eigen_1_1_tensor_evaluator_a89a733eacb0dd8a051fb66c5ce66d2f0af2762e97058bc608b68a22f4b1b04e93}{TensorEvaluator<ArgType, Device>::PacketAccess}
      ,
    Layout = (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\hyperlink{struct_eigen_1_1_tensor_evaluator_a89a733eacb0dd8a051fb66c5ce66d2f0aad2f498adfc79da8b4728669ac46f653}{TensorEvaluator<ArgType, Device>::Layout}
      ) == static\_cast<int>(\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor})) ? \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor} : \hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor},
    CoordAccess = \textcolor{keyword}{false}  \textcolor{comment}{// to be implemented}
  \};

  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} TensorEvaluator(\textcolor{keyword}{const} XprType& op, \textcolor{keyword}{const} Device&
       device)
    : Base(op, device)
  \{ \}

  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{XprType::Index} \hyperlink{namespace_eigen_a62e77e0933482dafde8fe197d9a2cfde}{Index};
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{eigen_2bench_2bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{XprType::Scalar} \hyperlink{eigen_2bench_2bench__gemm_8cpp_a052eb942d12b6404aade6fae4b075fb9}{Scalar};
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} XprType::CoeffReturnType CoeffReturnType;
  \textcolor{keyword}{typedef} \textcolor{keyword}{typename} \hyperlink{struct_eigen_1_1_packet_type_a3408a66e0894db9cb51e39dbf4fe9f0f}{PacketType<CoeffReturnType, Device>::type} 
      PacketReturnType;

  EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE} CoeffReturnType& coeffRef(Index index)
  \{
    \textcolor{keywordflow}{return} this->m\_impl.coeffRef(index);
  \}
  \textcolor{keyword}{template} <\textcolor{keywordtype}{int} StoreMode> EIGEN\_DEVICE\_FUNC \hyperlink{eigen_2_eigen_2src_2_core_2util_2_macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}
  \textcolor{keywordtype}{void} writePacket(Index index, \textcolor{keyword}{const} PacketReturnType& \hyperlink{eigen_2bench_2btl_2data_2gnuplot__common__settings_8hh_a5fd331c99e778f04762be6d8173eb4d2}{x})
  \{
    this->m\_impl.template writePacket<StoreMode>(index, \hyperlink{eigen_2bench_2btl_2data_2gnuplot__common__settings_8hh_a5fd331c99e778f04762be6d8173eb4d2}{x});
  \}
\};

\} \textcolor{comment}{// end namespace Eigen}

\textcolor{preprocessor}{#endif // EIGEN\_CXX11\_TENSOR\_TENSOR\_LAYOUT\_SWAP\_H}
\end{DoxyCodeInclude}
 